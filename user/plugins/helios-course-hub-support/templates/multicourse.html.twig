{% extends 'partials/base.html.twig' %}

{% block content %}
    {# Page header #}
    <div class="not-prose mb-8">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white">
            {{ page.title }}
        </h1>
        {% if page.header.description %}
        <p class="text-lg text-gray-600 dark:text-gray-400 mt-2">
            {{ page.header.description }}
        </p>
        {% endif %}
    </div>

    {# Page content if any #}
    {% if page.content|trim %}
        <div class="prose dark:prose-invert max-w-none mb-12">
            {{ page.content|raw }}
        </div>
    {% endif %}

    {# Auto-generated course cards from version folders #}
    {% if helios_version_info.versions is defined and helios_version_info.versions|length > 0 %}
    <div class="grid gap-4 sm:grid-cols-2">
        {% for version in helios_version_info.versions %}
            {# Find the version's root page and its first child (home page) #}
            {% set version_page = pages.find('/' ~ version.id) %}
            {% set home_page = version_page ? version_page.children.visible.first : null %}
            {% include 'partials/doc-card.html.twig' with {
                title: version.label,
                link: version.url,
                icon: home_page.header.icon|default(page.header.card_icon|default('tabler/rocket.svg')),
                description: home_page.header.description|default(null)
            } %}
        {% endfor %}
    </div>
    {% endif %}
{% endblock %}
