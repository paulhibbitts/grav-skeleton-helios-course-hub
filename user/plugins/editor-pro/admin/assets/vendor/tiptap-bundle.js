var TipTap=(()=>{var I2=Object.defineProperty;var _2=(n,e,t)=>e in n?I2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var S=(n,e)=>()=>(n&&(e=n(n=0)),e);var B2=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var ke=(n,e,t)=>_2(n,typeof e!="symbol"?e+"":e,t);function vt(n){this.content=n}var rm,Ax=S(()=>{vt.prototype={constructor:vt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new vt(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new vt(t)},addToStart:function(n,e){return new vt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new vt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new vt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=vt.from(n),n.size?new vt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=vt.from(n),n.size?new vt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=vt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};vt.from=function(n){if(n instanceof vt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new vt(e)};rm=vt});function _x(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=_x(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Bx(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){t-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:t,b:r};if(o.isText&&o.text!=l.text){let c=0,h=Math.min(o.text.length,l.text.length);for(;c<h&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||l.content.size){let c=Bx(o.content,l.content,t-1,r-1);if(c)return c}t-=a,r-=a}}function Dh(n,e){return im.index=n,im.offset=e,im}function Lh(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Lh(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Lh(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}function Vx(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:l}=n.findIndex(t);if(i==e||s.isText){if(l!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Vx(s.content,e-i-1,t-i-1)))}function Xx(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=Xx(o.content,e-s-1,t);return l&&n.replaceChild(i,o.copy(l))}function V2(n,e,t){if(t.openStart>n.depth)throw new xs("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new xs("Inconsistent open depths");return zx(n,e,t,0)}function zx(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=zx(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,l=o.content;return ws(o,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=X2(t,n);return ws(s,qx(n,o,l,e,r))}else return ws(s,Ih(n,e,r))}function Zx(n,e){if(!e.type.compatibleContent(n.type))throw new xs("Cannot join "+e.type.name+" onto "+n.type.name)}function om(n,e,t){let r=n.node(t);return Zx(r,e.node(t)),r}function bs(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ta(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(bs(n.nodeAfter,r),s++));for(let l=s;l<o;l++)bs(i.child(l),r);e&&e.depth==t&&e.textOffset&&bs(e.nodeBefore,r)}function ws(n,e){return n.type.checkContent(e),n.copy(e)}function qx(n,e,t,r,i){let s=n.depth>i&&om(n,e,i+1),o=r.depth>i&&om(t,r,i+1),l=[];return ta(null,n,i,l),s&&o&&e.index(i)==t.index(i)?(Zx(s,o),bs(ws(s,qx(n,e,t,r,i+1)),l)):(s&&bs(ws(s,Ih(n,e,i+1)),l),ta(e,t,i,l),o&&bs(ws(o,Ih(t,r,i+1)),l)),ta(r,null,i,l),new A(l)}function Ih(n,e,t){let r=[];if(ta(null,n,t,r),n.depth>t){let i=om(n,e,t+1);bs(ws(i,Ih(n,e,t+1)),r)}return ta(e,null,t,r),new A(r)}function X2(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(A.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}function Ux(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}function jx(n){let e=[];do e.push(q2(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function q2(n){let e=[];do e.push(U2(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function U2(n){let e=Y2(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=j2(n,e);else break;return e}function Qx(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function j2(n,e){let t=Qx(n),r=t;return n.eat(",")&&(n.next!="}"?r=Qx(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function W2(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Y2(n){if(n.eat("(")){let e=jx(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=W2(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function H2(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=t())}else if(o.type=="star"){let a=t();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=t();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let h=t();i(s(o.expr,a),h),a=h}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let h=t();r(a,h),i(s(o.expr,a),h),a=h}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Wx(n,e){return e-n}function $x(n,e){let t=[];return r(e),t.sort(Wx);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&t.indexOf(a)==-1&&r(a)}}}function F2(n){let e=Object.create(null);return t($x(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let h=0;h<i.length;h++)i[h][0]==l&&(c=i[h][1]);$x(n,a).forEach(h=>{c||i.push([l,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let s=e[r.join(",")]=new ks(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(Wx);s.next.push({type:i[o][0],next:e[l.join(",")]||t(l)})}return s}}function G2(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Yx(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Hx(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Fx(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function Gx(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new hm(n,r,e[r]);return t}function K2(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}function Ex(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let l in n.marks){let a=n.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function J2(n){return n.tag!=null}function eD(n){return n.style!=null}function Rx(n,e,t){return e!=null?(e?sa:0)|(e==="full"?um:0):n&&n.whitespace=="pre"?sa|um:t&~na}function nD(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Jx.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function rD(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Dx(n){let e={};for(let t in n)e[t]=n[t];return e}function Nx(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:h}=l.edge(a);if(c==e||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}function Lx(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function sm(n){return n.document||window.document}function iD(n){let e=Ix.get(n);return e===void 0&&Ix.set(n,e=sD(n)),e}function sD(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Nh(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=iD(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let l,a=t?n.createElementNS(t,i):n.createElement(i),c=e[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let u in c)if(c[u]!=null){let f=u.indexOf(" ");f>0?a.setAttributeNS(u.slice(0,f),u.slice(f+1),c[u]):a.setAttribute(u,c[u])}}for(let u=h;u<e.length;u++){let f=e[u];if(f===0){if(u<e.length-1||u>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:p}=Nh(n,f,t,r);if(a.appendChild(d),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}var A,im,de,xs,E,_h,lm,z2,Mx,Br,Z2,On,am,ks,cm,Bh,hm,ra,ia,Vr,Kx,tD,Jx,sa,um,na,Mo,Vh,Xr,Ix,nn=S(()=>{Ax();A=class n{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,l=0;l<t;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let h=l+1;a.nodesBetween(Math.max(0,e-h),Math.min(a.content.size,t-h),r,i+h)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new n(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,t-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,t-o-1))),r.push(l),i+=l.nodeSize),o=a}return new n(r,i)}cutByIndex(e,t){return e==t?n.empty:e==0&&t==this.content.length?this:new n(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new n(i,s)}addToStart(e){return new n([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new n(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return _x(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Bx(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Dh(0,e);if(e==this.size)return Dh(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Dh(r+1,o):Dh(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return n.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new n(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return n.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new n(t||e,r)}static from(e){if(!e)return n.empty;if(e instanceof n)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new n([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};A.empty=new A([],0);im={index:0,offset:0};de=class n{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Lh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return n.none;if(e instanceof n)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};de.none=[];xs=class extends Error{},E=class n{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Xx(this.content,e+this.openStart,t);return r&&new n(r,this.openStart,this.openEnd)}removeBetween(e,t){return new n(Vx(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return n.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new n(A.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new n(e,r,i)}};E.empty=new E(A.empty,0,0);_h=class n{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return de.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Br(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new n(t,r,s)}static resolveCached(e,t){let r=Mx.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==t)return o}else Mx.set(e,r=new lm);let i=r.elts[r.i]=n.resolve(e,t);return r.i=(r.i+1)%z2,i}},lm=class{constructor(){this.elts=[],this.i=0}},z2=12,Mx=new WeakMap,Br=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Z2=Object.create(null),On=class n{constructor(e,t,r,i=de.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||A.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Lh(this.attrs,t||e.defaultAttrs||Z2)&&de.sameSet(this.marks,r||de.none)}copy(e=null){return e==this.content?this:new n(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new n(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return E.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new E(c,i.depth-o,s.depth-o)}replace(e,t,r){return V2(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return _h.resolveCached(this,e)}resolveNoCache(e){return _h.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ux(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=A.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=de.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!de.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=A.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};On.prototype.text=void 0;am=class n extends On{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ux(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};ks=class n{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new cm(e,t);if(r.next==null)return n.empty;let i=jx(r);r.next&&r.err("Unexpected trailing text");let s=F2(H2(i));return G2(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!t||a.validEnd))return A.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:h,next:u}=o.next[c];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(u)==-1){i.push(u);let f=s(u,l.concat(h));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}};ks.empty=new ks(!0);cm=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};Bh=class n{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Gx(e,r.attrs),this.defaultAttrs=Yx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ks.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Hx(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new On(this,this.computeAttrs(e),A.from(t),de.setFrom(r))}createChecked(e=null,t,r){return t=A.from(t),this.checkContent(t),new On(this,this.computeAttrs(e),t,de.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=A.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(A.empty,!0);return s?new On(this,e,t.append(s),de.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Fx(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:de.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new n(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};hm=class{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?K2(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}},ra=class n{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Gx(e,i.attrs),this.excluded=null;let s=Yx(this.attrs);this.instance=s?new de(this,s):null}create(e=null){return!e&&this.instance?this.instance:new de(this,Hx(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new n(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Fx(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},ia=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=rm.from(e.nodes),t.marks=rm.from(e.marks||{}),this.nodes=Bh.compile(this.spec.nodes,this),this.marks=ra.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ks.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Ex(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Ex(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Bh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new am(r,r.defaultAttrs,e,de.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return On.fromJSON(this,e)}markFromJSON(e){return de.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};Vr=class n{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(J2(i))this.tags.push(i);else if(eD(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new Vh(this,t,!1);return r.addAll(e,de.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Vh(this,t,!0);return r.addAll(e,de.none,t.from,t.to),E.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(rD(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let l=t[o];if((l.priority==null?50:l.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Dx(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Dx(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new n(e,n.schemaRules(e)))}},Kx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Jx={ol:!0,ul:!0},sa=1,um=2,na=4;Mo=class{constructor(e,t,r,i,s,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=de.none,this.match=s||(o&na?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(A.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&sa)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=A.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(A.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Kx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},Vh=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,o=Rx(null,t.preserveWhitespace,0)|(r?na:0);i?s=new Mo(i.type,i.attrs,de.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Mo(null,null,de.none,!0,null,o):s=new Mo(e.schema.topNodeType,null,de.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&um?"full":this.localPreserveWS||(i.options&sa)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;Jx.hasOwnProperty(o)&&this.parser.normalizeLists&&nD(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:tD.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,h=this.needsBlock;if(Kx.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let u=a&&a.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=h}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(c=>!a.clearMark(c)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,r,i){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,t.attrs||null,r,t.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[t.mark];r=r.concat(a.create(t.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,s=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)t=this.enterInner(i[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=de.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):Nx(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Rx(e,s,o.options);o.options&na&&o.content.length==0&&(l|=na);let a=de.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Nx(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Mo(e,t,a,i,null,l)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=sa)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=t[l];if(c==""){if(l==t.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let h=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!h||h.name!=c&&!h.isInGroup(c))return!1;a--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}};Xr=class n{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=sm(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],h=this.serializeMark(c,o.isInline,t);h&&(s.push([c,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Nh(sm(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Nh(sm(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Nh(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new n(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Lx(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Lx(e.marks)}};Ix=new WeakMap});function lD(n,e){return n+e*r1}function e1(n){return n&n1}function aD(n){return(n-(n&n1))/r1}function Om(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Om(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return A.fromArray(r)}function mm(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function cD(n,e,t,r){let i=[],s=[],o,l;n.doc.nodesBetween(e,t,(a,c,h)=>{if(!a.isInline)return;let u=a.marks;if(!r.isInSet(u)&&h.type.allowsMarkType(r.type)){let f=Math.max(c,e),d=Math.min(c+a.nodeSize,t),p=r.addToSet(u);for(let m=0;m<u.length;m++)u[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(u[m])?o.to=d:i.push(o=new Ss(f,d,u[m])));l&&l.to==f?l.to=d:s.push(l=new ha(f,d,r))}}),i.forEach(a=>n.step(a)),s.forEach(a=>n.step(a))}function hD(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof ra){let c=o.marks,h;for(;h=r.isInSet(c);)(a||(a=[])).push(h),c=h.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,t);for(let h=0;h<a.length;h++){let u=a[h],f;for(let d=0;d<i.length;d++){let p=i[d];p.step==s-1&&u.eq(i[d].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:u,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>n.step(new Ss(o.from,o.to,o.style)))}function ym(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),h=l+c.nodeSize,u=r.matchType(c.type);if(!u)o.push(new Ct(l,h,E.empty));else{r=u;for(let f=0;f<c.marks.length;f++)t.allowsMarkType(c.marks[f].type)||n.step(new Ss(l,h,c.marks[f]));if(i&&c.isText&&t.whitespace!="pre"){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(c.text);)p||(p=new E(A.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Ct(l+f.index,l+f.index+f[0].length,p))}}l=h}if(!r.validEnd){let a=r.fillBefore(A.empty,!0);n.replace(l,l,new E(a,0,0))}for(let a=o.length-1;a>=0;a--)n.step(o[a])}function uD(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Zr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!uD(i,s,o))break}return null}function fD(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,h=A.empty,u=0;for(let p=s,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,h=A.from(r.node(p).copy(h)),u++):a--;let f=A.empty,d=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=A.from(i.node(p).copy(f)),d++):c++;n.step(new Ke(a,c,o,l,new E(h.append(f),u,d),h.size-u,!0))}function Eo(n,e,t=null,r=n){let i=dD(n,e),s=i&&pD(r,e);return s?i.map(t1).concat({type:e,attrs:t}).concat(s.map(t1)):null}function t1(n){return{type:n,attrs:null}}function dD(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function pD(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(t.child(c).type);return!a||!a.validEnd?null:o}function mD(n,e,t){let r=A.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let l=t[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=A.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new Ke(i,s,i,s,new E(r,0,0),t.length,!0))}function gD(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&OD(n.doc,n.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!p?c=!1:!d&&p&&(c=!0)}c===!1&&a1(n,o,l,s),ym(n,n.mapping.slice(s).map(l,1),r,void 0,c===null);let h=n.mapping.slice(s),u=h.map(l,1),f=h.map(l+o.nodeSize,1);return n.step(new Ke(u,f,u+1,f-1,new E(A.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&l1(n,o,l,s),!1}})}function l1(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=n.mapping.slice(r).map(t+1+s+o.index);n.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function a1(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function OD(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function yD(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Ke(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new E(A.from(o),0,0),1,!0))}function yn(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,h=t-2;c>s;c--,h--){let u=i.node(c),f=i.index(c);if(u.type.spec.isolating)return!1;let d=u.content.cutByIndex(f,u.childCount),p=r&&r[h+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[h]||u;if(!u.canReplace(f+1,u.childCount)||!m.type.validContent(d))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function bD(n,e,t=1,r){let i=n.doc.resolve(e),s=A.empty,o=A.empty;for(let l=i.depth,a=i.depth-t,c=t-1;l>a;l--,c--){s=A.from(i.node(l).copy(s));let h=r&&r[c];o=A.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}n.step(new Ct(e,e,new E(s.append(o),t,t),!0))}function Vn(n,e){let t=n.resolve(e),r=t.index();return c1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function wD(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function c1(n,e){return!!(n&&e&&!n.isLeaf&&wD(n,e))}function Ro(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&c1(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function xD(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",u=!!o.contentMatch.matchType(i);h&&!u?r=!1:!h&&u&&(r=!0)}let l=n.steps.length;if(r===!1){let h=n.doc.resolve(e+t);a1(n,h.node(),h.before(),l)}o.inlineContent&&ym(n,e+t-1,o,s.node().contentMatchAt(s.index()),r==null);let a=n.mapping.slice(l),c=a.map(e-t);if(n.step(new Ct(c,a.map(e+t,-1),E.empty,!0)),r===!0){let h=n.doc.resolve(c);l1(n,h.node(),h.before(),n.steps.length)}return n}function kD(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function qh(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),h=!1;if(s==1)h=c.canReplace(a,a,i);else{let u=c.contentMatchAt(a).findWrapping(i.firstChild.type);h=u&&c.canReplaceWith(a,a,u[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function fa(n,e,t=e,r=E.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return h1(i,s,r)?new Ct(e,t,r):new gm(i,s,r).fit()}function h1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}function oa(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(oa(n.firstChild.content,e-1,t)))}function la(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(la(n.lastChild.content,e-1,t)))}function dm(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function u1(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,u1(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(A.empty,!0)))),n.copy(r)}function pm(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!SD(t,s.content,o)?l:null}function SD(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function vD(n){return n.spec.defining||n.spec.definingForContent}function CD(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(h1(i,s,r))return n.step(new Ct(e,t,r));let o=d1(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,d=i.pos-1;f>0;f--,d--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==d&&o.splice(1,0,-f)}let a=o.indexOf(l),c=[],h=r.openStart;for(let f=r.content,d=0;;d++){let p=f.firstChild;if(c.push(p),d==r.openStart)break;f=p.content}for(let f=h-1;f>=0;f--){let d=c[f],p=vD(d.type);if(p&&!d.sameMarkup(i.node(Math.abs(l)-1)))h=f;else if(p||!d.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let d=(f+h+1)%(r.openStart+1),p=c[d];if(p)for(let m=0;m<o.length;m++){let g=o[(m+a)%o.length],O=!0;g<0&&(O=!1,g=-g);let w=i.node(g-1),k=i.index(g-1);if(w.canReplaceWith(k,k,p.type,p.marks))return n.replace(i.before(g),O?s.after(g):t,new E(f1(r.content,0,r.openStart,d),d,r.openEnd))}}let u=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>u));f--){let d=o[f];d<0||(e=i.before(d),t=s.after(d))}}function f1(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(f1(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(A.empty,!0))}return n}function TD(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=kD(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new E(A.from(r),0,0))}function PD(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=d1(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function d1(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}var n1,r1,i1,s1,Xh,o1,aa,zr,ca,fm,ot,dt,ha,Ss,ua,Qo,Ct,Ke,gm,zh,Zh,$o,vi,qr=S(()=>{nn();n1=65535,r1=Math.pow(2,16);i1=1,s1=2,Xh=4,o1=8,aa=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&o1)>0}get deletedBefore(){return(this.delInfo&(i1|Xh))>0}get deletedAfter(){return(this.delInfo&(s1|Xh))>0}get deletedAcross(){return(this.delInfo&Xh)>0}},zr=class n{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&n.empty)return n.empty}recover(e){let t=0,r=e1(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+aD(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],h=this.ranges[l+o],u=a+c;if(e<=u){let f=c?e==a?-1:e==u?1:t:t,d=a+i+(f<0?0:h);if(r)return d;let p=e==(t<0?a:u)?null:lD(l/3,e-a),m=e==a?s1:e==u?i1:Xh;return(t<0?e!=a:e!=u)&&(m|=o1),new aa(d,m,p)}i+=h-c}return r?e+i:new aa(e+i,0,null)}touches(e,t){let r=0,i=e1(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],h=a+c;if(e<=h&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+t],h=this.ranges[i+r];e(l,l+c,a,a+h),s+=h-c}}invert(){return new n(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?n.empty:new n(e<0?[0,-e,0]:[0,0,e])}};zr.empty=new zr([]);ca=class n{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new n(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new n;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new aa(e,i,null)}},fm=Object.create(null),ot=class{getMap(){return zr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=fm[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in fm)throw new RangeError("Duplicate use of step JSON ID "+e);return fm[e]=t,t.prototype.jsonID=e,t}},dt=class n{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new n(e,null)}static fail(e){return new n(null,e)}static fromReplace(e,t,r,i){try{return n.ok(e.replace(t,r,i))}catch(s){if(s instanceof xs)return n.fail(s.message);throw s}}};ha=class n extends ot{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new E(Om(t.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return dt.fromReplace(e,this.from,this.to,s)}invert(){return new Ss(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}merge(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}};ot.jsonID("addMark",ha);Ss=class n extends ot{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new E(Om(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return dt.fromReplace(e,this.from,this.to,r)}invert(){return new ha(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}merge(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}};ot.jsonID("removeMark",Ss);ua=class n extends ot{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return dt.fromReplace(e,this.pos,this.pos+1,new E(A.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new n(this.pos,t.marks[i]);return new n(this.pos,this.mark)}}return new Qo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}};ot.jsonID("addNodeMark",ua);Qo=class n extends ot{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return dt.fromReplace(e,this.pos,this.pos+1,new E(A.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ua(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}};ot.jsonID("removeNodeMark",Qo);Ct=class n extends ot{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&mm(e,this.from,this.to)?dt.fail("Structure replace would overwrite content"):dt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zr([this.from,this.to-this.from,this.slice.size])}invert(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof n)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?E.empty:new E(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?E.empty:new E(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,E.fromJSON(e,t.slice),!!t.structure)}};ot.jsonID("replace",Ct);Ke=class n extends ot{constructor(e,t,r,i,s,o,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(mm(e,this.from,this.gapFrom)||mm(e,this.gapTo,this.to)))return dt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return dt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?dt.fromReplace(e,this.from,this.to,r):dt.fail("Content does not fit in gap")}getMap(){return new zr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new n(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,E.fromJSON(e,t.slice),t.insert,!!t.structure)}};ot.jsonID("replaceAround",Ke);gm=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=A.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=A.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new E(s,o,l);return e>-1?new Ke(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Ct(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=dm(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],h,u=null;if(t==1&&(o?c.matchType(o.type)||(u=c.fillBefore(A.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:u};if(t==2&&o&&(h=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=dm(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new E(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=dm(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new E(oa(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new E(oa(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,h=[],{match:u,type:f}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)h.push(i.child(m));u=u.matchFragment(i)}let d=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),g=u.matchType(m.type);if(!g)break;c++,(c>1||a==0||m.content.size)&&(u=g,h.push(u1(m.mark(f.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?d:-1)))}let p=c==l.childCount;p||(d=-1),this.placed=la(this.placed,t,A.from(h)),this.frontier[t].match=u,p&&d<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<d;m++){let O=g.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),g=O.content}this.unplaced=p?e==0?E.empty:new E(oa(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new E(oa(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!pm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=pm(e,t,i,r,s);if(o){for(let l=t-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],h=pm(e,l,c,a,!0);if(!h||h.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=la(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=la(this.placed,this.depth,A.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(A.empty,!0);t.childCount&&(this.placed=la(this.placed,this.frontier.length,t))}};zh=class n extends ot{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return dt.fromReplace(e,this.pos,this.pos+1,new E(A.from(i),0,t.isLeaf?0:1))}getMap(){return zr.empty}invert(e){return new n(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(t.pos,t.attr,t.value)}};ot.jsonID("attr",zh);Zh=class n extends ot{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return dt.ok(r)}getMap(){return zr.empty}invert(e){return new n(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new n(t.attr,t.value)}};ot.jsonID("docAttr",Zh);$o=class extends Error{};$o=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};$o.prototype=Object.create(Error.prototype);$o.prototype.constructor=$o;$o.prototype.name="TransformError";vi=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ca}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new $o(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=E.empty){let i=fa(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new E(A.from(r),0,0))}delete(e,t){return this.replace(e,t,E.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return CD(this,e,t,r),this}replaceRangeWith(e,t,r){return TD(this,e,t,r),this}deleteRange(e,t){return PD(this,e,t),this}lift(e,t){return fD(this,e,t),this}join(e,t=1){return xD(this,e,t),this}wrap(e,t){return mD(this,e,t),this}setBlockType(e,t=e,r,i=null){return gD(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return yD(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new zh(e,t,r)),this}setDocAttribute(e,t){return this.step(new Zh(e,t)),this}addNodeMark(e,t){return this.step(new ua(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof de)t.isInSet(r.marks)&&this.step(new Qo(e,t));else{let i=r.marks,s,o=[];for(;s=t.isInSet(i);)o.push(new Qo(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,t=1,r){return bD(this,e,t,r),this}addMark(e,t,r){return cD(this,e,t,r),this}removeMark(e,t,r){return hD(this,e,t,r),this}clearIncompatible(e,t,r){return ym(this,e,t,r),this}}});function m1(n){!p1&&!n.parent.inlineContent&&(p1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}function Do(n,e,t,r,i,s=!1){if(e.inlineContent)return V.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&z.isSelectable(l))return z.create(n,t-(i<0?l.nodeSize:0))}else{let a=Do(n,l,t+i,i<0?l.childCount:0,i,s);if(a)return a}t+=l.nodeSize*i}return null}function g1(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Ct||i instanceof Ke))return;let s=n.mapping.maps[r],o;s.forEach((l,a,c,h)=>{o==null&&(o=h)}),n.setSelection(Z.near(n.doc.resolve(o),t))}function b1(n,e){return!e||!n?n:n.bind(e)}function w1(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=w1(i,e,{})),t[r]=i}return t}function x1(n){return n in wm?n+"$"+ ++wm[n]:(wm[n]=0,n+"$")}var bm,Z,Ci,p1,V,jh,z,xm,pt,AD,O1,Uh,y1,km,vs,MD,da,Wh,F,wm,ee,lt=S(()=>{nn();qr();bm=Object.create(null),Z=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Ci(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=E.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],h=e.mapping.slice(s);e.replaceRange(h.map(a.pos),h.map(c.pos),l?E.empty:t),l==0&&g1(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),h=a.map(l.pos);s?e.deleteRange(c,h):(e.replaceRangeWith(c,h,t),g1(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new V(e):Do(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?Do(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Do(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new pt(e.node(0))}static atStart(e){return Do(e,e,0,0,1)||new pt(e)}static atEnd(e){return Do(e,e,e.content.size,e.childCount,-1)||new pt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=bm[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in bm)throw new RangeError("Duplicate use of selection JSON ID "+e);return bm[e]=t,t.prototype.jsonID=e,t}getBookmark(){return V.between(this.$anchor,this.$head).getBookmark()}};Z.prototype.visible=!0;Ci=class{constructor(e,t){this.$from=e,this.$to=t}},p1=!1;V=class n extends Z{constructor(e,t=e){m1(e),m1(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Z.near(r);let i=e.resolve(t.map(this.anchor));return new n(i.parent.inlineContent?i:r,r)}replace(e,t=E.empty){if(super.replace(e,t),t==E.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new jh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=Z.findFrom(t,r,!0)||Z.findFrom(t,-r,!0);if(s)t=s.$head;else return Z.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Z.findFrom(e,-r,!0)||Z.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new n(e,t)}};Z.jsonID("text",V);jh=class n{constructor(e,t){this.anchor=e,this.head=t}map(e){return new n(e.map(this.anchor),e.map(this.head))}resolve(e){return V.between(e.resolve(this.anchor),e.resolve(this.head))}},z=class n extends Z{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?Z.near(s):new n(s)}content(){return new E(A.from(this.node),0,0)}eq(e){return e instanceof n&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new xm(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}static create(e,t){return new n(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};z.prototype.visible=!1;Z.jsonID("node",z);xm=class n{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new jh(r,r):new n(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&z.isSelectable(r)?new z(t):Z.near(t)}},pt=class n extends Z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=E.empty){if(t==E.empty){e.delete(0,e.doc.content.size);let r=Z.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new n(e)}map(e){return new n(e)}eq(e){return e instanceof n}getBookmark(){return AD}};Z.jsonID("all",pt);AD={map(){return this},resolve(n){return new pt(n)}};O1=1,Uh=2,y1=4,km=class extends vi{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|O1)&~Uh,this.storedMarks=null,this}get selectionSet(){return(this.updated&O1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Uh,this}ensureMarks(e){return de.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Uh)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Uh,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||de.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r==null?t:r,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(Z.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=y1,this}get scrolledIntoView(){return(this.updated&y1)>0}};vs=class{constructor(e,t,r){this.name=e,this.init=b1(t.init,r),this.apply=b1(t.apply,r)}},MD=[new vs("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new vs("selection",{init(n,e){return n.selection||Z.atStart(e.doc)},apply(n){return n.selection}}),new vs("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new vs("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})],da=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=MD.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new vs(r.key,r.spec.state,r))})}},Wh=class n{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,h=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,c,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let u=0;u<this.config.plugins.length;u++)i.push(u<o?{state:r,n:t.length}:{state:this,n:0})}t.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new n(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new km(this)}static create(e){let t=new da(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new n(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new da(this.schema,e.plugins),r=t.fields,i=new n(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new da(e.schema,e.plugins),s=new n(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=On.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=Z.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){s[o.name]=c.fromJSON.call(a,e,t[l],s);return}}s[o.name]=o.init(e,s)}}),s}};F=class{constructor(e){this.spec=e,this.props={},e.props&&w1(e.props,this,this.props),this.key=e.key?e.key.key:x1("plugin")}getState(e){return e[this.key]}},wm=Object.create(null);ee=class{constructor(e="key"){this.key=x1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}});var bn=S(()=>{lt()});function k1(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:xn(n))){let o=n.parentNode;if(!o||o.nodeType!=1||xa(n)||$D.test(n.nodeName)||n.contentEditable=="false")return!1;e=mt(n)+(i<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=o,e=i<0?xn(n):0}else return!1}}function xn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ED(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=xn(n)}else if(n.parentNode&&!xa(n))e=mt(n),n=n.parentNode;else return null}}function RD(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!xa(n))e=mt(n)+1,n=n.parentNode;else return null}}function DD(n,e,t){for(let r=e==0,i=e==xn(n);r||i;){if(n==t)return!0;let s=mt(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==xn(n)}}function xa(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}function Cs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function ND(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function LD(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(xn(r.offsetNode),r.offset)}}catch(r){}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(xn(r.startContainer),r.startOffset)}}}function BD(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ur(n,e){return typeof n=="number"?n:n[e]}function VD(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function v1(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=Bo(o);continue}let l=o,a=l==s.body,c=a?BD(s):VD(l),h=0,u=0;if(e.top<c.top+Ur(r,"top")?u=-(c.top-e.top+Ur(i,"top")):e.bottom>c.bottom-Ur(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+Ur(i,"top")-c.top:e.bottom-c.bottom+Ur(i,"bottom")),e.left<c.left+Ur(r,"left")?h=-(c.left-e.left+Ur(i,"left")):e.right>c.right-Ur(r,"right")&&(h=e.right-c.right+Ur(i,"right")),h||u)if(a)s.defaultView.scrollBy(h,u);else{let d=l.scrollLeft,p=l.scrollTop;u&&(l.scrollTop+=u),h&&(l.scrollLeft+=h);let m=l.scrollLeft-d,g=l.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let f=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Bo(o)}}function XD(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=n.root.elementFromPoint(s,o);if(!l||l==n.dom||!n.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:rk(n.dom)}}function rk(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Bo(r));return e}function zD({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;ik(t,r==0?0:r-e)}function ik(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}function ZD(n){if(n.setActive)return n.setActive();if(No)return n.focus(No);let e=rk(n);n.focus(No==null?{get preventScroll(){return No={preventScroll:!0},!0}}:void 0),No||(No=!1,ik(e,0))}function sk(n,e){let t,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let h=n.firstChild,u=0;h;h=h.nextSibling,u++){let f;if(h.nodeType==1)f=h.getClientRects();else if(h.nodeType==3)f=jr(h).getClientRects();else continue;for(let d=0;d<f.length;d++){let p=f[d];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=h,r=m,i=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,h.nodeType==1&&m&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=h,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!t&&a&&(t=a,i=c,r=0),t&&t.nodeType==3?qD(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:sk(t,i)}function qD(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Ti(r,1);if(s.top!=s.bottom&&jm(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function jm(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function UD(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function jD(n,e,t){let{node:r,offset:i}=sk(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function WD(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let l=n.docView.nearestDesc(s,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function ok(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(jm(e,c))return ok(o,e,c)}}if((s=(s+1)%r)==i)break}return n}function YD(n,e){let t=n.dom.ownerDocument,r,i=0,s=LD(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!jm(e,c)||(o=ok(n.dom,e,c),!o))return null}if(Dt)for(let c=o;r&&c;c=Bo(c))c.draggable&&(r=void 0);if(o=UD(o,e),r){if(Xn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],u;h.nodeName=="IMG"&&(u=h.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}let c;ka&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=WD(n,r,i,e))}l==null&&(l=jD(n,o,e));let a=n.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function C1(n){return n.top<n.bottom||n.left<n.right}function Ti(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(C1(r))return r}return Array.prototype.find.call(t,C1)||n.getBoundingClientRect()}function lk(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=ka||Xn;if(r.nodeType==3)if(o&&(HD.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let a=Ti(jr(r,i,i),t);if(Xn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Ti(jr(r,i-1,i-1),-1);if(c.top==a.top){let h=Ti(jr(r,i,i+1),-1);if(h.top!=a.top)return pa(h,h.left<c.left)}}return a}else{let a=i,c=i,h=t<0?1:-1;return t<0&&!i?(c++,h=-1):t>=0&&i==r.nodeValue.length?(a--,h=1):t<0?a--:c++,pa(Ti(jr(r,a,c),h),h<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==xn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Sm(a.getBoundingClientRect(),!1)}if(s==null&&i<xn(r)){let a=r.childNodes[i];if(a.nodeType==1)return Sm(a.getBoundingClientRect(),!0)}return Sm(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==xn(r))){let a=r.childNodes[i-1],c=a.nodeType==3?jr(a,xn(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return pa(Ti(c,1),!1)}if(s==null&&i<xn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?jr(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return pa(Ti(c,-1),!0)}return pa(Ti(r.nodeType==3?jr(r):r,-t),t>=0)}function pa(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Sm(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function ak(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function FD(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return ak(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=lk(n,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=jr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let h=a[c];if(h.bottom>h.top+1&&(t=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}function KD(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=n.domSelection();return l?!GD.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?s:o:ak(n,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:h,anchorOffset:u}=n.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",t,"character");let d=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!d.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(h,u),a&&(a!=h||c!=u)&&l.extend&&l.extend(a,c)}catch(O){}return f!=null&&(l.caretBidiLevel=f),g}):r.pos==r.start()||r.pos==r.end()}function JD(n,e,t){return T1==e&&P1==t?A1:(T1=e,P1=t,A1=t=="up"||t=="down"?FD(n,e,t):KD(n,e,t))}function Q1(n,e,t,r,i){uk(r,e,n);let s=new Qi(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}function ck(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==n){for(;l!=r;)r=$1(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(l,r);if(o instanceof Xo){let a=r?r.previousSibling:n.lastChild;ck(o.contentDOM,o.children,t),r=a?a.nextSibling:n.firstChild}}for(;r;)r=$1(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}function Dm(n,e,t){if(n.length==0)return Ps;let r=t?Ps[0]:new ma,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new ma(o.nodeName));for(let l in o){let a=o[l];a!=null&&(t&&i.length==1&&i.push(r=new ma(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function hk(n,e,t,r){if(t==Ps&&r==Ps)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=t[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=n&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Ps[0]),i=a}eN(i,l||Ps[0],o)}return i}function eN(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function uk(n,e,t){return hk(n,n,Ps,Dm(e,t,n.nodeType!=1))}function Gh(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function $1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}function tN(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=t.children[r-1];if(c instanceof Xo)t=c,r=c.children.length;else{l=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=n.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function nN(n,e){return n.type.side-e.type.side}function rN(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let h=n.child(c);r(h,i,e.forChild(s,h),c),s+=h.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let h,u;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(h?(u||(u=[h])).push(g):h=g)}if(h)if(u){u.sort(nN);for(let g=0;g<u.length;g++)t(u[g],c,!!a)}else t(h,c,!!a);let f,d;if(a)d=-1,f=a,a=null;else if(c<n.childCount)d=c,f=n.child(c++);else break;for(let g=0;g<l.length;g++)l[g].to<=s&&l.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let O=0;O<l.length;O++)l[O].to<g&&(g=l[O].to);g<p&&(a=f.cut(g-s),f=f.cut(0,g-s),p=g,d=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?l.filter(g=>!g.inline):l.slice();r(f,m,e.forChild(s,f),d),s=p}}function iN(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function sN(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<n.childCount;){let c=n.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=t){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=t)return l+c;if(t==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Lm(n,e,t,r,i){let s=[];for(let o=0,l=0;o<n.length;o++){let a=n[o],c=l,h=l+=a.size;c>=t||h<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),h>t&&s.push(a.slice(t-c,a.size,r)))}return s}function Wm(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(iu(t)){for(a=o;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&z.isSelectable(u)&&i.parent&&!(u.isInline&&DD(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;c=new z(o==f?l:r.resolve(f))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let u=o,f=o;for(let d=0;d<t.rangeCount;d++){let p=t.getRangeAt(d);u=Math.min(u,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[a,o]=f==n.state.selection.anchor?[f,u]:[u,f],l=r.resolve(o)}else a=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(a<0)return null}let h=r.resolve(a);if(!c){let u=e=="pointer"||n.state.selection.head<l.pos&&!s?1:-1;c=Ym(n,h,l,u)}return c}function fk(n){return n.editable?n.hasFocus():pk(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Yr(n,e=!1){let t=n.state.selection;if(dk(n,t),!!fk(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Pt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&$s(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)lN(n);else{let{anchor:r,head:i}=t,s,o;E1&&!(t instanceof V)&&(t.$from.parent.inlineContent||(s=R1(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=R1(n,t.to))),n.docView.setSelection(r,i,n,e),E1&&(s&&D1(s),o&&D1(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&oN(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}function R1(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Dt&&i&&i.contentEditable=="false")return vm(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return vm(i);if(s)return vm(s)}}function vm(n){return n.contentEditable="true",Dt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function D1(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function oN(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!fk(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function lN(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,mt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&jt&&Mi<=11&&(r.disabled=!0,r.disabled=!1)}function dk(n,e){if(e instanceof z){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(N1(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else N1(n)}function N1(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Ym(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||V.between(e,t,r)}function L1(n){return n.editable&&!n.hasFocus()?!1:pk(n)}function pk(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function aN(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return $s(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Im(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Z.findFrom(s,e)}function Pi(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function I1(n,e,t){let r=n.state.selection;if(r instanceof V)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Pi(n,new V(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Im(n.state,e);return i&&i instanceof z?Pi(n,i):!1}else if(!(wn&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(l))&&!o.contentDOM?z.isSelectable(s)?Pi(n,new z(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):ka?Pi(n,new V(n.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof z&&r.node.isInline)return Pi(n,new V(e>0?r.$to:r.$from));{let i=Im(n.state,e);return i?Pi(n,i):!1}}}function Kh(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ga(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Lo(n,e){return e<0?cN(n):hN(n)}function cN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(Xn&&t.nodeType==1&&r<Kh(t)&&ga(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(ga(l,-1))i=t,s=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(mk(t))break;{let l=t.previousSibling;for(;l&&ga(l,-1);)i=t.parentNode,s=mt(l),l=l.previousSibling;if(l)t=l,r=Kh(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?_m(n,t,r):i&&_m(n,i,s)}function hN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Kh(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(ga(l,1))s=t,o=++r;else break}else{if(mk(t))break;{let l=t.nextSibling;for(;l&&ga(l,1);)s=l.parentNode,o=mt(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=Kh(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&_m(n,s,o)}function mk(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function uN(n,e){for(;n&&e==n.childNodes.length&&!xa(n);)e=mt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function fN(n,e){for(;n&&!e&&!xa(n);)e=mt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function _m(n,e,t){if(e.nodeType!=3){let s,o;(o=uN(e,t))?(e=o,t=0):(s=fN(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(iu(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Yr(n)},50)}function _1(n,e){let t=n.state.doc.resolve(e);if(!(Pt||ID)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function B1(n,e,t){let r=n.state.selection;if(r instanceof V&&!r.empty||t.indexOf("s")>-1||wn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Im(n.state,e);if(o&&o instanceof z)return Pi(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof pt?Z.near(o,e):Z.findFrom(o,e);return l?Pi(n,l):!1}return!1}function V1(n,e){if(!(n.state.selection instanceof V))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function X1(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function dN(n){if(!Dt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;X1(n,r,"true"),setTimeout(()=>X1(n,r,"false"),20)}return!1}function pN(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function mN(n,e){let t=e.keyCode,r=pN(e);if(t==8||wn&&t==72&&r=="c")return V1(n,-1)||Lo(n,-1);if(t==46&&!e.shiftKey||wn&&t==68&&r=="c")return V1(n,1)||Lo(n,1);if(t==13||t==27)return!0;if(t==37||wn&&t==66&&r=="c"){let i=t==37?_1(n,n.state.selection.from)=="ltr"?-1:1:-1;return I1(n,i,r)||Lo(n,i)}else if(t==39||wn&&t==70&&r=="c"){let i=t==39?_1(n,n.state.selection.from)=="ltr"?1:-1:1;return I1(n,i,r)||Lo(n,i)}else{if(t==38||wn&&t==80&&r=="c")return B1(n,-1,r)||Lo(n,-1);if(t==40||wn&&t==78&&r=="c")return dN(n)||B1(n,1,r)||Lo(n,1);if(r==(wn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Hm(n,e){n.someProp("transformCopied",d=>{e=d(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let d=r.firstChild;t.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),r=d.content}let o=n.someProp("clipboardSerializer")||Xr.fromSchema(n.state.schema),l=xk(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,h,u=0;for(;c&&c.nodeType==1&&(h=wk[c.nodeName.toLowerCase()]);){for(let d=h.length-1;d>=0;d--){let p=l.createElement(h[d]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),u++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",d=>d(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function gk(n,e,t,r,i){let s=i.parent.type.spec.code,o,l;if(!t&&!e)return null;let a=e&&(r||s||!t);if(a){if(n.someProp("transformPastedText",f=>{e=f(e,s||r,n)}),s)return e?new E(A.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):E.empty;let u=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(u)l=u;else{let f=i.marks(),{schema:d}=n.state,p=Xr.fromSchema(d);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(d.text(m,f)))})}}else n.someProp("transformPastedHTML",u=>{t=u(t,n)}),o=bN(t),ka&&wN(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let u=+h[3];u>0;u--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Vr.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||h),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!gN.test(f.parentNode.nodeName)?{ignore:!0}:null}})),h)l=xN(z1(l,+h[1],+h[2]),h[4]);else if(l=E.maxOpen(ON(l.content,i),!0),l.openStart||l.openEnd){let u=0,f=0;for(let d=l.content.firstChild;u<l.openStart&&!d.type.spec.isolating;u++,d=d.firstChild);for(let d=l.content.lastChild;f<l.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);l=z1(l,u,f)}return n.someProp("transformPasted",u=>{l=u(l,n)}),l}function ON(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&yk(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=bk(o[o.length-1],s.length));let h=Ok(l,a);o.push(h),i=i.matchType(h.type),s=a}}),o)return A.from(o)}return n}function Ok(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,A.from(n));return n}function yk(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=yk(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(A.from(Ok(t,n,i+1))))}}function bk(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,bk(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(A.empty,!0);return n.copy(t.append(r))}function Bm(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,l=o.content;return n.childCount>1&&(s=0),i<r-1&&(l=Bm(l,e,t,r,i+1,s)),i>=t&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(A.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(l))}function z1(n,e,t){return e<n.openStart&&(n=new E(Bm(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new E(Bm(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}function xk(){return Z1||(Z1=document.implementation.createHTMLDocument("title"))}function yN(n){let e=window.trustedTypes;return e?(Cm||(Cm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Cm.createHTML(n)):n}function bN(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=xk().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&wk[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=yN(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function wN(n){let e=n.querySelectorAll(Pt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function xN(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch(l){return n}let{content:i,openStart:s,openEnd:o}=n;for(let l=r.length-2;l>=0;l-=2){let a=t.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=A.from(a.create(r[l+1],i)),s++,o++}return new E(i,s,o)}function SN(n){for(let e in Nt){let t=Nt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{CN(n,r)&&!Fm(n,r)&&(n.editable||!(r.type in Lt))&&t(n,r)},kN[e]?{passive:!0}:void 0)}Dt&&n.dom.addEventListener("input",()=>null),Xm(n)}function Ai(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function vN(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Xm(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Fm(n,r))})}function Fm(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function CN(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function TN(n,e){!Fm(n,e)&&Nt[e.type]&&(n.editable||!(e.type in Lt))&&Nt[e.type](n,e)}function su(n){return{left:n.clientX,top:n.clientY}}function PN(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Gm(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,l=>o>s.depth?l(n,t,s.nodeAfter,s.before(o),i,!0):l(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function _o(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function AN(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(_o(n,new z(t),"pointer"),!0):!1}function MN(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof z&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(z.isSelectable(l)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(_o(n,z.create(n.state.doc,i),"pointer"),!0):!1}function QN(n,e,t,r,i){return Gm(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?MN(n,t):AN(n,t))}function $N(n,e,t,r){return Gm(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function EN(n,e,t,r){return Gm(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||RN(n,t,r)}function RN(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(_o(n,V.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)_o(n,V.create(r,l+1,l+1+o.content.size),"pointer");else if(z.isSelectable(o))_o(n,z.create(r,l),"pointer");else continue;return!0}}function Km(n){return Jh(n)}function Sk(n,e){return n.composing?!0:Dt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}function vk(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Jh(n),e))}function Ck(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=LN());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function NN(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=ED(e.focusNode,e.focusOffset),r=RD(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function LN(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Jh(n,e=!1){if(!(Wr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Ck(n),e||n.docView&&n.docView.dirty){let t=Wm(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function IN(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}function _N(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function BN(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ya(n,r.value,null,i,e):ya(n,r.textContent,r.innerHTML,i,e)},50)}function ya(n,e,t,r,i){let s=gk(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,i,s||E.empty)))return!0;if(!s)return!1;let o=_N(s),l=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Tk(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}function Pk(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t!=null?t:!e[VN]}function ba(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}function XN(n,e,t,r,i,s,o){let l=n.slice();for(let c=0,h=s;c<t.maps.length;c++){let u=0;t.maps[c].forEach((f,d,p,m)=>{let g=m-p-(d-f);for(let O=0;O<l.length;O+=3){let w=l[O+1];if(w<0||f>w+h-u)continue;let k=l[O]+h-u;d>=k?l[O+1]=f<=k?-2:-1:f>=h&&g&&(l[O]+=g,l[O+1]+=g)}u+=g}),h=t.maps[c].map(h,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let h=t.map(n[c]+s),u=h-i;if(u<0||u>=r.content.size){a=!0;continue}let f=t.map(n[c+1]+s,-1),d=f-i,{index:p,offset:m}=r.content.findIndex(u),g=r.maybeChild(p);if(g&&m==u&&m+g.nodeSize==d){let O=l[c+2].mapInner(t,g,h+1,n[c]+s+1,o);O!=Tt?(l[c]=u,l[c+1]=d,l[c+2]=O):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=zN(l,n,e,t,i,s,o),h=ru(c,r,0,o);e=h.local;for(let u=0;u<l.length;u+=3)l[u+1]<0&&(l.splice(u,3),u-=3);for(let u=0,f=0;u<h.children.length;u+=3){let d=h.children[u];for(;f<l.length&&l[f]<d;)f+=3;l.splice(f,0,h.children[u],h.children[u+1],h.children[u+2])}}return new Ie(e.sort(Qs),l)}function Ak(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new rt(i.from+e,i.to+e,i.type))}return t}function zN(n,e,t,r,i,s,o){function l(a,c){for(let h=0;h<a.local.length;h++){let u=a.local[h].map(r,i,c);u?t.push(u):o.onRemove&&o.onRemove(a.local[h].spec)}for(let h=0;h<a.children.length;h+=3)l(a.children[h+2],a.children[h]+c+1)}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+s+1);return t}function Mk(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function Qk(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function ru(n,e,t,r){let i=[],s=!1;e.forEach((l,a)=>{let c=Mk(n,l,a+t);if(c){s=!0;let h=ru(c,l,t+a+1,r);h!=Tt&&i.push(a,a+l.nodeSize,h)}});let o=Ak(s?Qk(n):n,-t).sort(Qs);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ie(o,i):Tt}function Qs(n,e){return n.from-e.from||n.to-e.to}function Jm(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),q1(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),q1(e,i,r.copy(s.from,r.to)));break}}}return e}function q1(n,e,t){for(;e<n.length&&Qs(t,n[e])>0;)e++;n.splice(e,0,t)}function Tm(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Tt&&e.push(r)}),n.cursorWrapper&&e.push(Ie.create(n.state.doc,[n.cursorWrapper.deco])),nu.from(e)}function UN(n){if(!U1.has(n)&&(U1.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Xn,j1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),j1=!0}}function W1(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return $s(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function jN(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return W1(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?W1(n,t):null}function WN(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function YN(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=n.docView.parseRange(e,t),a=n.domSelectionRange(),c,h=a.anchorNode;if(h&&n.dom.contains(h.nodeType==1?h:h.parentNode)&&(c=[{node:h,offset:a.anchorOffset}],iu(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Pt&&n.input.lastKeyCode===8)for(let g=s;g>i;g--){let O=r.childNodes[g-1],w=O.pmViewDesc;if(O.nodeName=="BR"&&!w){s=g;break}if(!w||w.size)break}let u=n.state.doc,f=n.someProp("domParser")||Vr.fromSchema(n.state.schema),d=u.resolve(o),p=null,m=f.parse(r,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:HN,context:d});if(c&&c[0].pos!=null){let g=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=g),p={anchor:g+o,head:O+o}}return{doc:m,sel:p,from:o,to:l}}function HN(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Dt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Dt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function GN(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let C=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,M=Wm(n,C);if(M&&!n.state.selection.eq(M)){if(Pt&&Wr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",L=>L(n,Cs(13,"Enter"))))return;let $=n.state.tr.setSelection(M);C=="pointer"?$.setMeta("pointer",!0):C=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),n.dispatch($)}return}let o=n.state.doc.resolve(e),l=o.sharedDepth(t);e=o.before(l+1),t=n.state.doc.resolve(t).after(l+1);let a=n.state.selection,c=YN(n,e,t),h=n.state.doc,u=h.slice(c.from,c.to),f,d;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,d="end"):(f=n.state.selection.from,d="start"),n.input.lastKeyCode=null;let p=eL(u.content,c.doc.content,c.from,f,d);if(p&&n.input.domChangeCount++,(Vo&&n.input.lastIOSEnter>Date.now()-225||Wr)&&i.some(C=>C.nodeType==1&&!FN.test(C.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",C=>C(n,Cs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof V&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=Y1(n,n.state.doc,c.sel);if(C&&!C.eq(n.state.selection)){let M=n.state.tr.setSelection(C);s&&M.setMeta("composition",s),n.dispatch(M)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof V&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),jt&&Mi<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" \xA0"&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),O=h.resolve(p.start),w=m.sameParent(g)&&m.parent.inlineContent&&O.end()>=p.endA,k;if((Vo&&n.input.lastIOSEnter>Date.now()-225&&(!w||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"",""))&&(k=Z.findFrom(c.doc.resolve(m.pos+1),1,!0))&&k.head>m.pos)&&n.someProp("handleKeyDown",C=>C(n,Cs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&JN(h,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",C=>C(n,Cs(8,"Backspace")))){Wr&&Pt&&n.domObserver.suppressSelectionUpdates();return}Pt&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),Wr&&!w&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(C){return C(n,Cs(13,"Enter"))})},20));let b=p.start,v=p.endA,x=C=>{let M=C||n.state.tr.replace(b,v,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let $=Y1(n,M.doc,c.sel);$&&!(Pt&&n.composing&&$.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&($.head==b||$.head==M.mapping.map(v)-1)||jt&&$.empty&&$.head==b)&&M.setSelection($)}return s&&M.setMeta("composition",s),M.scrollIntoView()},T;if(w){if(m.pos==g.pos){jt&&Mi<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Yr(n),20));let C=x(n.state.tr.delete(b,v)),M=h.resolve(p.start).marksAcross(h.resolve(p.endA));M&&C.ensureMarks(M),n.dispatch(C)}else if(p.endA==p.endB&&(T=KN(m.parent.content.cut(m.parentOffset,g.parentOffset),O.parent.content.cut(O.parentOffset,p.endA-O.start())))){let C=x(n.state.tr);T.type=="add"?C.addMark(b,v,T.mark):C.removeMark(b,v,T.mark),n.dispatch(C)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,g.parentOffset),M=()=>x(n.state.tr.insertText(C,b,v));n.someProp("handleTextInput",$=>$(n,b,v,C,M))||n.dispatch(M())}}else n.dispatch(x())}function Y1(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Ym(n,e.resolve(t.anchor),e.resolve(t.head))}function KN(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,l,a;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<t.length;h++)s=t[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=h=>h.mark(l.removeFromSet(h.marks));else return null;let c=[];for(let h=0;h<e.childCount;h++)c.push(a(e.child(h)));if(A.from(c).eq(n))return{mark:l,type:o}}function JN(n,e,t,r,i){if(t-e<=i.pos-r.pos||Pm(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&t==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(Pm(s,!0,!0));return!o.parent.isTextblock||o.pos>t||Pm(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Pm(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function eL(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&n.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&H1(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<n.size&&H1(n.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function H1(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}function F1(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[rt.node(0,n.state.doc.content.size,e)]}function G1(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:rt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function K1(n){return!n.someProp("editable",e=>e(n.state)===!1)}function tL(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function J1(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function nL(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function ek(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var mt,Bo,Am,jr,QD,$s,$D,iu,ar,S1,$i,Mm,tk,Qm,jt,Mi,Xn,$m,Pt,nk,Dt,Vo,wn,ID,Wr,ka,_D,No,HD,GD,T1,P1,A1,kn,M1,Ts,cr,Es,Yh,Em,Xo,Qi,Hh,Fh,Rm,ma,Ps,Nm,E1,gN,wk,Z1,Cm,Nt,Lt,kN,Vm,kk,zm,DN,Oa,eu,VN,tu,As,Zm,rt,Io,Ms,Ie,Tt,nu,ZN,qN,qm,Um,U1,j1,FN,wa,Sa=S(()=>{lt();nn();qr();mt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Bo=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e},Am=null,jr=function(n,e,t){let r=Am||(Am=document.createRange());return r.setEnd(n,t==null?n.nodeValue.length:t),r.setStart(n,e||0),r},QD=function(){Am=null},$s=function(n,e,t,r){return t&&(k1(n,e,t,r,-1)||k1(n,e,t,r,1))},$D=/^(img|br|input|textarea|hr)$/i;iu=function(n){return n.focusNode&&$s(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};ar=typeof navigator!="undefined"?navigator:null,S1=typeof document!="undefined"?document:null,$i=ar&&ar.userAgent||"",Mm=/Edge\/(\d+)/.exec($i),tk=/MSIE \d/.exec($i),Qm=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($i),jt=!!(tk||Qm||Mm),Mi=tk?document.documentMode:Qm?+Qm[1]:Mm?+Mm[1]:0,Xn=!jt&&/gecko\/(\d+)/i.test($i);Xn&&+(/Firefox\/(\d+)/.exec($i)||[0,0])[1];$m=!jt&&/Chrome\/(\d+)/.exec($i),Pt=!!$m,nk=$m?+$m[1]:0,Dt=!jt&&!!ar&&/Apple Computer/.test(ar.vendor),Vo=Dt&&(/Mobile\/\w+/.test($i)||!!ar&&ar.maxTouchPoints>2),wn=Vo||(ar?/Mac/.test(ar.platform):!1),ID=ar?/Win/.test(ar.platform):!1,Wr=/Android \d/.test($i),ka=!!S1&&"webkitFontSmoothing"in S1.documentElement.style,_D=ka?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;No=null;HD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;GD=/[\u0590-\u08ac]/;T1=null,P1=null,A1=!1;kn=0,M1=1,Ts=2,cr=3,Es=class{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=kn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>mt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Fh){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Yh&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?mt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?mt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let h=o+a.border;if(e>=h&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,h);e=o;for(let u=l;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=mt(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>t||l==this.children.length-1)){t=c;for(let h=l+1;h<this.children.length;h++){let u=this.children[h];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=mt(u.dom);break}t+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],g=p+m.size;if(s>p&&o<g)return m.setSelection(e-p-m.border,t-p-m.border,r,i);p=g}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),h=r.domSelectionRange(),u=!1;if((Xn||Dt)&&e==t){let{node:d,offset:p}=l;if(d.nodeType==3){if(u=!!(p&&d.nodeValue[p-1]==`
`),u&&p==d.nodeValue.length)for(let m=d,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:mt(g)+1});break}let O=m.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let m=d.childNodes[p-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Xn&&h.focusNode&&h.focusNode!=a.node&&h.focusNode.nodeType==1){let d=h.focusNode.childNodes[h.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&Dt)&&$s(l.node,l.offset,h.anchorNode,h.anchorOffset)&&$s(a.node,a.offset,h.focusNode,h.focusOffset))return;let f=!1;if((c.extend||e==t)&&!u){c.collapse(l.node,l.offset);try{e!=t&&c.extend(a.node,a.offset),f=!0}catch(d){}}if(!f){if(e>t){let p=l;l=a,a=p}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let l=r+s.border,a=o-s.border;if(e>=l&&t<=a){this.dirty=e==r||t==o?Ts:M1,e==l&&t==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=cr:s.markDirty(e-l,t-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ts:cr}r=o}this.dirty=Ts}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Ts:M1;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}},Yh=class extends Es{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==kn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}},Em=class extends Es{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},Xo=class n extends Es{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=Xr.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new n(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&cr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=cr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=kn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=kn}}slice(e,t,r){let i=n.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=Lm(s,t,o,r)),e>0&&(s=Lm(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}},Qi=class n extends Es{constructor(e,t,r,i,s,o,l,a,c){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,t,r,i,s,o){let l=s.nodeViews[t.type.name],a,c=l&&l(t,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),h=c&&c.dom,u=c&&c.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:u}=Xr.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!u&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let f=h;return h=uk(h,r,t),c?a=new Rm(e,t,r,i,h,u||null,f,c,s,o+1):t.isText?new Hh(e,t,r,i,h,f,s):new n(e,t,r,i,h,u||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>A.empty)}return e}matchesNode(e,t,r){return this.dirty==kn&&e.eq(this.node)&&Gh(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new Nm(this,o&&o.node,e);rN(this.node,this.innerDeco,(c,h,u)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&a.syncToMarks(h==this.node.childCount?de.none:this.node.child(h).marks,r,e),a.placeWidget(c,e,i)},(c,h,u,f)=>{a.syncToMarks(c.marks,r,e);let d;a.findNodeMatch(c,h,u,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(d=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,h,u,d,e)||a.updateNextNode(c,h,u,e,f,i)||a.addNode(c,h,u,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Ts)&&(o&&this.protectLocalComposition(e,o),ck(this.contentDOM,this.children,e),Vo&&iN(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof V)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=sN(this.node.content,o,r-t,i-t);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Em(this,s,t,i);e.input.compositionNodes.push(o),this.children=Lm(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==cr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=kn}updateOuterDeco(e){if(Gh(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=hk(this.dom,this.nodeDOM,Dm(this.outerDeco,this.node,t),Dm(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};Hh=class n extends Qi{constructor(e,t,r,i,s,o,l){super(e,t,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==cr||this.dirty!=kn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=kn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=kn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new n(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=cr)}get domAtom(){return!1}isText(e){return this.node.text==e}},Fh=class extends Es{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==kn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},Rm=class extends Qi{constructor(e,t,r,i,s,o,l,a,c,h){super(e,t,r,i,s,o,l,c,h),this.spec=a}update(e,t,r,i){if(this.dirty==cr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};ma=function(n){n&&(this.nodeName=n)};ma.prototype=Object.create(null);Ps=[new ma];Nm=class{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=tN(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=kn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Xo.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==cr&&o.dom==o.contentDOM&&(o.dirty=Ts),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Qi){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let h=a.dom,u,f=this.isLocked(h)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=cr&&Gh(t,a.outerDeco));if(!f&&a.update(e,t,r,i))return this.destroyBetween(this.index,l),a.dom!=h&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(a,e,t,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=Ts,u.updateChildren(i,o+1),u.dirty=kn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Gh(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Qi.create(this.top,t,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,t,r,i,s){let o=Qi.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Yh(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Xo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Hh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Dt||Pt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Fh(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};E1=Dt||Pt&&nk<63;gN=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;wk={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Z1=null;Cm=null;Nt={},Lt={},kN={touchstart:!0,touchmove:!0},Vm=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};Lt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Sk(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Wr&&Pt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Vo&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Cs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||mN(n,t)?t.preventDefault():Ai(n,"key")};Lt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Lt.keypress=(n,e)=>{let t=e;if(Sk(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||wn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof V)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};kk=wn?"metaKey":"ctrlKey";Nt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Km(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&PN(t,n.input.lastClick)&&!t[kk]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let o=n.posAtCoords(su(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new zm(n,o,t,!!r)):(s=="doubleClick"?$N:EN)(n,o.pos,o.inside,t)?t.preventDefault():Ai(n,"pointer"))};zm=class{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[kk],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let h=e.state.doc.resolve(t.pos);s=h.parent,o=h.depth?h.before():0}let l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof z&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ai(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Yr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(su(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ai(this.view,"pointer"):QN(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Dt&&this.mightDrag&&!this.mightDrag.node.isAtom||Pt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(_o(this.view,Z.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ai(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ai(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};Nt.touchstart=n=>{n.input.lastTouch=Date.now(),Km(n),Ai(n,"pointer")};Nt.touchmove=n=>{n.input.lastTouch=Date.now(),Ai(n,"pointer")};Nt.contextmenu=n=>Km(n);DN=Wr?5e3:-1;Lt.compositionstart=Lt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof V&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Jh(n,!0),n.markCursor=null;else if(Jh(n,!e.selection.empty),Xn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=n.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}vk(n,DN)};Lt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,vk(n,20))};Oa=jt&&Mi<15||Vo&&_D<604;Nt.copy=Lt.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Oa?null:t.clipboardData,o=r.content(),{dom:l,text:a}=Hm(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):IN(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};Lt.paste=(n,e)=>{let t=e;if(n.composing&&!Wr)return;let r=Oa?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ya(n,Tk(r),r.getData("text/html"),i,t)?t.preventDefault():BN(n,t)};eu=class{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}},VN=wn?"altKey":"ctrlKey";Nt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(su(t)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof z?i.to-1:i.to))){if(r&&r.mightDrag)o=z.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&(o=z.create(n.state.doc,u.posBefore))}}let l=(o||n.state.selection).content(),{dom:a,text:c,slice:h}=Hm(n,l);(!t.dataTransfer.files.length||!Pt||nk>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Oa?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",Oa||t.dataTransfer.setData("text/plain",c),n.dragging=new eu(h,Pk(n,t),o)};Nt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Lt.dragover=Lt.dragenter=(n,e)=>e.preventDefault();Lt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(su(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=gk(n,Tk(t.dataTransfer),Oa?null:t.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&Pk(n,t));if(n.someProp("handleDrop",p=>p(n,t,o||E.empty,l))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?qh(n.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=n.state.tr;if(l){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let h=c.mapping.map(a),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(h,h,o.content.firstChild):c.replaceRange(h,h,o),c.doc.eq(f))return;let d=c.doc.resolve(h);if(u&&z.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new z(d));else{let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,O,w)=>p=w),c.setSelection(Ym(n,d,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Nt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Yr(n)},20))};Nt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Nt.beforeinput=(n,e)=>{if(Pt&&Wr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Cs(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Lt)Nt[n]=Lt[n];tu=class n{constructor(e,t){this.toDOM=e,this.spec=t||Ms,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new rt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof n&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ba(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},As=class n{constructor(e,t){this.attrs=e,this.spec=t||Ms}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new rt(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof n&&ba(this.attrs,e.attrs)&&ba(this.spec,e.spec)}static is(e){return e.type instanceof n}destroy(){}},Zm=class n{constructor(e,t){this.attrs=e,this.spec=t||Ms}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new rt(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof n&&ba(this.attrs,e.attrs)&&ba(this.spec,e.spec)}destroy(){}},rt=class n{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new n(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new n(e,e,new tu(t,r))}static inline(e,t,r,i){return new n(e,t,new As(r,i))}static node(e,t,r,i){return new n(e,t,new Zm(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof As}get widget(){return this.type instanceof tu}},Io=[],Ms={},Ie=class n{constructor(e,t){this.local=e.length?e:Io,this.children=t.length?t:Io}static create(e,t){return t.length?ru(t,e,0,Ms):Tt}find(e,t,r){let i=[];return this.findInner(e==null?0:e,t==null?1e9:t,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,t-l,r,i+l,s)}}map(e,t,r){return this==Tt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ms)}mapInner(e,t,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(t,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?XN(this.children,o||[],e,t,r,i,s):o?new n(o.sort(Qs),Io):Tt}add(e,t){return t.length?this==Tt?n.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,h;if(h=Mk(t,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,h,c+1):i.splice(s,0,a,a+l.nodeSize,ru(h,l,c+1,Ms)),s+=3}});let o=Ak(s?Qk(t):t,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new n(o.length?this.local.concat(o).sort(Qs):this.local,i||this.children)}remove(e){return e.length==0||this==Tt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+t,a=r[s+1]+t;for(let h=0,u;h<e.length;h++)(u=e[h])&&u.from>l&&u.to<a&&(e[h]=null,(o||(o=[])).push(u));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=Tt?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new n(i,r):Tt}forChild(e,t){if(this==Tt)return this;if(t.isLeaf)return n.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof As){let c=Math.max(s,a.from)-s,h=Math.min(o,a.to)-s;c<h&&(i||(i=[])).push(a.copy(c,h))}}if(i){let l=new n(i.sort(Qs),Io);return r?new nu([l,r]):l}return r||Tt}eq(e){if(this==e)return!0;if(!(e instanceof n)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Jm(this.localsInner(e))}localsInner(e){if(this==Tt)return Io;if(e.inlineContent||!this.local.some(As.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof As||t.push(this.local[r]);return t}forEachSet(e){e(this)}};Ie.empty=new Ie([],[]);Ie.removeOverlap=Jm;Tt=Ie.empty,nu=class n{constructor(e){this.members=e}map(e,t){let r=this.members.map(i=>i.map(e,t,Ms));return n.from(r)}forChild(e,t){if(t.isLeaf)return Ie.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Tt&&(s instanceof n?r=r.concat(s.members):r.push(s))}return n.from(r)}eq(e){if(!(e instanceof n)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?Jm(r?t:t.sort(Qs)):Io}static from(e){switch(e.length){case 0:return Tt;case 1:return e[0];default:return new n(e.every(t=>t instanceof Ie)?e:e.reduce((t,r)=>t.concat(r instanceof Ie?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}};ZN={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qN=jt&&Mi<=11,qm=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},Um=class{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qm,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);jt&&Mi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),qN&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ZN)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(L1(this.view)){if(this.suppressingSelectionUpdates)return Yr(this.view);if(jt&&Mi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&$s(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Bo(s))t.add(s);for(let s=e.anchorNode;s;s=Bo(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&L1(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let h=0;h<t.length;h++){let u=this.registerMutation(t[h],a);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(l=!0))}if(Xn&&a.length){let h=a.filter(u=>u.nodeName=="BR");if(h.length==2){let[u,f]=h;u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let f of h){let d=f.parentNode;d&&d.nodeName=="LI"&&(!u||WN(e,u)!=d)&&f.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&iu(r)&&(c=Wm(e))&&c.eq(Z.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Yr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),UN(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Yr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let u=e.addedNodes[h];t.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(jt&&Mi<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:u,nextSibling:f}=e.addedNodes[h];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?mt(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?mt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},U1=new WeakMap,j1=!1;FN=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;wa=class{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Vm,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ek),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=K1(this),G1(this),this.nodeViews=J1(this),this.docView=Q1(this.state.doc,F1(this),Tm(this),this.dom,this),this.domObserver=new Um(this,(r,i,s,o)=>GN(this,r,i,s,o)),this.domObserver.start(),SN(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Xm(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ek),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Ck(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=J1(this);nL(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&Xm(this),this.editable=K1(this),G1(this);let a=Tm(this),c=F1(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,a);(u||!e.selection.eq(i.selection))&&(o=!0);let f=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&XD(this);if(o){this.domObserver.stop();let d=u&&(jt||Pt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&tL(i.selection,e.selection);if(u){let p=Pt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=NN(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Q1(e.doc,c,a,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&aN(this))?Yr(this,d):(dk(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():f&&zD(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof z){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&v1(this,t.getBoundingClientRect(),e)}else v1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new eu(e.slice,e.move,i<0?void 0:z.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=t?t(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(jt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ZD(this.dom),Yr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return YD(this,e)}coordsAtPos(e,t=1){return lk(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return JD(this,t||this.state,e)}pasteHTML(e,t){return ya(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ya(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Hm(this,e)}destroy(){this.docView&&(vN(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Tm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,QD())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return TN(this,e)}domSelectionRange(){let e=this.domSelection();return e?Dt&&this.root.nodeType===11&&ND(this.dom.ownerDocument)==this.dom&&jN(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};wa.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))}});var ou=S(()=>{Sa()});function au(n){var e=rL&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||iL&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?zo:zn)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}var zn,zo,rL,iL,Je,Je,Je,lu,eg=S(()=>{zn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},rL=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),iL=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Je=0;Je<10;Je++)zn[48+Je]=zn[96+Je]=String(Je);for(Je=1;Je<=24;Je++)zn[Je+111]="F"+Je;for(Je=65;Je<=90;Je++)zn[Je]=String.fromCharCode(Je+32),zo[Je]=String.fromCharCode(Je);for(lu in zn)zo.hasOwnProperty(lu)||(zo[lu]=zn[lu])});function lL(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))sL?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function aL(n){let e=Object.create(null);for(let t in n)e[lL(t)]=n[t];return e}function tg(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function $k(n){return new F({props:{handleKeyDown:va(n)}})}function va(n){let e=aL(n);return function(t,r){let i=au(r),s,o=e[tg(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[tg(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(oL&&r.ctrlKey&&r.altKey)&&(s=zn[r.keyCode])&&s!=i){let l=e[tg(s,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}var sL,oL,cu=S(()=>{eg();lt();sL=typeof navigator!="undefined"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),oL=typeof navigator!="undefined"&&/Win/.test(navigator.platform)});var Ek=S(()=>{cu()});var hu=S(()=>{nn()});var Rk=S(()=>{qr()});function Nk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}function _k(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let c=fa(n.doc,s,a,E.empty);if(!c||c.from!=s||c instanceof Ct&&c.slice.size>=a-s)return!1;if(t){let h=n.tr.step(c);h.setSelection(V.create(h.doc,s)),t(h.scrollIntoView())}return!0}function Zo(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}function sg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Bk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}function ag(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}function hg(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function cL(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof z&&e.selection.node.isBlock)return!r.parentOffset||!yn(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let d=r.depth;;d--)if(r.node(d).isBlock){a=r.end(d)==r.pos+(r.depth-d),c=r.start(d)==r.pos-(r.depth-d),l=hg(r.node(d-1).contentMatchAt(r.indexAfter(d-1)));let m=n&&n(i.parent,a,r);s.unshift(m||(a&&l?{type:l}:null)),o=d;break}else{if(d==1)return!1;s.unshift(null)}let h=e.tr;(e.selection instanceof V||e.selection instanceof pt)&&h.deleteSelection();let u=h.mapping.map(r.pos),f=yn(h.doc,u,s.length,s);if(f||(s[0]=l?{type:l}:null,f=yn(h.doc,u,s.length,s)),!f)return!1;if(h.split(u,s.length,s),!a&&c&&r.node(o).type!=l){let d=h.mapping.map(r.before(o)),p=h.doc.resolve(d);l&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return t&&t(h.scrollIntoView()),!0}}function fL(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Vn(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function qk(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&fL(n,e,t))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(t){let d=e.pos+s.nodeSize,p=A.empty;for(let O=o.length-1;O>=0;O--)p=A.from(o[O].create(null,p));p=A.from(i.copy(p));let m=n.tr.step(new Ke(e.pos-1,d,e.pos,d,new E(p,1,0),o.length,!0)),g=m.doc.resolve(d+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&Vn(m.doc,g.pos)&&m.join(g.pos),t(m.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&a?null:Z.findFrom(e,1),u=h&&h.$from.blockRange(h.$to),f=u&&Zr(u);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(u,f).scrollIntoView()),!0;if(c&&Zo(s,"start",!0)&&Zo(i,"end")){let d=i,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(t){let O=A.empty;for(let k=p.length-1;k>=0;k--)O=A.from(p[k].copy(O));let w=n.tr.step(new Ke(e.pos-p.length,e.pos+s.nodeSize,e.pos+g,e.pos+s.nodeSize-g,new E(O,p.length,0),0,!0));t(w.scrollIntoView())}return!0}}return!1}function Uk(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(V.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}function jk(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),l=o&&Eo(o,n,e);return l?(r&&r(t.tr.wrap(o,l).scrollIntoView()),!0):!1}}function gg(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)i=!0;else{let h=t.doc.resolve(c),u=h.index();i=h.parent.canReplaceWith(u,u+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[o];s.setBlockType(l,a,n,e)}r(s.scrollIntoView())}return!0}}function Og(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}var uu,rg,Lk,Ik,ig,og,lg,Vk,Xk,zk,cg,ug,fg,dg,hL,Zk,uL,pg,mg,ng,Dk,Ei,dL,DW,Wk=S(()=>{qr();nn();lt();uu=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);rg=(n,e,t)=>{let r=Nk(n,t);if(!r)return!1;let i=sg(r);if(!i){let o=r.blockRange(),l=o&&Zr(o);return l==null?!1:(e&&e(n.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(qk(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Zo(s,"end")||z.isSelectable(s)))for(let o=r.depth;;o--){let l=fa(n.doc,r.before(o),r.after(o),E.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=n.tr.step(l);a.setSelection(Zo(s,"end")?Z.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):z.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Lk=(n,e,t)=>{let r=Nk(n,t);if(!r)return!1;let i=sg(r);return i?_k(n,i,e):!1},Ik=(n,e,t)=>{let r=Bk(n,t);if(!r)return!1;let i=ag(r);return i?_k(n,i,e):!1};ig=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=sg(r)}let o=s&&s.nodeBefore;return!o||!z.isSelectable(o)?!1:(e&&e(n.tr.setSelection(z.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};og=(n,e,t)=>{let r=Bk(n,t);if(!r)return!1;let i=ag(r);if(!i)return!1;let s=i.nodeAfter;if(qk(n,i,e,1))return!0;if(r.parent.content.size==0&&(Zo(s,"start")||z.isSelectable(s))){let o=fa(n.doc,r.before(),r.after(),E.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=n.tr.step(o);l.setSelection(Zo(s,"start")?Z.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):z.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},lg=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=ag(r)}let o=s&&s.nodeAfter;return!o||!z.isSelectable(o)?!1:(e&&e(n.tr.setSelection(z.create(n.doc,s.pos)).scrollIntoView()),!0)};Vk=(n,e)=>{let t=n.selection,r=t instanceof z,i;if(r){if(t.node.isTextblock||!Vn(n.doc,t.from))return!1;i=t.from}else if(i=Ro(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(z.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Xk=(n,e)=>{let t=n.selection,r;if(t instanceof z){if(t.node.isTextblock||!Vn(n.doc,t.to))return!1;r=t.to}else if(r=Ro(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},zk=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Zr(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},cg=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};ug=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=hg(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,o.createAndFill());a.setSelection(Z.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},fg=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof pt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=hg(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(o,s.createAndFill());l.setSelection(V.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},dg=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(yn(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Zr(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};hL=cL(),Zk=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(z.create(n.doc,i))),!0)},uL=(n,e)=>(e&&e(n.tr.setSelection(new pt(n.doc))),!0);pg=Uk(-1),mg=Uk(1);ng=Og(uu,rg,ig),Dk=Og(uu,og,lg),Ei={Enter:Og(cg,fg,dg,hL),"Mod-Enter":ug,Backspace:ng,"Mod-Backspace":ng,"Shift-Backspace":ng,Delete:Dk,"Mod-Delete":Dk,"Mod-a":uL},dL={"Ctrl-h":Ei.Backspace,"Alt-Backspace":Ei["Mod-Backspace"],"Ctrl-d":Ei.Delete,"Ctrl-Alt-Backspace":Ei["Mod-Delete"],"Alt-Delete":Ei["Mod-Delete"],"Alt-d":Ei["Mod-Delete"],"Ctrl-a":pg,"Ctrl-e":mg};for(let n in Ei)dL[n]=Ei[n];DW=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1});var Yk=S(()=>{Wk()});function Hk(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s);if(!o)return!1;let l=r?t.tr:null;return pL(l,o,n,e)?(r&&r(l.scrollIntoView()),!0):!1}}function pL(n,e,t,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=o.resolve(e.start-2);s=new Br(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Br(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Eo(s,t,r,e);return l?(n&&mL(n,e,l,i,t),!0):!1}function mL(n,e,t,r,i){let s=A.empty;for(let h=t.length-1;h>=0;h--)s=A.from(t[h].type.create(t[h].attrs,s));n.step(new Ke(e.start-(r?2:0),e.end,e.start,e.end,new E(s,0,0),t.length,!0));let o=0;for(let h=0;h<t.length;h++)t[h].type==i&&(o=h+1);let l=t.length-o,a=e.start+t.length-(r?2:0),c=e.parent;for(let h=e.startIndex,u=e.endIndex,f=!0;h<u;h++,f=!1)!f&&yn(n.doc,a,l)&&(n.split(a,l),a+=2*l),a+=c.child(h).nodeSize;return n}function Fk(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?gL(e,t,n,s):OL(e,t,s):!0:!1}}function gL(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ke(s-1,o,s,o,new E(A.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Br(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));let l=Zr(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return Vn(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function OL(n,e,t){let r=n.tr,i=t.parent;for(let d=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)d-=i.child(p).nodeSize,r.delete(d-1,d+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==i.childCount,c=s.node(-1),h=s.index(-1);if(!c.canReplace(h+(l?0:1),h+1,o.content.append(a?A.empty:A.from(i))))return!1;let u=s.pos,f=u+o.nodeSize;return r.step(new Ke(u-(l?1:0),f+(a?1:0),u+1,f-1,new E((l?A.empty:A.from(i.copy(A.empty))).append(a?A.empty:A.from(i.copy(A.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Gk(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=n)return!1;if(t){let c=a.lastChild&&a.lastChild.type==l.type,h=A.from(c?n.create():null),u=new E(A.from(n.create(null,A.from(l.type.create(null,h)))),c?3:1,0),f=s.start,d=s.end;t(e.tr.step(new Ke(f-(c?3:1),d,f,d,u,1,!0)).scrollIntoView())}return!0}}var Kk=S(()=>{qr();nn()});var Jk=S(()=>{Kk()});function bu(n){let{state:e,transaction:t}=n,{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}function I(n,e,t){return n.config[e]===void 0&&n.parent?I(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?I(n.parent,e,t):null}):n.config[e]}function wu(n){let e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function lS(n){let e=[],{nodeExtensions:t,markExtensions:r}=wu(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{let l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=I(o,"addGlobalAttributes",l);if(!a)return;a().forEach(h=>{h.types.forEach(u=>{Object.entries(h.attributes).forEach(([f,d])=>{e.push({type:u,name:f,attribute:{...s,...d}})})})})}),i.forEach(o=>{let l={name:o.name,options:o.options,storage:o.storage},a=I(o,"addAttributes",l);if(!a)return;let c=a();Object.entries(c).forEach(([h,u])=>{let f={...s,...u};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:h,attribute:f})})}),e}function at(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function J(...n){return n.filter(e=>!!e).reduce((e,t)=>{let r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){let l=s?String(s).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(h=>!a.includes(h));r[i]=[...a,...c].join(" ")}else if(i==="style"){let l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],c=new Map;a.forEach(h=>{let[u,f]=h.split(":").map(d=>d.trim());c.set(u,f)}),l.forEach(h=>{let[u,f]=h.split(":").map(d=>d.trim());c.set(u,f)}),r[i]=Array.from(c.entries()).map(([h,u])=>`${h}: ${u}`).join("; ")}else r[i]=s}),r},{})}function kg(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>J(t,r),{})}function aS(n){return typeof n=="function"}function te(n,e=void 0,...t){return aS(n)?e?n.bind(e)(...t):n(...t):n}function yL(n={}){return Object.keys(n).length===0&&n.constructor===Object}function bL(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function eS(n,e){return"style"in n?n:{...n,getAttrs:t=>{let r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;let i=e.reduce((s,o)=>{let l=o.attribute.parseHTML?o.attribute.parseHTML(t):bL(t.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function tS(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&yL(t)?!1:t!=null))}function wL(n,e){var t;let r=lS(n),{nodeExtensions:i,markExtensions:s}=wu(n),o=(t=i.find(c=>I(c,"topNode")))===null||t===void 0?void 0:t.name,l=Object.fromEntries(i.map(c=>{let h=r.filter(O=>O.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((O,w)=>{let k=I(w,"extendNodeSchema",u);return{...O,...k?k(c):{}}},{}),d=tS({...f,content:te(I(c,"content",u)),marks:te(I(c,"marks",u)),group:te(I(c,"group",u)),inline:te(I(c,"inline",u)),atom:te(I(c,"atom",u)),selectable:te(I(c,"selectable",u)),draggable:te(I(c,"draggable",u)),code:te(I(c,"code",u)),whitespace:te(I(c,"whitespace",u)),linebreakReplacement:te(I(c,"linebreakReplacement",u)),defining:te(I(c,"defining",u)),isolating:te(I(c,"isolating",u)),attrs:Object.fromEntries(h.map(O=>{var w;return[O.name,{default:(w=O==null?void 0:O.attribute)===null||w===void 0?void 0:w.default}]}))}),p=te(I(c,"parseHTML",u));p&&(d.parseDOM=p.map(O=>eS(O,h)));let m=I(c,"renderHTML",u);m&&(d.toDOM=O=>m({node:O,HTMLAttributes:kg(O,h)}));let g=I(c,"renderText",u);return g&&(d.toText=g),[c.name,d]})),a=Object.fromEntries(s.map(c=>{let h=r.filter(g=>g.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((g,O)=>{let w=I(O,"extendMarkSchema",u);return{...g,...w?w(c):{}}},{}),d=tS({...f,inclusive:te(I(c,"inclusive",u)),excludes:te(I(c,"excludes",u)),group:te(I(c,"group",u)),spanning:te(I(c,"spanning",u)),code:te(I(c,"code",u)),attrs:Object.fromEntries(h.map(g=>{var O;return[g.name,{default:(O=g==null?void 0:g.attribute)===null||O===void 0?void 0:O.default}]}))}),p=te(I(c,"parseHTML",u));p&&(d.parseDOM=p.map(g=>eS(g,h)));let m=I(c,"renderHTML",u);return m&&(d.toDOM=g=>m({mark:g,HTMLAttributes:kg(g,h)})),[c.name,d]}));return new ia({topNode:o,nodes:l,marks:a})}function yg(n,e){return e.nodes[n]||e.marks[n]||null}function nS(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Ag(n,e){let t=Xr.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function Mg(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function fu(n){var e;let{editor:t,from:r,to:i,text:s,rules:o,plugin:l}=n,{view:a}=t;if(a.composing)return!1;let c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let h=!1,u=xL(c)+s;return o.forEach(f=>{if(h)return;let d=kL(u,f.find);if(!d)return;let p=a.state.tr,m=bu({state:a.state,transaction:p}),g={from:r-(d[0].length-s.length),to:i},{commands:O,chain:w,can:k}=new qo({editor:t,state:m});f.handler({state:m,range:g,match:d,commands:O,chain:w,can:k})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:s}),a.dispatch(p),h=!0)}),h}function SL(n){let{editor:e,rules:t}=n,r=new F({state:{init(){return null},apply(i,s,o){let l=i.getMeta(r);if(l)return l;let a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:h}=a;typeof h=="string"?h=h:h=Ag(A.from(h),o.schema);let{from:u}=a,f=u+h.length;fu({editor:e,from:u,to:f,text:h,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return fu({editor:e,from:s,to:o,text:l,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{let{$cursor:s}=i.state.selection;s&&fu({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;let{$cursor:o}=i.state.selection;return o?fu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function vL(n){return Object.prototype.toString.call(n).slice(8,-1)}function du(n){return vL(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function xu(n,e){let t={...n};return du(n)&&du(e)&&Object.keys(e).forEach(r=>{du(e[r])&&du(n[r])?t[r]=xu(n[r],e[r]):t[r]=e[r]}),t}function CL(n){return typeof n=="number"}function PL(n){let{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=n,{commands:a,chain:c,can:h}=new qo({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,i,(d,p)=>{if(!d.isTextblock||d.type.spec.code)return;let m=Math.max(r,p),g=Math.min(i,p+d.content.size),O=d.textBetween(m-p,g-p,void 0,"\uFFFC");TL(O,s.find,o).forEach(k=>{if(k.index===void 0)return;let b=m+k.index+1,v=b+k[0].length,x={from:t.tr.mapping.map(b),to:t.tr.mapping.map(v)},T=s.handler({state:t,range:x,match:k,commands:a,chain:c,can:h,pasteEvent:o,dropEvent:l});u.push(T)})}),u.every(d=>d!==null)}function ML(n){let{editor:e,rules:t}=n,r=null,i=!1,s=!1,o=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(h){l=null}let a=({state:h,from:u,to:f,rule:d,pasteEvt:p})=>{let m=h.tr,g=bu({state:h,transaction:m});if(!(!PL({editor:e,state:g,from:Math.max(u-1,0),to:f.b-1,rule:d,pasteEvent:p,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(w){l=null}return o=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,m}};return t.map(h=>new F({view(u){let f=p=>{var m;r=!((m=u.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?u.dom.parentElement:null,r&&(pu=e)},d=()=>{pu&&(pu=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",d),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",d)}}},props:{handleDOMEvents:{drop:(u,f)=>{if(s=r===u.dom.parentElement,l=f,!s){let d=pu;d&&setTimeout(()=>{let p=d.state.selection;p&&d.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,f)=>{var d;let p=(d=f.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return o=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,f,d)=>{let p=u[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,O=p.getMeta("applyPasteRules"),w=!!O;if(!m&&!g&&!w)return;if(w){let{text:v}=O;typeof v=="string"?v=v:v=Ag(A.from(v),d.schema);let{from:x}=O,T=x+v.length,C=AL(v);return a({rule:h,state:d,from:x,to:{b:T},pasteEvt:C})}let k=f.doc.content.findDiffStart(d.doc.content),b=f.doc.content.findDiffEnd(d.doc.content);if(!(!CL(k)||!b||k===b.b))return a({rule:h,state:d,from:k,to:b,pasteEvt:o})}}))}function QL(n){let e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function cS(n,e,t){let{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{},l="";return n.nodesBetween(r,i,(a,c,h,u)=>{var f;a.isBlock&&c>r&&(l+=s);let d=o==null?void 0:o[a.type.name];if(d)return h&&(l+=d({node:a,pos:c,parent:h,index:u,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),l}function hS(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function Ou(n,e,t={strict:!0}){let r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Mg(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function uS(n,e,t={}){return n.find(r=>r.type===e&&Ou(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function rS(n,e,t={}){return!!uS(n,e,t)}function Qg(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!uS([...i.node.marks],e,t)))return;let o=i.index,l=n.start()+i.offset,a=o+1,c=l+i.node.nodeSize;for(;o>0&&rS([...n.parent.child(o-1).marks],e,t);)o-=1,l-=n.parent.child(o).nodeSize;for(;a<n.parent.childCount&&rS([...n.parent.child(a).marks],e,t);)c+=n.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Ri(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}function ku(n){return n instanceof V}function Hr(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function fS(n,e=null){if(!e)return null;let t=Z.atStart(n),r=Z.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;let i=t.from,s=r.to;return e==="all"?V.create(n,Hr(0,i,s),Hr(n.content.size,i,s)):V.create(n,Hr(e,i,s),Hr(e,i,s))}function jL(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function $g(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function mu(n){let e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return dS(t)}function Ca(n,e,t){if(n instanceof On||n instanceof A)return n;t={slice:!0,parseOptions:{},...t};let r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return A.fromArray(n.map(l=>e.nodeFromJSON(l)));let o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),Ca("",e,t)}if(i){if(t.errorOnInvalidContent){let o=!1,l="",a=new ia({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?Vr.fromSchema(a).parseSlice(mu(n),t.parseOptions):Vr.fromSchema(a).parse(mu(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}let s=Vr.fromSchema(e);return t.slice?s.parseSlice(mu(n),t.parseOptions).content:s.parse(mu(n),t.parseOptions)}return Ca("",e,t)}function FL(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Ct||i instanceof Ke))return;let s=n.mapping.maps[r],o=0;s.forEach((l,a,c,h)=>{o===0&&(o=h)}),n.setSelection(Z.near(n.doc.resolve(o),t))}function pS(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function lI(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))$g()||pS()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}function Ta(n,e,t={}){let{from:r,to:i,empty:s}=n.selection,o=e?at(e,n.schema):null,l=[];n.doc.nodesBetween(r,i,(u,f)=>{if(u.isText)return;let d=Math.max(r,f),p=Math.min(i,f+u.nodeSize);l.push({node:u,from:d,to:p})});let a=i-r,c=l.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>Ou(u.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((u,f)=>u+f.to-f.from,0)>=a}function Su(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function iS(n,e){let t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}function Cg(n,e,t={},r={}){return Ca(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}function mS(n,e){let t=Ri(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});let l=o.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function gS(n,e){let t=new vi(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function kI(n){for(let e=0;e<n.edgeCount;e+=1){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function OS(n,e,t){let r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function Eg(n,e){for(let t=n.depth;t>0;t-=1){let r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Rg(n){return e=>Eg(e.$from,n)}function SI(n,e){let t={from:0,to:n.content.size};return cS(n,t,e)}function vI(n,e){let t=at(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,l=>{s.push(l)});let o=s.reverse().find(l=>l.type.name===t.name);return o?{...o.attrs}:{}}function Dg(n,e){let t=Su(typeof e=="string"?e:e.name,n.schema);return t==="node"?vI(n,e):t==="mark"?mS(n,e):{}}function CI(n,e=JSON.stringify){let t={};return n.filter(r=>{let i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function TI(n){let e=CI(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,o)=>o!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function yS(n){let{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{let o=[];if(i.ranges.length)i.forEach((l,a)=>{o.push({from:l,to:a})});else{let{from:l,to:a}=t[s];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{let c=e.slice(s).map(l,-1),h=e.slice(s).map(a),u=e.invert().map(c,-1),f=e.invert().map(h);r.push({oldRange:{from:u,to:f},newRange:{from:c,to:h}})})}),TI(r)}function vu(n,e,t){let r=[];return n===e?t.resolve(n).marks().forEach(i=>{let s=t.resolve(n),o=Qg(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function gu(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{let i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Tg(n,e,t={}){let{empty:r,ranges:i}=n.selection,s=e?Ri(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Ou(u.attrs,t,{strict:!1}));let o=0,l=[];if(i.forEach(({$from:u,$to:f})=>{let d=u.pos,p=f.pos;n.doc.nodesBetween(d,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;let O=Math.max(d,g),w=Math.min(p,g+m.nodeSize),k=w-O;o+=k,l.push(...m.marks.map(b=>({mark:b,from:O,to:w})))})}),o===0)return!1;let a=l.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Ou(u.mark.attrs,t,{strict:!1})).reduce((u,f)=>u+f.to-f.from,0),c=l.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,f)=>u+f.to-f.from,0);return(a>0?a+c:a)>=o}function PI(n,e,t={}){if(!e)return Ta(n,null,t)||Tg(n,null,t);let r=Su(e,n.schema);return r==="node"?Ta(n,e,t):r==="mark"?Tg(n,e,t):!1}function sS(n,e){let{nodeExtensions:t}=wu(e),r=t.find(o=>o.name===n);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},s=te(I(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Ng(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(Ng(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function Cu(n){return n instanceof z}function bS(n,e,t){let i=n.state.doc.content.size,s=Hr(e,0,i),o=Hr(t,0,i),l=n.coordsAtPos(s),a=n.coordsAtPos(o,-1),c=Math.min(l.top,a.top),h=Math.max(l.bottom,a.bottom),u=Math.min(l.left,a.left),f=Math.max(l.right,a.right),d=f-u,p=h-c,O={top:c,bottom:h,left:u,right:f,width:d,height:p,x:u,y:c};return{...O,toJSON:()=>O}}function AI(n,e,t){var r;let{selection:i}=e,s=null;if(ku(i)&&(s=i.$cursor),s){let l=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}let{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,a.pos,(h,u,f)=>{if(c)return!1;if(h.isInline){let d=!f||f.type.allowsMarkType(t),p=!!t.isInSet(h.marks)||!h.marks.some(m=>m.type.excludes(t));c=d&&p}return!c}),c})}function oS(n,e){let t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){let r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}function r_(n,e,t){let r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;let i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}function ur(n){return new hr({find:n.find,handler:({state:e,range:t,match:r})=>{let i=te(n.getAttributes,void 0,r);if(i===!1||i===null)return null;let{tr:s}=e,o=r[r.length-1],l=r[0];if(o){let a=l.search(/\S/),c=t.from+l.indexOf(o),h=c+o.length;if(vu(t.from,t.to,e.doc).filter(d=>d.mark.type.excluded.find(m=>m===n.type&&m!==d.mark.type)).filter(d=>d.to>c).length)return null;h<t.to&&s.delete(h,t.to),c>t.from&&s.delete(t.from+a,c);let f=t.from+a+o.length;s.addMark(t.from+a,f,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function Tu(n){return new hr({find:n.find,handler:({state:e,range:t,match:r})=>{let i=te(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from,l=t.to,a=n.type.create(i);if(r[1]){let c=r[0].lastIndexOf(r[1]),h=o+c;h>l?h=l:l=h+r[1].length;let u=r[0][r[0].length-1];s.insertText(u,o+r[0].length-1),s.replaceWith(h,l,a)}else if(r[0]){let c=n.type.isInline?o:o-1;s.insert(c,n.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function Pa(n){return new hr({find:n.find,handler:({state:e,range:t,match:r})=>{let i=e.doc.resolve(t.from),s=te(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function Pe(n){return new hr({find:n.find,handler:({state:e,range:t,match:r})=>{let i=n.replace,s=t.from,o=t.to;if(r[1]){let l=r[0].lastIndexOf(r[1]);i+=r[0].slice(l+r[1].length),s+=l;let a=s-o;a>0&&(i=r[0].slice(l-a,l)+i,s=o)}e.tr.insertText(i,s,o)}})}function Di(n){return new hr({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{let s=te(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),a=o.doc.resolve(t.from).blockRange(),c=a&&Eo(a,n.type,s);if(!c)return null;if(o.wrap(a,c),n.keepMarks&&n.editor){let{selection:u,storedMarks:f}=e,{splittableMarks:d}=n.editor.extensionManager,p=f||u.$to.parentOffset&&u.$from.marks();if(p){let m=p.filter(g=>d.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){let u=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(u,s).run()}let h=o.doc.resolve(t.from-1).nodeBefore;h&&h.type===n.type&&Vn(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,h))&&o.join(t.from-1)}})}function Sn(n){return new Sg({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{let s=te(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;let{tr:o}=e,l=r[r.length-1],a=r[0],c=t.to;if(l){let h=a.search(/\S/),u=t.from+a.indexOf(l),f=u+l.length;if(vu(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;f<t.to&&o.delete(f,t.to),u>t.from&&o.delete(t.from+h,u),c=t.from+h+l.length,o.addMark(t.from+h,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function wS(n,e){let{selection:t}=n,{$from:r}=t;if(t instanceof z){let s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){let s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var qo,xg,xL,hr,kL,gt,Sg,TL,pu,AL,vg,le,$L,EL,RL,DL,NL,LL,IL,_L,BL,VL,XL,zL,ZL,qL,UL,WL,YL,HL,dS,GL,KL,JL,eI,tI,nI,rI,iI,sI,oI,aI,cI,hI,uI,fI,dI,pI,mI,gI,OI,yI,bI,wI,xI,MI,QI,$I,EI,RI,DI,NI,LI,bg,wg,II,_I,BI,VI,XI,zI,ZI,qI,UI,jI,WI,YI,HI,FI,GI,KI,JI,e_,t_,Pg,n_,yu,ne,re=S(()=>{bn();ou();Ek();hu();Rk();Yk();Jk();qo=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...h)=>{let u=a(...h)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,h=()=>(!a&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(r).map(([f,d])=>[f,(...m)=>{let g=this.buildProps(c,t),O=d(...m)(g);return l.push(O),u}])),run:h};return u}createCan(e){let{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...h)=>c(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){let{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:bu({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...h)=>c(...h)(l)]))}};return l}},xg=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){let r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){let r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}};xL=(n,e=500)=>{let t="",r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;let h=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),t};hr=class{constructor(e){this.find=e.find,this.handler=e.handler}},kL=(n,e)=>{if(Mg(e))return e.exec(n);let t=e(n);if(!t)return null;let r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};gt=class n{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(I(this,"addOptions",{name:this.name}))),this.storage=te(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new n(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new n(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=te(I(t,"addOptions",{name:t.name})),t.storage=te(I(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){let{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){let o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;let a=o.find(c=>(c==null?void 0:c.type.name)===t.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};Sg=class{constructor(e){this.find=e.find,this.handler=e.handler}},TL=(n,e,t)=>{if(Mg(e))return[...n.matchAll(e)];let r=e(n,t);return r?r.map(i=>{let s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};pu=null,AL=n=>{var e;let t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};vg=class n{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=n.resolve(e),this.schema=wL(this.extensions,t),this.setupExtensions()}static resolve(e){let t=n.sort(n.flatten(e)),r=QL(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{let r={name:t.name,options:t.options,storage:t.storage},i=I(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{let s=I(r,"priority")||100,o=I(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:yg(t.name,this.schema)},i=I(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){let{editor:e}=this,t=n.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{let l={name:o.name,options:o.options,storage:o.storage,editor:e,type:yg(o.name,this.schema)},a=[],c=I(o,"addKeyboardShortcuts",l),h={};if(o.type==="mark"&&I(o,"exitable",l)&&(h.ArrowRight=()=>gt.handleExit({editor:e,mark:o})),c){let m=Object.fromEntries(Object.entries(c()).map(([g,O])=>[g,()=>O({editor:e})]));h={...h,...m}}let u=$k(h);a.push(u);let f=I(o,"addInputRules",l);nS(o,e.options.enableInputRules)&&f&&r.push(...f());let d=I(o,"addPasteRules",l);nS(o,e.options.enablePasteRules)&&d&&i.push(...d());let p=I(o,"addProseMirrorPlugins",l);if(p){let m=p();a.push(...m)}return a}).flat();return[SL({editor:e,rules:r}),...ML({editor:e,rules:i}),...s]}get attributes(){return lS(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=wu(this.extensions);return Object.fromEntries(t.filter(r=>!!I(r,"addNodeView")).map(r=>{let i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:at(r.name,this.schema)},o=I(r,"addNodeView",s);if(!o)return[];let l=(a,c,h,u,f)=>{let d=kg(a,i);return o()({node:a,view:c,getPos:h,decorations:u,innerDecorations:f,editor:e,extension:r,HTMLAttributes:d})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:yg(e.name,this.schema)};e.type==="mark"&&(!((t=te(I(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);let i=I(e,"onBeforeCreate",r),s=I(e,"onCreate",r),o=I(e,"onUpdate",r),l=I(e,"onSelectionUpdate",r),a=I(e,"onTransaction",r),c=I(e,"onFocus",r),h=I(e,"onBlur",r),u=I(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),h&&this.editor.on("blur",h),u&&this.editor.on("destroy",u)})}},le=class n{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(I(this,"addOptions",{name:this.name}))),this.storage=te(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new n(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new n({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=te(I(t,"addOptions",{name:t.name})),t.storage=te(I(t,"addStorage",{name:t.name,options:t.options})),t}};$L=le.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new F({key:new ee("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),a=hS(t);return cS(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),EL=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),RL=(n=!1)=>({commands:e})=>e.setContent("",n),DL=()=>({state:n,tr:e,dispatch:t})=>{let{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;let{doc:c,mapping:h}=e,u=c.resolve(h.map(a)),f=c.resolve(h.map(a+l.nodeSize)),d=u.blockRange(f);if(!d)return;let p=Zr(d);if(l.type.isTextblock){let{defaultType:m}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(d.start,m)}(p||p===0)&&e.lift(d,p)})}),!0},NL=n=>e=>n(e),LL=()=>({state:n,dispatch:e})=>fg(n,e),IL=(n,e)=>({editor:t,tr:r})=>{let{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);let o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new V(r.doc.resolve(o-1))),!0},_L=()=>({tr:n,dispatch:e})=>{let{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;let i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){let l=i.before(s),a=i.after(s);n.delete(l,a).scrollIntoView()}return!0}return!1},BL=n=>({tr:e,state:t,dispatch:r})=>{let i=at(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){let a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},VL=n=>({tr:e,dispatch:t})=>{let{from:r,to:i}=n;return t&&e.delete(r,i),!0},XL=()=>({state:n,dispatch:e})=>uu(n,e),zL=()=>({commands:n})=>n.keyboardShortcut("Enter"),ZL=()=>({state:n,dispatch:e})=>ug(n,e);qL=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=Ri(n,r.schema),{doc:o,selection:l}=t,{$from:a,from:c,to:h}=l;if(i){let u=Qg(a,s,e);if(u&&u.from<=c&&u.to>=h){let f=V.create(o,u.from,u.to);t.setSelection(f)}}return!0},UL=n=>e=>{let t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};WL=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};let o=()=>{($g()||jL())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!ku(t.state.selection))return o(),!0;let l=fS(i.doc,n)||t.state.selection,a=t.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},YL=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),HL=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),dS=n=>{let e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){let r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&dS(r)}return n};GL=n=>!("type"in n),KL=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let l,a=g=>{s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Ca(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(g){a(g)}try{l=Ca(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(g){return a(g),!1}let{from:h,to:u}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},f=!0,d=!0;if((GL(l)?l:[l]).forEach(g=>{g.check(),f=f?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),h===u&&d){let{parent:g}=r.doc.resolve(h);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(h-=1,u+=1)}let m;if(f){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof A){let g="";e.forEach(O=>{O.text&&(g+=O.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,h,u)}else m=l,r.replaceWith(h,u,m);t.updateSelection&&FL(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:m}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:m})}return!0},JL=()=>({state:n,dispatch:e})=>Vk(n,e),eI=()=>({state:n,dispatch:e})=>Xk(n,e),tI=()=>({state:n,dispatch:e})=>rg(n,e),nI=()=>({state:n,dispatch:e})=>og(n,e),rI=()=>({state:n,dispatch:e,tr:t})=>{try{let r=Ro(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch(r){return!1}},iI=()=>({state:n,dispatch:e,tr:t})=>{try{let r=Ro(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch(r){return!1}},sI=()=>({state:n,dispatch:e})=>Lk(n,e),oI=()=>({state:n,dispatch:e})=>Ik(n,e);aI=n=>({editor:e,view:t,tr:r,dispatch:i})=>{let s=lI(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,l))});return a==null||a.steps.forEach(c=>{let h=c.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};cI=(n,e={})=>({state:t,dispatch:r})=>{let i=at(n,t.schema);return Ta(t,i,e)?zk(t,r):!1},hI=()=>({state:n,dispatch:e})=>dg(n,e),uI=n=>({state:e,dispatch:t})=>{let r=at(n,e.schema);return Fk(r)(e,t)},fI=()=>({state:n,dispatch:e})=>cg(n,e);dI=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null,l=Su(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(s=at(n,r.schema)),l==="mark"&&(o=Ri(n,r.schema)),i&&t.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,h)=>{s&&s===c.type&&t.setNodeMarkup(h,void 0,iS(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&t.addMark(h,h+c.nodeSize,o.create(iS(u.attrs,e)))})})}),!0):!1},pI=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),mI=()=>({tr:n,dispatch:e})=>{if(e){let t=new pt(n.doc);n.setSelection(t)}return!0},gI=()=>({state:n,dispatch:e})=>ig(n,e),OI=()=>({state:n,dispatch:e})=>lg(n,e),yI=()=>({state:n,dispatch:e})=>Zk(n,e),bI=()=>({state:n,dispatch:e})=>mg(n,e),wI=()=>({state:n,dispatch:e})=>pg(n,e);xI=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,c;let{doc:h}=s;if(t.preserveWhitespace!=="full"){let u=Cg(n,i.schema,t,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,h.content.size,u).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:h.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};MI=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let{selection:s}=t,{empty:o,ranges:l}=s,a=Ri(n,r.schema);if(i)if(o){let c=mS(r,a);t.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{let h=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(h,u,(f,d)=>{let p=Math.max(d,h),m=Math.min(d+f.nodeSize,u);f.marks.find(O=>O.type===a)?f.marks.forEach(O=>{a===O.type&&t.addMark(p,m,a.create({...O.attrs,...e}))}):t.addMark(p,m,a.create(e))})});return AI(r,t,a)},QI=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),$I=(n,e={})=>({state:t,dispatch:r,chain:i})=>{let s=at(n,t.schema),o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>gg(s,{...o,...e})(t)?!0:l.clearNodes()).command(({state:l})=>gg(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},EI=n=>({tr:e,dispatch:t})=>{if(t){let{doc:r}=e,i=Hr(n,0,r.content.size),s=z.create(r,i);e.setSelection(s)}return!0},RI=n=>({tr:e,dispatch:t})=>{if(t){let{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=V.atStart(r).from,l=V.atEnd(r).to,a=Hr(i,o,l),c=Hr(s,o,l),h=V.create(r,a,c);e.setSelection(h)}return!0},DI=n=>({state:e,dispatch:t})=>{let r=at(n,e.schema);return Gk(r)(e,t)};NI=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{let{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,h=gu(c,l.node().type.name,l.node().attrs);if(s instanceof z&&s.node.isBlock)return!l.parentOffset||!yn(o,l.pos)?!1:(r&&(n&&oS(t,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;let u=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:kI(l.node(-1).contentMatchAt(l.indexAfter(-1))),d=u&&f?[{type:f,attrs:h}]:void 0,p=yn(e.doc,e.mapping.map(l.pos),1,d);if(!d&&!p&&yn(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,d=f?[{type:f,attrs:h}]:void 0),r){if(p&&(s instanceof V&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,d),f&&!u&&!l.parentOffset&&l.parent.type!==f)){let m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}n&&oS(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},LI=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var o;let l=at(n,r.schema),{$from:a,$to:c}=r.selection,h=r.selection.node;if(h&&h.isBlock||a.depth<2||!a.sameParent(c))return!1;let u=a.node(-1);if(u.type!==l)return!1;let f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let O=A.empty,w=a.index(-1)?1:a.index(-2)?2:3;for(let C=a.depth-w;C>=a.depth-3;C-=1)O=A.from(a.node(C).copy(O));let k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b={...gu(f,a.node().type.name,a.node().attrs),...e},v=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(b))||void 0;O=O.append(A.from(l.createAndFill(null,v)||void 0));let x=a.before(a.depth-(w-1));t.replace(x,a.after(-k),new E(O,4-w,0));let T=-1;t.doc.nodesBetween(x,t.doc.content.size,(C,M)=>{if(T>-1)return!1;C.isTextblock&&C.content.size===0&&(T=M+1)}),T>-1&&t.setSelection(V.near(t.doc.resolve(T))),t.scrollIntoView()}return!0}let d=c.pos===a.end()?u.contentMatchAt(0).defaultType:null,p={...gu(f,u.type.name,u.attrs),...e},m={...gu(f,a.node().type.name,a.node().attrs),...e};t.delete(a.pos,c.pos);let g=d?[{type:l,attrs:p},{type:d,attrs:m}]:[{type:l,attrs:p}];if(!yn(t.doc,a.pos,2))return!1;if(i){let{selection:O,storedMarks:w}=r,{splittableMarks:k}=s.extensionManager,b=w||O.$to.parentOffset&&O.$from.marks();if(t.split(a.pos,2,g).scrollIntoView(),!b||!i)return!0;let v=b.filter(x=>k.includes(x.type.name));t.ensureMarks(v)}return!0},bg=(n,e)=>{let t=Rg(o=>o.type===e)(n.selection);if(!t)return!0;let r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;let i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Vn(n.doc,t.pos)&&n.join(t.pos),!0},wg=(n,e)=>{let t=Rg(o=>o.type===e)(n.selection);if(!t)return!0;let r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;let i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Vn(n.doc,r)&&n.join(r),!0},II=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:h})=>{let{extensions:u,splittableMarks:f}=i.extensionManager,d=at(n,o.schema),p=at(e,o.schema),{selection:m,storedMarks:g}=o,{$from:O,$to:w}=m,k=O.blockRange(w),b=g||m.$to.parentOffset&&m.$from.marks();if(!k)return!1;let v=Rg(x=>sS(x.type.name,u))(m);if(k.depth>=1&&v&&k.depth-v.depth<=1){if(v.node.type===d)return c.liftListItem(p);if(sS(v.node.type.name,u)&&d.validContent(v.node.content)&&l)return a().command(()=>(s.setNodeMarkup(v.pos,d),!0)).command(()=>bg(s,d)).command(()=>wg(s,d)).run()}return!t||!b||!l?a().command(()=>h().wrapInList(d,r)?!0:c.clearNodes()).wrapInList(d,r).command(()=>bg(s,d)).command(()=>wg(s,d)).run():a().command(()=>{let x=h().wrapInList(d,r),T=b.filter(C=>f.includes(C.type.name));return s.ensureMarks(T),x?!0:c.clearNodes()}).wrapInList(d,r).command(()=>bg(s,d)).command(()=>wg(s,d)).run()},_I=(n,e={},t={})=>({state:r,commands:i})=>{let{extendEmptyMarkRange:s=!1}=t,o=Ri(n,r.schema);return Tg(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},BI=(n,e,t={})=>({state:r,commands:i})=>{let s=at(n,r.schema),o=at(e,r.schema),l=Ta(r,s,t),a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...t})},VI=(n,e={})=>({state:t,commands:r})=>{let i=at(n,t.schema);return Ta(t,i,e)?r.lift(i):r.wrapIn(i,e)},XI=()=>({state:n,dispatch:e})=>{let t=n.plugins;for(let r=0;r<t.length;r+=1){let i=t[r],s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){let o=n.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){let a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},zI=()=>({tr:n,dispatch:e})=>{let{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},ZI=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;let{extendEmptyMarkRange:o=!1}=e,{selection:l}=t,a=Ri(n,r.schema),{$from:c,empty:h,ranges:u}=l;if(!i)return!0;if(h&&o){let{from:f,to:d}=l,p=(s=c.marks().find(g=>g.type===a))===null||s===void 0?void 0:s.attrs,m=Qg(c,a,p);m&&(f=m.from,d=m.to),t.removeMark(f,d,a)}else u.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,a)});return t.removeStoredMark(a),!0},qI=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null,l=Su(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(s=at(n,r.schema)),l==="mark"&&(o=Ri(n,r.schema)),i&&t.selection.ranges.forEach(a=>{let c=a.$from.pos,h=a.$to.pos,u,f,d,p;t.selection.empty?r.doc.nodesBetween(c,h,(m,g)=>{s&&s===m.type&&(d=Math.max(g,c),p=Math.min(g+m.nodeSize,h),u=g,f=m)}):r.doc.nodesBetween(c,h,(m,g)=>{g<c&&s&&s===m.type&&(d=Math.max(g,c),p=Math.min(g+m.nodeSize,h),u=g,f=m),g>=c&&g<=h&&(s&&s===m.type&&t.setNodeMarkup(g,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(O=>{if(o===O.type){let w=Math.max(g,c),k=Math.min(g+m.nodeSize,h);t.addMark(w,k,o.create({...O.attrs,...e}))}}))}),f&&(u!==void 0&&t.setNodeMarkup(u,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(m=>{o===m.type&&t.addMark(d,p,o.create({...m.attrs,...e}))}))}),!0):!1},UI=(n,e={})=>({state:t,dispatch:r})=>{let i=at(n,t.schema);return jk(i,e)(t,r)},jI=(n,e={})=>({state:t,dispatch:r})=>{let i=at(n,t.schema);return Hk(i,e)(t,r)},WI=Object.freeze({__proto__:null,blur:EL,clearContent:RL,clearNodes:DL,command:NL,createParagraphNear:LL,cut:IL,deleteCurrentNode:_L,deleteNode:BL,deleteRange:VL,deleteSelection:XL,enter:zL,exitCode:ZL,extendMarkRange:qL,first:UL,focus:WL,forEach:YL,insertContent:HL,insertContentAt:KL,joinBackward:tI,joinDown:eI,joinForward:nI,joinItemBackward:rI,joinItemForward:iI,joinTextblockBackward:sI,joinTextblockForward:oI,joinUp:JL,keyboardShortcut:aI,lift:cI,liftEmptyBlock:hI,liftListItem:uI,newlineInCode:fI,resetAttributes:dI,scrollIntoView:pI,selectAll:mI,selectNodeBackward:gI,selectNodeForward:OI,selectParentNode:yI,selectTextblockEnd:bI,selectTextblockStart:wI,setContent:xI,setMark:MI,setMeta:QI,setNode:$I,setNodeSelection:EI,setTextSelection:RI,sinkListItem:DI,splitBlock:NI,splitListItem:LI,toggleList:II,toggleMark:_I,toggleNode:BI,toggleWrap:VI,undoInputRule:XI,unsetAllMarks:zI,unsetMark:ZI,updateAttributes:qI,wrapIn:UI,wrapInList:jI}),YI=le.create({name:"commands",addCommands(){return{...WI}}}),HI=le.create({name:"drop",addProseMirrorPlugins(){return[new F({key:new ee("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),FI=le.create({name:"editable",addProseMirrorPlugins(){return[new F({key:new ee("editable"),props:{editable:()=>this.editor.options.editable}})]}}),GI=new ee("focusEvents"),KI=le.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:n}=this;return[new F({key:GI,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;let r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;let r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),JI=le.create({name:"keymap",addKeyboardShortcuts(){let n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{let{selection:a,doc:c}=l,{empty:h,$anchor:u}=a,{pos:f,parent:d}=u,p=u.parent.isTextblock&&f>0?l.doc.resolve(f-1):u,m=p.parent.type.spec.isolating,g=u.pos-u.parentOffset,O=m&&p.parent.childCount===1?g===u.pos:Z.atStart(c).from===f;return!h||!d.type.isTextblock||d.textContent.length||!O||O&&u.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return $g()||pS()?s:i},addProseMirrorPlugins(){return[new F({key:new ee("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(m=>m.getMeta("composition")))return;let r=n.some(m=>m.docChanged)&&!e.doc.eq(t.doc),i=n.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;let{empty:s,from:o,to:l}=e.selection,a=Z.atStart(e.doc).from,c=Z.atEnd(e.doc).to;if(s||!(o===a&&l===c)||!Ng(t.doc))return;let f=t.tr,d=bu({state:t,transaction:f}),{commands:p}=new qo({editor:this.editor,state:d});if(p.clearNodes(),!!f.steps.length)return f}})]}}),e_=le.create({name:"paste",addProseMirrorPlugins(){return[new F({key:new ee("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),t_=le.create({name:"tabindex",addProseMirrorPlugins(){return[new F({key:new ee("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Pg=class n{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new n(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new n(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new n(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,r)=>{let i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;let l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;let a=new n(l,this.editor,i,i?t:null);i&&(a.actualDepth=this.depth+1),e.push(new n(l,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){let s=i.node.attrs,o=Object.keys(t);for(let l=0;l<o.length;l+=1){let a=o[l];if(s[a]!==t[a])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;let s=Object.keys(t);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>t[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,t,r))))}),i}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},n_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;yu=class extends xg{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=r_(n_,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let r=aS(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,r=t;if([].concat(e).forEach(s=>{let o=typeof s=="string"?`${s}$`:s.key;r=r.filter(l=>!l.key.startsWith(o))}),t.length===r.length)return;let i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;let i=[...this.options.enableCoreExtensions?[FI,$L.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),YI,KI,JI,t_,HI,e_].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new vg(i,this)}createCommandManager(){this.commandManager=new qo({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Cg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),t=Cg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let r=fS(t,this.options.autofocus);this.view=new wa(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Wh.create({doc:t,selection:r||void 0})});let i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();let s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}let t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});let i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Dg(this.state,e)}isActive(e,t){let r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return PI(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ag(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return SI(this.state.doc,{blockSeparator:t,textSerializers:{...hS(this.schema),...r}})}get isEmpty(){return Ng(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){let t=this.state.doc.resolve(e);return new Pg(t,this)}get $doc(){return this.$pos(0)}};ne=class n{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(I(this,"addOptions",{name:this.name}))),this.storage=te(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new n(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new n(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=te(I(t,"addOptions",{name:t.name})),t.storage=te(I(t,"addStorage",{name:t.name,options:t.options})),t}}});var i_,xS,kS=S(()=>{re();i_=/^\s*>\s$/,xS=ne.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Di({find:i_,type:this.type})]}})});var s_,o_,l_,a_,SS,vS=S(()=>{re();s_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,o_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,l_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,a_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,SS=gt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ur({find:s_,type:this.type}),ur({find:l_,type:this.type})]},addPasteRules(){return[Sn({find:o_,type:this.type}),Sn({find:a_,type:this.type})]}})});var c_,CS,TS,PS,AS=S(()=>{re();c_="listItem",CS="textStyle",TS=/^\s*([-+*])\s$/,PS=ne.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",J(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(c_,this.editor.getAttributes(CS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Di({find:TS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Di({find:TS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(CS),editor:this.editor})),[n]}})});var h_,u_,MS,QS=S(()=>{re();h_=/(^|[^`])`([^`]+)`(?!`)/,u_=/(^|[^`])`([^`]+)`(?!`)/g,MS=gt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ur({find:h_,type:this.type})]},addPasteRules(){return[Sn({find:u_,type:this.type})]}})});var f_,d_,Pu,Lg=S(()=>{re();bn();f_=/^```([a-z]+)?[\s\n]$/,d_=/^~~~([a-z]+)?[\s\n]$/,Pu=ne.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;let{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",J(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;let s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;let{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;let l=i.after();return l===void 0?!1:r.nodeAt(l)?n.commands.command(({tr:c})=>(c.setSelection(Z.near(r.resolve(l))),!0)):n.commands.exitCode()}}},addInputRules(){return[Pa({find:f_,type:this.type,getAttributes:n=>({language:n[1]})}),Pa({find:d_,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new F({key:new ee("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;let t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;let{tr:o,schema:l}=n.state,a=l.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(V.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}})});var $S,ES=S(()=>{re();$S=ne.create({name:"doc",topNode:!0,content:"block+"})});function RS(n={}){return new F({view(e){return new Ig(e,n)}})}var Ig,DS=S(()=>{lt();qr();Ig=class{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(t){let u=e.nodeBefore,f=e.nodeAfter;if(u||f){let d=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(d){let p=d.getBoundingClientRect(),m=u?p.bottom:p.top;u&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*l;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:u.left-f,right:u.left+f,top:u.top,bottom:u.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let c,h;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,h=-pageYOffset;else{let u=a.getBoundingClientRect(),f=u.width/a.offsetWidth,d=u.height/a.offsetHeight;c=u.left-a.scrollLeft*f,h=u.top-a.scrollTop*d}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=qh(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}});var NS=S(()=>{DS()});var LS,IS=S(()=>{re();NS();LS=le.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[RS(this.options)]}})});function p_(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function m_(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _S(){return new F({props:{decorations:b_,createSelectionBetween(n,e,t){return e.pos==t.pos&&At.valid(t)?new At(t):null},handleClick:O_,handleKeyDown:g_,handleDOMEvents:{beforeinput:y_}}})}function Au(n,e){let t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof V){if(!s.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=At.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new At(c))),!0):!1}}function O_(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!At.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&z.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new At(r))),!0)}function y_(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof At))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=A.empty;for(let o=r.length-1;o>=0;o--)i=A.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new E(i,0,0));return s.setSelection(V.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function b_(n){if(!(n.selection instanceof At))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ie.create(n.doc,[rt.widget(n.selection.head,e,{key:"gapcursor"})])}var At,_g,g_,BS=S(()=>{cu();lt();nn();Sa();At=class n extends Z{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return n.valid(r)?new n(r):Z.near(r)}content(){return E.empty}eq(e){return e instanceof n&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new n(e.resolve(t.pos))}getBookmark(){return new _g(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!p_(e)||!m_(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&n.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(t>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let a=e.doc.resolve(i);if(n.valid(a))return a}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!z.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let l=e.doc.resolve(i);if(n.valid(l))return l}return null}}};At.prototype.visible=!1;At.findFrom=At.findGapCursorFrom;Z.jsonID("gapcursor",At);_g=class n{constructor(e){this.pos=e}map(e){return new n(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return At.valid(t)?new At(t):Z.near(t)}};g_=va({ArrowLeft:Au("horiz",-1),ArrowRight:Au("horiz",1),ArrowUp:Au("vert",-1),ArrowDown:Au("vert",1)})});var VS=S(()=>{BS()});var XS,zS=S(()=>{re();VS();XS=le.create({name:"gapCursor",addProseMirrorPlugins(){return[_S()]},extendNodeSchema(n){var e;let t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=te(I(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}})});var ZS,qS=S(()=>{re();ZS=ne.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",J(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{let{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;let{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:h})=>{if(h&&a&&o){let u=a.filter(f=>l.includes(f.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}})});var US,jS=S(()=>{re();US=ne.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,J(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Pa({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}})});var Mu,Ot,WS,w_,Bg,YS=S(()=>{Mu=200,Ot=function(){};Ot.prototype.append=function(e){return e.length?(e=Ot.from(e),!this.length&&e||e.length<Mu&&this.leafAppend(e)||this.length<Mu&&e.leafPrepend(this)||this.appendInner(e)):this};Ot.prototype.prepend=function(e){return e.length?Ot.from(e).append(this):this};Ot.prototype.appendInner=function(e){return new w_(this,e)};Ot.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Ot.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Ot.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ot.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Ot.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};Ot.from=function(e){return e instanceof Ot?e:e&&e.length?new WS(e):Ot.empty};WS=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Mu)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Mu)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Ot);Ot.empty=new WS([]);w_=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ot),Bg=Ot});function k_(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}function v_(n,e,t,r){let i=t.getMeta(Rs),s;if(i)return i.historyState;t.getMeta(P_)&&(n=new dr(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Rs))return o.getMeta(Rs).redo?new dr(n.done.addTransform(t,void 0,r,Qu(e)),n.undone,HS(t.mapping.maps),n.prevTime,n.prevComposition):new dr(n.done,n.undone.addTransform(t,void 0,r,Qu(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),a=n.prevTime==0||!o&&n.prevComposition!=l&&(n.prevTime<(t.time||0)-r.newGroupDelay||!C_(t,n.prevRanges)),c=o?Vg(n.prevRanges,t.mapping):HS(t.mapping.maps);return new dr(n.done.addTransform(t,a?e.selection.getBookmark():void 0,r,Qu(e)),Ds.empty,c,t.time,l==null?n.prevComposition:l)}else return(s=t.getMeta("rebased"))?new dr(n.done.rebased(t,s),n.undone.rebased(t,s),Vg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new dr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Vg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function C_(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function HS(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,o)=>e.push(s,o));return e}function Vg(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function T_(n,e,t){let r=Qu(e),i=Rs.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new dr(t?l:s.remaining,t?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Rs,{redo:t,historyState:a})}function Qu(n){let e=n.plugins;if(FS!=e){Xg=!1,FS=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Xg=!0;break}}return Xg}function GS(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new F({key:Rs,state:{init(){return new dr(Ds.empty,Ds.empty,null,0,-1)},apply(e,t,r){return v_(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?zg:r=="historyRedo"?Zg:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function $u(n,e){return(t,r)=>{let i=Rs.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=T_(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}var x_,Ds,fr,dr,S_,Xg,FS,Rs,P_,zg,Zg,LY,IY,KS=S(()=>{YS();qr();lt();x_=500,Ds=class n{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],h=[];return this.items.forEach((u,f)=>{if(!u.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,h.push(u);return}if(i){h.push(new fr(u.map));let d=u.step.map(i.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new fr(p,void 0,void 0,c.length+h.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(u.step);if(u.selection)return l=i?u.selection.map(i.slice(s)):u.selection,a=new n(this.items.slice(0,r).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,t,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<e.steps.length;h++){let u=e.steps[h].invert(e.docs[h]),f=new fr(e.mapping.maps[h],u,t),d;(d=a&&a.merge(f))&&(f=d,h?s.pop():l=l.slice(0,l.length-1)),s.push(f),t&&(o++,t=void 0),i||(a=f)}let c=o-r.depth;return c>S_&&(l=k_(l,c),o-=c),new n(l.append(s),o)}remapping(e,t){let r=new ca;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new n(this.items.append(e.map(t=>new fr(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=t;this.items.forEach(f=>{let d=s.getMirror(--a);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(f.step){let m=e.steps[d].invert(e.docs[d]),g=f.selection&&f.selection.map(s.slice(a+1,d));g&&l++,r.push(new fr(p,m,g))}else r.push(new fr(p))},i);let c=[];for(let f=t;f<o;f++)c.push(new fr(s.maps[f]));let h=this.items.slice(0,i).append(c).append(r),u=new n(h,l);return u.emptyItemCount()>x_&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(t.slice(r)),c=a&&a.getMap();if(r--,c&&t.appendMap(c,r),a){let h=o.selection&&o.selection.map(t.slice(r));h&&s++;let u=new fr(c.invert(),a,h),f,d=i.length-1;(f=i.length&&i[d].merge(u))?i[d]=f:i.push(u)}}else o.map&&r--},this.items.length,0),new n(Bg.from(i.reverse()),s)}};Ds.empty=new Ds(Bg.empty,0);fr=class n{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new n(t.getMap().invert(),t,this.selection)}}},dr=class{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}},S_=20;Xg=!1,FS=null;Rs=new ee("history"),P_=new ee("closeHistory");zg=$u(!1,!0),Zg=$u(!0,!0),LY=$u(!1,!1),IY=$u(!0,!1)});var JS=S(()=>{KS()});var ev,tv=S(()=>{re();JS();ev=le.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>zg(n,e),redo:()=>({state:n,dispatch:e})=>Zg(n,e)}},addProseMirrorPlugins(){return[GS(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}})});var nv,rv=S(()=>{re();bn();nv=ne.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",J(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!wS(e,e.schema.nodes[this.name]))return!1;let{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Cu(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){let{$to:c}=o.selection,h=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(V.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(z.create(o.doc,c.pos)):o.setSelection(V.create(o.doc,c.pos));else{let u=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();u&&(o.insert(h,u),o.setSelection(V.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Tu({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}})});var A_,M_,Q_,$_,iv,sv=S(()=>{re();A_=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,M_=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Q_=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,$_=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,iv=gt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ur({find:A_,type:this.type}),ur({find:Q_,type:this.type})]},addPasteRules(){return[Sn({find:M_,type:this.type}),Sn({find:$_,type:this.type})]}})});var ov,lv=S(()=>{re();ov=ne.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",J(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}})});var E_,av,cv,hv,uv=S(()=>{re();E_="listItem",av="textStyle",cv=/^(\d+)\.\s$/,hv=ne.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){let{start:e,...t}=n;return e===1?["ol",J(this.options.HTMLAttributes,t),0]:["ol",J(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E_,this.editor.getAttributes(av)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Di({find:cv,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Di({find:cv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(av)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}})});var fv,dv=S(()=>{re();fv=ne.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}})});var R_,D_,pv,mv=S(()=>{re();R_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,D_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,pv=gt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ur({find:R_,type:this.type})]},addPasteRules(){return[Sn({find:D_,type:this.type})]}})});var gv,Ov=S(()=>{re();gv=ne.create({name:"text",group:"inline"})});var yv,bv=S(()=>{re();kS();vS();AS();QS();Lg();ES();IS();zS();qS();jS();tv();rv();sv();lv();uv();dv();mv();Ov();yv=le.create({name:"starterKit",addExtensions(){let n=[];return this.options.bold!==!1&&n.push(SS.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(xS.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(PS.configure(this.options.bulletList)),this.options.code!==!1&&n.push(MS.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(Pu.configure(this.options.codeBlock)),this.options.document!==!1&&n.push($S.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(LS.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(XS.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(ZS.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(US.configure(this.options.heading)),this.options.history!==!1&&n.push(ev.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(nv.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(iv.configure(this.options.italic)),this.options.listItem!==!1&&n.push(ov.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(hv.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(fv.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(pv.configure(this.options.strike)),this.options.text!==!1&&n.push(gv.configure(this.options.text)),n}})});var wv,xv=S(()=>{re();wv=gt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",J(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}})});function B_(n,e){return n in e||(e[n]=[]),e[n]}function Ns(n,e,t){e[Fg]&&(e[Qa]=!0,e[Ma]=!0),e[Gg]&&(e[Qa]=!0,e[Kg]=!0),e[Qa]&&(e[Ma]=!0),e[Kg]&&(e[Ma]=!0),e[Ma]&&(e[Jg]=!0),e[Av]&&(e[Jg]=!0);for(let r in e){let i=B_(r,t);i.indexOf(n)<0&&i.push(n)}}function V_(n,e){let t={};for(let r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Wt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}function Z_(n=[]){let e={};Wt.groups=e;let t=new Wt;Eu==null&&(Eu=vv(N_)),Ru==null&&(Ru=vv(L_)),Q(t,"'",Gu),Q(t,"{",$a),Q(t,"}",Ea),Q(t,"[",Lu),Q(t,"]",Iu),Q(t,"(",_u),Q(t,")",Bu),Q(t,"<",Vu),Q(t,">",Xu),Q(t,"\uFF08",zu),Q(t,"\uFF09",Zu),Q(t,"\u300C",qu),Q(t,"\u300D",Uu),Q(t,"\u300E",ju),Q(t,"\u300F",Wu),Q(t,"\uFF1C",Yu),Q(t,"\uFF1E",Hu),Q(t,"&",Fu),Q(t,"*",Ku),Q(t,"@",Li),Q(t,"`",ef),Q(t,"^",tf),Q(t,":",Ii),Q(t,",",oO),Q(t,"$",nf),Q(t,".",pr),Q(t,"=",rf),Q(t,"!",lO),Q(t,"-",Cn),Q(t,"%",Ra),Q(t,"|",sf),Q(t,"+",of),Q(t,"#",lf),Q(t,"?",Da),Q(t,'"',aO),Q(t,"/",mr),Q(t,";",cO),Q(t,"~",Na),Q(t,"_",af),Q(t,"\\",Ju),Q(t,"\u30FB",$v);let r=Ve(t,Gr,iO,{[Fg]:!0});Ve(r,Gr,r);let i=Ve(r,Fr,Mv,{[Qa]:!0}),s=Ve(r,Aa,Qv,{[Ma]:!0}),o=Ve(t,Fr,Kr,{[Gg]:!0});Ve(o,Gr,i),Ve(o,Fr,o),Ve(i,Gr,i),Ve(i,Fr,i);let l=Ve(t,Aa,eO,{[Kg]:!0});Ve(l,Fr),Ve(l,Gr,s),Ve(l,Aa,l),Ve(s,Gr,s),Ve(s,Fr),Ve(s,Aa,s);let a=Q(t,Wg,sO,{[qg]:!0}),c=Q(t,Sv,rO,{[qg]:!0}),h=Ve(t,jg,rO,{[qg]:!0});Q(t,Yg,h),Q(c,Wg,a),Q(c,Yg,h),Ve(c,jg,h),Q(h,Sv),Q(h,Wg),Ve(h,jg,h),Q(h,Yg,h);let u=Ve(t,Ug,Ev,{[Av]:!0});Q(u,"#"),Ve(u,Ug,u),Q(u,X_,u);let f=Q(u,z_);Q(f,"#"),Ve(f,Ug,u);let d=[[Fr,o],[Gr,i]],p=[[Fr,null],[Aa,l],[Gr,s]];for(let m=0;m<Eu.length;m++)Ni(t,Eu[m],tO,Kr,d);for(let m=0;m<Ru.length;m++)Ni(t,Ru[m],nO,eO,p);Ns(tO,{tld:!0,ascii:!0},e),Ns(nO,{utld:!0,alpha:!0},e),Ni(t,"file",Nu,Kr,d),Ni(t,"mailto",Nu,Kr,d),Ni(t,"http",Uo,Kr,d),Ni(t,"https",Uo,Kr,d),Ni(t,"ftp",Uo,Kr,d),Ni(t,"ftps",Uo,Kr,d),Ns(Nu,{scheme:!0,ascii:!0},e),Ns(Uo,{slashscheme:!0,ascii:!0},e),n=n.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<n.length;m++){let g=n[m][0],w=n[m][1]?{[I_]:!0}:{[__]:!0};g.indexOf("-")>=0?w[Jg]=!0:Fr.test(g)?Gr.test(g)?w[Qa]=!0:w[Gg]=!0:w[Fg]=!0,kv(t,g,g,w)}return kv(t,"localhost",La,{ascii:!0}),t.jd=new Wt(cf),{start:t,tokens:Object.assign({groups:e},Rv)}}function Dv(n,e){let t=q_(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=t.length,i=[],s=0,o=0;for(;o<r;){let l=n,a=null,c=0,h=null,u=-1,f=-1;for(;o<r&&(a=l.go(t[o]));)l=a,l.accepts()?(u=0,f=0,h=l):u>=0&&(u+=t[o].length,f++),c+=t[o].length,s+=t[o].length,o++;s-=u,o-=f,c-=u,i.push({t:h.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function q_(n){let e=[],t=n.length,r=0;for(;r<t;){let i=n.charCodeAt(r),s,o=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function Ni(n,e,t,r,i){let s,o=e.length;for(let l=0;l<o-1;l++){let a=e[l];n.j[a]?s=n.j[a]:(s=new Wt(r),s.jr=i.slice(),n.j[a]=s),n=s}return s=new Wt(t),s.jr=i.slice(),n.j[e[o-1]]=s,s}function vv(n){let e=[],t=[],r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(n.substring(r,r+s),10);o>0;o--)t.pop();r+=s}else t.push(n[r]),r++}return e}function hO(n,e=null){let t=Object.assign({},Ia);n&&(t=Object.assign(t,n instanceof hO?n.o:n));let r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}function Cv(n){return n}function Nv(n,e){this.t="token",this.v=n,this.tk=e}function hf(n,e){class t extends Nv{constructor(i,s){super(i,s),this.t=n}}for(let r in e)t.prototype[r]=e[r];return t.t=n,t}function j_({groups:n}){let e=n.domain.concat([Fu,Ku,Li,Ju,ef,tf,nf,rf,Cn,iO,Ra,sf,of,lf,mr,cf,Na,af]),t=[Gu,Ii,oO,pr,lO,Ra,Da,aO,cO,Vu,Xu,$a,Ea,Iu,Lu,_u,Bu,zu,Zu,qu,Uu,ju,Wu,Yu,Hu],r=[Fu,Gu,Ku,Ju,ef,tf,nf,rf,Cn,$a,Ea,Ra,sf,of,lf,Da,mr,cf,Na,af],i=vn(),s=Q(i,Na);ie(s,r,s),ie(s,n.domain,s);let o=vn(),l=vn(),a=vn();ie(i,n.domain,o),ie(i,n.scheme,l),ie(i,n.slashscheme,a),ie(o,r,s),ie(o,n.domain,o);let c=Q(o,Li);Q(s,Li,c),Q(l,Li,c),Q(a,Li,c);let h=Q(s,pr);ie(h,r,s),ie(h,n.domain,s);let u=vn();ie(c,n.domain,u),ie(u,n.domain,u);let f=Q(u,pr);ie(f,n.domain,u);let d=vn(Tv);ie(f,n.tld,d),ie(f,n.utld,d),Q(c,La,d);let p=Q(u,Cn);Q(p,Cn,p),ie(p,n.domain,u),ie(d,n.domain,u),Q(d,pr,f),Q(d,Cn,p);let m=Q(d,Ii);ie(m,n.numeric,Tv);let g=Q(o,Cn),O=Q(o,pr);Q(g,Cn,g),ie(g,n.domain,o),ie(O,r,s),ie(O,n.domain,o);let w=vn(Du);ie(O,n.tld,w),ie(O,n.utld,w),ie(w,n.domain,o),ie(w,r,s),Q(w,pr,O),Q(w,Cn,g),Q(w,Li,c);let k=Q(w,Ii),b=vn(Du);ie(k,n.numeric,b);let v=vn(Du),x=vn();ie(v,e,v),ie(v,t,x),ie(x,e,v),ie(x,t,x),Q(w,mr,v),Q(b,mr,v);let T=Q(l,Ii),C=Q(a,Ii),M=Q(C,mr),$=Q(M,mr);ie(l,n.domain,o),Q(l,pr,O),Q(l,Cn,g),ie(a,n.domain,o),Q(a,pr,O),Q(a,Cn,g),ie(T,n.domain,v),Q(T,mr,v),Q(T,Da,v),ie($,n.domain,v),ie($,e,v),Q($,mr,v);let L=[[$a,Ea],[Lu,Iu],[_u,Bu],[Vu,Xu],[zu,Zu],[qu,Uu],[ju,Wu],[Yu,Hu]];for(let D=0;D<L.length;D++){let[W,G]=L[D],oe=Q(v,W);Q(x,W,oe),Q(oe,G,v);let ae=vn(Du);ie(oe,e,ae);let me=vn();ie(oe,t),ie(ae,e,ae),ie(ae,t,me),ie(me,e,ae),ie(me,t,me),Q(ae,G,v),Q(me,G,v)}return Q(i,La,w),Q(i,sO,U_),{start:i,tokens:Rv}}function W_(n,e,t){let r=t.length,i=0,s=[],o=[];for(;i<r;){let l=n,a=null,c=null,h=0,u=null,f=-1;for(;i<r&&!(a=l.go(t[i].t));)o.push(t[i++]);for(;i<r&&(c=a||l.go(t[i].t));)a=null,l=c,l.accepts()?(f=0,u=l):f>=0&&f++,i++,h++;if(f<0)i-=h,i<r&&(o.push(t[i]),i++);else{o.length>0&&(s.push(Hg(Pv,e,o)),o=[]),i-=f,h-=f;let d=u.t,p=t.slice(i-h,i);s.push(Hg(d,e,p))}}return o.length>0&&s.push(Hg(Pv,e,o)),s}function Hg(n,e,t){let r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}function Lv(){return Wt.groups={},Re.scanner=null,Re.parser=null,Re.tokenQueue=[],Re.pluginQueue=[],Re.customSchemes=[],Re.initialized=!1,Re}function uO(n,e=!1){if(Re.initialized&&Y_(`linkifyjs: already initialized - will not register custom scheme "${n}" ${H_}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Re.customSchemes.push([n,e])}function F_(){Re.scanner=Z_(Re.customSchemes);for(let n=0;n<Re.tokenQueue.length;n++)Re.tokenQueue[n][1]({scanner:Re.scanner});Re.parser=j_(Re.scanner.tokens);for(let n=0;n<Re.pluginQueue.length;n++)Re.pluginQueue[n][1]({scanner:Re.scanner,parser:Re.parser});return Re.initialized=!0,Re}function uf(n){return Re.initialized||F_(),W_(Re.parser.start,n,Dv(Re.scanner.start,n))}function fO(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}let r=new hO(t),i=uf(n),s=[];for(let o=0;o<i.length;o++){let l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var N_,L_,Fg,Gg,Kg,Qa,Ma,Jg,Av,I_,__,qg,ie,Ve,kv,Q,Kr,eO,Mv,Qv,La,tO,nO,Nu,Uo,iO,rO,sO,$a,Ea,Lu,Iu,_u,Bu,Vu,Xu,zu,Zu,qu,Uu,ju,Wu,Yu,Hu,Fu,Gu,Ku,Li,Ju,ef,tf,Ii,oO,nf,pr,rf,lO,Cn,Ra,sf,of,lf,Da,aO,$v,cO,mr,Na,af,Ev,cf,Rv,Fr,Aa,Ug,Gr,jg,Sv,Wg,X_,z_,Yg,Eu,Ru,Ia,Tv,Pv,U_,Du,vn,Y_,H_,Re,Iv=S(()=>{N_="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xF6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",L_="\u03B5\u03BB1\u03C52\u0431\u04331\u0435\u043B3\u0434\u0435\u0442\u04384\u0435\u044E2\u043A\u0430\u0442\u043E\u043B\u0438\u043A6\u043E\u043C3\u043C\u043A\u04342\u043E\u043D1\u0441\u043A\u0432\u04306\u043E\u043D\u043B\u0430\u0439\u043D5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043A\u04403\u049B\u0430\u04373\u0570\u0561\u05753\u05D9\u05E9\u05E8\u05D0\u05DC5\u05E7\u05D5\u05DD3\u0627\u0628\u0648\u0638\u0628\u064A5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062F\u06464\u0628\u062D\u0631\u064A\u06465\u062C\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062F\u064A\u06296\u0639\u0644\u064A\u0627\u06465\u0645\u063A\u0631\u06285\u0645\u0627\u0631\u0627\u062A5\u06CC\u0631\u0627\u06465\u0628\u0627\u0631\u062A2\u0632\u0627\u06314\u064A\u062A\u06433\u06BE\u0627\u0631\u062A5\u062A\u0648\u0646\u06334\u0633\u0648\u062F\u0627\u06463\u0631\u064A\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064A\u06466\u0642\u0637\u06313\u0643\u0627\u062B\u0648\u0644\u064A\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064A\u0633\u064A\u06275\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067E\u0627\u06A9\u0633\u062A\u0627\u06467\u0680\u0627\u0631\u062A4\u0915\u0949\u092E3\u0928\u0947\u091F3\u092D\u093E\u0930\u09240\u092E\u094D3\u094B\u09245\u0938\u0902\u0917\u0920\u09285\u09AC\u09BE\u0982\u09B2\u09BE5\u09AD\u09BE\u09B0\u09A42\u09F0\u09A44\u0A2D\u0A3E\u0A30\u0A244\u0AAD\u0ABE\u0AB0\u0AA44\u0B2D\u0B3E\u0B30\u0B244\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE6\u0BB2\u0B99\u0BCD\u0B95\u0BC86\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD11\u0C2D\u0C3E\u0C30\u0C24\u0C4D5\u0CAD\u0CBE\u0CB0\u0CA44\u0D2D\u0D3E\u0D30\u0D24\u0D025\u0DBD\u0D82\u0D9A\u0DCF4\u0E04\u0E2D\u0E213\u0E44\u0E17\u0E223\u0EA5\u0EB2\u0EA73\u10D2\u10D42\u307F\u3093\u306A3\u30A2\u30DE\u30BE\u30F34\u30AF\u30E9\u30A6\u30C94\u30B0\u30FC\u30B0\u30EB4\u30B3\u30E02\u30B9\u30C8\u30A23\u30BB\u30FC\u30EB3\u30D5\u30A1\u30C3\u30B7\u30E7\u30F36\u30DD\u30A4\u30F3\u30C84\u4E16\u754C2\u4E2D\u4FE11\u56FD1\u570B1\u6587\u7F513\u4E9A\u9A6C\u900A3\u4F01\u4E1A2\u4F5B\u5C712\u4FE1\u606F2\u5065\u5EB72\u516B\u53662\u516C\u53F81\u76CA2\u53F0\u6E7E1\u70632\u5546\u57CE1\u5E971\u68072\u5609\u91CC0\u5927\u9152\u5E975\u5728\u7EBF2\u5927\u62FF2\u5929\u4E3B\u65593\u5A31\u4E502\u5BB6\u96FB2\u5E7F\u4E1C2\u5FAE\u535A2\u6148\u55842\u6211\u7231\u4F603\u624B\u673A2\u62DB\u80582\u653F\u52A11\u5E9C2\u65B0\u52A0\u57612\u95FB2\u65F6\u5C1A2\u66F8\u7C4D2\u673A\u67842\u6DE1\u9A6C\u95213\u6E38\u620F2\u6FB3\u95802\u70B9\u770B2\u79FB\u52A82\u7EC4\u7EC7\u673A\u67844\u7F51\u57401\u5E971\u7AD91\u7EDC2\u8054\u901A2\u8C37\u6B4C2\u8D2D\u72692\u901A\u8CA92\u96C6\u56E22\u96FB\u8A0A\u76C8\u79D14\u98DE\u5229\u6D663\u98DF\u54C12\u9910\u53852\u9999\u683C\u91CC\u62C93\u6E2F2\uB2F7\uB1371\uCEF42\uC0BC\uC1312\uD55C\uAD6D2",Fg="numeric",Gg="ascii",Kg="alpha",Qa="asciinumeric",Ma="alphanumeric",Jg="domain",Av="emoji",I_="scheme",__="slashscheme",qg="whitespace";Wt.groups={};Wt.prototype={accepts(){return!!this.t},go(n){let e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){let i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||Wt.groups;let i;return e&&e.j?i=e:(i=new Wt(e),t&&r&&Ns(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this,s=n.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(n[o]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||Wt.groups;let i=this;if(e&&e.j)return i.j[n]=e,e;let s=e,o,l=i.go(n);if(l?(o=new Wt,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Wt,s){if(r)if(o.t&&typeof o.t=="string"){let a=Object.assign(V_(o.t,r),t);Ns(s,a,r)}else t&&Ns(s,t,r);o.t=s}return i.j[n]=o,o}};ie=(n,e,t,r,i)=>n.ta(e,t,r,i),Ve=(n,e,t,r,i)=>n.tr(e,t,r,i),kv=(n,e,t,r,i)=>n.ts(e,t,r,i),Q=(n,e,t,r,i)=>n.tt(e,t,r,i),Kr="WORD",eO="UWORD",Mv="ASCIINUMERICAL",Qv="ALPHANUMERICAL",La="LOCALHOST",tO="TLD",nO="UTLD",Nu="SCHEME",Uo="SLASH_SCHEME",iO="NUM",rO="WS",sO="NL",$a="OPENBRACE",Ea="CLOSEBRACE",Lu="OPENBRACKET",Iu="CLOSEBRACKET",_u="OPENPAREN",Bu="CLOSEPAREN",Vu="OPENANGLEBRACKET",Xu="CLOSEANGLEBRACKET",zu="FULLWIDTHLEFTPAREN",Zu="FULLWIDTHRIGHTPAREN",qu="LEFTCORNERBRACKET",Uu="RIGHTCORNERBRACKET",ju="LEFTWHITECORNERBRACKET",Wu="RIGHTWHITECORNERBRACKET",Yu="FULLWIDTHLESSTHAN",Hu="FULLWIDTHGREATERTHAN",Fu="AMPERSAND",Gu="APOSTROPHE",Ku="ASTERISK",Li="AT",Ju="BACKSLASH",ef="BACKTICK",tf="CARET",Ii="COLON",oO="COMMA",nf="DOLLAR",pr="DOT",rf="EQUALS",lO="EXCLAMATION",Cn="HYPHEN",Ra="PERCENT",sf="PIPE",of="PLUS",lf="POUND",Da="QUERY",aO="QUOTE",$v="FULLWIDTHMIDDLEDOT",cO="SEMI",mr="SLASH",Na="TILDE",af="UNDERSCORE",Ev="EMOJI",cf="SYM",Rv=Object.freeze({__proto__:null,ALPHANUMERICAL:Qv,AMPERSAND:Fu,APOSTROPHE:Gu,ASCIINUMERICAL:Mv,ASTERISK:Ku,AT:Li,BACKSLASH:Ju,BACKTICK:ef,CARET:tf,CLOSEANGLEBRACKET:Xu,CLOSEBRACE:Ea,CLOSEBRACKET:Iu,CLOSEPAREN:Bu,COLON:Ii,COMMA:oO,DOLLAR:nf,DOT:pr,EMOJI:Ev,EQUALS:rf,EXCLAMATION:lO,FULLWIDTHGREATERTHAN:Hu,FULLWIDTHLEFTPAREN:zu,FULLWIDTHLESSTHAN:Yu,FULLWIDTHMIDDLEDOT:$v,FULLWIDTHRIGHTPAREN:Zu,HYPHEN:Cn,LEFTCORNERBRACKET:qu,LEFTWHITECORNERBRACKET:ju,LOCALHOST:La,NL:sO,NUM:iO,OPENANGLEBRACKET:Vu,OPENBRACE:$a,OPENBRACKET:Lu,OPENPAREN:_u,PERCENT:Ra,PIPE:sf,PLUS:of,POUND:lf,QUERY:Da,QUOTE:aO,RIGHTCORNERBRACKET:Uu,RIGHTWHITECORNERBRACKET:Wu,SCHEME:Nu,SEMI:cO,SLASH:mr,SLASH_SCHEME:Uo,SYM:cf,TILDE:Na,TLD:tO,UNDERSCORE:af,UTLD:nO,UWORD:eO,WORD:Kr,WS:rO}),Fr=/[a-z]/,Aa=/\p{L}/u,Ug=/\p{Emoji}/u,Gr=/\d/,jg=/\s/,Sv="\r",Wg=`
`,X_="\uFE0F",z_="\u200D",Yg="\uFFFC",Eu=null,Ru=null;Ia={defaultProtocol:"http",events:null,format:Cv,formatHref:Cv,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};hO.prototype={o:Ia,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){let r=e!=null,i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:Ia[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){let e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};Nv.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){let e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"\u2026":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Ia.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){let e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),o={},l=n.get("className",t,e),a=n.get("target",t,e),c=n.get("rel",t,e),h=n.getObj("attributes",t,e),u=n.getObj("events",t,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),c&&(o.rel=c),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:u}}};Tv=hf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Pv=hf("text"),U_=hf("nl"),Du=hf("url",{isLink:!0,toHref(n=Ia.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){let n=this.tk;return n.length>=2&&n[0].t!==La&&n[1].t===Ii}}),vn=n=>new Wt(n);Y_=typeof console!="undefined"&&console&&console.warn||(()=>{}),H_="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Re={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};uf.scan=Dv});function e5(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function t5(n){return new F({key:new ee("autolink"),appendTransaction:(e,t,r)=>{let i=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;let{tr:o}=r,l=gS(t.doc,[...e]);if(yS(l).forEach(({newRange:c})=>{let h=OS(r.doc,c,d=>d.isTextblock),u,f;if(h.length>1)u=h[0],f=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ");else if(h.length){let d=r.doc.textBetween(c.from,c.to," "," ");if(!K_.test(d))return;u=h[0],f=r.doc.textBetween(u.pos,c.to,void 0," ")}if(u&&f){let d=f.split(G_).filter(Boolean);if(d.length<=0)return!1;let p=d[d.length-1],m=u.pos+f.lastIndexOf(p);if(!p)return!1;let g=uf(p).map(O=>O.toObject(n.defaultProtocol));if(!e5(g))return!1;g.filter(O=>O.isLink).map(O=>({...O,from:m+O.start+1,to:m+O.end+1})).filter(O=>r.schema.marks.code?!r.doc.rangeHasMark(O.from,O.to,r.schema.marks.code):!0).filter(O=>n.validate(O.value)).filter(O=>n.shouldAutoLink(O.value)).forEach(O=>{vu(O.from,O.to,r.doc).some(w=>w.mark.type===n.type)||o.addMark(O.from,O.to,n.type.create({href:O.href}))})}}),!!o.steps.length)return o}})}function n5(n){return new F({key:new ee("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=r.target,l=[];for(;o.nodeName!=="DIV";)l.push(o),o=o.parentNode;if(!l.find(f=>f.nodeName==="A"))return!1;let a=Dg(e.state,n.type.name),c=r.target,h=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:a.href,u=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:a.target;return c&&h?(window.open(h,u),!0):!1}}})}function r5(n){return new F({key:new ee("handlePasteLink"),props:{handlePaste:(e,t,r)=>{let{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});let a=fO(l,{defaultProtocol:n.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!a?!1:n.editor.commands.setMark(n.type,{href:a.href})}}})}function Ls(n,e){let t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{let i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(J_,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var dO,G_,K_,J_,_v,Bv=S(()=>{re();Iv();bn();dO="[\0- \xA0\u1680\u180E\u2000-\u2029\u205F\u3000]",G_=new RegExp(dO),K_=new RegExp(`${dO}$`),J_=new RegExp(dO,"g");_v=gt.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){uO(n);return}uO(n.scheme,n.optionalSlashes)})},onDestroy(){Lv()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Ls(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{let e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Ls(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Ls(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",J(this.options.HTMLAttributes,n),0]:["a",J(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{let{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Ls(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{let{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Ls(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Sn({find:n=>{let e=[];if(n){let{protocols:t,defaultProtocol:r}=this.options,i=fO(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Ls(o,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){let n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(t5({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Ls(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(n5({type:this.type})),this.options.linkOnPaste&&n.push(r5({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}})});var i5,Vv,Xv=S(()=>{re();i5=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Vv=ne.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",J(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Tu({find:i5,type:this.type,getAttributes:n=>{let[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}})});function s5(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);let e=o5(n),t=n.childCount,r=[],i=0,s=null,o=[];for(let c=0,h=e*t;c<h;c++)r[c]=0;for(let c=0,h=0;c<t;c++){let u=n.child(c);h++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==u.childCount)break;let m=u.child(p),{colspan:g,rowspan:O,colwidth:w}=m.attrs;for(let k=0;k<O;k++){if(k+c>=t){(s||(s=[])).push({type:"overlong_rowspan",pos:h,n:O-k});break}let b=i+k*e;for(let v=0;v<g;v++){r[b+v]==0?r[b+v]=h:(s||(s=[])).push({type:"collision",row:c,pos:h,n:g-v});let x=w&&w[v];if(x){let T=(b+v)%e*2,C=o[T];C==null||C!=x&&o[T+1]==1?(o[T]=x,o[T+1]=1):C==x&&o[T+1]++}}}i+=g,h+=m.nodeSize}let f=(c+1)*e,d=0;for(;i<f;)r[i++]==0&&d++;d&&(s||(s=[])).push({type:"missing",row:c,n:d}),h++}(e===0||t===0)&&(s||(s=[])).push({type:"zero_sized"});let l=new Xe(e,t,r,s),a=!1;for(let c=0;!a&&c<o.length;c+=2)o[c]!=null&&o[c+1]<t&&(a=!0);return a&&l5(l,o,n),l}function o5(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){let i=n.child(r),s=0;if(t)for(let o=0;o<r;o++){let l=n.child(o);for(let a=0;a<l.childCount;a++){let c=l.child(a);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){let l=i.child(o);s+=l.attrs.colspan,l.attrs.rowspan>1&&(t=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function l5(n,e,t){n.problems||(n.problems=[]);let r={};for(let i=0;i<n.map.length;i++){let s=n.map[i];if(r[s])continue;r[s]=!0;let o=t.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let l=null,a=o.attrs;for(let c=0;c<a.colspan;c++){let h=(i+c)%n.width,u=e[h*2];u!=null&&(!a.colwidth||a.colwidth[c]!=u)&&((l||(l=a5(a)))[c]=u)}l&&n.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function a5(n){if(n.colwidth)return n.colwidth.slice();let e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Mt(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(let t in n.nodes){let r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}function jo(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function c5(n){for(let e=n.depth;e>0;e--){let t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function Zn(n){let e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Of(n){let e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;let t=jo(e.$head)||h5(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function h5(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){let r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){let r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function OO(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function u5(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function wO(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function Gv(n,e,t){let r=n.node(-1),i=Xe.get(r),s=n.start(-1),o=i.nextCell(n.pos-s,e,t);return o==null?null:n.node(0).resolve(s+o)}function Is(n,e,t=1){let r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Kv(n,e,t=1){let r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<t;i++)r.colwidth.splice(e,0,0)}return r}function f5(n,e,t){let r=Mt(e.type.schema).header_cell;for(let i=0;i<n.height;i++)if(e.nodeAt(n.map[t+i*n.width]).type!=r)return!1;return!0}function p5(n){if(!(n.selection instanceof Se))return null;let e=[];return n.selection.forEachCell((t,r)=>{e.push(rt.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Ie.create(n.doc,e)}function m5({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function g5({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){let s=n.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){t=s;break}}for(let i=e.depth;i>0;i--){let s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return t!==r&&e.parentOffset===0}function O5(n,e,t){let r=(e||n).selection,i=(e||n).doc,s,o;if(r instanceof z&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Se.create(i,r.from);else if(o=="row"){let l=i.resolve(r.from+1);s=Se.rowSelection(l,l)}else if(!t){let l=Xe.get(r.node),a=r.from+1,c=a+l.map[l.width*l.height-1];s=Se.create(i,a+1,c)}}else r instanceof V&&m5(r)?s=V.create(i,r.from):r instanceof V&&g5(r)&&(s=V.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=n.tr)).setSelection(s),e}function eC(n,e,t,r){let i=n.childCount,s=e.childCount;e:for(let o=0,l=0;o<s;o++){let a=e.child(o);for(let c=l,h=Math.min(i,o+3);c<h;c++)if(n.child(c)==a){l=c+1,t+=a.nodeSize;continue e}r(a,t),l<i&&n.child(l).sameMarkup(a)?eC(n.child(l),a,t+1,r):a.nodesBetween(0,a.content.size,r,t+1),t+=a.nodeSize}}function xO(n,e){let t,r=(i,s)=>{i.type.spec.tableRole=="table"&&(t=b5(n,i,s,t))};return e?e.doc!=n.doc&&eC(e.doc,n.doc,0,r):n.doc.descendants(r),t}function b5(n,e,t,r){let i=Xe.get(e);if(!i.problems)return r;r||(r=n.tr);let s=[];for(let a=0;a<i.height;a++)s.push(0);for(let a=0;a<i.problems.length;a++){let c=i.problems[a];if(c.type=="collision"){let h=e.nodeAt(c.pos);if(!h)continue;let u=h.attrs;for(let f=0;f<u.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(t+1+c.pos),null,Is(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){let h=e.nodeAt(c.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(t+1+c.pos),null,{...h.attrs,rowspan:h.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){let h=e.nodeAt(c.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(t+1+c.pos),null,{...h.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){let h=r.mapping.map(t);r.delete(h,h+e.nodeSize)}}let o,l;for(let a=0;a<s.length;a++)s[a]&&(o==null&&(o=a),l=a);for(let a=0,c=t+1;a<i.height;a++){let h=e.child(a),u=c+h.nodeSize,f=s[a];if(f>0){let d="cell";h.firstChild&&(d=h.firstChild.type.spec.tableRole);let p=[];for(let g=0;g<f;g++){let O=Mt(n.schema)[d].createAndFill();O&&p.push(O)}let m=(a==0||o==a-1)&&l==a?c+1:u-1;r.insert(r.mapping.map(m),p)}c=u}return r.setMeta(y5,{fixTables:!0})}function gr(n){let e=n.selection,t=Of(n),r=t.node(-1),i=t.start(-1),s=Xe.get(r);return{...e instanceof Se?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(t.pos-i),tableStart:i,map:s,table:r}}function tC(n,{map:e,tableStart:t,table:r},i){let s=i>0?-1:0;f5(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){let l=o*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){let a=e.map[l],c=r.nodeAt(a);n.setNodeMarkup(n.mapping.map(t+a),null,Kv(c.attrs,i-e.colCount(a))),o+=c.attrs.rowspan-1}else{let a=s==null?Mt(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,c=e.positionAt(o,i,r);n.insert(n.mapping.map(t+c),a.createAndFill())}}return n}function nC(n,e){if(!Zn(n))return!1;if(e){let t=gr(n);e(tC(n.tr,t,t.left))}return!0}function rC(n,e){if(!Zn(n))return!1;if(e){let t=gr(n);e(tC(n.tr,t,t.right))}return!0}function w5(n,{map:e,table:t,tableStart:r},i){let s=n.mapping.maps.length;for(let o=0;o<e.height;){let l=o*e.width+i,a=e.map[l],c=t.nodeAt(a),h=c.attrs;if(i>0&&e.map[l-1]==a||i<e.width-1&&e.map[l+1]==a)n.setNodeMarkup(n.mapping.slice(s).map(r+a),null,Is(h,i-e.colCount(a)));else{let u=n.mapping.slice(s).map(r+a);n.delete(u,u+c.nodeSize)}o+=h.rowspan}}function iC(n,e){if(!Zn(n))return!1;if(e){let t=gr(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let i=t.right-1;w5(r,t,i),i!=t.left;i--){let s=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=Xe.get(s)}e(r)}return!0}function x5(n,e,t){var r;let i=Mt(e.type.schema).header_cell;for(let s=0;s<n.width;s++)if(((r=e.nodeAt(n.map[s+t*n.width]))==null?void 0:r.type)!=i)return!1;return!0}function sC(n,{map:e,tableStart:t,table:r},i){var s;let o=t;for(let c=0;c<i;c++)o+=r.child(c).nodeSize;let l=[],a=i>0?-1:0;x5(e,r,i+a)&&(a=i==0||i==e.height?null:0);for(let c=0,h=e.width*i;c<e.width;c++,h++)if(i>0&&i<e.height&&e.map[h]==e.map[h-e.width]){let u=e.map[h],f=r.nodeAt(u).attrs;n.setNodeMarkup(t+u,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{let u=a==null?Mt(r.type.schema).cell:(s=r.nodeAt(e.map[h+a*e.width]))==null?void 0:s.type,f=u==null?void 0:u.createAndFill();f&&l.push(f)}return n.insert(o,Mt(r.type.schema).row.create(null,l)),n}function oC(n,e){if(!Zn(n))return!1;if(e){let t=gr(n);e(sC(n.tr,t,t.top))}return!0}function lC(n,e){if(!Zn(n))return!1;if(e){let t=gr(n);e(sC(n.tr,t,t.bottom))}return!0}function k5(n,{map:e,table:t,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=t.child(c).nodeSize;let o=s+t.child(i).nodeSize,l=n.mapping.maps.length;n.delete(s+r,o+r);let a=new Set;for(let c=0,h=i*e.width;c<e.width;c++,h++){let u=e.map[h];if(!a.has(u)){if(a.add(u),i>0&&u==e.map[h-e.width]){let f=t.nodeAt(u).attrs;n.setNodeMarkup(n.mapping.slice(l).map(u+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<e.height&&u==e.map[h+e.width]){let f=t.nodeAt(u),d=f.attrs,p=f.type.create({...d,rowspan:f.attrs.rowspan-1},f.content),m=e.positionAt(i+1,c,t);n.insert(n.mapping.slice(l).map(r+m),p),c+=d.colspan-1}}}}function aC(n,e){if(!Zn(n))return!1;if(e){let t=gr(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let i=t.bottom-1;k5(r,t,i),i!=t.top;i--){let s=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=Xe.get(t.table)}e(r)}return!0}function zv(n){let e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function S5({width:n,height:e,map:t},r){let i=r.top*n+r.left,s=i,o=(r.bottom-1)*n+r.left,l=i+(r.right-r.left-1);for(let a=r.top;a<r.bottom;a++){if(r.left>0&&t[s]==t[s-1]||r.right<n&&t[l]==t[l+1])return!0;s+=n,l+=n}for(let a=r.left;a<r.right;a++){if(r.top>0&&t[i]==t[i-n]||r.bottom<e&&t[o]==t[o+n])return!0;i++,o++}return!1}function kO(n,e){let t=n.selection;if(!(t instanceof Se)||t.$anchorCell.pos==t.$headCell.pos)return!1;let r=gr(n),{map:i}=r;if(S5(i,r))return!1;if(e){let s=n.tr,o={},l=A.empty,a,c;for(let h=r.top;h<r.bottom;h++)for(let u=r.left;u<r.right;u++){let f=i.map[h*i.width+u],d=r.table.nodeAt(f);if(!(o[f]||!d))if(o[f]=!0,a==null)a=f,c=d;else{zv(d)||(l=l.append(d.content));let p=s.mapping.map(f+r.tableStart);s.delete(p,p+d.nodeSize)}}if(a==null||c==null)return!0;if(s.setNodeMarkup(a+r.tableStart,null,{...Kv(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),l.size){let h=a+1+c.content.size,u=zv(c)?a+1:h;s.replaceWith(u+r.tableStart,h+r.tableStart,l)}s.setSelection(new Se(s.doc.resolve(a+r.tableStart))),e(s)}return!0}function SO(n,e){let t=Mt(n.schema);return v5(({node:r})=>t[r.type.spec.tableRole])(n,e)}function v5(n){return(e,t)=>{var r;let i=e.selection,s,o;if(i instanceof Se){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=c5(i.$from),!s)return!1;o=(r=jo(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(t){let l=s.attrs,a=[],c=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});let h=gr(e),u=e.tr;for(let d=0;d<h.right-h.left;d++)a.push(c?{...l,colwidth:c&&c[d]?[c[d]]:null}:l);let f;for(let d=h.top;d<h.bottom;d++){let p=h.map.positionAt(d,h.left,h.table);d==h.top&&(p+=s.nodeSize);for(let m=h.left,g=0;m<h.right;m++,g++)m==h.left&&d==h.top||u.insert(f=u.mapping.map(p+h.tableStart,1),n({node:s,row:d,col:m}).createAndFill(a[g]))}u.setNodeMarkup(o,n({node:s,row:h.top,col:h.left}),a[0]),i instanceof Se&&u.setSelection(new Se(u.doc.resolve(i.$anchorCell.pos),f?u.doc.resolve(f):void 0)),t(u)}return!0}}function cC(n,e){return function(t,r){if(!Zn(t))return!1;let i=Of(t);if(i.nodeAfter.attrs[n]===e)return!1;if(r){let s=t.tr;t.selection instanceof Se?t.selection.forEachCell((o,l)=>{o.attrs[n]!==e&&s.setNodeMarkup(l,null,{...o.attrs,[n]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[n]:e}),r(s)}return!0}}function C5(n){return function(e,t){if(!Zn(e))return!1;if(t){let r=Mt(e.schema),i=gr(e),s=e.tr,o=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=o.map(a=>i.table.nodeAt(a));for(let a=0;a<o.length;a++)l[a].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[a],r.cell,l[a].attrs);if(s.steps.length==0)for(let a=0;a<o.length;a++)s.setNodeMarkup(i.tableStart+o[a],r.header_cell,l[a].attrs);t(s)}return!0}}function Zv(n,e,t){let r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){let s=e.table.nodeAt(r[i]);if(s&&s.type!==t.header_cell)return!1}return!0}function Wo(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?C5(n):function(t,r){if(!Zn(t))return!1;if(r){let i=Mt(t.schema),s=gr(t),o=t.tr,l=Zv("row",s,i),a=Zv("column",s,i),h=(n==="column"?l:n==="row"?a:!1)?1:0,u=n=="column"?{left:0,top:h,right:1,bottom:s.map.height}:n=="row"?{left:h,top:0,right:s.map.width,bottom:1}:s,f=n=="column"?a?i.cell:i.header_cell:n=="row"?l?i.cell:i.header_cell:i.cell;s.map.cellsInRect(u).forEach(d=>{let p=d+s.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,f,m.attrs)}),r(o)}return!0}}function T5(n,e){if(e<0){let t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){let s=n.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;let t=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<t.childCount;r++){let s=t.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function vO(n){return function(e,t){if(!Zn(e))return!1;let r=T5(Of(e),n);if(r==null)return!1;if(t){let i=e.doc.resolve(r);t(e.tr.setSelection(V.between(i,u5(i))).scrollIntoView())}return!0}}function uC(n,e){let t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function ff(n,e){let t=n.selection;if(!(t instanceof Se))return!1;if(e){let r=n.tr,i=Mt(n.schema).cell.createAndFill().content;t.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new E(i,0,0))}),r.docChanged&&e(r)}return!0}function P5(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;let i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,l=[];if(s=="row")for(let a=0;a<e.childCount;a++){let c=e.child(a).content,h=a?0:Math.max(0,t-1),u=a<e.childCount-1?0:Math.max(0,r-1);(h||u)&&(c=yO(Mt(o).row,new E(c,h,u)).content),l.push(c)}else if(s=="cell"||s=="header_cell")l.push(t||r?yO(Mt(o).row,new E(e,t,r)).content:e);else return null;return A5(o,l)}function A5(n,e){let t=[];for(let i=0;i<e.length;i++){let s=e[i];for(let o=s.childCount-1;o>=0;o--){let{rowspan:l,colspan:a}=s.child(o).attrs;for(let c=i;c<i+l;c++)t[c]=(t[c]||0)+a}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(A.empty),t[i]<r){let s=Mt(n).cell.createAndFill(),o=[];for(let l=t[i];l<r;l++)o.push(s);e[i]=e[i].append(A.from(o))}return{height:e.length,width:r,rows:e}}function yO(n,e){let t=n.createAndFill();return new vi(t).replace(0,t.content.size,e).doc}function M5({width:n,height:e,rows:t},r,i){if(n!=r){let s=[],o=[];for(let l=0;l<t.length;l++){let a=t[l],c=[];for(let h=s[l]||0,u=0;h<r;u++){let f=a.child(u%a.childCount);h+f.attrs.colspan>r&&(f=f.type.createChecked(Is(f.attrs,f.attrs.colspan,h+f.attrs.colspan-r),f.content)),c.push(f),h+=f.attrs.colspan;for(let d=1;d<f.attrs.rowspan;d++)s[l+d]=(s[l+d]||0)+f.attrs.colspan}o.push(A.from(c))}t=o,n=r}if(e!=i){let s=[];for(let o=0,l=0;o<i;o++,l++){let a=[],c=t[l%e];for(let h=0;h<c.childCount;h++){let u=c.child(h);o+u.attrs.rowspan>i&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,i-u.attrs.rowspan)},u.content)),a.push(u)}s.push(A.from(a))}t=s,e=i}return{width:n,height:e,rows:t}}function Q5(n,e,t,r,i,s,o){let l=n.doc.type.schema,a=Mt(l),c,h;if(i>e.width)for(let u=0,f=0;u<e.height;u++){let d=t.child(u);f+=d.nodeSize;let p=[],m;d.lastChild==null||d.lastChild.type==a.cell?m=c||(c=a.cell.createAndFill()):m=h||(h=a.header_cell.createAndFill());for(let g=e.width;g<i;g++)p.push(m);n.insert(n.mapping.slice(o).map(f-1+r),p)}if(s>e.height){let u=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,i);p++){let g=p>=e.width?!1:t.nodeAt(e.map[m+p]).type==a.header_cell;u.push(g?h||(h=a.header_cell.createAndFill()):c||(c=a.cell.createAndFill()))}let f=a.row.create(null,A.from(u)),d=[];for(let p=e.height;p<s;p++)d.push(f);n.insert(n.mapping.slice(o).map(r+t.nodeSize-2),d)}return!!(c||h)}function qv(n,e,t,r,i,s,o,l){if(o==0||o==e.height)return!1;let a=!1;for(let c=i;c<s;c++){let h=o*e.width+c,u=e.map[h];if(e.map[h-e.width]==u){a=!0;let f=t.nodeAt(u),{top:d,left:p}=e.findCell(u);n.setNodeMarkup(n.mapping.slice(l).map(u+r),null,{...f.attrs,rowspan:o-d}),n.insert(n.mapping.slice(l).map(e.positionAt(o,p,t)),f.type.createAndFill({...f.attrs,rowspan:d+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return a}function Uv(n,e,t,r,i,s,o,l){if(o==0||o==e.width)return!1;let a=!1;for(let c=i;c<s;c++){let h=c*e.width+o,u=e.map[h];if(e.map[h-1]==u){a=!0;let f=t.nodeAt(u),d=e.colCount(u),p=n.mapping.slice(l).map(u+r);n.setNodeMarkup(p,null,Is(f.attrs,o-d,f.attrs.colspan-(o-d))),n.insert(p+f.nodeSize,f.type.createAndFill(Is(f.attrs,0,o-d))),c+=f.attrs.rowspan-1}}return a}function jv(n,e,t,r,i){let s=t?n.doc.nodeAt(t-1):n.doc;if(!s)throw new Error("No table found");let o=Xe.get(s),{top:l,left:a}=r,c=a+i.width,h=l+i.height,u=n.tr,f=0;function d(){if(s=t?u.doc.nodeAt(t-1):u.doc,!s)throw new Error("No table found");o=Xe.get(s),f=u.mapping.maps.length}Q5(u,o,s,t,c,h,f)&&d(),qv(u,o,s,t,a,c,l,f)&&d(),qv(u,o,s,t,a,c,h,f)&&d(),Uv(u,o,s,t,l,h,a,f)&&d(),Uv(u,o,s,t,l,h,c,f)&&d();for(let p=l;p<h;p++){let m=o.positionAt(p,a,s),g=o.positionAt(p,c,s);u.replace(u.mapping.slice(f).map(m+t),u.mapping.slice(f).map(g+t),new E(i.rows[p-l],0,0))}d(),u.setSelection(new Se(u.doc.resolve(t+o.positionAt(l,a,s)),u.doc.resolve(t+o.positionAt(h-1,c-1,s)))),e(u)}function mf(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function df(n,e){return(t,r,i)=>{if(!i)return!1;let s=t.selection;if(s instanceof Se)return mf(t,r,Z.near(s.$headCell,e));if(n!="horiz"&&!s.empty)return!1;let o=fC(i,n,e);if(o==null)return!1;if(n=="horiz")return mf(t,r,Z.near(t.doc.resolve(s.head+e),e));{let l=t.doc.resolve(o),a=Gv(l,n,e),c;return a?c=Z.near(a,1):e<0?c=Z.near(t.doc.resolve(l.before(-1)),-1):c=Z.near(t.doc.resolve(l.after(-1)),1),mf(t,r,c)}}}function pf(n,e){return(t,r,i)=>{if(!i)return!1;let s=t.selection,o;if(s instanceof Se)o=s;else{let a=fC(i,n,e);if(a==null)return!1;o=new Se(t.doc.resolve(a))}let l=Gv(o.$headCell,n,e);return l?mf(t,r,new Se(o.$anchorCell,l)):!1}}function E5(n,e){let t=n.state.doc,r=jo(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Se(r))),!0):!1}function R5(n,e,t){if(!Zn(n.state))return!1;let r=P5(t),i=n.state.selection;if(i instanceof Se){r||(r={width:1,height:1,rows:[A.from(yO(Mt(n.state.schema).cell,t))]});let s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),l=Xe.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=M5(r,l.right-l.left,l.bottom-l.top),jv(n.state,n.dispatch,o,l,r),!0}else if(r){let s=Of(n.state),o=s.start(-1);return jv(n.state,n.dispatch,o,Xe.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function D5(n,e){var t;if(e.ctrlKey||e.metaKey)return;let r=Wv(n,e.target),i;if(e.shiftKey&&n.state.selection instanceof Se)s(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=jo(n.state.selection.$anchor))!=null&&((t=pO(n,e))==null?void 0:t.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(a,c){let h=pO(n,c),u=_i.getState(n.state)==null;if(!h||!wO(a,h))if(u)h=a;else return;let f=new Se(a,h);if(u||!n.state.selection.eq(f)){let d=n.state.tr.setSelection(f);u&&d.setMeta(_i,a.pos),n.dispatch(d)}}function o(){n.root.removeEventListener("mouseup",o),n.root.removeEventListener("dragstart",o),n.root.removeEventListener("mousemove",l),_i.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(_i,-1))}function l(a){let c=a,h=_i.getState(n.state),u;if(h!=null)u=n.state.doc.resolve(h);else if(Wv(n,c.target)!=r&&(u=pO(n,e),!u))return o();u&&s(u,c)}n.root.addEventListener("mouseup",o),n.root.addEventListener("dragstart",o),n.root.addEventListener("mousemove",l)}function fC(n,e,t){if(!(n.state.selection instanceof V))return null;let{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){let s=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){let l=r.before(i),a=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(a)?l:null}}return null}function Wv(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function pO(n,e){let t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?jo(n.state.doc.resolve(t.pos)):null}function bO(n,e,t,r,i,s){var o;let l=0,a=!0,c=e.firstChild,h=n.firstChild;if(h){for(let u=0,f=0;u<h.childCount;u++){let{colspan:d,colwidth:p}=h.child(u).attrs;for(let m=0;m<d;m++,f++){let g=i==f?s:p&&p[m],O=g?g+"px":"";if(l+=g||r,g||(a=!1),c)c.style.width!=O&&(c.style.width=O),c=c.nextSibling;else{let w=document.createElement("col");w.style.width=O,e.appendChild(w)}}}for(;c;){let u=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=u}a?(t.style.width=l+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=l+"px")}}function dC({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=N5,lastColumnResizable:i=!0}={}){let s=new F({key:rn,state:{init(o,l){var a,c;let h=(c=(a=s.spec)==null?void 0:a.props)==null?void 0:c.nodeViews,u=Mt(l.schema).table.name;return r&&h&&(h[u]=(f,d)=>new r(f,t,d)),new L5(-1,!1)},apply(o,l){return l.apply(o)}},props:{attributes:o=>{let l=rn.getState(o);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,l)=>{I5(o,l,n,i)},mouseleave:o=>{_5(o)},mousedown:(o,l)=>{B5(o,l,e,t)}},decorations:o=>{let l=rn.getState(o);if(l&&l.activeHandle>-1)return q5(o,l.activeHandle)},nodeViews:{}}});return s}function I5(n,e,t,r){if(!n.editable)return;let i=rn.getState(n.state);if(i&&!i.dragging){let s=X5(e.target),o=-1;if(s){let{left:l,right:a}=s.getBoundingClientRect();e.clientX-l<=t?o=Yv(n,e,"left",t):a-e.clientX<=t&&(o=Yv(n,e,"right",t))}if(o!=i.activeHandle){if(!r&&o!==-1){let l=n.state.doc.resolve(o),a=l.node(-1),c=Xe.get(a),h=l.start(-1);if(c.colCount(l.pos-h)+l.nodeAfter.attrs.colspan-1==c.width-1)return}pC(n,o)}}}function _5(n){if(!n.editable)return;let e=rn.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&pC(n,-1)}function B5(n,e,t,r){var i;if(!n.editable)return!1;let s=(i=n.dom.ownerDocument.defaultView)!=null?i:window,o=rn.getState(n.state);if(!o||o.activeHandle==-1||o.dragging)return!1;let l=n.state.doc.nodeAt(o.activeHandle),a=V5(n,o.activeHandle,l.attrs);n.dispatch(n.state.tr.setMeta(rn,{setDragging:{startX:e.clientX,startWidth:a}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",h);let f=rn.getState(n.state);f!=null&&f.dragging&&(z5(n,f.activeHandle,Hv(f.dragging,u,t)),n.dispatch(n.state.tr.setMeta(rn,{setDragging:null})))}function h(u){if(!u.which)return c(u);let f=rn.getState(n.state);if(f&&f.dragging){let d=Hv(f.dragging,u,t);Fv(n,f.activeHandle,d,r)}}return Fv(n,o.activeHandle,a,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",h),e.preventDefault(),!0}function V5(n,e,{colspan:t,colwidth:r}){let i=r&&r[r.length-1];if(i)return i;let s=n.domAtPos(e),l=s.node.childNodes[s.offset].offsetWidth,a=t;if(r)for(let c=0;c<t;c++)r[c]&&(l-=r[c],a--);return l/a}function X5(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function Yv(n,e,t,r){let i=t=="right"?-r:r,s=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;let{pos:o}=s,l=jo(n.state.doc.resolve(o));if(!l)return-1;if(t=="right")return l.pos;let a=Xe.get(l.node(-1)),c=l.start(-1),h=a.map.indexOf(l.pos-c);return h%a.width==0?-1:c+a.map[h-1]}function Hv(n,e,t){let r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function pC(n,e){n.dispatch(n.state.tr.setMeta(rn,{setHandle:e}))}function z5(n,e,t){let r=n.state.doc.resolve(e),i=r.node(-1),s=Xe.get(i),o=r.start(-1),l=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,a=n.state.tr;for(let c=0;c<s.height;c++){let h=c*s.width+l;if(c&&s.map[h]==s.map[h-s.width])continue;let u=s.map[h],f=i.nodeAt(u).attrs,d=f.colspan==1?0:l-s.colCount(u);if(f.colwidth&&f.colwidth[d]==t)continue;let p=f.colwidth?f.colwidth.slice():Z5(f.colspan);p[d]=t,a.setNodeMarkup(o+u,null,{...f,colwidth:p})}a.docChanged&&n.dispatch(a)}function Fv(n,e,t,r){let i=n.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),l=Xe.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1,a=n.domAtPos(i.start(-1)).node;for(;a&&a.nodeName!="TABLE";)a=a.parentNode;a&&bO(s,a.firstChild,a,r,l,t)}function Z5(n){return Array(n).fill(0)}function q5(n,e){var t;let r=[],i=n.doc.resolve(e),s=i.node(-1);if(!s)return Ie.empty;let o=Xe.get(s),l=i.start(-1),a=o.colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){let h=a+c*o.width;if((a==o.width-1||o.map[h]!=o.map[h+1])&&(c==0||o.map[h]!=o.map[h-o.width])){let u=o.map[h],f=l+u+s.nodeAt(u).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",(t=rn.getState(n))!=null&&t.dragging&&r.push(rt.node(l+u,l+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),r.push(rt.widget(f,d))}}return Ie.create(n.doc,r)}function mC({allowTableNodeSelection:n=!1}={}){return new F({key:_i,state:{init(){return null},apply(e,t){let r=e.getMeta(_i);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;let{deleted:i,pos:s}=e.mapping.mapResult(t);return i?null:s}},props:{decorations:p5,handleDOMEvents:{mousedown:D5},createSelectionBetween(e){return _i.getState(e.state)!=null?e.state.selection:null},handleTripleClick:E5,handleKeyDown:$5,handlePaste:R5},appendTransaction(e,t,r){return O5(r,xO(r,t),n)}})}var mO,gO,Xe,_i,Se,d5,y5,U7,j7,hC,$5,N5,rn,L5,gC=S(()=>{lt();nn();lt();Sa();lt();lt();cu();nn();lt();nn();lt();nn();qr();lt();Sa();if(typeof WeakMap!="undefined"){let n=new WeakMap;mO=e=>n.get(e),gO=(e,t)=>(n.set(e,t),t)}else{let n=[],t=0;mO=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},gO=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}Xe=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){let t=this.map[e];if(t!=n)continue;let r=e%this.width,i=e/this.width|0,s=r+1,o=i+1;for(let l=1;s<this.width&&this.map[e+l]==t;l++)s++;for(let l=1;o<this.height&&this.map[e+this.width*l]==t;l++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){let{left:r,right:i,top:s,bottom:o}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[s*this.width+(t<0?r-1:i)]:(t<0?s==0:o==this.height)?null:this.map[r+this.width*(t<0?s-1:o)]}rectBetween(n,e){let{left:t,right:r,top:i,bottom:s}=this.findCell(n),{left:o,right:l,top:a,bottom:c}=this.findCell(e);return{left:Math.min(t,o),top:Math.min(i,a),right:Math.max(r,l),bottom:Math.max(s,c)}}cellsInRect(n){let e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){let s=r*this.width+i,o=this.map[s];t[o]||(t[o]=!0,!(i==n.left&&i&&this.map[s-1]==o||r==n.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){let s=i+t.child(r).nodeSize;if(r==n){let o=e+n*this.width,l=(n+1)*this.width;for(;o<l&&this.map[o]<i;)o++;return o==l?s-1:this.map[o]}i=s}}static get(n){return mO(n)||gO(n,s5(n))}};_i=new ee("selectingCells");Se=class Jr extends Z{constructor(e,t=e){let r=e.node(-1),i=Xe.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,t.pos-s),l=e.node(0),a=i.cellsInRect(o).filter(h=>h!=t.pos-s);a.unshift(t.pos-s);let c=a.map(h=>{let u=r.nodeAt(h);if(!u)throw RangeError(`No cell with offset ${h} found`);let f=s+h+1;return new Ci(l.resolve(f),l.resolve(f+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=t}map(e,t){let r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(OO(r)&&OO(i)&&wO(r,i)){let s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Jr.rowSelection(r,i):s&&this.isColSelection()?Jr.colSelection(r,i):new Jr(r,i)}return V.between(r,i)}content(){let e=this.$anchorCell.node(-1),t=Xe.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let a=i.top;a<i.bottom;a++){let c=[];for(let h=a*t.width+i.left,u=i.left;u<i.right;u++,h++){let f=t.map[h];if(s[f])continue;s[f]=!0;let d=t.findCell(f),p=e.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);let m=i.left-d.left,g=d.right-i.right;if(m>0||g>0){let O=p.attrs;if(m>0&&(O=Is(O,0,m)),g>0&&(O=Is(O,O.colspan-g,g)),d.left<i.left){if(p=p.type.createAndFill(O),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(O)}`)}else p=p.type.create(O,p.content)}if(d.top<i.top||d.bottom>i.bottom){let O={...p.attrs,rowspan:Math.min(d.bottom,i.bottom)-Math.max(d.top,i.top)};d.top<i.top?p=p.type.createAndFill(O):p=p.type.create(O,p.content)}c.push(p)}o.push(e.child(a).copy(A.from(c)))}let l=this.isColSelection()&&this.isRowSelection()?e:o;return new E(A.from(l),1,1)}replace(e,t=E.empty){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:a}=i[o],c=e.mapping.slice(r);e.replace(c.map(l.pos),c.map(a.pos),o?E.empty:t)}let s=Z.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,t){this.replace(e,new E(A.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),r=Xe.get(t),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(t.nodeAt(s[o]),i+s[o])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;let r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){let r=e.node(-1),i=Xe.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(t.pos-s),a=e.node(0);return o.top<=l.top?(o.top>0&&(e=a.resolve(s+i.map[o.left])),l.bottom<i.height&&(t=a.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(t=a.resolve(s+i.map[l.left])),o.bottom<i.height&&(e=a.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Jr(e,t)}isRowSelection(){let e=this.$anchorCell.node(-1),t=Xe.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),s=t.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;let o=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==t.width}eq(e){return e instanceof Jr&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){let r=e.node(-1),i=Xe.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(t.pos-s),a=e.node(0);return o.left<=l.left?(o.left>0&&(e=a.resolve(s+i.map[o.top*i.width])),l.right<i.width&&(t=a.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(t=a.resolve(s+i.map[l.top*i.width])),o.right<i.width&&(e=a.resolve(s+i.map[i.width*(o.top+1)-1]))),new Jr(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Jr(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Jr(e.resolve(t),e.resolve(r))}getBookmark(){return new d5(this.$anchorCell.pos,this.$headCell.pos)}};Se.prototype.visible=!1;Z.jsonID("cell",Se);d5=class Jv{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Jv(e.map(this.anchor),e.map(this.head))}resolve(e){let t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&wO(t,r)?new Se(t,r):Z.near(r,1)}};y5=new ee("fix-tables");U7=Wo("row",{useDeprecatedLogic:!0}),j7=Wo("column",{useDeprecatedLogic:!0}),hC=Wo("cell",{useDeprecatedLogic:!0});$5=va({ArrowLeft:df("horiz",-1),ArrowRight:df("horiz",1),ArrowUp:df("vert",-1),ArrowDown:df("vert",1),"Shift-ArrowLeft":pf("horiz",-1),"Shift-ArrowRight":pf("horiz",1),"Shift-ArrowUp":pf("vert",-1),"Shift-ArrowDown":pf("vert",1),Backspace:ff,"Mod-Backspace":ff,Delete:ff,"Mod-Delete":ff});N5=class{constructor(n,e){this.node=n,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),bO(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,bO(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};rn=new ee("tableColumnResizing");L5=class gf{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){let t=this,r=e.getMeta(rn);if(r&&r.setHandle!=null)return new gf(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new gf(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return OO(e.doc.resolve(i))||(i=-1),new gf(i,t.dragging)}return t}}});var OC=S(()=>{gC()});function CO(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function yC(n,e,t,r,i,s){var o;let l=0,a=!0,c=e.firstChild,h=n.firstChild;if(h!==null)for(let u=0,f=0;u<h.childCount;u+=1){let{colspan:d,colwidth:p}=h.child(u).attrs;for(let m=0;m<d;m+=1,f+=1){let g=i===f?s:p&&p[m],O=g?`${g}px`:"";if(l+=g||r,g||(a=!1),c){if(c.style.width!==O){let[w,k]=CO(r,g);c.style.setProperty(w,k)}c=c.nextSibling}else{let w=document.createElement("col"),[k,b]=CO(r,g);w.style.setProperty(k,b),e.appendChild(w)}}}for(;c;){let u=c.nextSibling;(o=c.parentNode)===null||o===void 0||o.removeChild(c),c=u}a?(t.style.width=`${l}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${l}px`)}function U5(n,e,t,r){let i=0,s=!0,o=[],l=n.firstChild;if(!l)return{};for(let u=0,f=0;u<l.childCount;u+=1){let{colspan:d,colwidth:p}=l.child(u).attrs;for(let m=0;m<d;m+=1,f+=1){let g=t===f?r:p&&p[m];i+=g||e,g||(s=!1);let[O,w]=CO(e,g);o.push(["col",{style:`${O}: ${w}`}])}}let a=s?`${i}px`:"",c=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:a,tableMinWidth:c}}function bC(n,e){return e?n.createChecked(null,e):n.createAndFill()}function j5(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;let e={};return Object.keys(n.nodes).forEach(t=>{let r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function W5(n,e,t,r,i){let s=j5(n),o=[],l=[];for(let c=0;c<t;c+=1){let h=bC(s.cell,i);if(h&&l.push(h),r){let u=bC(s.header_cell,i);u&&o.push(u)}}let a=[];for(let c=0;c<e;c+=1)a.push(s.row.createChecked(null,r&&c===0?o:l));return s.table.createChecked(null,a)}function Y5(n){return n instanceof Se}var TO,yf,wC,xC=S(()=>{re();bn();OC();TO=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),yC(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,yC(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}};yf=({editor:n})=>{let{selection:e}=n.state;if(!Y5(e))return!1;let t=0,r=Eg(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},wC=ne.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:TO,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){let{colgroup:t,tableWidth:r,tableMinWidth:i}=U5(n,this.options.cellMinWidth);return["table",J(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),t,["tbody",0]]},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:i,editor:s})=>{let o=W5(s.schema,n,e,t);if(i){let l=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(V.near(r.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>nC(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>rC(n,e),deleteColumn:()=>({state:n,dispatch:e})=>iC(n,e),addRowBefore:()=>({state:n,dispatch:e})=>oC(n,e),addRowAfter:()=>({state:n,dispatch:e})=>lC(n,e),deleteRow:()=>({state:n,dispatch:e})=>aC(n,e),deleteTable:()=>({state:n,dispatch:e})=>uC(n,e),mergeCells:()=>({state:n,dispatch:e})=>kO(n,e),splitCell:()=>({state:n,dispatch:e})=>SO(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>Wo("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>Wo("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>hC(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>kO(n,e)?!0:SO(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>cC(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>vO(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>vO(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&xO(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){let r=Se.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:yf,"Mod-Backspace":yf,Delete:yf,"Mod-Delete":yf}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[dC({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],mC({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){let e={name:n.name,options:n.options,storage:n.storage};return{tableRole:te(I(n,"tableRole",e))}}})});var kC,SC=S(()=>{re();kC=ne.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",J(this.options.HTMLAttributes,n),0]}})});var vC,CC=S(()=>{re();vC=ne.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{let e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",J(this.options.HTMLAttributes,n),0]}})});var TC,PC=S(()=>{re();TC=ne.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{let e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",J(this.options.HTMLAttributes,n),0]}})});var ze,it,et,We,bf,Bi,ei,_s,AC,wf,Yo,MC,PO,xf,H5,F5,G5,K5,J5,eB,tB,nB,rB,QC,sn=S(()=>{ze="top",it="bottom",et="right",We="left",bf="auto",Bi=[ze,it,et,We],ei="start",_s="end",AC="clippingParents",wf="viewport",Yo="popper",MC="reference",PO=Bi.reduce(function(n,e){return n.concat([e+"-"+ei,e+"-"+_s])},[]),xf=[].concat(Bi,[bf]).reduce(function(n,e){return n.concat([e,e+"-"+ei,e+"-"+_s])},[]),H5="beforeRead",F5="read",G5="afterRead",K5="beforeMain",J5="main",eB="afterMain",tB="beforeWrite",nB="write",rB="afterWrite",QC=[H5,F5,G5,K5,J5,eB,tB,nB,rB]});function ct(n){return n?(n.nodeName||"").toLowerCase():null}var Vi=S(()=>{});function _e(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}var qn=S(()=>{});function Tn(n){var e=_e(n).Element;return n instanceof e||n instanceof Element}function st(n){var e=_e(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Ho(n){if(typeof ShadowRoot=="undefined")return!1;var e=_e(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var on=S(()=>{qn()});function iB(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!st(s)||!ct(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var l=i[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function sB(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),l=o.reduce(function(a,c){return a[c]="",a},{});!st(i)||!ct(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(a){i.removeAttribute(a)}))})}}var _a,AO=S(()=>{Vi();on();_a={name:"applyStyles",enabled:!0,phase:"write",fn:iB,effect:sB,requires:["computeStyles"]}});function ht(n){return n.split("-")[0]}var Xi=S(()=>{});var Un,Bs,ti,zi=S(()=>{Un=Math.max,Bs=Math.min,ti=Math.round});function Fo(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}var MO=S(()=>{});function Ba(){return!/^((?!chrome|android).)*safari/i.test(Fo())}var QO=S(()=>{MO()});function Pn(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,s=1;e&&st(n)&&(i=n.offsetWidth>0&&ti(r.width)/n.offsetWidth||1,s=n.offsetHeight>0&&ti(r.height)/n.offsetHeight||1);var o=Tn(n)?_e(n):window,l=o.visualViewport,a=!Ba()&&t,c=(r.left+(a&&l?l.offsetLeft:0))/i,h=(r.top+(a&&l?l.offsetTop:0))/s,u=r.width/i,f=r.height/s;return{width:u,height:f,top:h,right:c+u,bottom:h+f,left:c,x:c,y:h}}var Go=S(()=>{on();zi();qn();QO()});function Vs(n){var e=Pn(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}var kf=S(()=>{Go()});function Va(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Ho(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}var $O=S(()=>{on()});function It(n){return _e(n).getComputedStyle(n)}var Ko=S(()=>{qn()});function EO(n){return["table","td","th"].indexOf(ct(n))>=0}var $C=S(()=>{Vi()});function yt(n){return((Tn(n)?n.ownerDocument:n.document)||window.document).documentElement}var ni=S(()=>{on()});function ri(n){return ct(n)==="html"?n:n.assignedSlot||n.parentNode||(Ho(n)?n.host:null)||yt(n)}var Xa=S(()=>{Vi();ni();on()});function EC(n){return!st(n)||It(n).position==="fixed"?null:n.offsetParent}function oB(n){var e=/firefox/i.test(Fo()),t=/Trident/i.test(Fo());if(t&&st(n)){var r=It(n);if(r.position==="fixed")return null}var i=ri(n);for(Ho(i)&&(i=i.host);st(i)&&["html","body"].indexOf(ct(i))<0;){var s=It(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function jn(n){for(var e=_e(n),t=EC(n);t&&EO(t)&&It(t).position==="static";)t=EC(t);return t&&(ct(t)==="html"||ct(t)==="body"&&It(t).position==="static")?e:t||oB(n)||e}var Jo=S(()=>{qn();Vi();Ko();on();$C();Xa();MO()});function Xs(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}var Sf=S(()=>{});function zs(n,e,t){return Un(n,Bs(e,t))}function RC(n,e,t){var r=zs(n,e,t);return r>t?t:r}var RO=S(()=>{zi()});function za(){return{top:0,right:0,bottom:0,left:0}}var DO=S(()=>{});function Za(n){return Object.assign({},za(),n)}var NO=S(()=>{DO()});function qa(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var LO=S(()=>{});function aB(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,l=ht(t.placement),a=Xs(l),c=[We,et].indexOf(l)>=0,h=c?"height":"width";if(!(!s||!o)){var u=lB(i.padding,t),f=Vs(s),d=a==="y"?ze:We,p=a==="y"?it:et,m=t.rects.reference[h]+t.rects.reference[a]-o[a]-t.rects.popper[h],g=o[a]-t.rects.reference[a],O=jn(s),w=O?a==="y"?O.clientHeight||0:O.clientWidth||0:0,k=m/2-g/2,b=u[d],v=w-f[h]-u[p],x=w/2-f[h]/2+k,T=zs(b,x,v),C=a;t.modifiersData[r]=(e={},e[C]=T,e.centerOffset=T-x,e)}}function cB(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Va(e.elements.popper,i)&&(e.elements.arrow=i))}var lB,DC,NC=S(()=>{Xi();kf();$O();Jo();Sf();RO();NO();LO();sn();lB=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Za(typeof e!="number"?e:qa(e,Bi))};DC={name:"arrow",enabled:!0,phase:"main",fn:aB,effect:cB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}});function An(n){return n.split("-")[1]}var el=S(()=>{});function uB(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:ti(t*i)/i||0,y:ti(r*i)/i||0}}function LC(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,l=n.position,a=n.gpuAcceleration,c=n.adaptive,h=n.roundOffsets,u=n.isFixed,f=o.x,d=f===void 0?0:f,p=o.y,m=p===void 0?0:p,g=typeof h=="function"?h({x:d,y:m}):{x:d,y:m};d=g.x,m=g.y;var O=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),k=We,b=ze,v=window;if(c){var x=jn(t),T="clientHeight",C="clientWidth";if(x===_e(t)&&(x=yt(t),It(x).position!=="static"&&l==="absolute"&&(T="scrollHeight",C="scrollWidth")),x=x,i===ze||(i===We||i===et)&&s===_s){b=it;var M=u&&x===v&&v.visualViewport?v.visualViewport.height:x[T];m-=M-r.height,m*=a?1:-1}if(i===We||(i===ze||i===it)&&s===_s){k=et;var $=u&&x===v&&v.visualViewport?v.visualViewport.width:x[C];d-=$-r.width,d*=a?1:-1}}var L=Object.assign({position:l},c&&hB),D=h===!0?uB({x:d,y:m},_e(t)):{x:d,y:m};if(d=D.x,m=D.y,a){var W;return Object.assign({},L,(W={},W[b]=w?"0":"",W[k]=O?"0":"",W.transform=(v.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",W))}return Object.assign({},L,(e={},e[b]=w?m+"px":"",e[k]=O?d+"px":"",e.transform="",e))}function fB(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,o=s===void 0?!0:s,l=t.roundOffsets,a=l===void 0?!0:l,c={placement:ht(e.placement),variation:An(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,LC(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,LC(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var hB,IC,_C=S(()=>{sn();Jo();qn();ni();Ko();Xi();el();zi();hB={top:"auto",right:"auto",bottom:"auto",left:"auto"};IC={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fB,data:{}}});function dB(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,l=o===void 0?!0:o,a=_e(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",t.update,vf)}),l&&a.addEventListener("resize",t.update,vf),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",t.update,vf)}),l&&a.removeEventListener("resize",t.update,vf)}}var vf,BC,VC=S(()=>{qn();vf={passive:!0};BC={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dB,data:{}}});function tl(n){return n.replace(/left|right|bottom|top/g,function(e){return pB[e]})}var pB,XC=S(()=>{pB={left:"right",right:"left",bottom:"top",top:"bottom"}});function Cf(n){return n.replace(/start|end/g,function(e){return mB[e]})}var mB,zC=S(()=>{mB={start:"end",end:"start"}});function Zs(n){var e=_e(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}var Tf=S(()=>{qn()});function qs(n){return Pn(yt(n)).left+Zs(n).scrollLeft}var Pf=S(()=>{Go();ni();Tf()});function IO(n,e){var t=_e(n),r=yt(n),i=t.visualViewport,s=r.clientWidth,o=r.clientHeight,l=0,a=0;if(i){s=i.width,o=i.height;var c=Ba();(c||!c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:o,x:l+qs(n),y:a}}var ZC=S(()=>{qn();ni();Pf();QO()});function _O(n){var e,t=yt(n),r=Zs(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=Un(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Un(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+qs(n),a=-r.scrollTop;return It(i||t).direction==="rtl"&&(l+=Un(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:l,y:a}}var qC=S(()=>{ni();Ko();Pf();Tf();zi()});function Us(n){var e=It(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}var Af=S(()=>{Ko()});function Mf(n){return["html","body","#document"].indexOf(ct(n))>=0?n.ownerDocument.body:st(n)&&Us(n)?n:Mf(ri(n))}var UC=S(()=>{Xa();Af();Vi();on()});function Zi(n,e){var t;e===void 0&&(e=[]);var r=Mf(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=_e(r),o=i?[s].concat(s.visualViewport||[],Us(r)?r:[]):r,l=e.concat(o);return i?l:l.concat(Zi(ri(o)))}var BO=S(()=>{UC();Xa();qn();Af()});function nl(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}var VO=S(()=>{});function gB(n,e){var t=Pn(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function jC(n,e,t){return e===wf?nl(IO(n,t)):Tn(e)?gB(e,t):nl(_O(yt(n)))}function OB(n){var e=Zi(ri(n)),t=["absolute","fixed"].indexOf(It(n).position)>=0,r=t&&st(n)?jn(n):n;return Tn(r)?e.filter(function(i){return Tn(i)&&Va(i,r)&&ct(i)!=="body"}):[]}function XO(n,e,t,r){var i=e==="clippingParents"?OB(n):[].concat(e),s=[].concat(i,[t]),o=s[0],l=s.reduce(function(a,c){var h=jC(n,c,r);return a.top=Un(h.top,a.top),a.right=Bs(h.right,a.right),a.bottom=Bs(h.bottom,a.bottom),a.left=Un(h.left,a.left),a},jC(n,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var WC=S(()=>{sn();ZC();qC();BO();Jo();ni();Ko();on();Go();Xa();$O();Vi();VO();zi()});function Ua(n){var e=n.reference,t=n.element,r=n.placement,i=r?ht(r):null,s=r?An(r):null,o=e.x+e.width/2-t.width/2,l=e.y+e.height/2-t.height/2,a;switch(i){case ze:a={x:o,y:e.y-t.height};break;case it:a={x:o,y:e.y+e.height};break;case et:a={x:e.x+e.width,y:l};break;case We:a={x:e.x-t.width,y:l};break;default:a={x:e.x,y:e.y}}var c=i?Xs(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case ei:a[c]=a[c]-(e[h]/2-t[h]/2);break;case _s:a[c]=a[c]+(e[h]/2-t[h]/2);break;default:}}return a}var zO=S(()=>{Xi();el();Sf();sn()});function Wn(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.strategy,o=s===void 0?n.strategy:s,l=t.boundary,a=l===void 0?AC:l,c=t.rootBoundary,h=c===void 0?wf:c,u=t.elementContext,f=u===void 0?Yo:u,d=t.altBoundary,p=d===void 0?!1:d,m=t.padding,g=m===void 0?0:m,O=Za(typeof g!="number"?g:qa(g,Bi)),w=f===Yo?MC:Yo,k=n.rects.popper,b=n.elements[p?w:f],v=XO(Tn(b)?b:b.contextElement||yt(n.elements.popper),a,h,o),x=Pn(n.elements.reference),T=Ua({reference:x,element:k,strategy:"absolute",placement:i}),C=nl(Object.assign({},k,T)),M=f===Yo?C:x,$={top:v.top-M.top+O.top,bottom:M.bottom-v.bottom+O.bottom,left:v.left-M.left+O.left,right:M.right-v.right+O.right},L=n.modifiersData.offset;if(f===Yo&&L){var D=L[i];Object.keys($).forEach(function(W){var G=[et,it].indexOf(W)>=0?1:-1,oe=[ze,it].indexOf(W)>=0?"y":"x";$[W]+=D[oe]*G})}return $}var ja=S(()=>{WC();ni();Go();zO();VO();sn();on();NO();LO()});function ZO(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,o=t.padding,l=t.flipVariations,a=t.allowedAutoPlacements,c=a===void 0?xf:a,h=An(r),u=h?l?PO:PO.filter(function(p){return An(p)===h}):Bi,f=u.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=u);var d=f.reduce(function(p,m){return p[m]=Wn(n,{placement:m,boundary:i,rootBoundary:s,padding:o})[ht(m)],p},{});return Object.keys(d).sort(function(p,m){return d[p]-d[m]})}var YC=S(()=>{el();sn();ja();Xi()});function yB(n){if(ht(n)===bf)return[];var e=tl(n);return[Cf(n),e,Cf(e)]}function bB(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,l=o===void 0?!0:o,a=t.fallbackPlacements,c=t.padding,h=t.boundary,u=t.rootBoundary,f=t.altBoundary,d=t.flipVariations,p=d===void 0?!0:d,m=t.allowedAutoPlacements,g=e.options.placement,O=ht(g),w=O===g,k=a||(w||!p?[tl(g)]:yB(g)),b=[g].concat(k).reduce(function(Ge,Be){return Ge.concat(ht(Be)===bf?ZO(e,{placement:Be,boundary:h,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:m}):Be)},[]),v=e.rects.reference,x=e.rects.popper,T=new Map,C=!0,M=b[0],$=0;$<b.length;$++){var L=b[$],D=ht(L),W=An(L)===ei,G=[ze,it].indexOf(D)>=0,oe=G?"width":"height",ae=Wn(e,{placement:L,boundary:h,rootBoundary:u,altBoundary:f,padding:c}),me=G?W?et:We:W?it:ze;v[oe]>x[oe]&&(me=tl(me));var Ee=tl(me),Ue=[];if(s&&Ue.push(ae[D]<=0),l&&Ue.push(ae[me]<=0,ae[Ee]<=0),Ue.every(function(Ge){return Ge})){M=L,C=!1;break}T.set(L,Ue)}if(C)for(var St=p?3:1,Fe=function(Be){var Ut=b.find(function(Lr){var Ir=T.get(Lr);if(Ir)return Ir.slice(0,Be).every(function(Co){return Co})});if(Ut)return M=Ut,"break"},Te=St;Te>0;Te--){var je=Fe(Te);if(je==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}var HC,FC=S(()=>{XC();Xi();zC();ja();YC();sn();el();HC={name:"flip",enabled:!0,phase:"main",fn:bB,requiresIfExists:["offset"],data:{_skip:!1}}});function GC(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function KC(n){return[ze,et,it,We].some(function(e){return n[e]>=0})}function wB(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Wn(e,{elementContext:"reference"}),l=Wn(e,{altBoundary:!0}),a=GC(o,r),c=GC(l,i,s),h=KC(a),u=KC(c);e.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}var JC,eT=S(()=>{sn();ja();JC={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wB}});function xB(n,e,t){var r=ht(n),i=[We,ze].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],l=s[1];return o=o||0,l=(l||0)*i,[We,et].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function kB(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,o=xf.reduce(function(h,u){return h[u]=xB(u,e.rects,s),h},{}),l=o[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}var tT,nT=S(()=>{Xi();sn();tT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kB}});function SB(n){var e=n.state,t=n.name;e.modifiersData[t]=Ua({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var rT,iT=S(()=>{zO();rT={name:"popperOffsets",enabled:!0,phase:"read",fn:SB,data:{}}});function qO(n){return n==="x"?"y":"x"}var sT=S(()=>{});function vB(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,l=o===void 0?!1:o,a=t.boundary,c=t.rootBoundary,h=t.altBoundary,u=t.padding,f=t.tether,d=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,g=Wn(e,{boundary:a,rootBoundary:c,padding:u,altBoundary:h}),O=ht(e.placement),w=An(e.placement),k=!w,b=Xs(O),v=qO(b),x=e.modifiersData.popperOffsets,T=e.rects.reference,C=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,$=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),L=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(x){if(s){var W,G=b==="y"?ze:We,oe=b==="y"?it:et,ae=b==="y"?"height":"width",me=x[b],Ee=me+g[G],Ue=me-g[oe],St=d?-C[ae]/2:0,Fe=w===ei?T[ae]:C[ae],Te=w===ei?-C[ae]:-T[ae],je=e.elements.arrow,Ge=d&&je?Vs(je):{width:0,height:0},Be=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:za(),Ut=Be[G],Lr=Be[oe],Ir=zs(0,T[ae],Ge[ae]),Co=k?T[ae]/2-St-Ir-Ut-$.mainAxis:Fe-Ir-Ut-$.mainAxis,ki=k?-T[ae]/2+St+Ir+Lr+$.mainAxis:Te+Ir+Lr+$.mainAxis,To=e.elements.arrow&&jn(e.elements.arrow),Sh=To?b==="y"?To.clientTop||0:To.clientLeft||0:0,Fl=(W=L==null?void 0:L[b])!=null?W:0,vh=me+Co-Fl-Sh,Ch=me+ki-Fl,Gl=zs(d?Bs(Ee,vh):Ee,me,d?Un(Ue,Ch):Ue);x[b]=Gl,D[b]=Gl-me}if(l){var Kl,Th=b==="x"?ze:We,Ph=b==="x"?it:et,_r=x[v],Si=v==="y"?"height":"width",Jl=_r+g[Th],Os=_r-g[Ph],ea=[ze,We].indexOf(O)!==-1,Ah=(Kl=L==null?void 0:L[v])!=null?Kl:0,Mh=ea?Jl:_r-T[Si]-C[Si]-Ah+$.altAxis,Qh=ea?_r+T[Si]+C[Si]-Ah-$.altAxis:Os,$h=d&&ea?RC(Mh,_r,Qh):zs(d?Mh:Jl,_r,d?Qh:Os);x[v]=$h,D[v]=$h-_r}e.modifiersData[r]=D}}var oT,lT=S(()=>{sn();Xi();Sf();sT();RO();kf();Jo();ja();el();DO();zi();oT={name:"preventOverflow",enabled:!0,phase:"main",fn:vB,requiresIfExists:["offset"]}});var UO=S(()=>{AO()});function jO(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}var aT=S(()=>{});function WO(n){return n===_e(n)||!st(n)?Zs(n):jO(n)}var cT=S(()=>{Tf();qn();on();aT()});function CB(n){var e=n.getBoundingClientRect(),t=ti(e.width)/n.offsetWidth||1,r=ti(e.height)/n.offsetHeight||1;return t!==1||r!==1}function YO(n,e,t){t===void 0&&(t=!1);var r=st(e),i=st(e)&&CB(e),s=yt(e),o=Pn(n,i,t),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!t)&&((ct(e)!=="body"||Us(s))&&(l=WO(e)),st(e)?(a=Pn(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):s&&(a.x=qs(s))),{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}var hT=S(()=>{Go();cT();Vi();on();Pf();ni();Af();zi()});function TB(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!t.has(l)){var a=e.get(l);a&&i(a)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function HO(n){var e=TB(n);return QC.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}var uT=S(()=>{sn()});function FO(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var fT=S(()=>{});function GO(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var dT=S(()=>{});function mT(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function gT(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?pT:i;return function(l,a,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},pT,s),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},u=[],f=!1,d={state:h,setOptions:function(O){var w=typeof O=="function"?O(h.options):O;m(),h.options=Object.assign({},s,h.options,w),h.scrollParents={reference:Tn(l)?Zi(l):l.contextElement?Zi(l.contextElement):[],popper:Zi(a)};var k=HO(GO([].concat(r,h.options.modifiers)));return h.orderedModifiers=k.filter(function(b){return b.enabled}),p(),d.update()},forceUpdate:function(){if(!f){var O=h.elements,w=O.reference,k=O.popper;if(mT(w,k)){h.rects={reference:YO(w,jn(k),h.options.strategy==="fixed"),popper:Vs(k)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function($){return h.modifiersData[$.name]=Object.assign({},$.data)});for(var b=0;b<h.orderedModifiers.length;b++){if(h.reset===!0){h.reset=!1,b=-1;continue}var v=h.orderedModifiers[b],x=v.fn,T=v.options,C=T===void 0?{}:T,M=v.name;typeof x=="function"&&(h=x({state:h,options:C,name:M,instance:d})||h)}}}},update:FO(function(){return new Promise(function(g){d.forceUpdate(),g(h)})}),destroy:function(){m(),f=!0}};if(!mT(l,a))return d;d.setOptions(c).then(function(g){!f&&c.onFirstUpdate&&c.onFirstUpdate(g)});function p(){h.orderedModifiers.forEach(function(g){var O=g.name,w=g.options,k=w===void 0?{}:w,b=g.effect;if(typeof b=="function"){var v=b({state:h,name:O,instance:d,options:k}),x=function(){};u.push(v||x)}})}function m(){u.forEach(function(g){return g()}),u=[]}return d}}var pT,OT=S(()=>{hT();kf();BO();Jo();uT();fT();dT();on();pT={placement:"bottom",modifiers:[],strategy:"absolute"}});var PB,KO,yT=S(()=>{OT();VC();iT();_C();AO();nT();FC();lT();NC();eT();UO();PB=[BC,rT,IC,_a,tT,HC,oT,DC,JC],KO=gT({defaultModifiers:PB})});var bT=S(()=>{sn();UO();yT()});function JO(n,e,t){if(Array.isArray(n)){var r=n[e];return r==null?Array.isArray(t)?t[e]:t:r}return n}function s0(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function RT(n,e){return typeof n=="function"?n.apply(void 0,e):n}function wT(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function QB(n){return n.split(/\s+/).filter(Boolean)}function rl(n){return[].concat(n)}function xT(n,e){n.indexOf(e)===-1&&n.push(e)}function $B(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function EB(n){return n.split("-")[0]}function $f(n){return[].slice.call(n)}function kT(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Wa(){return document.createElement("div")}function Ef(n){return["Element","Fragment"].some(function(e){return s0(n,e)})}function RB(n){return s0(n,"NodeList")}function DB(n){return s0(n,"MouseEvent")}function NB(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function LB(n){return Ef(n)?[n]:RB(n)?$f(n):Array.isArray(n)?n:$f(document.querySelectorAll(n))}function e0(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function ST(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function IB(n){var e,t=rl(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function _B(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var s=i.popperRect,o=i.popperState,l=i.props,a=l.interactiveBorder,c=EB(o.placement),h=o.modifiersData.offset;if(!h)return!0;var u=c==="bottom"?h.top.y:0,f=c==="top"?h.bottom.y:0,d=c==="right"?h.left.x:0,p=c==="left"?h.right.x:0,m=s.top-r+u>a,g=r-s.bottom-f>a,O=s.left-t+d>a,w=t-s.right-p>a;return m||g||O||w})}function t0(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function vT(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}function BB(){Or.isTouch||(Or.isTouch=!0,window.performance&&document.addEventListener("mousemove",DT))}function DT(){var n=performance.now();n-CT<20&&(Or.isTouch=!1,document.removeEventListener("mousemove",DT)),CT=n}function VB(){var n=document.activeElement;if(NB(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function XB(){document.addEventListener("touchstart",BB,js),window.addEventListener("blur",VB)}function NT(n){var e=n.plugins||[],t=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var l;r[s]=n[s]!==void 0?n[s]:(l=Yn[s])!=null?l:o}return r},{});return Object.assign({},n,t)}function YB(n,e){var t=e?Object.keys(NT(Object.assign({},Yn,{plugins:e}))):jB,r=t.reduce(function(i,s){var o=(n.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch(l){i[s]=o}return i},{});return r}function TT(n,e){var t=Object.assign({},e,{content:RT(e.content,[n])},e.ignoreAttributes?{}:YB(n,e.plugins));return t.aria=Object.assign({},Yn.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}function r0(n,e){n[HB()]=e}function PT(n){var e=Wa();return n===!0?e.className=QT:(e.className=$T,Ef(n)?e.appendChild(n):r0(e,n)),e}function AT(n,e){Ef(e.content)?(r0(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?r0(n,e.content):n.textContent=e.content)}function i0(n){var e=n.firstElementChild,t=$f(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(MT)}),arrow:t.find(function(r){return r.classList.contains(QT)||r.classList.contains($T)}),backdrop:t.find(function(r){return r.classList.contains(MB)})}}function LT(n){var e=Wa(),t=Wa();t.className=AB,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Wa();r.className=MT,r.setAttribute("data-state","hidden"),AT(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(s,o){var l=i0(e),a=l.box,c=l.content,h=l.arrow;o.theme?a.setAttribute("data-theme",o.theme):a.removeAttribute("data-theme"),typeof o.animation=="string"?a.setAttribute("data-animation",o.animation):a.removeAttribute("data-animation"),o.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?a.setAttribute("role",o.role):a.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&AT(c,n.props),o.arrow?h?s.arrow!==o.arrow&&(a.removeChild(h),a.appendChild(PT(o.arrow))):a.appendChild(PT(o.arrow)):h&&a.removeChild(h)}return{popper:e,onUpdate:i}}function GB(n,e){var t=TT(n,Object.assign({},Yn,NT(kT(e)))),r,i,s,o=!1,l=!1,a=!1,c=!1,h,u,f,d=[],p=wT(vh,t.interactiveDebounce),m,g=FB++,O=null,w=$B(t.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:g,reference:n,popper:Wa(),popperInstance:O,props:t,state:k,plugins:w,clearDelayTimeouts:Mh,setProps:Qh,setContent:$h,show:$2,hide:E2,hideWithInteractivity:R2,enable:ea,disable:Ah,unmount:D2,destroy:N2};if(!t.render)return b;var v=t.render(b),x=v.popper,T=v.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+b.id,b.popper=x,n._tippy=b,x._tippy=b;var C=w.map(function(P){return P.fn(b)}),M=n.hasAttribute("aria-expanded");return To(),St(),me(),Ee("onCreate",[b]),t.showOnCreate&&Jl(),x.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&G().addEventListener("mousemove",p)}),b;function $(){var P=b.props.touch;return Array.isArray(P)?P:[P,0]}function L(){return $()[0]==="hold"}function D(){var P;return!!((P=b.props.render)!=null&&P.$$tippy)}function W(){return m||n}function G(){var P=W().parentNode;return P?IB(P):document}function oe(){return i0(x)}function ae(P){return b.state.isMounted&&!b.state.isVisible||Or.isTouch||h&&h.type==="focus"?0:JO(b.props.delay,P?0:1,Yn.delay)}function me(P){P===void 0&&(P=!1),x.style.pointerEvents=b.props.interactive&&!P?"":"none",x.style.zIndex=""+b.props.zIndex}function Ee(P,q,H){if(H===void 0&&(H=!0),C.forEach(function(fe){fe[P]&&fe[P].apply(fe,q)}),H){var we;(we=b.props)[P].apply(we,q)}}function Ue(){var P=b.props.aria;if(P.content){var q="aria-"+P.content,H=x.id,we=rl(b.props.triggerTarget||n);we.forEach(function(fe){var Rt=fe.getAttribute(q);if(b.state.isVisible)fe.setAttribute(q,Rt?Rt+" "+H:H);else{var gn=Rt&&Rt.replace(H,"").trim();gn?fe.setAttribute(q,gn):fe.removeAttribute(q)}})}}function St(){if(!(M||!b.props.aria.expanded)){var P=rl(b.props.triggerTarget||n);P.forEach(function(q){b.props.interactive?q.setAttribute("aria-expanded",b.state.isVisible&&q===W()?"true":"false"):q.removeAttribute("aria-expanded")})}}function Fe(){G().removeEventListener("mousemove",p),Qf=Qf.filter(function(P){return P!==p})}function Te(P){if(!(Or.isTouch&&(a||P.type==="mousedown"))){var q=P.composedPath&&P.composedPath()[0]||P.target;if(!(b.props.interactive&&vT(x,q))){if(rl(b.props.triggerTarget||n).some(function(H){return vT(H,q)})){if(Or.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else Ee("onClickOutside",[b,P]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),l=!0,setTimeout(function(){l=!1}),b.state.isMounted||Ut())}}}function je(){a=!0}function Ge(){a=!1}function Be(){var P=G();P.addEventListener("mousedown",Te,!0),P.addEventListener("touchend",Te,js),P.addEventListener("touchstart",Ge,js),P.addEventListener("touchmove",je,js)}function Ut(){var P=G();P.removeEventListener("mousedown",Te,!0),P.removeEventListener("touchend",Te,js),P.removeEventListener("touchstart",Ge,js),P.removeEventListener("touchmove",je,js)}function Lr(P,q){Co(P,function(){!b.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&q()})}function Ir(P,q){Co(P,q)}function Co(P,q){var H=oe().box;function we(fe){fe.target===H&&(t0(H,"remove",we),q())}if(P===0)return q();t0(H,"remove",u),t0(H,"add",we),u=we}function ki(P,q,H){H===void 0&&(H=!1);var we=rl(b.props.triggerTarget||n);we.forEach(function(fe){fe.addEventListener(P,q,H),d.push({node:fe,eventType:P,handler:q,options:H})})}function To(){L()&&(ki("touchstart",Fl,{passive:!0}),ki("touchend",Ch,{passive:!0})),QB(b.props.trigger).forEach(function(P){if(P!=="manual")switch(ki(P,Fl),P){case"mouseenter":ki("mouseleave",Ch);break;case"focus":ki(ZB?"focusout":"blur",Gl);break;case"focusin":ki("focusout",Gl);break}})}function Sh(){d.forEach(function(P){var q=P.node,H=P.eventType,we=P.handler,fe=P.options;q.removeEventListener(H,we,fe)}),d=[]}function Fl(P){var q,H=!1;if(!(!b.state.isEnabled||Kl(P)||l)){var we=((q=h)==null?void 0:q.type)==="focus";h=P,m=P.currentTarget,St(),!b.state.isVisible&&DB(P)&&Qf.forEach(function(fe){return fe(P)}),P.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||o)&&b.props.hideOnClick!==!1&&b.state.isVisible?H=!0:Jl(P),P.type==="click"&&(o=!H),H&&!we&&Os(P)}}function vh(P){var q=P.target,H=W().contains(q)||x.contains(q);if(!(P.type==="mousemove"&&H)){var we=Si().concat(x).map(function(fe){var Rt,gn=fe._tippy,Po=(Rt=gn.popperInstance)==null?void 0:Rt.state;return Po?{popperRect:fe.getBoundingClientRect(),popperState:Po,props:t}:null}).filter(Boolean);_B(we,P)&&(Fe(),Os(P))}}function Ch(P){var q=Kl(P)||b.props.trigger.indexOf("click")>=0&&o;if(!q){if(b.props.interactive){b.hideWithInteractivity(P);return}Os(P)}}function Gl(P){b.props.trigger.indexOf("focusin")<0&&P.target!==W()||b.props.interactive&&P.relatedTarget&&x.contains(P.relatedTarget)||Os(P)}function Kl(P){return Or.isTouch?L()!==P.type.indexOf("touch")>=0:!1}function Th(){Ph();var P=b.props,q=P.popperOptions,H=P.placement,we=P.offset,fe=P.getReferenceClientRect,Rt=P.moveTransition,gn=D()?i0(x).arrow:null,Po=fe?{getBoundingClientRect:fe,contextElement:fe.contextElement||W()}:n,Px={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Eh){var Ao=Eh.state;if(D()){var L2=oe(),nm=L2.box;["placement","reference-hidden","escaped"].forEach(function(Rh){Rh==="placement"?nm.setAttribute("data-placement",Ao.placement):Ao.attributes.popper["data-popper-"+Rh]?nm.setAttribute("data-"+Rh,""):nm.removeAttribute("data-"+Rh)}),Ao.attributes.popper={}}}},ys=[{name:"offset",options:{offset:we}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Rt}},Px];D()&&gn&&ys.push({name:"arrow",options:{element:gn,padding:3}}),ys.push.apply(ys,(q==null?void 0:q.modifiers)||[]),b.popperInstance=KO(Po,x,Object.assign({},q,{placement:H,onFirstUpdate:f,modifiers:ys}))}function Ph(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function _r(){var P=b.props.appendTo,q,H=W();b.props.interactive&&P===ET||P==="parent"?q=H.parentNode:q=RT(P,[H]),q.contains(x)||q.appendChild(x),b.state.isMounted=!0,Th()}function Si(){return $f(x.querySelectorAll("[data-tippy-root]"))}function Jl(P){b.clearDelayTimeouts(),P&&Ee("onTrigger",[b,P]),Be();var q=ae(!0),H=$(),we=H[0],fe=H[1];Or.isTouch&&we==="hold"&&fe&&(q=fe),q?r=setTimeout(function(){b.show()},q):b.show()}function Os(P){if(b.clearDelayTimeouts(),Ee("onUntrigger",[b,P]),!b.state.isVisible){Ut();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(P.type)>=0&&o)){var q=ae(!1);q?i=setTimeout(function(){b.state.isVisible&&b.hide()},q):s=requestAnimationFrame(function(){b.hide()})}}function ea(){b.state.isEnabled=!0}function Ah(){b.hide(),b.state.isEnabled=!1}function Mh(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Qh(P){if(!b.state.isDestroyed){Ee("onBeforeUpdate",[b,P]),Sh();var q=b.props,H=TT(n,Object.assign({},q,kT(P),{ignoreAttributes:!0}));b.props=H,To(),q.interactiveDebounce!==H.interactiveDebounce&&(Fe(),p=wT(vh,H.interactiveDebounce)),q.triggerTarget&&!H.triggerTarget?rl(q.triggerTarget).forEach(function(we){we.removeAttribute("aria-expanded")}):H.triggerTarget&&n.removeAttribute("aria-expanded"),St(),me(),T&&T(q,H),b.popperInstance&&(Th(),Si().forEach(function(we){requestAnimationFrame(we._tippy.popperInstance.forceUpdate)})),Ee("onAfterUpdate",[b,P])}}function $h(P){b.setProps({content:P})}function $2(){var P=b.state.isVisible,q=b.state.isDestroyed,H=!b.state.isEnabled,we=Or.isTouch&&!b.props.touch,fe=JO(b.props.duration,0,Yn.duration);if(!(P||q||H||we)&&!W().hasAttribute("disabled")&&(Ee("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,D()&&(x.style.visibility="visible"),me(),Be(),b.state.isMounted||(x.style.transition="none"),D()){var Rt=oe(),gn=Rt.box,Po=Rt.content;e0([gn,Po],0)}f=function(){var ys;if(!(!b.state.isVisible||c)){if(c=!0,x.offsetHeight,x.style.transition=b.props.moveTransition,D()&&b.props.animation){var tm=oe(),Eh=tm.box,Ao=tm.content;e0([Eh,Ao],fe),ST([Eh,Ao],"visible")}Ue(),St(),xT(n0,b),(ys=b.popperInstance)==null||ys.forceUpdate(),Ee("onMount",[b]),b.props.animation&&D()&&Ir(fe,function(){b.state.isShown=!0,Ee("onShown",[b])})}},_r()}}function E2(){var P=!b.state.isVisible,q=b.state.isDestroyed,H=!b.state.isEnabled,we=JO(b.props.duration,1,Yn.duration);if(!(P||q||H)&&(Ee("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,c=!1,o=!1,D()&&(x.style.visibility="hidden"),Fe(),Ut(),me(!0),D()){var fe=oe(),Rt=fe.box,gn=fe.content;b.props.animation&&(e0([Rt,gn],we),ST([Rt,gn],"hidden"))}Ue(),St(),b.props.animation?D()&&Lr(we,b.unmount):b.unmount()}}function R2(P){G().addEventListener("mousemove",p),xT(Qf,p),p(P)}function D2(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Ph(),Si().forEach(function(P){P._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),n0=n0.filter(function(P){return P!==b}),b.state.isMounted=!1,Ee("onHidden",[b]))}function N2(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),Sh(),delete n._tippy,b.state.isDestroyed=!0,Ee("onDestroy",[b]))}}function Ya(n,e){e===void 0&&(e={});var t=Yn.plugins.concat(e.plugins||[]);XB();var r=Object.assign({},e,{plugins:t}),i=LB(n);if(0)var s,o;var l=i.reduce(function(a,c){var h=c&&GB(c,r);return h&&a.push(h),a},[]);return Ef(n)?l[0]:l}var AB,MT,MB,QT,$T,js,ET,Or,CT,zB,ZB,qB,UB,Yn,jB,WB,HB,FB,Qf,n0,a9,Rf,o0=S(()=>{bT();AB="tippy-box",MT="tippy-content",MB="tippy-backdrop",QT="tippy-arrow",$T="tippy-svg-arrow",js={passive:!0,capture:!0},ET=function(){return document.body};Or={isTouch:!1},CT=0;zB=typeof window!="undefined"&&typeof document!="undefined",ZB=zB?!!window.msCrypto:!1,qB={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},UB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Yn=Object.assign({appendTo:ET,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},qB,UB),jB=Object.keys(Yn),WB=function(e){var t=Object.keys(e);t.forEach(function(r){Yn[r]=e[r]})};HB=function(){return"innerHTML"};LT.$$tippy=!0;FB=1,Qf=[],n0=[];Ya.defaultProps=Yn;Ya.setDefaultProps=WB;Ya.currentInput=Or;a9=Object.assign({},_a,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Ya.setDefaultProps({render:LT});Rf=Ya});var l0,KB,IT,_T=S(()=>{re();bn();o0();l0=class{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:l,state:a,from:c,to:h})=>{let{doc:u,selection:f}=a,{empty:d}=f,p=!u.textBetween(c,h).length&&ku(a.selection),m=this.element.contains(document.activeElement);return!(!(l.hasFocus()||m)||d||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var a;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(l.relatedTarget))||(l==null?void 0:l.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.handleDebouncedUpdate=(l,a)=>{let c=!(a!=null&&a.selection.eq(l.state.selection)),h=!(a!=null&&a.doc.eq(l.state.doc));!c&&!h||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(l,c,h,a)},this.updateDelay))},this.updateHandler=(l,a,c,h)=>{var u,f,d;let{state:p,composing:m}=l,{selection:g}=p;if(m||!a&&!c)return;this.createTooltip();let{ranges:w}=g,k=Math.min(...w.map(x=>x.$from.pos)),b=Math.max(...w.map(x=>x.$to.pos));if(!((u=this.shouldShow)===null||u===void 0?void 0:u.call(this,{editor:this.editor,element:this.element,view:l,state:p,oldState:h,from:k,to:b}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((d=this.tippyOptions)===null||d===void 0?void 0:d.getReferenceClientRect)||(()=>{if(Cu(p.selection)){let x=l.nodeDOM(k);if(x){let T=x.dataset.nodeViewWrapper?x:x.querySelector("[data-node-view-wrapper]");if(T&&(x=T.firstChild),x)return x.getBoundingClientRect()}}return bS(l,k,b)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Rf(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){let{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,t);return}let s=!(t!=null&&t.selection.eq(e.state.selection)),o=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,s,o,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}},KB=n=>new F({key:typeof n.pluginKey=="string"?new ee(n.pluginKey):n.pluginKey,view:e=>new l0({view:e,...n})}),IT=le.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[KB({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}})});var _t,Df,Mn,BT,VT,Ws=S(()=>{_t=()=>new Map,Df=n=>{let e=_t();return n.forEach((t,r)=>{e.set(r,t)}),e},Mn=(n,e,t)=>{let r=n.get(e);return r===void 0&&n.set(e,r=t()),r},BT=(n,e)=>{let t=[];for(let[r,i]of n)t.push(e(i,r));return t},VT=(n,e)=>{for(let[t,r]of n)if(e(r,t))return!0;return!1}});var Hn,Ha=S(()=>{Hn=()=>new Set});var Lf,XT,ii,zT,Fa,If=S(()=>{Lf=n=>n[n.length-1],XT=(n,e)=>{for(let t=0;t<e.length;t++)n.push(e[t])},ii=Array.from,zT=(n,e)=>{for(let t=0;t<n.length;t++)if(e(n[t],t,n))return!0;return!1},Fa=Array.isArray});var Ga,ZT=S(()=>{Ws();Ha();If();Ga=class{constructor(){this._observers=_t()}on(e,t){return Mn(this._observers,e,Hn).add(t),t}once(e,t){let r=(...i)=>{this.off(e,r),t(...i)};this.on(e,r)}off(e,t){let r=this._observers.get(e);r!==void 0&&(r.delete(t),r.size===0&&this._observers.delete(e))}emit(e,t){return ii((this._observers.get(e)||_t()).values()).forEach(r=>r(...t))}destroy(){this._observers=_t()}}});var Yt,sl,si,Fn,m9,_f,Ys=S(()=>{Yt=Math.floor,sl=Math.abs,si=(n,e)=>n<e?n:e,Fn=(n,e)=>n>e?n:e,m9=Number.isNaN,_f=n=>n!==0?n<0:1/n<0});var c0,g9,O9,qT,y9,b9,h0=S(()=>{Ys();c0=Number.MAX_SAFE_INTEGER,g9=Number.MIN_SAFE_INTEGER,O9=1<<31,qT=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&Yt(n)===n),y9=Number.isNaN,b9=Number.parseInt});var u0,w9,x9,JB,eV,tV,nV,f0,rV,al,iV,jT,ll,Ka=S(()=>{u0=String.fromCharCode,w9=String.fromCodePoint,x9=u0(65535),JB=n=>n.toLowerCase(),eV=/^\s*/g,tV=n=>n.replace(eV,""),nV=/([A-Z])/g,f0=(n,e)=>tV(n.replace(nV,t=>`${e}${JB(t)}`)),rV=n=>{let e=unescape(encodeURIComponent(n)),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.codePointAt(i);return r},al=typeof TextEncoder!="undefined"?new TextEncoder:null,iV=n=>al.encode(n),jT=al?iV:rV,ll=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ll&&ll.decode(new Uint8Array).length===1&&(ll=null)});var Hs,ul,GT,sV,Qn,oV,ut,Xf,ce,zf,d0,lV,aV,cV,Fs,ec,Ft,p0,hV,uV,fV,YT,dV,qi,Ja,HT,Gs,FT,hl,Vf,m0=S(()=>{Ys();h0();Ka();If();Hs=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},ul=()=>new Hs,GT=n=>{let e=ul();return n(e),Qn(e)},sV=n=>{let e=n.cpos;for(let t=0;t<n.bufs.length;t++)e+=n.bufs[t].length;return e},Qn=n=>{let e=new Uint8Array(sV(n)),t=0;for(let r=0;r<n.bufs.length;r++){let i=n.bufs[r];e.set(i,t),t+=i.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),t),e},oV=(n,e)=>{let t=n.cbuf.length;t-n.cpos<e&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(Fn(t,e)*2),n.cpos=0)},ut=(n,e)=>{let t=n.cbuf.length;n.cpos===t&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(t*2),n.cpos=0),n.cbuf[n.cpos++]=e},Xf=ut,ce=(n,e)=>{for(;e>127;)ut(n,128|127&e),e=Yt(e/128);ut(n,127&e)},zf=(n,e)=>{let t=_f(e);for(t&&(e=-e),ut(n,(e>63?128:0)|(t?64:0)|63&e),e=Yt(e/64);e>0;)ut(n,(e>127?128:0)|127&e),e=Yt(e/128)},d0=new Uint8Array(3e4),lV=d0.length/3,aV=(n,e)=>{if(e.length<lV){let t=al.encodeInto(e,d0).written||0;ce(n,t);for(let r=0;r<t;r++)ut(n,d0[r])}else Ft(n,jT(e))},cV=(n,e)=>{let t=unescape(encodeURIComponent(e)),r=t.length;ce(n,r);for(let i=0;i<r;i++)ut(n,t.codePointAt(i))},Fs=al&&al.encodeInto?aV:cV,ec=(n,e)=>{let t=n.cbuf.length,r=n.cpos,i=si(t-r,e.length),s=e.length-i;n.cbuf.set(e.subarray(0,i),r),n.cpos+=i,s>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Fn(t*2,s)),n.cbuf.set(e.subarray(i)),n.cpos=s)},Ft=(n,e)=>{ce(n,e.byteLength),ec(n,e)},p0=(n,e)=>{oV(n,e);let t=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,t},hV=(n,e)=>p0(n,4).setFloat32(0,e,!1),uV=(n,e)=>p0(n,8).setFloat64(0,e,!1),fV=(n,e)=>p0(n,8).setBigInt64(0,e,!1),YT=new DataView(new ArrayBuffer(4)),dV=n=>(YT.setFloat32(0,n),YT.getFloat32(0)===n),qi=(n,e)=>{switch(typeof e){case"string":ut(n,119),Fs(n,e);break;case"number":qT(e)&&sl(e)<=2147483647?(ut(n,125),zf(n,e)):dV(e)?(ut(n,124),hV(n,e)):(ut(n,123),uV(n,e));break;case"bigint":ut(n,122),fV(n,e);break;case"object":if(e===null)ut(n,126);else if(Fa(e)){ut(n,117),ce(n,e.length);for(let t=0;t<e.length;t++)qi(n,e[t])}else if(e instanceof Uint8Array)ut(n,116),Ft(n,e);else{ut(n,118);let t=Object.keys(e);ce(n,t.length);for(let r=0;r<t.length;r++){let i=t[r];Fs(n,i),qi(n,e[i])}}break;case"boolean":ut(n,e?120:121);break;default:ut(n,127)}},Ja=class extends Hs{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&ce(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}},HT=n=>{n.count>0&&(zf(n.encoder,n.count===1?n.s:-n.s),n.count>1&&ce(n.encoder,n.count-2))},Gs=class{constructor(){this.encoder=new Hs,this.s=0,this.count=0}write(e){this.s===e?this.count++:(HT(this),this.count=1,this.s=e)}toUint8Array(){return HT(this),Qn(this.encoder)}},FT=n=>{if(n.count>0){let e=n.diff*2+(n.count===1?0:1);zf(n.encoder,e),n.count>1&&ce(n.encoder,n.count-2)}},hl=class{constructor(){this.encoder=new Hs,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(FT(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return FT(this),Qn(this.encoder)}},Vf=class{constructor(){this.sarr=[],this.s="",this.lensE=new Gs}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new Hs;return this.sarr.push(this.s),this.s="",Fs(e,this.sarr.join("")),ec(e,this.lensE.toUint8Array()),Qn(e)}}});var yr,ln,bt,tc=S(()=>{yr=n=>new Error(n),ln=()=>{throw yr("Method unimplemented")},bt=()=>{throw yr("Unexpected case")}});var JT,eP,fl,jf,tP,pV,an,dl,Ae,Wf,mV,gV,qf,g0,OV,yV,bV,wV,nc,rc,Ks,pl,Uf,nP=S(()=>{Ys();h0();Ka();tc();JT=yr("Unexpected end of array"),eP=yr("Integer out of Range"),fl=class{constructor(e){this.arr=e,this.pos=0}},jf=n=>new fl(n),tP=n=>n.pos!==n.arr.length,pV=(n,e)=>{let t=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,t},an=n=>pV(n,Ae(n)),dl=n=>n.arr[n.pos++],Ae=n=>{let e=0,t=1,r=n.arr.length;for(;n.pos<r;){let i=n.arr[n.pos++];if(e=e+(i&127)*t,t*=128,i<128)return e;if(e>c0)throw eP}throw JT},Wf=n=>{let e=n.arr[n.pos++],t=e&63,r=64,i=(e&64)>0?-1:1;if((e&128)===0)return i*t;let s=n.arr.length;for(;n.pos<s;){if(e=n.arr[n.pos++],t=t+(e&127)*r,r*=128,e<128)return i*t;if(t>c0)throw eP}throw JT},mV=n=>{let e=Ae(n);if(e===0)return"";{let t=String.fromCodePoint(dl(n));if(--e<100)for(;e--;)t+=String.fromCodePoint(dl(n));else for(;e>0;){let r=e<1e4?e:1e4,i=n.arr.subarray(n.pos,n.pos+r);n.pos+=r,t+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(t))}},gV=n=>ll.decode(an(n)),qf=ll?gV:mV,g0=(n,e)=>{let t=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,e);return n.pos+=e,t},OV=n=>g0(n,4).getFloat32(0,!1),yV=n=>g0(n,8).getFloat64(0,!1),bV=n=>g0(n,8).getBigInt64(0,!1),wV=[n=>{},n=>null,Wf,OV,yV,bV,n=>!1,n=>!0,qf,n=>{let e=Ae(n),t={};for(let r=0;r<e;r++){let i=qf(n);t[i]=nc(n)}return t},n=>{let e=Ae(n),t=[];for(let r=0;r<e;r++)t.push(nc(n));return t},an],nc=n=>wV[127-dl(n)](n),rc=class extends fl{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),tP(this)?this.count=Ae(this)+1:this.count=-1),this.count--,this.s}},Ks=class extends fl{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Wf(this);let e=_f(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ae(this)+2)}return this.count--,this.s}},pl=class extends fl{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let e=Wf(this),t=e&1;this.diff=Yt(e/2),this.count=1,t&&(this.count=Ae(this)+2)}return this.s+=this.diff,this.count--,this.s}},Uf=class{constructor(e){this.decoder=new Ks(e),this.str=qf(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}});var v9,rP,iP=S(()=>{v9=crypto.subtle,rP=crypto.getRandomValues.bind(crypto)});var kV,O0,sP,SV,oP,y0=S(()=>{Ys();iP();kV=Math.random,O0=()=>rP(new Uint32Array(1))[0],sP=n=>n[Yt(kV()*n.length)],SV="10000000-1000-4000-8000"+-1e11,oP=()=>SV.replace(/[018]/g,n=>(n^O0()&15>>n/4).toString(16))});var Yf,b0=S(()=>{Yf=Date.now});var w0,P9,cP=S(()=>{w0=n=>new Promise(n),P9=Promise.all.bind(Promise)});var x0,hP=S(()=>{x0=n=>n===void 0?null:n});var k0,uP,TV,fP,dP=S(()=>{k0=class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},uP=new k0,TV=!0;try{typeof localStorage!="undefined"&&localStorage&&(uP=localStorage,TV=!1)}catch(n){}fP=uP});var mP,S0,gP,pP,OP,v0,AV,yP,MV,C0,T0=S(()=>{mP=Object.assign,S0=Object.keys,gP=(n,e)=>{for(let t in n)e(n[t],t)},pP=n=>S0(n).length,OP=n=>{for(let e in n)return!1;return!0},v0=(n,e)=>{for(let t in n)if(!e(n[t],t))return!1;return!0},AV=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),yP=(n,e)=>n===e||pP(n)===pP(e)&&v0(n,(t,r)=>(t!==void 0||AV(e,r))&&e[r]===t),MV=Object.freeze,C0=n=>{for(let e in n){let t=n[e];(typeof t=="object"||typeof t=="function")&&C0(n[e])}return MV(n)}});var ic,wP,Hf=S(()=>{ic=(n,e,t=0)=>{try{for(;t<n.length;t++)n[t](...e)}finally{t<n.length&&ic(n,e,t+1)}},wP=(n,e)=>e.includes(n)});var ml,oc,A9,br,QV,$V,P0,sc,kP,M9,EV,SP,lc=S(()=>{Ws();Ka();hP();dP();Hf();ml=typeof process!="undefined"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]",oc=typeof window!="undefined"&&typeof document!="undefined"&&!ml,A9=typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1,QV=[],$V=()=>{if(br===void 0)if(ml){br=_t();let n=process.argv,e=null;for(let t=0;t<n.length;t++){let r=n[t];r[0]==="-"?(e!==null&&br.set(e,""),e=r):e!==null?(br.set(e,r),e=null):QV.push(r)}e!==null&&br.set(e,"")}else typeof location=="object"?(br=_t(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){let[e,t]=n.split("=");br.set(`--${f0(e,"-")}`,t),br.set(`-${f0(e,"-")}`,t)}})):br=_t();return br},P0=n=>$V().has(n),sc=n=>ml?x0(process.env[n.toUpperCase().replaceAll("-","_")]):x0(fP.getItem(n)),kP=n=>P0("--"+n)||sc(n)!==null,M9=kP("production"),EV=ml&&wP(process.env.FORCE_COLOR,["true","1","2"]),SP=EV||!P0("--no-colors")&&!kP("no-color")&&(!ml||process.stdout.isTTY)&&(!ml||P0("--color")||sc("COLORTERM")!==null||(sc("TERM")||"").includes("color"))});var RV,DV,vP,CP,TP=S(()=>{Ka();lc();m0();RV=n=>{let e="";for(let t=0;t<n.byteLength;t++)e+=u0(n[t]);return btoa(e)},DV=n=>Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"),vP=oc?RV:DV,CP=n=>GT(e=>qi(e,n))});var A0,wr,PP=S(()=>{A0=class{constructor(e,t){this.left=e,this.right=t}},wr=(n,e)=>new A0(n,e)});var oi,Q9,AP,$9,E9,R9,D9,N9,L9,I9,M0=S(()=>{Ws();oi=typeof document!="undefined"?document:{},Q9=typeof DOMParser!="undefined"?new DOMParser:null,AP=n=>BT(n,(e,t)=>`${t}:${e};`).join(""),$9=oi.ELEMENT_NODE,E9=oi.TEXT_NODE,R9=oi.CDATA_SECTION_NODE,D9=oi.COMMENT_NODE,N9=oi.DOCUMENT_NODE,L9=oi.DOCUMENT_TYPE_NODE,I9=oi.DOCUMENT_FRAGMENT_NODE});var Gf,IV,Q0,B9,V9,X9,QP=S(()=>{Gf=n=>class{constructor(t){this._=t}destroy(){n(this._)}},IV=Gf(clearTimeout),Q0=(n,e)=>new IV(setTimeout(e,n)),B9=Gf(clearInterval),V9=Gf(n=>typeof requestAnimationFrame!="undefined"&&cancelAnimationFrame(n)),X9=Gf(n=>typeof cancelIdleCallback!="undefined"&&cancelIdleCallback(n))});var xr,$P=S(()=>{xr=Symbol});var ac,cc,$0,E0,R0,hc,D0,gl,N0,EP,z9,L0=S(()=>{$P();b0();ac=xr(),cc=xr(),$0=xr(),E0=xr(),R0=xr(),hc=xr(),D0=xr(),gl=xr(),N0=xr(),EP=n=>{var i;n.length===1&&((i=n[0])==null?void 0:i.constructor)===Function&&(n=n[0]());let e=[],t=[],r=0;for(;r<n.length;r++){let s=n[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&t.push(e.join(""));r<n.length;r++){let s=n[r];s instanceof Symbol||t.push(s)}return t},z9=Yf()});var XV,zV,RP,DP,I0,NP,LP=S(()=>{lc();Ha();PP();M0();Ws();L0();L0();XV={[ac]:wr("font-weight","bold"),[cc]:wr("font-weight","normal"),[$0]:wr("color","blue"),[R0]:wr("color","green"),[E0]:wr("color","grey"),[hc]:wr("color","red"),[D0]:wr("color","purple"),[gl]:wr("color","orange"),[N0]:wr("color","black")},zV=n=>{var o;n.length===1&&((o=n[0])==null?void 0:o.constructor)===Function&&(n=n[0]());let e=[],t=[],r=_t(),i=[],s=0;for(;s<n.length;s++){let l=n[s],a=XV[l];if(a!==void 0)r.set(a.left,a.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){let c=AP(r);s>0||c.length>0?(e.push("%c"+l),t.push(c)):e.push(l)}else break}}for(s>0&&(i=t,i.unshift(e.join("")));s<n.length;s++){let l=n[s];l instanceof Symbol||i.push(l)}return i},RP=SP?zV:EP,DP=(...n)=>{console.log(...RP(n)),NP.forEach(e=>e.print(n))},I0=(...n)=>{console.warn(...RP(n)),n.unshift(gl),NP.forEach(e=>e.print(n))},NP=Hn()});var IP,_P,Kf,BP=S(()=>{IP=n=>({[Symbol.iterator](){return this},next:n}),_P=(n,e)=>IP(()=>{let t;do t=n.next();while(!t.done&&!e(t.value));return t}),Kf=(n,e)=>IP(()=>{let{done:t,value:r}=n.next();return{done:t,value:t?void 0:e(r)}})});function*lX(n){let e=Ae(n.restDecoder);for(let t=0;t<e;t++){let r=Ae(n.restDecoder),i=n.readClient(),s=Ae(n.restDecoder);for(let o=0;o<r;o++){let l=n.readInfo();if(l===10){let a=Ae(n.restDecoder);yield new cn(se(i,s),a),s+=a}else if((31&l)!==0){let a=(l&192)===0,c=new Oe(se(i,s),null,(l&128)===128?n.readLeftID():null,null,(l&64)===64?n.readRightID():null,a?n.readParentInfo()?n.readString():n.readLeftID():null,a&&(l&32)===32?n.readString():null,AA(n,l));yield c,s+=c.length}else{let a=n.readLen();yield new Kt(se(i,s),a),s+=a}}}}var dc,Yi,li,WV,ro,ly,B0,pc,ud,YV,ay,HV,zP,rA,ai,V0,yl,X0,z0,Z0,bl,FV,iA,GV,KV,JV,eX,fd,q0,ZP,qP,UP,sA,Wi,Jf,se,Cl,wl,eo,U0,tX,ed,dd,nX,oA,xl,pd,J9,md,Js,j0,sd,gd,Ye,lA,$n,rX,Ol,W0,Gt,jP,iX,aA,Y0,WP,YP,rd,sX,oX,cA,ve,H0,HP,FP,kl,F0,G0,aX,GP,hA,uc,cX,KP,Sl,hX,Qt,uA,cy,K0,uX,fA,fX,Od,mc,yd,tt,dA,pA,hy,gc,mA,dX,gA,od,OA,yA,pX,bA,ld,uy,fy,wA,xA,mX,td,J0,ad,gX,ey,Oc,OX,ji,yc,JP,nd,kA,Tl,SA,vA,_0,eA,CA,yX,bX,wX,tA,ty,ci,xX,fc,to,kX,ft,SX,ny,ry,vX,Bt,CX,bc,TX,Kt,wc,PX,cd,AX,TA,xc,MX,no,QX,He,$X,iy,EX,RX,vl,DX,Gn,NX,LX,IX,_X,BX,VX,XX,zX,ZX,En,qX,sy,dy,hd,nA,PA,Oe,AA,UX,jX,cn,MA,QA,bd=S(()=>{ZT();If();Ys();Ws();m0();nP();y0();cP();tc();Hf();Hf();Ha();LP();b0();BP();T0();lc();dc=class{constructor(e,t){this.clock=e,this.len=t}},Yi=class{constructor(){this.clients=new Map}},li=(n,e,t)=>e.clients.forEach((r,i)=>{let s=n.doc.store.clients.get(i);if(s!=null){let o=s[s.length-1],l=o.id.clock+o.length;for(let a=0,c=r[a];a<r.length&&c.clock<l;c=r[++a])aA(n,s,c.clock,c.len,t)}}),WV=(n,e)=>{let t=0,r=n.length-1;for(;t<=r;){let i=Yt((t+r)/2),s=n[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;t=i+1}else r=i-1}return null},ro=(n,e)=>{let t=n.clients.get(e.client);return t!==void 0&&WV(t,e.clock)!==null},ly=n=>{n.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let t,r;for(t=1,r=1;t<e.length;t++){let i=e[r-1],s=e[t];i.clock+i.len>=s.clock?i.len=Fn(i.len,s.clock+s.len-i.clock):(r<t&&(e[r]=s),r++)}e.length=r})},B0=n=>{let e=new Yi;for(let t=0;t<n.length;t++)n[t].clients.forEach((r,i)=>{if(!e.clients.has(i)){let s=r.slice();for(let o=t+1;o<n.length;o++)XT(s,n[o].clients.get(i)||[]);e.clients.set(i,s)}});return ly(e),e},pc=(n,e,t,r)=>{Mn(n.clients,e,()=>[]).push(new dc(t,r))},ud=()=>new Yi,YV=n=>{let e=ud();return n.clients.forEach((t,r)=>{let i=[];for(let s=0;s<t.length;s++){let o=t[s];if(o.deleted){let l=o.id.clock,a=o.length;if(s+1<t.length)for(let c=t[s+1];s+1<t.length&&c.deleted;c=t[++s+1])a+=c.length;i.push(new dc(l,a))}}i.length>0&&e.clients.set(r,i)}),e},ay=(n,e)=>{ce(n.restEncoder,e.clients.size),ii(e.clients.entries()).sort((t,r)=>r[0]-t[0]).forEach(([t,r])=>{n.resetDsCurVal(),ce(n.restEncoder,t);let i=r.length;ce(n.restEncoder,i);for(let s=0;s<i;s++){let o=r[s];n.writeDsClock(o.clock),n.writeDsLen(o.len)}})},HV=n=>{let e=new Yi,t=Ae(n.restDecoder);for(let r=0;r<t;r++){n.resetDsCurVal();let i=Ae(n.restDecoder),s=Ae(n.restDecoder);if(s>0){let o=Mn(e.clients,i,()=>[]);for(let l=0;l<s;l++)o.push(new dc(n.readDsClock(),n.readDsLen()))}}return e},zP=(n,e,t)=>{let r=new Yi,i=Ae(n.restDecoder);for(let s=0;s<i;s++){n.resetDsCurVal();let o=Ae(n.restDecoder),l=Ae(n.restDecoder),a=t.clients.get(o)||[],c=Ye(t,o);for(let h=0;h<l;h++){let u=n.readDsClock(),f=u+n.readDsLen();if(u<c){c<f&&pc(r,o,c,f-c);let d=$n(a,u),p=a[d];for(!p.deleted&&p.id.clock<u&&(a.splice(d+1,0,hd(e,p,u-p.id.clock)),d++);d<a.length&&(p=a[d++],p.id.clock<f);)p.deleted||(f<p.id.clock+p.length&&a.splice(d,0,hd(e,p,f-p.id.clock)),p.delete(e))}else pc(r,o,u,f-u)}}if(r.clients.size>0){let s=new bl;return ce(s.restEncoder,0),ay(s,r),s.toUint8Array()}return null},rA=O0,ai=class n extends Ga{constructor({guid:e=oP(),collectionid:t=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=rA(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new sd,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=w0(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});let a=()=>w0(c=>{let h=u=>{(u===void 0||u===!0)&&(this.off("sync",h),c())};this.on("sync",h)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){let e=this._item;e!==null&&!this.shouldLoad&&ve(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ii(this.subdocs).map(e=>e.guid))}transact(e,t=null){return ve(this,e,t)}get(e,t=tt){let r=Mn(this.share,e,()=>{let s=new t;return s._integrate(this,null),s}),i=r.constructor;if(t!==tt&&i!==t)if(i===tt){let s=new t;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,ad)}getText(e=""){return this.get(e,ci)}getMap(e=""){return this.get(e,Oc)}getXmlElement(e=""){return this.get(e,ft)}getXmlFragment(e=""){return this.get(e,to)}toJSON(){let e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,ii(this.subdocs).forEach(t=>t.destroy());let e=this._item;if(e!==null){this._item=null;let t=e.content;t.doc=new n({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,ve(e.parent.doc,r=>{let i=t.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}},V0=class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ae(this.restDecoder),this.dsCurrVal}readDsLen(){let e=Ae(this.restDecoder)+1;return this.dsCurrVal+=e,e}},yl=class extends V0{constructor(e){super(e),this.keys=[],Ae(e),this.keyClockDecoder=new pl(an(e)),this.clientDecoder=new Ks(an(e)),this.leftClockDecoder=new pl(an(e)),this.rightClockDecoder=new pl(an(e)),this.infoDecoder=new rc(an(e),dl),this.stringDecoder=new Uf(an(e)),this.parentInfoDecoder=new rc(an(e),dl),this.typeRefDecoder=new Ks(an(e)),this.lenDecoder=new Ks(an(e))}readLeftID(){return new Wi(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Wi(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return nc(this.restDecoder)}readBuf(){return an(this.restDecoder)}readJSON(){return nc(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let t=this.stringDecoder.read();return this.keys.push(t),t}}},X0=class{constructor(){this.restEncoder=ul()}toUint8Array(){return Qn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){ce(this.restEncoder,e)}writeDsLen(e){ce(this.restEncoder,e)}},z0=class extends X0{writeLeftID(e){ce(this.restEncoder,e.client),ce(this.restEncoder,e.clock)}writeRightID(e){ce(this.restEncoder,e.client),ce(this.restEncoder,e.clock)}writeClient(e){ce(this.restEncoder,e)}writeInfo(e){Xf(this.restEncoder,e)}writeString(e){Fs(this.restEncoder,e)}writeParentInfo(e){ce(this.restEncoder,e?1:0)}writeTypeRef(e){ce(this.restEncoder,e)}writeLen(e){ce(this.restEncoder,e)}writeAny(e){qi(this.restEncoder,e)}writeBuf(e){Ft(this.restEncoder,e)}writeJSON(e){Fs(this.restEncoder,JSON.stringify(e))}writeKey(e){Fs(this.restEncoder,e)}},Z0=class{constructor(){this.restEncoder=ul(),this.dsCurrVal=0}toUint8Array(){return Qn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,ce(this.restEncoder,t)}writeDsLen(e){e===0&&bt(),ce(this.restEncoder,e-1),this.dsCurrVal+=e}},bl=class extends Z0{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new hl,this.clientEncoder=new Gs,this.leftClockEncoder=new hl,this.rightClockEncoder=new hl,this.infoEncoder=new Ja(Xf),this.stringEncoder=new Vf,this.parentInfoEncoder=new Ja(Xf),this.typeRefEncoder=new Gs,this.lenEncoder=new Gs}toUint8Array(){let e=ul();return ce(e,0),Ft(e,this.keyClockEncoder.toUint8Array()),Ft(e,this.clientEncoder.toUint8Array()),Ft(e,this.leftClockEncoder.toUint8Array()),Ft(e,this.rightClockEncoder.toUint8Array()),Ft(e,Qn(this.infoEncoder)),Ft(e,this.stringEncoder.toUint8Array()),Ft(e,Qn(this.parentInfoEncoder)),Ft(e,this.typeRefEncoder.toUint8Array()),Ft(e,this.lenEncoder.toUint8Array()),ec(e,Qn(this.restEncoder)),Qn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){qi(this.restEncoder,e)}writeBuf(e){Ft(this.restEncoder,e)}writeJSON(e){qi(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}},FV=(n,e,t,r)=>{r=Fn(r,e[0].id.clock);let i=$n(e,r);ce(n.restEncoder,e.length-i),n.writeClient(t),ce(n.restEncoder,r);let s=e[i];s.write(n,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(n,0)},iA=(n,e,t)=>{let r=new Map;t.forEach((i,s)=>{Ye(e,s)>i&&r.set(s,i)}),gd(e).forEach((i,s)=>{t.has(s)||r.set(s,0)}),ce(n.restEncoder,r.size),ii(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{FV(n,e.clients.get(i),i,s)})},GV=(n,e)=>{let t=_t(),r=Ae(n.restDecoder);for(let i=0;i<r;i++){let s=Ae(n.restDecoder),o=new Array(s),l=n.readClient(),a=Ae(n.restDecoder);t.set(l,{i:0,refs:o});for(let c=0;c<s;c++){let h=n.readInfo();switch(31&h){case 0:{let u=n.readLen();o[c]=new Kt(se(l,a),u),a+=u;break}case 10:{let u=Ae(n.restDecoder);o[c]=new cn(se(l,a),u),a+=u;break}default:{let u=(h&192)===0,f=new Oe(se(l,a),null,(h&128)===128?n.readLeftID():null,null,(h&64)===64?n.readRightID():null,u?n.readParentInfo()?e.get(n.readString()):n.readLeftID():null,u&&(h&32)===32?n.readString():null,AA(n,h));o[c]=f,a+=f.length}}}}return t},KV=(n,e,t)=>{let r=[],i=ii(t.keys()).sort((d,p)=>d-p);if(i.length===0)return null;let s=()=>{if(i.length===0)return null;let d=t.get(i[i.length-1]);for(;d.refs.length===d.i;)if(i.pop(),i.length>0)d=t.get(i[i.length-1]);else return null;return d},o=s();if(o===null)return null;let l=new sd,a=new Map,c=(d,p)=>{let m=a.get(d);(m==null||m>p)&&a.set(d,p)},h=o.refs[o.i++],u=new Map,f=()=>{for(let d of r){let p=d.id.client,m=t.get(p);m?(m.i--,l.clients.set(p,m.refs.slice(m.i)),t.delete(p),m.i=0,m.refs=[]):l.clients.set(p,[d]),i=i.filter(g=>g!==p)}r.length=0};for(;;){if(h.constructor!==cn){let p=Mn(u,h.id.client,()=>Ye(e,h.id.client))-h.id.clock;if(p<0)r.push(h),c(h.id.client,h.id.clock-1),f();else{let m=h.getMissing(n,e);if(m!==null){r.push(h);let g=t.get(m)||{refs:[],i:0};if(g.refs.length===g.i)c(m,Ye(e,m)),f();else{h=g.refs[g.i++];continue}}else(p===0||p<h.length)&&(h.integrate(n,p),u.set(h.id.client,h.id.clock+h.length))}}if(r.length>0)h=r.pop();else if(o!==null&&o.i<o.refs.length)h=o.refs[o.i++];else{if(o=s(),o===null)break;h=o.refs[o.i++]}}if(l.clients.size>0){let d=new bl;return iA(d,l,new Map),ce(d.restEncoder,0),{missing:a,update:d.toUint8Array()}}return null},JV=(n,e)=>iA(n,e.doc.store,e.beforeState),eX=(n,e,t,r=new yl(n))=>ve(e,i=>{i.local=!1;let s=!1,o=i.doc,l=o.store,a=GV(r,o),c=KV(i,l,a),h=l.pendingStructs;if(h){for(let[f,d]of h.missing)if(d<Ye(l,f)){s=!0;break}if(c){for(let[f,d]of c.missing){let p=h.missing.get(f);(p==null||p>d)&&h.missing.set(f,d)}h.update=GP([h.update,c.update])}}else l.pendingStructs=c;let u=zP(r,i,l);if(l.pendingDs){let f=new yl(jf(l.pendingDs));Ae(f.restDecoder);let d=zP(f,i,l);u&&d?l.pendingDs=GP([u,d]):l.pendingDs=u||d}else l.pendingDs=u;if(s){let f=l.pendingStructs.update;l.pendingStructs=null,fd(i.doc,f)}},t,!1),fd=(n,e,t,r=yl)=>{let i=jf(e);eX(i,n,t,new r(i))},q0=class{constructor(){this.l=[]}},ZP=()=>new q0,qP=(n,e)=>n.l.push(e),UP=(n,e)=>{let t=n.l,r=t.length;n.l=t.filter(i=>e!==i),r===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},sA=(n,e,t)=>ic(n.l,[e,t]),Wi=class{constructor(e,t){this.client=e,this.clock=t}},Jf=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,se=(n,e)=>new Wi(n,e),Cl=n=>{for(let[e,t]of n.doc.share.entries())if(t===n)return e;throw bt()},wl=(n,e)=>{for(;e!==null;){if(e.parent===n)return!0;e=e.parent._item}return!1},eo=class{constructor(e,t,r,i=0){this.type=e,this.tname=t,this.item=r,this.assoc=i}},U0=class{constructor(e,t,r=0){this.type=e,this.index=t,this.assoc=r}},tX=(n,e,t=0)=>new U0(n,e,t),ed=(n,e,t)=>{let r=null,i=null;return n._item===null?i=Cl(n):r=se(n._item.id.client,n._item.id.clock),new eo(r,i,e,t)},dd=(n,e,t=0)=>{let r=n._start;if(t<0){if(e===0)return ed(n,null,t);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return ed(n,se(r.id.client,r.id.clock+e),t);e-=r.length}if(r.right===null&&t<0)return ed(n,r.lastId,t);r=r.right}return ed(n,null,t)},nX=(n,e)=>{let t=Ol(n,e),r=e.clock-t.id.clock;return{item:t,diff:r}},oA=(n,e,t=!0)=>{let r=e.store,i=n.item,s=n.type,o=n.tname,l=n.assoc,a=null,c=0;if(i!==null){if(Ye(r,i.client)<=i.clock)return null;let h=t?sy(r,i):nX(r,i),u=h.item;if(!(u instanceof Oe))return null;if(a=u.parent,a._item===null||!a._item.deleted){c=u.deleted||!u.countable?0:h.diff+(l>=0?0:1);let f=u.left;for(;f!==null;)!f.deleted&&f.countable&&(c+=f.length),f=f.left}}else{if(o!==null)a=e.get(o);else if(s!==null){if(Ye(r,s.client)<=s.clock)return null;let{item:h}=t?sy(r,s):{item:Ol(r,s)};if(h instanceof Oe&&h.content instanceof En)a=h.content.type;else return null}else throw bt();l>=0?c=a._length:c=0}return tX(a,c,n.assoc)},xl=class{constructor(e,t){this.ds=e,this.sv=t}},pd=(n,e)=>new xl(n,e),J9=pd(ud(),new Map),md=n=>pd(YV(n.store),gd(n.store)),Js=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!ro(e.ds,n.id),j0=(n,e)=>{let t=Mn(n.meta,j0,Hn),r=n.doc.store;t.has(e)||(e.sv.forEach((i,s)=>{i<Ye(r,s)&&Gt(n,se(s,i))}),li(n,e.ds,i=>{}),t.add(e))},sd=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},gd=n=>{let e=new Map;return n.clients.forEach((t,r)=>{let i=t[t.length-1];e.set(r,i.id.clock+i.length)}),e},Ye=(n,e)=>{let t=n.clients.get(e);if(t===void 0)return 0;let r=t[t.length-1];return r.id.clock+r.length},lA=(n,e)=>{let t=n.clients.get(e.id.client);if(t===void 0)t=[],n.clients.set(e.id.client,t);else{let r=t[t.length-1];if(r.id.clock+r.length!==e.id.clock)throw bt()}t.push(e)},$n=(n,e)=>{let t=0,r=n.length-1,i=n[r],s=i.id.clock;if(s===e)return r;let o=Yt(e/(s+i.length-1)*r);for(;t<=r;){if(i=n[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;t=o+1}else r=o-1;o=Yt((t+r)/2)}throw bt()},rX=(n,e)=>{let t=n.clients.get(e.client);return t[$n(t,e.clock)]},Ol=rX,W0=(n,e,t)=>{let r=$n(e,t),i=e[r];return i.id.clock<t&&i instanceof Oe?(e.splice(r+1,0,hd(n,i,t-i.id.clock)),r+1):r},Gt=(n,e)=>{let t=n.doc.store.clients.get(e.client);return t[W0(n,t,e.clock)]},jP=(n,e,t)=>{let r=e.clients.get(t.client),i=$n(r,t.clock),s=r[i];return t.clock!==s.id.clock+s.length-1&&s.constructor!==Kt&&r.splice(i+1,0,hd(n,s,t.clock-s.id.clock+1)),s},iX=(n,e,t)=>{let r=n.clients.get(e.id.client);r[$n(r,e.id.clock)]=t},aA=(n,e,t,r,i)=>{if(r===0)return;let s=t+r,o=W0(n,e,t),l;do l=e[o++],s<l.id.clock+l.length&&W0(n,e,s),i(l);while(o<e.length&&e[o].id.clock<s)},Y0=class{constructor(e,t,r){this.doc=e,this.deleteSet=new Yi,this.beforeState=gd(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},WP=(n,e)=>e.deleteSet.clients.size===0&&!VT(e.afterState,(t,r)=>e.beforeState.get(r)!==t)?!1:(ly(e.deleteSet),JV(n,e),ay(n,e.deleteSet),!0),YP=(n,e,t)=>{let r=e._item;(r===null||r.id.clock<(n.beforeState.get(r.id.client)||0)&&!r.deleted)&&Mn(n.changed,e,Hn).add(t)},rd=(n,e)=>{let t=n[e],r=n[e-1],i=e;for(;i>0;t=r,r=n[--i-1]){if(r.deleted===t.deleted&&r.constructor===t.constructor&&r.mergeWith(t)){t instanceof Oe&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,r);continue}break}let s=e-i;return s&&n.splice(e+1-s,s),s},sX=(n,e,t)=>{for(let[r,i]of n.clients.entries()){let s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){let l=i[o],a=l.clock+l.len;for(let c=$n(s,l.clock),h=s[c];c<s.length&&h.id.clock<a;h=s[++c]){let u=s[c];if(l.clock+l.len<=u.id.clock)break;u instanceof Oe&&u.deleted&&!u.keep&&t(u)&&u.gc(e,!1)}}}},oX=(n,e)=>{n.clients.forEach((t,r)=>{let i=e.clients.get(r);for(let s=t.length-1;s>=0;s--){let o=t[s],l=si(i.length-1,1+$n(i,o.clock+o.len-1));for(let a=l,c=i[a];a>0&&c.id.clock>=o.clock;c=i[a])a-=1+rd(i,a)}})},cA=(n,e)=>{if(e<n.length){let t=n[e],r=t.doc,i=r.store,s=t.deleteSet,o=t._mergeStructs;try{ly(s),t.afterState=gd(t.doc.store),r.emit("beforeObserverCalls",[t,r]);let l=[];t.changed.forEach((a,c)=>l.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(t,a)})),l.push(()=>{t.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(h=>h.target._item===null||!h.target._item.deleted),a.forEach(h=>{h.currentTarget=c,h._path=null}),a.sort((h,u)=>h.path.length-u.path.length),sA(c._dEH,a,t))})}),l.push(()=>r.emit("afterTransaction",[t,r])),ic(l,[]),t._needFormattingCleanup&&wX(t)}finally{r.gc&&sX(s,i,r.gcFilter),oX(s,i),t.afterState.forEach((h,u)=>{let f=t.beforeState.get(u)||0;if(f!==h){let d=i.clients.get(u),p=Fn($n(d,f),1);for(let m=d.length-1;m>=p;)m-=1+rd(d,m)}});for(let h=o.length-1;h>=0;h--){let{client:u,clock:f}=o[h].id,d=i.clients.get(u),p=$n(d,f);p+1<d.length&&rd(d,p+1)>1||p>0&&rd(d,p)}if(!t.local&&t.afterState.get(r.clientID)!==t.beforeState.get(r.clientID)&&(DP(gl,ac,"[yjs] ",cc,hc,"Changed the client-id because another client seems to be using it."),r.clientID=rA()),r.emit("afterTransactionCleanup",[t,r]),r._observers.has("update")){let h=new z0;WP(h,t)&&r.emit("update",[h.toUint8Array(),t.origin,r,t])}if(r._observers.has("updateV2")){let h=new bl;WP(h,t)&&r.emit("updateV2",[h.toUint8Array(),t.origin,r,t])}let{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=t;(l.size>0||c.size>0||a.size>0)&&(l.forEach(h=>{h.clientID=r.clientID,h.collectionid==null&&(h.collectionid=r.collectionid),r.subdocs.add(h)}),c.forEach(h=>r.subdocs.delete(h)),r.emit("subdocs",[{loaded:a,added:l,removed:c},r,t]),c.forEach(h=>h.destroy())),n.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,n])):cA(n,e+1)}}},ve=(n,e,t=null,r=!0)=>{let i=n._transactionCleanups,s=!1,o=null;n._transaction===null&&(s=!0,n._transaction=new Y0(n,t,r),i.push(n._transaction),i.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{o=e(n._transaction)}finally{if(s){let l=n._transaction===i[0];n._transaction=null,l&&cA(i,0)}}return o},H0=class{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}},HP=(n,e,t)=>{li(n,t.deletions,r=>{r instanceof Oe&&e.scope.some(i=>i===n.doc||wl(i,r))&&dy(r,!1)})},FP=(n,e,t)=>{let r=null,i=n.doc,s=n.scope;ve(i,l=>{for(;e.length>0&&n.currStackItem===null;){let a=i.store,c=e.pop(),h=new Set,u=[],f=!1;li(l,c.insertions,d=>{if(d instanceof Oe){if(d.redone!==null){let{item:p,diff:m}=sy(a,d.id);m>0&&(p=Gt(l,se(p.id.client,p.id.clock+m))),d=p}!d.deleted&&s.some(p=>p===l.doc||wl(p,d))&&u.push(d)}}),li(l,c.deletions,d=>{d instanceof Oe&&s.some(p=>p===l.doc||wl(p,d))&&!ro(c.insertions,d.id)&&h.add(d)}),h.forEach(d=>{f=PA(l,d,h,c.insertions,n.ignoreRemoteMapChanges,n)!==null||f});for(let d=u.length-1;d>=0;d--){let p=u[d];n.deleteFilter(p)&&(p.delete(l),f=!0)}n.currStackItem=f?c:null}l.changed.forEach((a,c)=>{a.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=l},n);let o=n.currStackItem;if(o!=null){let l=r.changedParentTypes;n.emit("stack-item-popped",[{stackItem:o,type:t,changedParentTypes:l,origin:n},n]),n.currStackItem=null}return o},kl=class extends Ga{constructor(e,{captureTimeout:t=500,captureTransaction:r=a=>!0,deleteFilter:i=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:l=Fa(e)?e[0].doc:e instanceof ai?e:e.doc}={}){super(),this.scope=[],this.doc=l,this.addToScope(e),this.deleteFilter=i,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=a=>{if(!this.captureTransaction(a)||!this.scope.some(g=>a.changedParentTypes.has(g)||g===this.doc)||!this.trackedOrigins.has(a.origin)&&(!a.origin||!this.trackedOrigins.has(a.origin.constructor)))return;let c=this.undoing,h=this.redoing,u=c?this.redoStack:this.undoStack;c?this.stopCapturing():h||this.clear(!1,!0);let f=new Yi;a.afterState.forEach((g,O)=>{let w=a.beforeState.get(O)||0,k=g-w;k>0&&pc(f,O,w,k)});let d=Yf(),p=!1;if(this.lastChange>0&&d-this.lastChange<this.captureTimeout&&u.length>0&&!c&&!h){let g=u[u.length-1];g.deletions=B0([g.deletions,a.deleteSet]),g.insertions=B0([g.insertions,f])}else u.push(new H0(a.deleteSet,f)),p=!0;!c&&!h&&(this.lastChange=d),li(a,a.deleteSet,g=>{g instanceof Oe&&this.scope.some(O=>O===a.doc||wl(O,g))&&dy(g,!0)});let m=[{stackItem:u[u.length-1],origin:a.origin,type:c?"redo":"undo",changedParentTypes:a.changedParentTypes},this];p?this.emit("stack-item-added",m):this.emit("stack-item-updated",m)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){let t=new Set(this.scope);e=Fa(e)?e:[e],e.forEach(r=>{t.has(r)||(t.add(r),(r instanceof tt?r.doc!==this.doc:r!==this.doc)&&I0("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>HP(r,this,i)),this.undoStack=[]),t&&(this.redoStack.forEach(i=>HP(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=FP(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=FP(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}};F0=class{constructor(e,t){this.gen=lX(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===cn);return this.curr}},G0=class{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}},aX=(n,e)=>{if(n.constructor===Kt){let{client:t,clock:r}=n.id;return new Kt(se(t,r+e),n.length-e)}else if(n.constructor===cn){let{client:t,clock:r}=n.id;return new cn(se(t,r+e),n.length-e)}else{let t=n,{client:r,clock:i}=t.id;return new Oe(se(r,i+e),null,se(r,i+e-1),null,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e))}},GP=(n,e=yl,t=bl)=>{if(n.length===1)return n[0];let r=n.map(h=>new e(jf(h))),i=r.map(h=>new F0(h,!0)),s=null,o=new t,l=new G0(o);for(;i=i.filter(f=>f.curr!==null),i.sort((f,d)=>{if(f.curr.id.client===d.curr.id.client){let p=f.curr.id.clock-d.curr.id.clock;return p===0?f.curr.constructor===d.curr.constructor?0:f.curr.constructor===cn?1:-1:p}else return d.curr.id.client-f.curr.id.client}),i.length!==0;){let h=i[0],u=h.curr.id.client;if(s!==null){let f=h.curr,d=!1;for(;f!==null&&f.id.clock+f.length<=s.struct.id.clock+s.struct.length&&f.id.client>=s.struct.id.client;)f=h.next(),d=!0;if(f===null||f.id.client!==u||d&&f.id.clock>s.struct.id.clock+s.struct.length)continue;if(u!==s.struct.id.client)uc(l,s.struct,s.offset),s={struct:f,offset:0},h.next();else if(s.struct.id.clock+s.struct.length<f.id.clock)if(s.struct.constructor===cn)s.struct.length=f.id.clock+f.length-s.struct.id.clock;else{uc(l,s.struct,s.offset);let p=f.id.clock-s.struct.id.clock-s.struct.length;s={struct:new cn(se(u,s.struct.id.clock+s.struct.length),p),offset:0}}else{let p=s.struct.id.clock+s.struct.length-f.id.clock;p>0&&(s.struct.constructor===cn?s.struct.length-=p:f=aX(f,p)),s.struct.mergeWith(f)||(uc(l,s.struct,s.offset),s={struct:f,offset:0},h.next())}}else s={struct:h.curr,offset:0},h.next();for(let f=h.curr;f!==null&&f.id.client===u&&f.id.clock===s.struct.id.clock+s.struct.length&&f.constructor!==cn;f=h.next())uc(l,s.struct,s.offset),s={struct:f,offset:0}}s!==null&&(uc(l,s.struct,s.offset),s=null),cX(l);let a=r.map(h=>HV(h)),c=B0(a);return ay(o,c),o.toUint8Array()},hA=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:Qn(n.encoder.restEncoder)}),n.encoder.restEncoder=ul(),n.written=0)},uc=(n,e,t)=>{n.written>0&&n.currClient!==e.id.client&&hA(n),n.written===0&&(n.currClient=e.id.client,n.encoder.writeClient(e.id.client),ce(n.encoder.restEncoder,e.id.clock+t)),e.write(n.encoder,t),n.written++},cX=n=>{hA(n);let e=n.encoder.restEncoder;ce(e,n.clientStructs.length);for(let t=0;t<n.clientStructs.length;t++){let r=n.clientStructs[t];ce(e,r.written),ec(e,r.restEncoder)}},KP="You must not compute changes after the event-handler fired.",Sl=class{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=hX(this.currentTarget,this.target))}deletes(e){return ro(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw yr(KP);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(i=>{if(i!==null){let s=t._map.get(i),o,l;if(this.adds(s)){let a=s.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(s))if(a!==null&&this.deletes(a))o="delete",l=Lf(a.content.getContent());else return;else a!==null&&this.deletes(a)?(o="update",l=Lf(a.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=Lf(s.content.getContent());else return;e.set(i,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw yr(KP);let t=this.target,r=Hn(),i=Hn(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(t).has(null)){let l=null,a=()=>{l&&s.push(l)};for(let c=t._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((l===null||l.delete===void 0)&&(a(),l={delete:0}),l.delete+=c.length,i.add(c)):this.adds(c)?((l===null||l.insert===void 0)&&(a(),l={insert:[]}),l.insert=l.insert.concat(c.content.getContent()),r.add(c)):((l===null||l.retain===void 0)&&(a(),l={retain:0}),l.retain+=c.length);l!==null&&l.retain===void 0&&a()}this._changes=e}return e}},hX=(n,e)=>{let t=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;t.unshift(r)}e=e._item.parent}return t},Qt=()=>{I0("Invalid access: Add Yjs type to a document before reading data.")},uA=80,cy=0,K0=class{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=cy++}},uX=n=>{n.timestamp=cy++},fA=(n,e,t)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=t,n.timestamp=cy++},fX=(n,e,t)=>{if(n.length>=uA){let r=n.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return fA(r,e,t),r}else{let r=new K0(e,t);return n.push(r),r}},Od=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;let t=n._searchMarker.length===0?null:n._searchMarker.reduce((s,o)=>sl(e-s.index)<sl(e-o.index)?s:o),r=n._start,i=0;for(t!==null&&(r=t.p,i=t.index,uX(t));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return t!==null&&sl(t.index-i)<r.parent.length/uA?(fA(t,r,i),t):fX(n._searchMarker,r,i)},mc=(n,e,t)=>{for(let r=n.length-1;r>=0;r--){let i=n[r];if(t>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){n.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||t>0&&e===i.index)&&(i.index=Fn(e,i.index+t))}},yd=(n,e,t)=>{let r=n,i=e.changedParentTypes;for(;Mn(i,n,()=>[]).push(t),n._item!==null;)n=n._item.parent;sA(r._eH,t,e)},tt=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ZP(),this._dEH=ZP(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw ln()}clone(){throw ln()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){qP(this._eH,e)}observeDeep(e){qP(this._dEH,e)}unobserve(e){UP(this._eH,e)}unobserveDeep(e){UP(this._dEH,e)}toJSON(){}},dA=(n,e,t)=>{var o;(o=n.doc)!=null||Qt(),e<0&&(e=n._length+e),t<0&&(t=n._length+t);let r=t-e,i=[],s=n._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){let l=s.content.getContent();if(l.length<=e)e-=l.length;else{for(let a=e;a<l.length&&r>0;a++)i.push(l[a]),r--;e=0}}s=s.right}return i},pA=n=>{var r;(r=n.doc)!=null||Qt();let e=[],t=n._start;for(;t!==null;){if(t.countable&&!t.deleted){let i=t.content.getContent();for(let s=0;s<i.length;s++)e.push(i[s])}t=t.right}return e},hy=(n,e)=>{let t=[],r=n._start;for(;r!==null;){if(r.countable&&Js(r,e)){let i=r.content.getContent();for(let s=0;s<i.length;s++)t.push(i[s])}r=r.right}return t},gc=(n,e)=>{var i;let t=0,r=n._start;for((i=n.doc)!=null||Qt();r!==null;){if(r.countable&&!r.deleted){let s=r.content.getContent();for(let o=0;o<s.length;o++)e(s[o],t++,n)}r=r.right}},mA=(n,e)=>{let t=[];return gc(n,(r,i)=>{t.push(e(r,i,n))}),t},dX=n=>{let e=n._start,t=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),r=0,e=e.right}let i=t[r++];return t.length<=r&&(t=null),{done:!1,value:i}}}},gA=(n,e)=>{var i;(i=n.doc)!=null||Qt();let t=Od(n,e),r=n._start;for(t!==null&&(r=t.p,e-=t.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},od=(n,e,t,r)=>{let i=t,s=n.doc,o=s.clientID,l=s.store,a=t===null?e._start:t.right,c=[],h=()=>{c.length>0&&(i=new Oe(se(o,Ye(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new vl(c)),i.integrate(n,0),c=[])};r.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(h(),u.constructor){case Uint8Array:case ArrayBuffer:i=new Oe(se(o,Ye(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new wc(new Uint8Array(u))),i.integrate(n,0);break;case ai:i=new Oe(se(o,Ye(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new xc(u)),i.integrate(n,0);break;default:if(u instanceof tt)i=new Oe(se(o,Ye(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new En(u)),i.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),h()},OA=()=>yr("Length exceeded!"),yA=(n,e,t,r)=>{if(t>e._length)throw OA();if(t===0)return e._searchMarker&&mc(e._searchMarker,t,r.length),od(n,e,null,r);let i=t,s=Od(e,t),o=e._start;for(s!==null&&(o=s.p,t-=s.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&Gt(n,se(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&mc(e._searchMarker,i,r.length),od(n,e,o,r)},pX=(n,e,t)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return od(n,e,i,t)},bA=(n,e,t,r)=>{if(r===0)return;let i=t,s=r,o=Od(e,t),l=e._start;for(o!==null&&(l=o.p,t-=o.index);l!==null&&t>0;l=l.right)!l.deleted&&l.countable&&(t<l.length&&Gt(n,se(l.id.client,l.id.clock+t)),t-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Gt(n,se(l.id.client,l.id.clock+r)),l.delete(n),r-=l.length),l=l.right;if(r>0)throw OA();e._searchMarker&&mc(e._searchMarker,i,-s+r)},ld=(n,e,t)=>{let r=e._map.get(t);r!==void 0&&r.delete(n)},uy=(n,e,t,r)=>{let i=e._map.get(t)||null,s=n.doc,o=s.clientID,l;if(r==null)l=new vl([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new vl([r]);break;case Uint8Array:l=new wc(r);break;case ai:l=new xc(r);break;default:if(r instanceof tt)l=new En(r);else throw new Error("Unexpected content type")}new Oe(se(o,Ye(s.store,o)),i,i&&i.lastId,null,null,e,t,l).integrate(n,0)},fy=(n,e)=>{var r;(r=n.doc)!=null||Qt();let t=n._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},wA=n=>{var t;let e={};return(t=n.doc)!=null||Qt(),n._map.forEach((r,i)=>{r.deleted||(e[i]=r.content.getContent()[r.length-1])}),e},xA=(n,e)=>{var r;(r=n.doc)!=null||Qt();let t=n._map.get(e);return t!==void 0&&!t.deleted},mX=(n,e)=>{let t={};return n._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&Js(s,e)&&(t[i]=s.content.getContent()[s.length-1])}),t},td=n=>{var e;return(e=n.doc)!=null||Qt(),_P(n._map.entries(),t=>!t[1].deleted)},J0=class extends Sl{},ad=class n extends tt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new n;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new n}clone(){let e=new n;return e.insert(0,this.toArray().map(t=>t instanceof tt?t.clone():t)),e}get length(){var e;return(e=this.doc)!=null||Qt(),this._length}_callObserver(e,t){super._callObserver(e,t),yd(this,e,new J0(this,e))}insert(e,t){this.doc!==null?ve(this.doc,r=>{yA(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?ve(this.doc,t=>{pX(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?ve(this.doc,r=>{bA(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return gA(this,e)}toArray(){return pA(this)}slice(e=0,t=this.length){return dA(this,e,t)}toJSON(){return this.map(e=>e instanceof tt?e.toJSON():e)}map(e){return mA(this,e)}forEach(e){gc(this,e)}[Symbol.iterator](){return dX(this)}_write(e){e.writeTypeRef(IX)}},gX=n=>new ad,ey=class extends Sl{constructor(e,t,r){super(e,t),this.keysChanged=r}},Oc=class n extends tt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new n}clone(){let e=new n;return this.forEach((t,r)=>{e.set(r,t instanceof tt?t.clone():t)}),e}_callObserver(e,t){yd(this,e,new ey(this,e,t))}toJSON(){var t;(t=this.doc)!=null||Qt();let e={};return this._map.forEach((r,i)=>{if(!r.deleted){let s=r.content.getContent()[r.length-1];e[i]=s instanceof tt?s.toJSON():s}}),e}get size(){return[...td(this)].length}keys(){return Kf(td(this),e=>e[0])}values(){return Kf(td(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Kf(td(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){var t;(t=this.doc)!=null||Qt(),this._map.forEach((r,i)=>{r.deleted||e(r.content.getContent()[r.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?ve(this.doc,t=>{ld(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?ve(this.doc,r=>{uy(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return fy(this,e)}has(e){return xA(this,e)}clear(){this.doc!==null?ve(this.doc,e=>{this.forEach(function(t,r,i){ld(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(_X)}},OX=n=>new Oc,ji=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&yP(n,e),yc=class{constructor(e,t,r,i){this.left=e,this.right=t,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&bt(),this.right.content.constructor){case He:this.right.deleted||Tl(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}},JP=(n,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case He:e.right.deleted||Tl(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&Gt(n,se(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},nd=(n,e,t,r)=>{let i=new Map,s=r?Od(e,t):null;if(s){let o=new yc(s.p.left,s.p,s.index,i);return JP(n,o,t-s.index)}else{let o=new yc(null,e._start,0,i);return JP(n,o,t)}},kA=(n,e,t,r)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===He&&ji(r.get(t.right.content.key),t.right.content.value));)t.right.deleted||r.delete(t.right.content.key),t.forward();let i=n.doc,s=i.clientID;r.forEach((o,l)=>{let a=t.left,c=t.right,h=new Oe(se(s,Ye(i.store,s)),a,a&&a.lastId,c,c&&c.id,e,null,new He(l,o));h.integrate(n,0),t.right=h,t.forward()})},Tl=(n,e)=>{let{key:t,value:r}=e;r===null?n.delete(t):n.set(t,r)},SA=(n,e)=>{var t;for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===He&&ji((t=e[n.right.content.key])!=null?t:null,n.right.content.value)))break;n.forward()}},vA=(n,e,t,r)=>{var l;let i=n.doc,s=i.clientID,o=new Map;for(let a in r){let c=r[a],h=(l=t.currentAttributes.get(a))!=null?l:null;if(!ji(h,c)){o.set(a,h);let{left:u,right:f}=t;t.right=new Oe(se(s,Ye(i.store,s)),u,u&&u.lastId,f,f&&f.id,e,null,new He(a,c)),t.right.integrate(n,0),t.forward()}}return o},_0=(n,e,t,r,i)=>{t.currentAttributes.forEach((f,d)=>{i[d]===void 0&&(i[d]=null)});let s=n.doc,o=s.clientID;SA(t,i);let l=vA(n,e,t,i),a=r.constructor===String?new Gn(r):r instanceof tt?new En(r):new no(r),{left:c,right:h,index:u}=t;e._searchMarker&&mc(e._searchMarker,t.index,a.getLength()),h=new Oe(se(o,Ye(s.store,o)),c,c&&c.lastId,h,h&&h.id,e,null,a),h.integrate(n,0),t.right=h,t.index=u,t.forward(),kA(n,e,t,l)},eA=(n,e,t,r,i)=>{let s=n.doc,o=s.clientID;SA(t,i);let l=vA(n,e,t,i);e:for(;t.right!==null&&(r>0||l.size>0&&(t.right.deleted||t.right.content.constructor===He));){if(!t.right.deleted)switch(t.right.content.constructor){case He:{let{key:a,value:c}=t.right.content,h=i[a];if(h!==void 0){if(ji(h,c))l.delete(a);else{if(r===0)break e;l.set(a,c)}t.right.delete(n)}else t.currentAttributes.set(a,c);break}default:r<t.right.length&&Gt(n,se(t.right.id.client,t.right.id.clock+r)),r-=t.right.length;break}t.forward()}if(r>0){let a="";for(;r>0;r--)a+=`
`;t.right=new Oe(se(o,Ye(s.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new Gn(a)),t.right.integrate(n,0),t.forward()}kA(n,e,t,l)},CA=(n,e,t,r,i)=>{var c,h;let s=e,o=_t();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===He){let u=s.content;o.set(u.key,u)}s=s.right}let l=0,a=!1;for(;e!==s;){if(t===e&&(a=!0),!e.deleted){let u=e.content;switch(u.constructor){case He:{let{key:f,value:d}=u,p=(c=r.get(f))!=null?c:null;(o.get(f)!==u||p===d)&&(e.delete(n),l++,!a&&((h=i.get(f))!=null?h:null)===d&&p!==d&&(p===null?i.delete(f):i.set(f,p))),!a&&!e.deleted&&Tl(i,u);break}}}e=e.right}return l},yX=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;let t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===He){let r=e.content.key;t.has(r)?e.delete(n):t.add(r)}e=e.left}},bX=n=>{let e=0;return ve(n.doc,t=>{let r=n._start,i=n._start,s=_t(),o=Df(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case He:Tl(o,i.content);break;default:e+=CA(t,r,i,s,o),s=Df(o),r=i;break}i=i.right}}),e},wX=n=>{let e=new Set,t=n.doc;for(let[r,i]of n.afterState.entries()){let s=n.beforeState.get(r)||0;i!==s&&aA(n,t.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===He&&o.constructor!==Kt&&e.add(o.parent)})}ve(t,r=>{li(n,n.deleteSet,i=>{if(i instanceof Kt||!i.parent._hasFormatting||e.has(i.parent))return;let s=i.parent;i.content.constructor===He?e.add(s):yX(r,i)});for(let i of e)bX(i)})},tA=(n,e,t)=>{let r=t,i=Df(e.currentAttributes),s=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case En:case no:case Gn:t<e.right.length&&Gt(n,se(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(n);break}e.forward()}s&&CA(n,s,e.right,i,e.currentAttributes);let o=(e.left||e.right).parent;return o._searchMarker&&mc(o._searchMarker,e.index,-r+t),e},ty=class extends Sl{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){let e=this.target.doc,t=[];ve(e,r=>{var d,p,m;let i=new Map,s=new Map,o=this.target._start,l=null,a={},c="",h=0,u=0,f=()=>{if(l!==null){let g=null;switch(l){case"delete":u>0&&(g={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(g={insert:c},i.size>0&&(g.attributes={},i.forEach((O,w)=>{O!==null&&(g.attributes[w]=O)}))),c="";break;case"retain":h>0&&(g={retain:h},OP(a)||(g.attributes=mP({},a))),h=0;break}g&&t.push(g),l=null}};for(;o!==null;){switch(o.content.constructor){case En:case no:this.adds(o)?this.deletes(o)||(f(),l="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(l!=="delete"&&(f(),l="delete"),u+=1):o.deleted||(l!=="retain"&&(f(),l="retain"),h+=1);break;case Gn:this.adds(o)?this.deletes(o)||(l!=="insert"&&(f(),l="insert"),c+=o.content.str):this.deletes(o)?(l!=="delete"&&(f(),l="delete"),u+=o.length):o.deleted||(l!=="retain"&&(f(),l="retain"),h+=o.length);break;case He:{let{key:g,value:O}=o.content;if(this.adds(o)){if(!this.deletes(o)){let w=(d=i.get(g))!=null?d:null;ji(w,O)?O!==null&&o.delete(r):(l==="retain"&&f(),ji(O,(p=s.get(g))!=null?p:null)?delete a[g]:a[g]=O)}}else if(this.deletes(o)){s.set(g,O);let w=(m=i.get(g))!=null?m:null;ji(w,O)||(l==="retain"&&f(),a[g]=w)}else if(!o.deleted){s.set(g,O);let w=a[g];w!==void 0&&(ji(w,O)?w!==null&&o.delete(r):(l==="retain"&&f(),O===null?delete a[g]:a[g]=O))}o.deleted||(l==="insert"&&f(),Tl(i,o.content));break}}o=o.right}for(f();t.length>0;){let g=t[t.length-1];if(g.retain!==void 0&&g.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}},ci=class n extends tt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){var e;return(e=this.doc)!=null||Qt(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new n}clone(){let e=new n;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let r=new ty(this,e,t);yd(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){var r;(r=this.doc)!=null||Qt();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===Gn&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?ve(this.doc,r=>{let i=new yc(null,this._start,0,new Map);for(let s=0;s<e.length;s++){let o=e[s];if(o.insert!==void 0){let l=!t&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&_0(r,this,i,l,o.attributes||{})}else o.retain!==void 0?eA(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&tA(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){var u;(u=this.doc)!=null||Qt();let i=[],s=new Map,o=this.doc,l="",a=this._start;function c(){if(l.length>0){let f={},d=!1;s.forEach((m,g)=>{d=!0,f[g]=m});let p={insert:l};d&&(p.attributes=f),i.push(p),l=""}}let h=()=>{for(;a!==null;){if(Js(a,e)||t!==void 0&&Js(a,t))switch(a.content.constructor){case Gn:{let f=s.get("ychange");e!==void 0&&!Js(a,e)?(f===void 0||f.user!==a.id.client||f.type!=="removed")&&(c(),s.set("ychange",r?r("removed",a.id):{type:"removed"})):t!==void 0&&!Js(a,t)?(f===void 0||f.user!==a.id.client||f.type!=="added")&&(c(),s.set("ychange",r?r("added",a.id):{type:"added"})):f!==void 0&&(c(),s.delete("ychange")),l+=a.content.str;break}case En:case no:{c();let f={insert:a.content.getContent()[0]};if(s.size>0){let d={};f.attributes=d,s.forEach((p,m)=>{d[m]=p})}i.push(f);break}case He:Js(a,e)&&(c(),Tl(s,a.content));break}a=a.right}c()};return e||t?ve(o,f=>{e&&j0(f,e),t&&j0(f,t),h()},"cleanup"):h(),i}insert(e,t,r){if(t.length<=0)return;let i=this.doc;i!==null?ve(i,s=>{let o=nd(s,this,e,!r);r||(r={},o.currentAttributes.forEach((l,a)=>{r[a]=l})),_0(s,this,o,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){let i=this.doc;i!==null?ve(i,s=>{let o=nd(s,this,e,!r);_0(s,this,o,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(t===0)return;let r=this.doc;r!==null?ve(r,i=>{tA(i,nd(i,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(t===0)return;let i=this.doc;i!==null?ve(i,s=>{let o=nd(s,this,e,!1);o.right!==null&&eA(s,this,o,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){this.doc!==null?ve(this.doc,t=>{ld(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?ve(this.doc,r=>{uy(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return fy(this,e)}getAttributes(){return wA(this)}_write(e){e.writeTypeRef(BX)}},xX=n=>new ci,fc=class{constructor(e,t=()=>!0){var r;this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,(r=e.doc)!=null||Qt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===ft||t.constructor===to)&&t._start!==null)e=t._start;else for(;e!==null;){let r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}},to=class n extends tt{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new n}clone(){let e=new n;return e.insert(0,this.toArray().map(t=>t instanceof tt?t.clone():t)),e}get length(){var e;return(e=this.doc)!=null||Qt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new fc(this,e)}querySelector(e){e=e.toUpperCase();let r=new fc(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),ii(new fc(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){yd(this,e,new ny(this,t,e))}toString(){return mA(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){let i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),gc(this,s=>{i.insertBefore(s.toDOM(e,t,r),null)}),i}insert(e,t){this.doc!==null?ve(this.doc,r=>{yA(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)ve(this.doc,r=>{let i=e&&e instanceof tt?e._item:e;od(r,this,i,t)});else{let r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw yr("Reference item not found");r.splice(i,0,...t)}}delete(e,t=1){this.doc!==null?ve(this.doc,r=>{bA(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return pA(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return gA(this,e)}slice(e=0,t=this.length){return dA(this,e,t)}forEach(e){gc(this,e)}_write(e){e.writeTypeRef(XX)}},kX=n=>new to,ft=class n extends to{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new n(this.nodeName)}clone(){let e=new n(this.nodeName),t=this.getAttributes();return gP(t,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof tt?r.clone():r)),e}toString(){let e=this.getAttributes(),t=[],r=[];for(let l in e)r.push(l);r.sort();let i=r.length;for(let l=0;l<i;l++){let a=r[l];t.push(a+'="'+e[a]+'"')}let s=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?ve(this.doc,t=>{ld(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?ve(this.doc,r=>{uy(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return fy(this,e)}hasAttribute(e){return xA(this,e)}getAttributes(e){return e?mX(this,e):wA(this)}toDOM(e=document,t={},r){let i=e.createElement(this.nodeName),s=this.getAttributes();for(let o in s){let l=s[o];typeof l=="string"&&i.setAttribute(o,l)}return gc(this,o=>{i.appendChild(o.toDOM(e,t,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(VX),e.writeKey(this.nodeName)}},SX=n=>new ft(n.readKey()),ny=class extends Sl{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}},ry=class n extends Oc{constructor(e){super(),this.hookName=e}_copy(){return new n(this.hookName)}clone(){let e=new n(this.hookName);return this.forEach((t,r)=>{e.set(r,t)}),e}toDOM(e=document,t={},r){let i=t[this.hookName],s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(zX),e.writeKey(this.hookName)}},vX=n=>new ry(n.readKey()),Bt=class n extends ci{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new n}clone(){let e=new n;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,r){let i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{let t=[];for(let i in e.attributes){let s=[];for(let o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,l)=>o.key<l.key?-1:1),t.push({nodeName:i,attrs:s})}t.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<t.length;i++){let s=t[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){let l=s.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=t.length-1;i>=0;i--)r+=`</${t[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(ZX)}},CX=n=>new Bt,bc=class{constructor(e,t){this.id=e,this.length=t}get deleted(){throw ln()}mergeWith(e){return!1}write(e,t,r){throw ln()}integrate(e,t){throw ln()}},TX=0,Kt=class extends bc{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),lA(e.doc.store,this)}write(e,t){e.writeInfo(TX),e.writeLen(this.length-t)}getMissing(e,t){return null}},wc=class n{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new n(this.content)}splice(e){throw ln()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}},PX=n=>new wc(n.readBuf()),cd=class n{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new n(this.len)}splice(e){let t=new n(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){pc(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}},AX=n=>new cd(n.readLen()),TA=(n,e)=>new ai({guid:n,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1}),xc=class n{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new n(TA(this.doc.guid,this.opts))}splice(e){throw ln()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}},MX=n=>new xc(TA(n.readString(),n.readAny())),no=class n{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new n(this.embed)}splice(e){throw ln()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}},QX=n=>new no(n.readJSON()),He=class n{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new n(this.key,this.value)}splice(e){throw ln()}mergeWith(e){return!1}integrate(e,t){let r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}},$X=n=>new He(n.readKey(),n.readJSON()),iy=class n{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new n(this.arr)}splice(e){let t=new n(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let i=t;i<r;i++){let s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}},EX=n=>{let e=n.readLen(),t=[];for(let r=0;r<e;r++){let i=n.readString();i==="undefined"?t.push(void 0):t.push(JSON.parse(i))}return new iy(t)},RX=sc("node_env")==="development",vl=class n{constructor(e){this.arr=e,RX&&C0(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new n(this.arr)}splice(e){let t=new n(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let i=t;i<r;i++){let s=this.arr[i];e.writeAny(s)}}getRef(){return 8}},DX=n=>{let e=n.readLen(),t=[];for(let r=0;r<e;r++)t.push(n.readAny());return new vl(t)},Gn=class n{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new n(this.str)}splice(e){let t=new n(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",t.str="\uFFFD"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}},NX=n=>new Gn(n.readString()),LX=[gX,OX,xX,SX,kX,vX,CX],IX=0,_X=1,BX=2,VX=3,XX=4,zX=5,ZX=6,En=class n{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new n(this.type._copy())}splice(e){throw ln()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}},qX=n=>new En(LX[n.readTypeRef()](n)),sy=(n,e)=>{let t=e,r=0,i;do r>0&&(t=se(t.client,t.clock+r)),i=Ol(n,t),r=t.clock-i.id.clock,t=i.redone;while(t!==null&&i instanceof Oe);return{item:i,diff:r}},dy=(n,e)=>{for(;n!==null&&n.keep!==e;)n.keep=e,n=n.parent._item},hd=(n,e,t)=>{let{client:r,clock:i}=e.id,s=new Oe(se(r,i+t),e,se(r,i+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=se(e.redone.client,e.redone.clock+t)),e.right=s,s.right!==null&&(s.right.left=s),n._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=t,s},nA=(n,e)=>zT(n,t=>ro(t.deletions,e)),PA=(n,e,t,r,i,s)=>{let o=n.doc,l=o.store,a=o.clientID,c=e.redone;if(c!==null)return Gt(n,c);let h=e.parent._item,u=null,f;if(h!==null&&h.deleted===!0){if(h.redone===null&&(!t.has(h)||PA(n,h,t,r,i,s)===null))return null;for(;h.redone!==null;)h=Gt(n,h.redone)}let d=h===null?e.parent:h.content.type;if(e.parentSub===null){for(u=e.left,f=e;u!==null;){let O=u;for(;O!==null&&O.parent._item!==h;)O=O.redone===null?null:Gt(n,O.redone);if(O!==null&&O.parent._item===h){u=O;break}u=u.left}for(;f!==null;){let O=f;for(;O!==null&&O.parent._item!==h;)O=O.redone===null?null:Gt(n,O.redone);if(O!==null&&O.parent._item===h){f=O;break}f=f.right}}else if(f=null,e.right&&!i){for(u=e;u!==null&&u.right!==null&&(u.right.redone||ro(r,u.right.id)||nA(s.undoStack,u.right.id)||nA(s.redoStack,u.right.id));)for(u=u.right;u.redone;)u=Gt(n,u.redone);if(u&&u.right!==null)return null}else u=d._map.get(e.parentSub)||null;let p=Ye(l,a),m=se(a,p),g=new Oe(m,u,u&&u.lastId,f,f&&f.id,d,e.parentSub,e.content.copy());return e.redone=m,dy(g,!0),g.integrate(n,0),g},Oe=class n extends bc{constructor(e,t,r,i,s,o,l,a){super(e,a.getLength()),this.origin=r,this.left=t,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(this.info&8)>0!==e&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ye(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ye(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Wi&&this.id.client!==this.parent.client&&this.parent.clock>=Ye(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=jP(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Gt(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Kt||this.right&&this.right.constructor===Kt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===n?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Wi){let r=Ol(t,this.parent);r.constructor===Kt?this.parent=null:this.parent=r.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=jP(e,e.doc.store,se(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;let s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Jf(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(Jf(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(Ol(e.doc.store,i.origin)))s.has(Ol(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){let r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),lA(e.doc.store,this),this.content.integrate(e,this),YP(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Kt(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:se(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Jf(e.origin,this.lastId)&&this.right===e&&Jf(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),pc(e.deleteSet,this.id.client,this.id.clock,this.length),YP(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw bt();this.content.gc(e),t?iX(e,this,new Kt(this.id,this.length)):this.content=new cd(this.length)}write(e,t){let r=t>0?se(this.id.client,this.id.clock+t-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&31|(r===null?0:128)|(i===null?0:64)|(s===null?0:32);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){let l=this.parent;if(l._item!==void 0){let a=l._item;if(a===null){let c=Cl(l);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===Wi?(e.writeParentInfo(!1),e.writeLeftID(l)):bt();s!==null&&e.writeString(s)}this.content.write(e,t)}},AA=(n,e)=>UX[e&31](n),UX=[()=>{bt()},AX,EX,PX,NX,QX,$X,qX,DX,MX,()=>{bt()}],jX=10,cn=class extends bc{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){bt()}write(e,t){e.writeInfo(jX),ce(e.restEncoder,this.length-t)}getMissing(e,t){return null}},MA=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{},QA="__ $YJS$ __";MA[QA]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");MA[QA]=!0});var EA=S(()=>{});var RA,DA=S(()=>{RA=()=>{let n=!0;return(e,t)=>{if(n){n=!1;try{e()}finally{n=!0}}else t!==void 0&&t()}}});var WX,YX,HX,NA,LA=S(()=>{WX=/[\uD800-\uDBFF]/,YX=/[\uDC00-\uDFFF]/,HX=(n,e)=>{let t=0,r=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;for(t>0&&WX.test(n[t-1])&&t--;r+t<n.length&&r+t<e.length&&n[n.length-r-1]===e[e.length-r-1];)r++;return r>0&&YX.test(n[n.length-r])&&r--,{index:t,remove:n.length-t-r,insert:e.slice(t,e.length-r)}},NA=HX});var Me,Rn,iG,wd=S(()=>{lt();Me=new ee("y-sync"),Rn=new ee("y-undo"),iG=new ee("yjs-cursor")});var kr,FX,GX,KX,JX,ez,tz,py,IA,_A=S(()=>{kr=(n,e)=>n>>>e|n<<32-e,FX=n=>kr(n,2)^kr(n,13)^kr(n,22),GX=n=>kr(n,6)^kr(n,11)^kr(n,25),KX=n=>kr(n,7)^kr(n,18)^n>>>3,JX=n=>kr(n,17)^kr(n,19)^n>>>10,ez=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tz=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),py=class{constructor(){let e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(tz),this._W=new Uint32Array(e,64,64)}_updateHash(){let e=this._H,t=this._W;for(let u=16;u<64;u++)t[u]=JX(t[u-2])+t[u-7]+KX(t[u-15])+t[u-16];let r=e[0],i=e[1],s=e[2],o=e[3],l=e[4],a=e[5],c=e[6],h=e[7];for(let u=0,f,d;u<64;u++)f=h+GX(l)+(l&a^~l&c)+ez[u]+t[u]>>>0,d=FX(r)+(r&i^r&s^i&s)>>>0,h=c,c=a,a=l,l=o+f>>>0,o=s,s=i,i=r,r=f+d>>>0;e[0]+=r,e[1]+=i,e[2]+=s,e[3]+=o,e[4]+=l,e[5]+=a,e[6]+=c,e[7]+=h}digest(e){let t=0;for(;t+56<=e.length;){let o=0;for(;o<16&&t+3<e.length;o++)this._W[o]=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];if(t%64!==0){for(this._W.fill(0,o,16);t<e.length;)this._W[o]|=e[t]<<(3-t%4)*8,t++;this._W[o]|=128<<(3-t%4)*8}this._updateHash()}let r=t%64!==0;this._W.fill(0,0,16);let i=0;for(;t<e.length;i++)for(let o=3;o>=0&&t<e.length;o--)this._W[i]|=e[t++]<<o*8;r||(this._W[i-(t%4===0?0:1)]|=128<<(3-t%4)*8),this._W[14]=e.byteLength/536870912,this._W[15]=e.byteLength*8,this._updateHash();let s=new Uint8Array(32);for(let o=0;o<this._H.length;o++)for(let l=0;l<4;l++)s[o*4+l]=this._H[o]>>>(3-l)*8;return s}},IA=n=>new py().digest(n)});var rz,BA,VA=S(()=>{_A();TP();rz=n=>{for(let t=6;t<n.length;t++)n[t%6]=n[t%6]^n[t];return n.slice(0,6)},BA=n=>vP(rz(IA(CP(n))))});var Sc,sz,oz,Oy,lz,vc,xd,ZA,kc,az,cz,hz,my,XA,yy,Sd,qA,Cc,kd,zA,uz,fz,dz,vd,pz,UA,Tc,gy,Cd=S(()=>{DA();nn();lt();Ys();T0();Ha();LA();tc();wd();bd();by();y0();lc();M0();QP();Ws();VA();Sc=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&e.sv.get(n.id.client)>n.id.clock&&!ro(e.ds,n.id),sz=[{light:"#ecd44433",dark:"#ecd444"}],oz=(n,e,t)=>{if(!n.has(t)){if(n.size<e.length){let r=Hn();n.forEach(i=>r.add(i)),e=e.filter(i=>!r.has(i))}n.set(t,sP(e))}return n.get(t)},Oy=(n,{colors:e=sz,colorMapping:t=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:s}={})=>{let o=!1,l=new xd(n,s),a=new F({props:{editable:c=>{let h=Me.getState(c);return h.snapshot==null&&h.prevSnapshot==null}},key:Me,state:{init:(c,h)=>({type:n,doc:n.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:t,permanentUserData:r}),apply:(c,h)=>{let u=c.getMeta(Me);if(u!==void 0){h=Object.assign({},h);for(let f in u)h[f]=u[f]}return h.addToHistory=c.getMeta("addToHistory")!==!1,h.isChangeOrigin=u!==void 0&&!!u.isChangeOrigin,h.isUndoRedoOperation=u!==void 0&&!!u.isChangeOrigin&&!!u.isUndoRedoOperation,l.prosemirrorView!==null&&u!==void 0&&(u.snapshot!=null||u.prevSnapshot!=null)&&Q0(0,()=>{l.prosemirrorView!=null&&(u.restore==null?l._renderSnapshot(u.snapshot,u.prevSnapshot,h):(l._renderSnapshot(u.snapshot,u.snapshot,h),delete h.restore,delete h.snapshot,delete h.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))}),h}},view:c=>(l.initView(c),s==null&&l._forceRerender(),i(),{update:()=>{let h=a.getState(c.state);if(h.snapshot==null&&h.prevSnapshot==null&&(o||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(o=!0,h.addToHistory===!1&&!h.isChangeOrigin){let u=Rn.getState(c.state),f=u&&u.undoManager;f&&f.stopCapturing()}l.mux(()=>{h.doc.transact(u=>{u.meta.set("addToHistory",h.addToHistory),l._prosemirrorChanged(c.state.doc)},Me)})}},destroy:()=>{l.destroy()}})});return a},lz=(n,e,t)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")n.setSelection(new pt(n.doc));else if(e.type==="node"){let r=io(t.doc,t.type,e.anchor,t.mapping);n.setSelection(z.create(n.doc,r))}else{let r=io(t.doc,t.type,e.anchor,t.mapping),i=io(t.doc,t.type,e.head,t.mapping);if(r!==null&&i!==null){let s=V.between(n.doc.resolve(r),n.doc.resolve(i));n.setSelection(s)}}},vc=(n,e)=>({type:e.selection.jsonID,anchor:Pl(e.selection.anchor,n.type,n.mapping),head:Pl(e.selection.head,n.type,n.mapping)}),xd=class{constructor(e,t=new Map){this.type=e,this.prosemirrorView=null,this.mux=RA(),this.mapping=t,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=vc(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(oc&&this._domSelectionInView===null&&(Q0(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){let e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;let t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),t.getClientRects().length===0&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);let i=t.getBoundingClientRect(),s=oi.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||s.clientWidth||0)&&i.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,t){t||(t=pd(ud(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Me,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{let e=this.type.toArray().map(r=>kc(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new E(A.from(e),0,0));t.setMeta(Me,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{let e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,t=this.type.toArray().map(i=>kc(i,this.prosemirrorView.state.schema,this)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new E(A.from(t),0,0));if(e){let i=si(Fn(e.anchor,0),r.doc.content.size),s=si(Fn(e.head,0),r.doc.content.size);r.setSelection(V.create(r.doc,i,s))}this.prosemirrorView.dispatch(r.setMeta(Me,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,t,r){var o;let i=this.doc,s=this.type;if(e||(e=md(this.doc)),e instanceof Uint8Array||t instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(t instanceof Uint8Array))&&bt(),i=new ai({gc:!1}),fd(i,t),t=md(i),fd(i,e),e=md(i),s._item===null){let l=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);s=i.getXmlFragment(l)}else{let l=(o=i.store.clients.get(s._item.id.client))!=null?o:[],a=$n(l,s._item.id.clock);s=l[a].content.type}this.mapping.clear(),this.mux(()=>{i.transact(l=>{let a=r.permanentUserData;a&&a.dss.forEach(f=>{li(l,f,d=>{})});let c=(f,d)=>{let p=f==="added"?a.getUserByClientId(d.client):a.getUserByDeletedId(d);return{user:p,type:f,color:oz(r.colorMapping,r.colors,p)}},h=hy(s,new xl(t.ds,e.sv)).map(f=>!f._item.deleted||Sc(f._item,e)||Sc(f._item,t)?kc(f,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,t,c):null).filter(f=>f!==null),u=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new E(A.from(h),0,0));this.prosemirrorView.dispatch(u.setMeta(Me,{isChangeOrigin:!0}))},Me)})}_typeChanged(e,t){if(this.prosemirrorView==null)return;let r=Me.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{let i=(l,a)=>this.mapping.delete(a);li(t,t.deleteSet,l=>{if(l.constructor===Oe){let a=l.content.type;a&&this.mapping.delete(a)}}),t.changed.forEach(i),t.changedParentTypes.forEach(i);let s=this.type.toArray().map(l=>ZA(l,this.prosemirrorView.state.schema,this)).filter(l=>l!==null),o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new E(A.from(s),0,0));lz(o,this.beforeTransactionSelection,this),o=o.setMeta(Me,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof kl}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)})}_prosemirrorChanged(e){this.doc.transact(()=>{Tc(this.doc,this.type,e,this),this.beforeTransactionSelection=vc(this,this.prosemirrorView.state)},Me)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}},ZA=(n,e,t,r,i,s)=>{let o=t.mapping.get(n);if(o===void 0){if(n instanceof ft)return kc(n,e,t,r,i,s);throw ln()}return o},kc=(n,e,t,r,i,s)=>{let o=[],l=a=>{var c,h;if(a instanceof ft){let u=ZA(a,e,t,r,i,s);u!==null&&o.push(u)}else{let u=(h=(c=a._item.right)==null?void 0:c.content)==null?void 0:h.type;u instanceof ci&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(a.applyDelta([{retain:a.length},...u.toDelta()]),u.doc.transact(d=>{u._item.delete(d)}));let f=az(a,e,t,r,i,s);f!==null&&f.forEach(d=>{d!==null&&o.push(d)})}};r===void 0||i===void 0?n.toArray().forEach(l):hy(n,new xl(i.ds,r.sv)).forEach(l);try{let a=n.getAttributes(r);r!==void 0&&(Sc(n._item,r)?Sc(n._item,i)||(a.ychange=s?s("added",n._item.id):{type:"added"}):a.ychange=s?s("removed",n._item.id):{type:"removed"});let c=e.node(n.nodeName,a,o);return t.mapping.set(n,c),c}catch(a){return n.doc.transact(c=>{n._item.delete(c)},Me),t.mapping.delete(n),null}},az=(n,e,t,r,i,s)=>{let o=[],l=n.toDelta(r,i,s);try{for(let a=0;a<l.length;a++){let c=l[a];o.push(e.text(c.insert,pz(c.attributes,e)))}}catch(a){return n.doc.transact(c=>{n._item.delete(c)},Me),null}return o},cz=(n,e)=>{let t=new Bt,r=n.map(i=>({insert:i.text,attributes:UA(i.marks,e)}));return t.applyDelta(r),e.mapping.set(t,n),t},hz=(n,e)=>{let t=new ft(n.type.name);for(let r in n.attrs){let i=n.attrs[r];i!==null&&r!=="ychange"&&t.setAttribute(r,i)}return t.insert(0,Sd(n).map(r=>my(r,e))),e.mapping.set(t,n),t},my=(n,e)=>n instanceof Array?cz(n,e):hz(n,e),XA=n=>typeof n=="object"&&n!==null,yy=(n,e)=>{let t=Object.keys(n).filter(i=>n[i]!==null),r=t.length===(e==null?0:Object.keys(e).filter(i=>e[i]!==null).length);for(let i=0;i<t.length&&r;i++){let s=t[i],o=n[s],l=e[s];r=s==="ychange"||o===l||XA(o)&&XA(l)&&yy(o,l)}return r},Sd=n=>{let e=n.content.content,t=[];for(let r=0;r<e.length;r++){let i=e[r];if(i.isText){let s=[];for(let o=e[r];r<e.length&&o.isText;o=e[++r])s.push(o);r--,t.push(s)}else t.push(i)}return t},qA=(n,e)=>{let t=n.toDelta();return t.length===e.length&&t.every((r,i)=>r.insert===e[i].text&&S0(r.attributes||{}).length===e[i].marks.length&&v0(r.attributes,(s,o)=>{var c;let l=vd(o),a=e[i].marks;return yy(s,(c=a.find(h=>h.type.name===l))==null?void 0:c.attrs)}))},Cc=(n,e)=>{if(n instanceof ft&&!(e instanceof Array)&&gy(n,e)){let t=Sd(e);return n._length===t.length&&yy(n.getAttributes(),e.attrs)&&n.toArray().every((r,i)=>Cc(r,t[i]))}return n instanceof Bt&&e instanceof Array&&qA(n,e)},kd=(n,e)=>n===e||n instanceof Array&&e instanceof Array&&n.length===e.length&&n.every((t,r)=>e[r]===t),zA=(n,e,t)=>{let r=n.toArray(),i=Sd(e),s=i.length,o=r.length,l=si(o,s),a=0,c=0,h=!1;for(;a<l;a++){let u=r[a],f=i[a];if(kd(t.mapping.get(u),f))h=!0;else if(!Cc(u,f))break}for(;a+c<l;c++){let u=r[o-c-1],f=i[s-c-1];if(kd(t.mapping.get(u),f))h=!0;else if(!Cc(u,f))break}return{equalityFactor:a+c,foundMappedChild:h}},uz=n=>{let e="",t=n._start,r={};for(;t!==null;)t.deleted||(t.countable&&t.content instanceof Gn?e+=t.content.str:t.content instanceof He&&(r[t.content.key]=null)),t=t.right;return{str:e,nAttrs:r}},fz=(n,e,t)=>{t.mapping.set(n,e);let{nAttrs:r,str:i}=uz(n),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,UA(c.marks,t))})),{insert:o,remove:l,index:a}=NA(i,s.map(c=>c.insert).join(""));n.delete(a,l),n.insert(a,o),n.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},dz=/(.*)(--[a-zA-Z0-9+/=]{8})$/,vd=n=>{var e,t;return(t=(e=dz.exec(n))==null?void 0:e[1])!=null?t:n},pz=(n,e)=>{let t=[];for(let r in n)t.push(e.mark(vd(r),n[r]));return t},UA=(n,e)=>{let t={};return n.forEach(r=>{if(r.type.name!=="ychange"){let i=Mn(e.isOMark,r.type,()=>!r.type.excludes(r.type));t[i?`${r.type.name}--${BA(r.toJSON())}`:r.type.name]=r.attrs}}),t},Tc=(n,e,t,r)=>{if(e instanceof ft&&e.nodeName!==t.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,t),e instanceof ft){let u=e.getAttributes(),f=t.attrs;for(let d in f)f[d]!==null?u[d]!==f[d]&&d!=="ychange"&&e.setAttribute(d,f[d]):e.removeAttribute(d);for(let d in u)f[d]===void 0&&e.removeAttribute(d)}let i=Sd(t),s=i.length,o=e.toArray(),l=o.length,a=si(s,l),c=0,h=0;for(;c<a;c++){let u=o[c],f=i[c];if(!kd(r.mapping.get(u),f))if(Cc(u,f))r.mapping.set(u,f);else break}for(;h+c+1<a;h++){let u=o[l-h-1],f=i[s-h-1];if(!kd(r.mapping.get(u),f))if(Cc(u,f))r.mapping.set(u,f);else break}n.transact(()=>{for(;l-c-h>0&&s-c-h>0;){let f=o[c],d=i[c],p=o[l-h-1],m=i[s-h-1];if(f instanceof Bt&&d instanceof Array)qA(f,d)||fz(f,d,r),c+=1;else{let g=f instanceof ft&&gy(f,d),O=p instanceof ft&&gy(p,m);if(g&&O){let w=zA(f,d,r),k=zA(p,m,r);w.foundMappedChild&&!k.foundMappedChild?O=!1:!w.foundMappedChild&&k.foundMappedChild||w.equalityFactor<k.equalityFactor?g=!1:O=!1}g?(Tc(n,f,d,r),c+=1):O?(Tc(n,p,m,r),h+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[my(d,r)]),c+=1)}}let u=l-c-h;if(l===1&&s===0&&o[0]instanceof Bt?(r.mapping.delete(o[0]),o[0].delete(0,o[0].length)):u>0&&(e.slice(c,c+u).forEach(f=>r.mapping.delete(f)),e.delete(c,u)),c+h<s){let f=[];for(let d=c;d<s-h;d++)f.push(my(i[d],r));e.insert(c,f)}},Me)},gy=(n,e)=>!(e instanceof Array)&&n.nodeName===e.type.name});function wy(n){let e=n.toArray(),t=r=>{let i;if(r instanceof Bt)i=r.toDelta().map(o=>{let l={type:"text",text:o.insert};return o.attributes&&(l.marks=Object.keys(o.attributes).map(a=>{let c=o.attributes[a],u={type:vd(a)};return Object.keys(c)&&(u.attrs=c),u})),l});else if(r instanceof ft){i={type:r.nodeName};let s=r.getAttributes();Object.keys(s).length&&(i.attrs=s);let o=r.toArray();o.length&&(i.content=o.map(t).flat())}else bt();return i};return{type:"doc",content:e.map(t)}}var Pl,mz,io,by=S(()=>{Cd();bd();tc();Pl=(n,e,t)=>{if(n===0)return dd(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof Bt){if(r._length>=n)return dd(r,n,e.length===0?-1:0);if(n-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,n--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{let i=(t.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&n<i)r=r._first.content.type,n--;else{if(n===1&&r._length===0&&i>1)return new eo(r._item===null?null:r._item.id,r._item===null?Cl(r):null,null);if(n-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(n===0)return r=r._item===null?r:r._item.parent,new eo(r._item===null?null:r._item.id,r._item===null?Cl(r):null,null);do r=r._item.parent,n--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw bt();if(n===0&&r.constructor!==Bt&&r!==e)return mz(r._item.parent,r._item)}return dd(e,e._length,e.length===0?-1:0)},mz=(n,e)=>{let t=null,r=null;return n._item===null?r=Cl(n):t=se(n._item.id.client,n._item.id.clock),new eo(t,r,e.id)},io=(n,e,t,r)=>{let i=oA(t,n);if(i===null||i.type!==e&&!wl(e,i.type._item))return null;let s=i.type,o=0;if(s.constructor===Bt)o=i.index;else if(s._item===null||!s._item.deleted){let l=s._first,a=0;for(;a<s._length&&a<i.index&&l!==null;){if(!l.deleted){let c=l.content.type;a++,c instanceof Bt?o+=c._length:o+=r.get(c).nodeSize}l=l.right}o+=1}for(;s!==e&&s._item!==null;){let l=s._item.parent;if(l._item===null||!l._item.deleted){o+=1;let a=l._first;for(;a!==null;){let c=a.content.type;if(c===s)break;a.deleted||(c instanceof Bt?o+=c._length:o+=r.get(c).nodeSize),a=a.right}}s=l}return o-1}});var jA=S(()=>{EA()});var WA,YA,gz,Oz,HA,FA=S(()=>{lt();Cd();bd();wd();WA=n=>{var e,t;return((t=(e=Rn.getState(n))==null?void 0:e.undoManager)==null?void 0:t.undo())!=null},YA=n=>{var e,t;return((t=(e=Rn.getState(n))==null?void 0:e.undoManager)==null?void 0:t.redo())!=null},gz=new Set(["paragraph"]),Oz=(n,e)=>!(n instanceof Oe)||!(n.content instanceof En)||!(n.content.type instanceof ci||n.content.type instanceof ft&&e.has(n.content.type.nodeName))||n.content.type._length===0,HA=({protectedNodes:n=gz,trackedOrigins:e=[],undoManager:t=null}={})=>new F({key:Rn,state:{init:(r,i)=>{let s=Me.getState(i),o=t||new kl(s.type,{trackedOrigins:new Set([Me].concat(e)),deleteFilter:l=>Oz(l,n),captureTransaction:l=>l.meta.get("addToHistory")!==!1});return{undoManager:o,prevSel:null,hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}},apply:(r,i,s,o)=>{let l=Me.getState(o).binding,a=i.undoManager,c=a.undoStack.length>0,h=a.redoStack.length>0;return l?{undoManager:a,prevSel:vc(l,s),hasUndoOps:c,hasRedoOps:h}:c!==i.hasUndoOps||h!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}):i}},view:r=>{let i=Me.getState(r.state),s=Rn.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:o})=>{let l=i.binding;l&&o.meta.set(l,Rn.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:o})=>{let l=i.binding;l&&(l.beforeTransactionSelection=o.meta.get(l)||l.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}})});var xy=S(()=>{jA();Cd();FA();wd();by()});function GA(n){return!!n.getMeta(Me)}var qG,KA=S(()=>{re();bn();xy();qG=le.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},addStorage(){return{isDisabled:!1}},onCreate(){this.editor.extensionManager.extensions.find(n=>n.name==="history")&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:n,state:e,dispatch:t})=>(n.setMeta("preventDispatch",!0),Rn.getState(e).undoManager.undoStack.length===0?!1:t?WA(e):!0),redo:()=>({tr:n,state:e,dispatch:t})=>(n.setMeta("preventDispatch",!0),Rn.getState(e).undoManager.redoStack.length===0?!1:t?YA(e):!0)}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var n;let e=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),t=HA(this.options.yUndoOptions),r=t.spec.view;t.spec.view=o=>{let{undoManager:l}=Rn.getState(o.state);l.restore&&(l.restore(),l.restore=()=>{});let a=r?r(o):void 0;return{destroy:()=>{let c=l.trackedOrigins.has(l),h=l._observers;l.restore=()=>{c&&l.trackedOrigins.add(l),l.doc.on("afterTransaction",l.afterTransactionHandler),l._observers=h},a!=null&&a.destroy&&a.destroy()}}};let i={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},s=Oy(e,i);return this.editor.options.enableContentCheck&&((n=e.doc)===null||n===void 0||n.on("beforeTransaction",()=>{try{let o=wy(e);if(o.content.length===0)return;this.editor.schema.nodeFromJSON(o).check()}catch(o){return this.editor.emit("contentError",{error:o,editor:this.editor,disableCollaboration:()=>{var l;(l=e.doc)===null||l===void 0||l.destroy(),this.storage.isDisabled=!0}}),!1}})),[s,t,this.editor.options.enableContentCheck&&new F({key:new ee("filterInvalidContent"),filterTransaction:()=>{var o;return this.storage.isDisabled&&((o=e.doc)===null||o===void 0||o.destroy()),!0}})].filter(Boolean)}})});function JA(n){if(!n.length)return Ie.empty;let e=[],t=n[0].$from.node(0);return n.forEach(r=>{let i=r.$from.pos,s=r.$from.nodeAfter;s&&e.push(rt.node(i,i+s.nodeSize,{class:"ProseMirror-selectednoderange"}))}),Ie.create(t,e)}function Pc(n,e,t){let r=[],i=n.node(0);t=typeof t=="number"&&t>=0?t:n.sameParent(e)?Math.max(0,n.sharedDepth(e.pos)-1):n.sharedDepth(e.pos);let s=new Br(n,e,t),o=s.depth===0?0:i.resolve(s.start).posAtIndex(0);return s.parent.forEach((l,a)=>{let c=o+a,h=c+l.nodeSize;if(c<s.start||c>=s.end)return;let u=new Ci(i.resolve(c),i.resolve(h));r.push(u)}),r}function Td(n){return n instanceof Kn}var ky,Kn,FG,eM=S(()=>{re();bn();ou();hu();ky=class n{constructor(e,t){this.anchor=e,this.head=t}map(e){return new n(e.map(this.anchor),e.map(this.head))}resolve(e){let t=e.resolve(this.anchor),r=e.resolve(this.head);return new Kn(t,r)}},Kn=class n extends Z{constructor(e,t,r,i=1){let{doc:s}=e,o=e===t,l=e.pos===s.content.size&&t.pos===s.content.size,a=o&&!l?s.resolve(t.pos+(i>0?1:-1)):t,c=o&&l?s.resolve(e.pos-(i>0?1:-1)):e,h=Pc(c.min(a),c.max(a),r),u=a.pos>=e.pos?h[0].$from:h[h.length-1].$to,f=a.pos>=e.pos?h[h.length-1].$to:h[0].$from;super(u,f,h),this.depth=r}get $to(){return this.ranges[this.ranges.length-1].$to}eq(e){return e instanceof n&&e.$from.pos===this.$from.pos&&e.$to.pos===this.$to.pos}map(e,t){let r=e.resolve(t.map(this.anchor)),i=e.resolve(t.map(this.head));return new n(r,i)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){let{doc:e}=this.$from;if(this.isForwards&&this.ranges.length>1){let i=this.ranges.slice(0,-1),s=i[0].$from,o=i[i.length-1].$to;return new n(s,o,this.depth)}let t=this.ranges[0],r=e.resolve(Math.max(0,t.$from.pos-1));return new n(this.$anchor,r,this.depth)}extendForwards(){let{doc:e}=this.$from;if(this.isBackwards&&this.ranges.length>1){let i=this.ranges.slice(1),s=i[0].$from,o=i[i.length-1].$to;return new n(o,s,this.depth)}let t=this.ranges[this.ranges.length-1],r=e.resolve(Math.min(e.content.size,t.$to.pos+1));return new n(this.$anchor,r,this.depth)}static fromJSON(e,t){return new n(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r,i,s=1){return new this(e.resolve(t),e.resolve(r),i,s)}getBookmark(){return new ky(this.anchor,this.head)}};Kn.prototype.visible=!1;FG=le.create({name:"nodeRange",addOptions(){return{depth:void 0,key:"Mod"}},addKeyboardShortcuts(){return{"Shift-ArrowUp":({editor:n})=>{let{depth:e}=this.options,{view:t,state:r}=n,{doc:i,selection:s,tr:o}=r,{anchor:l,head:a}=s;if(!Td(s)){let h=Kn.create(i,l,a,e,-1);return o.setSelection(h),t.dispatch(o),!0}let c=s.extendBackwards();return o.setSelection(c),t.dispatch(o),!0},"Shift-ArrowDown":({editor:n})=>{let{depth:e}=this.options,{view:t,state:r}=n,{doc:i,selection:s,tr:o}=r,{anchor:l,head:a}=s;if(!Td(s)){let h=Kn.create(i,l,a,e);return o.setSelection(h),t.dispatch(o),!0}let c=s.extendForwards();return o.setSelection(c),t.dispatch(o),!0},"Mod-a":({editor:n})=>{let{depth:e}=this.options,{view:t,state:r}=n,{doc:i,tr:s}=r,o=Kn.create(i,0,i.content.size,e);return s.setSelection(o),t.dispatch(s),!0}}},onSelectionUpdate(){let{selection:n}=this.editor.state;Td(n)&&this.editor.view.dom.classList.add("ProseMirror-noderangeselection")},addProseMirrorPlugins(){let n=!1,e=!1;return[new F({key:new ee("nodeRange"),props:{attributes:()=>n?{class:"ProseMirror-noderangeselection"}:{class:""},handleDOMEvents:{mousedown:(t,r)=>{let{key:i}=this.options,s=/Mac/.test(navigator.platform),o=!!r.shiftKey,l=!!r.ctrlKey,a=!!r.altKey,c=!!r.metaKey,h=s?c:l;return(i==null||i==="Shift"&&o||i==="Control"&&l||i==="Alt"&&a||i==="Meta"&&c||i==="Mod"&&h)&&(e=!0),e&&document.addEventListener("mouseup",()=>{e=!1;let{state:u}=t,{doc:f,selection:d,tr:p}=u,{$anchor:m,$head:g}=d;if(m.sameParent(g))return;let O=Kn.create(f,m.pos,g.pos,this.options.depth);p.setSelection(O),t.dispatch(p)},{once:!0}),!1}},decorations:t=>{let{selection:r}=t,i=Td(r);if(n=!1,!e)return i?(n=!0,JA(r.ranges)):null;let{$from:s,$to:o}=r;if(!i&&s.sameParent(o))return null;let l=Pc(s,o,this.options.depth);return l.length?(n=!0,JA(l)):null}}})]}})});function yz(n){let e="",t=getComputedStyle(n);for(let r=0;r<t.length;r+=1)e+=`${t[r]}:${t.getPropertyValue(t[r])};`;return e}function bz(n){let e=n.cloneNode(!0),t=[n,...Array.from(n.getElementsByTagName("*"))],r=[e,...Array.from(e.getElementsByTagName("*"))];return t.forEach((i,s)=>{r[s].style.cssText=yz(i)}),e}function Pd(n,e){return window.getComputedStyle(n)[e]}function wz(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function xz(n,e,t){let r=parseInt(Pd(n.dom,"paddingLeft"),10),i=parseInt(Pd(n.dom,"paddingRight"),10),s=parseInt(Pd(n.dom,"borderLeftWidth"),10),o=parseInt(Pd(n.dom,"borderLeftWidth"),10),l=n.dom.getBoundingClientRect();return{left:wz(e,l.left+r+s,l.right-i-o),top:t}}function sM(n){var e;(e=n.parentNode)===null||e===void 0||e.removeChild(n)}function kz(n,e){let{doc:t}=e.view.state,r=iM({editor:e,x:n.clientX,y:n.clientY,direction:"right"});if(!r.resultNode||r.pos===null)return[];let i=n.clientX,s=xz(e.view,i,n.clientY),o=e.view.posAtCoords(s);if(!o)return[];let{pos:l}=o;if(!t.resolve(l).parent)return[];let c=t.resolve(r.pos),h=t.resolve(r.pos+1);return Pc(c,h,0)}function Sz(n,e){let{view:t}=e;if(!n.dataTransfer)return;let{empty:r,$from:i,$to:s}=t.state.selection,o=kz(n,e),l=Pc(i,s,0),a=l.some(g=>o.find(O=>O.$from===g.$from&&O.$to===g.$to)),c=r||!a?o:l;if(!c.length)return;let{tr:h}=t.state,u=document.createElement("div"),f=c[0].$from.pos,d=c[c.length-1].$to.pos,p=Kn.create(t.state.doc,f,d),m=p.content();c.forEach(g=>{let O=t.nodeDOM(g.$from.pos),w=bz(O);u.append(w)}),u.style.position="absolute",u.style.top="-10000px",document.body.append(u),n.dataTransfer.clearData(),n.dataTransfer.setDragImage(u,0,0),t.dragging={slice:m,move:!0},h.setSelection(p),t.dispatch(h),document.addEventListener("drop",()=>sM(u),{once:!0})}var iM,tM,nM,Sy,vz,rM,Cz,Tz,oM,lM=S(()=>{re();KA();bn();o0();xy();eM();iM=n=>{let{x:e,y:t,direction:r,editor:i}=n,s=null,o=null,l=null,a=e;for(;o===null&&a<window.innerWidth&&a>0;){let c=document.elementsFromPoint(a,t),h=c.findIndex(f=>f.classList.contains("ProseMirror")),u=c.slice(0,h);if(u.length>0){let f=u[0];if(s=f,l=i.view.posAtDOM(f,0),l>=0){o=i.state.doc.nodeAt(Math.max(l-1,0)),o!=null&&o.isText&&(o=i.state.doc.nodeAt(Math.max(l-1,0))),o||(o=i.state.doc.nodeAt(Math.max(l,0)));break}}r==="left"?a-=1:a+=1}return{resultElement:s,resultNode:o,pos:l!=null?l:null}};tM=(n,e)=>{let t=n.resolve(e),{depth:r}=t;return r===0?e:t.pos-t.parentOffset-1},nM=(n,e)=>{let t=n.nodeAt(e),r=n.resolve(e),{depth:i}=r,s=t;for(;i>0;){let o=r.node(i);i-=1,i===0&&(s=o)}return s},Sy=(n,e)=>{let t=Me.getState(n);return t?Pl(e,t.type,t.binding.mapping):null},vz=(n,e)=>{let t=Me.getState(n);return t?io(t.doc,t.type,e,t.binding.mapping)||0:-1},rM=(n,e)=>{let t=e;for(;t&&t.parentNode&&t.parentNode!==n.dom;)t=t.parentNode;return t},Cz=new ee("dragHandle"),Tz=({pluginKey:n=Cz,element:e,editor:t,tippyOptions:r,onNodeChange:i})=>{let s=document.createElement("div"),o=null,l=!1,a=null,c=-1,h;return e.addEventListener("dragstart",u=>{Sz(u,t),setTimeout(()=>{e&&(e.style.pointerEvents="none")},0)}),e.addEventListener("dragend",()=>{e&&(e.style.pointerEvents="auto")}),new F({key:typeof n=="string"?new ee(n):n,state:{init(){return{locked:!1}},apply(u,f,d,p){let m=u.getMeta("lockDragHandle"),g=u.getMeta("hideDragHandle");if(m!==void 0&&(l=m),g&&o)return o.hide(),l=!1,a=null,c=-1,i==null||i({editor:t,node:null,pos:-1}),f;if(u.docChanged&&c!==-1&&e&&o)if(GA(u)){let O=vz(p,h);O!==c&&(c=O)}else{let O=u.mapping.map(c);O!==c&&(c=O,h=Sy(p,c))}return f}},view:u=>{var f;return e.draggable=!0,e.style.pointerEvents="auto",(f=t.view.dom.parentElement)===null||f===void 0||f.appendChild(s),s.appendChild(e),s.style.pointerEvents="none",s.style.position="absolute",s.style.top="0",s.style.left="0",{update(d,p){if(!e)return;if(!t.isEditable){o==null||o.destroy(),o=null;return}if(o||(o=Rf(u.dom,{getReferenceClientRect:null,interactive:!0,trigger:"manual",placement:"left-start",hideOnClick:!1,duration:100,popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{rootBoundary:"document",mainAxis:!1}}]},...r,appendTo:s,content:e})),l?e.draggable=!1:e.draggable=!0,u.state.doc.eq(p.doc)||c===-1)return;let m=u.nodeDOM(c);if(m=rM(u,m),m===u.dom||(m==null?void 0:m.nodeType)!==1)return;let g=u.posAtDOM(m,0),O=nM(t.state.doc,g),w=tM(t.state.doc,g);a=O,c=w,h=Sy(u.state,c),i==null||i({editor:t,node:a,pos:c}),o.setProps({getReferenceClientRect:()=>m.getBoundingClientRect()})},destroy(){o==null||o.destroy(),e&&sM(s)}}},props:{handleDOMEvents:{mouseleave(u,f){return l||f.target&&!s.contains(f.relatedTarget)&&(o==null||o.hide(),a=null,c=-1,i==null||i({editor:t,node:null,pos:-1})),!1},mousemove(u,f){if(!e||!o||l)return!1;let d=iM({x:f.clientX,y:f.clientY,direction:"right",editor:t});if(!d.resultElement)return!1;let p=d.resultElement;if(p=rM(u,p),p===u.dom||(p==null?void 0:p.nodeType)!==1)return!1;let m=u.posAtDOM(p,0),g=nM(t.state.doc,m);if(g!==a){let O=tM(t.state.doc,m);a=g,c=O,h=Sy(u.state,c),i==null||i({editor:t,node:a,pos:c}),o.setProps({getReferenceClientRect:()=>p.getBoundingClientRect()}),o.show()}return!1}}}})},oM=le.create({name:"dragHandle",addOptions(){return{render(){let n=document.createElement("div");return n.classList.add("drag-handle"),n},tippyOptions:{},locked:!1,onNodeChange:()=>null}},addCommands(){return{lockDragHandle:()=>({editor:n})=>(this.options.locked=!0,n.commands.setMeta("lockDragHandle",this.options.locked)),unlockDragHandle:()=>({editor:n})=>(this.options.locked=!1,n.commands.setMeta("lockDragHandle",this.options.locked)),toggleDragHandle:()=>({editor:n})=>(this.options.locked=!this.options.locked,n.commands.setMeta("lockDragHandle",this.options.locked))}},addProseMirrorPlugins(){let n=this.options.render();return[Tz({tippyOptions:this.options.tippyOptions,element:n,editor:this.editor,onNodeChange:this.options.onNodeChange})]}})});var aM,cM=S(()=>{re();bn();aM=le.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{let e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){let r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{let e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new F({key:new ee("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;let i=this.options.limit;if(i==null||i===0){n=!0;return}let s=this.storage.characters({node:r.doc});if(s>i){let o=s-i,l=0,a=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);let c=r.tr.deleteRange(l,a);return n=!0,c}n=!0},filterTransaction:(e,t)=>{let r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;let i=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;let l=e.selection.$head.pos,a=s-r,c=l-a,h=l;return e.deleteRange(c,h),!(this.storage.characters({node:e.doc})>r)}})]}})});var Pz,Az,Mz,Qz,$z,Ez,Rz,Dz,Nz,Lz,Iz,_z,Bz,Vz,Xz,zz,Zz,qz,Uz,jz,Wz,Yz,hM,uM=S(()=>{re();Pz=n=>Pe({find:/--$/,replace:n!=null?n:"\u2014"}),Az=n=>Pe({find:/\.\.\.$/,replace:n!=null?n:"\u2026"}),Mz=n=>Pe({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:n!=null?n:"\u201C"}),Qz=n=>Pe({find:/"$/,replace:n!=null?n:"\u201D"}),$z=n=>Pe({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:n!=null?n:"\u2018"}),Ez=n=>Pe({find:/'$/,replace:n!=null?n:"\u2019"}),Rz=n=>Pe({find:/<-$/,replace:n!=null?n:"\u2190"}),Dz=n=>Pe({find:/->$/,replace:n!=null?n:"\u2192"}),Nz=n=>Pe({find:/\(c\)$/,replace:n!=null?n:"\xA9"}),Lz=n=>Pe({find:/\(tm\)$/,replace:n!=null?n:"\u2122"}),Iz=n=>Pe({find:/\(sm\)$/,replace:n!=null?n:"\u2120"}),_z=n=>Pe({find:/\(r\)$/,replace:n!=null?n:"\xAE"}),Bz=n=>Pe({find:/(?:^|\s)(1\/2)\s$/,replace:n!=null?n:"\xBD"}),Vz=n=>Pe({find:/\+\/-$/,replace:n!=null?n:"\xB1"}),Xz=n=>Pe({find:/!=$/,replace:n!=null?n:"\u2260"}),zz=n=>Pe({find:/<<$/,replace:n!=null?n:"\xAB"}),Zz=n=>Pe({find:/>>$/,replace:n!=null?n:"\xBB"}),qz=n=>Pe({find:/\d+\s?([*x])\s?\d+$/,replace:n!=null?n:"\xD7"}),Uz=n=>Pe({find:/\^2$/,replace:n!=null?n:"\xB2"}),jz=n=>Pe({find:/\^3$/,replace:n!=null?n:"\xB3"}),Wz=n=>Pe({find:/(?:^|\s)(1\/4)\s$/,replace:n!=null?n:"\xBC"}),Yz=n=>Pe({find:/(?:^|\s)(3\/4)\s$/,replace:n!=null?n:"\xBE"}),hM=le.create({name:"typography",addOptions(){return{closeDoubleQuote:"\u201D",closeSingleQuote:"\u2019",copyright:"\xA9",ellipsis:"\u2026",emDash:"\u2014",laquo:"\xAB",leftArrow:"\u2190",multiplication:"\xD7",notEqual:"\u2260",oneHalf:"\xBD",oneQuarter:"\xBC",openDoubleQuote:"\u201C",openSingleQuote:"\u2018",plusMinus:"\xB1",raquo:"\xBB",registeredTrademark:"\xAE",rightArrow:"\u2192",servicemark:"\u2120",superscriptThree:"\xB3",superscriptTwo:"\xB2",threeQuarters:"\xBE",trademark:"\u2122"}},addInputRules(){let n=[];return this.options.emDash!==!1&&n.push(Pz(this.options.emDash)),this.options.ellipsis!==!1&&n.push(Az(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&n.push(Mz(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&n.push(Qz(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&n.push($z(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&n.push(Ez(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&n.push(Rz(this.options.leftArrow)),this.options.rightArrow!==!1&&n.push(Dz(this.options.rightArrow)),this.options.copyright!==!1&&n.push(Nz(this.options.copyright)),this.options.trademark!==!1&&n.push(Lz(this.options.trademark)),this.options.servicemark!==!1&&n.push(Iz(this.options.servicemark)),this.options.registeredTrademark!==!1&&n.push(_z(this.options.registeredTrademark)),this.options.oneHalf!==!1&&n.push(Bz(this.options.oneHalf)),this.options.plusMinus!==!1&&n.push(Vz(this.options.plusMinus)),this.options.notEqual!==!1&&n.push(Xz(this.options.notEqual)),this.options.laquo!==!1&&n.push(zz(this.options.laquo)),this.options.raquo!==!1&&n.push(Zz(this.options.raquo)),this.options.multiplication!==!1&&n.push(qz(this.options.multiplication)),this.options.superscriptTwo!==!1&&n.push(Uz(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&n.push(jz(this.options.superscriptThree)),this.options.oneQuarter!==!1&&n.push(Wz(this.options.oneQuarter)),this.options.threeQuarters!==!1&&n.push(Yz(this.options.threeQuarters)),n}})});function Ay(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function OM(n){oo=n}function ye(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Vt.caret,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function Sr(n,e){if(e){if(Vt.escapeTest.test(n))return n.replace(Vt.escapeReplace,dM)}else if(Vt.escapeTestNoEncode.test(n))return n.replace(Vt.escapeReplaceNoEncode,dM);return n}function pM(n){try{n=encodeURI(n).replace(Vt.percentDecode,"%")}catch(e){return null}return n}function mM(n,e){var s;let t=n.replace(Vt.findPipe,(o,l,a)=>{let c=!1,h=l;for(;--h>=0&&a[h]==="\\";)c=!c;return c?"|":" |"}),r=t.split(Vt.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Vt.slashPipe,"|");return r}function Mc(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function A3(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function gM(n,e,t,r,i){let s=e.href,o=e.title||null,l=n[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let a={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:o,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,a}function M3(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(t.other.beginningSpace);if(o===null)return s;let[l]=o;return l.length>=i.length?s.slice(i.length):s}).join(`
`)}function ge(n,e){return so.parse(n,e)}var oo,Qc,Vt,Hz,Fz,Gz,$c,Kz,My,yM,bM,Jz,Qy,e3,$y,t3,n3,Rd,Ey,r3,wM,i3,Ry,fM,s3,o3,l3,a3,xM,c3,Dd,Dy,kM,h3,SM,u3,f3,d3,vM,p3,m3,CM,g3,O3,y3,b3,w3,x3,k3,Qd,S3,TM,PM,v3,Ny,C3,Cy,T3,Ad,Ac,P3,dM,$d,hi,Ed,Ly,ui,vy,Md,Q3,so,hK,uK,fK,dK,pK,mK,gK,AM=S(()=>{oo=Ay();Qc={exec:()=>null};Vt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Hz=/^(?:[ \t]*(?:\n|$))+/,Fz=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Gz=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,$c=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Kz=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,My=/(?:[*+-]|\d{1,9}[.)])/,yM=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,bM=ye(yM).replace(/bull/g,My).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Jz=ye(yM).replace(/bull/g,My).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Qy=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,e3=/^[^\n]+/,$y=/(?!\s*\])(?:\\.|[^\[\]\\])+/,t3=ye(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",$y).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),n3=ye(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,My).getRegex(),Rd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ey=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,r3=ye("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ey).replace("tag",Rd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),wM=ye(Qy).replace("hr",$c).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rd).getRegex(),i3=ye(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",wM).getRegex(),Ry={blockquote:i3,code:Fz,def:t3,fences:Gz,heading:Kz,hr:$c,html:r3,lheading:bM,list:n3,newline:Hz,paragraph:wM,table:Qc,text:e3},fM=ye("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",$c).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rd).getRegex(),s3={...Ry,lheading:Jz,table:fM,paragraph:ye(Qy).replace("hr",$c).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",fM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rd).getRegex()},o3={...Ry,html:ye(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ey).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ye(Qy).replace("hr",$c).replace("heading",` *#{1,6} *[^
]`).replace("lheading",bM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},l3=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,a3=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,xM=/^( {2,}|\\)\n(?!\s*$)/,c3=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Dd=/[\p{P}\p{S}]/u,Dy=/[\s\p{P}\p{S}]/u,kM=/[^\s\p{P}\p{S}]/u,h3=ye(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Dy).getRegex(),SM=/(?!~)[\p{P}\p{S}]/u,u3=/(?!~)[\s\p{P}\p{S}]/u,f3=/(?:[^\s\p{P}\p{S}]|~)/u,d3=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,vM=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,p3=ye(vM,"u").replace(/punct/g,Dd).getRegex(),m3=ye(vM,"u").replace(/punct/g,SM).getRegex(),CM="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",g3=ye(CM,"gu").replace(/notPunctSpace/g,kM).replace(/punctSpace/g,Dy).replace(/punct/g,Dd).getRegex(),O3=ye(CM,"gu").replace(/notPunctSpace/g,f3).replace(/punctSpace/g,u3).replace(/punct/g,SM).getRegex(),y3=ye("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,kM).replace(/punctSpace/g,Dy).replace(/punct/g,Dd).getRegex(),b3=ye(/\\(punct)/,"gu").replace(/punct/g,Dd).getRegex(),w3=ye(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),x3=ye(Ey).replace("(?:-->|$)","-->").getRegex(),k3=ye("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",x3).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Qd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,S3=ye(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Qd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),TM=ye(/^!?\[(label)\]\[(ref)\]/).replace("label",Qd).replace("ref",$y).getRegex(),PM=ye(/^!?\[(ref)\](?:\[\])?/).replace("ref",$y).getRegex(),v3=ye("reflink|nolink(?!\\()","g").replace("reflink",TM).replace("nolink",PM).getRegex(),Ny={_backpedal:Qc,anyPunctuation:b3,autolink:w3,blockSkip:d3,br:xM,code:a3,del:Qc,emStrongLDelim:p3,emStrongRDelimAst:g3,emStrongRDelimUnd:y3,escape:l3,link:S3,nolink:PM,punctuation:h3,reflink:TM,reflinkSearch:v3,tag:k3,text:c3,url:Qc},C3={...Ny,link:ye(/^!?\[(label)\]\((.*?)\)/).replace("label",Qd).getRegex(),reflink:ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Qd).getRegex()},Cy={...Ny,emStrongRDelimAst:O3,emStrongLDelim:m3,url:ye(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},T3={...Cy,br:ye(xM).replace("{2,}","*").getRegex(),text:ye(Cy.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ad={normal:Ry,gfm:s3,pedantic:o3},Ac={normal:Ny,gfm:Cy,breaks:T3,pedantic:C3},P3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dM=n=>P3[n];$d=class{constructor(n){ke(this,"options");ke(this,"rules");ke(this,"lexer");this.options=n||oo}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Mc(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=M3(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let r=Mc(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Mc(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Mc(e[0],`
`).split(`
`),r="",i="",s=[];for(;t.length>0;){let o=!1,l=[],a;for(a=0;a<t.length;a++)if(this.rules.other.blockquoteStart.test(t[a]))l.push(t[a]),o=!0;else if(!o)l.push(t[a]);else break;t=t.slice(a);let c=l.join(`
`),h=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${h}`:h;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=u,t.length===0)break;let f=s.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let d=f,p=d.raw+`
`+t.join(`
`),m=this.blockquote(p);s[s.length-1]=m,r=r.substring(0,r.length-d.raw.length)+m.raw,i=i.substring(0,i.length-d.text.length)+m.text;break}else if((f==null?void 0:f.type)==="list"){let d=f,p=d.raw+`
`+t.join(`
`),m=this.list(p);s[s.length-1]=m,r=r.substring(0,r.length-f.raw.length)+m.raw,i=i.substring(0,i.length-d.raw.length)+m.raw,t=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,i={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let s=this.rules.other.listItemRegex(t),o=!1;for(;n;){let a=!1,c="",h="";if(!(e=s.exec(n))||this.rules.block.hr.test(n))break;c=e[0],n=n.substring(c.length);let u=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,O=>" ".repeat(3*O.length)),f=n.split(`
`,1)[0],d=!u.trim(),p=0;if(this.options.pedantic?(p=2,h=u.trimStart()):d?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,h=u.slice(p),p+=e[1].length),d&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,n=n.substring(f.length+1),a=!0),!a){let O=this.rules.other.nextBulletRegex(p),w=this.rules.other.hrRegex(p),k=this.rules.other.fencesBeginRegex(p),b=this.rules.other.headingBeginRegex(p),v=this.rules.other.htmlBeginRegex(p);for(;n;){let x=n.split(`
`,1)[0],T;if(f=x,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),T=f):T=f.replace(this.rules.other.tabCharGlobal,"    "),k.test(f)||b.test(f)||v.test(f)||O.test(f)||w.test(f))break;if(T.search(this.rules.other.nonSpaceChar)>=p||!f.trim())h+=`
`+T.slice(p);else{if(d||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(u)||b.test(u)||w.test(u))break;h+=`
`+f}!d&&!f.trim()&&(d=!0),c+=x+`
`,n=n.substring(x.length+1),u=T.slice(p)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,g;this.options.gfm&&(m=this.rules.other.listIsTask.exec(h),m&&(g=m[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:g,loose:!1,text:h,tokens:[]}),i.raw+=c}let l=i.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let a=0;a<i.items.length;a++)if(this.lexer.state.top=!1,i.items[a].tokens=this.lexer.blockTokens(i.items[a].text,[]),!i.loose){let c=i.items[a].tokens.filter(u=>u.type==="space"),h=c.length>0&&c.some(u=>this.rules.other.anyLine.test(u.raw));i.loose=h}if(i.loose)for(let a=0;a<i.items.length;a++)i.items[a].loose=!0;return i}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:i}}}table(n){var o;let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=mM(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let l of r)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<t.length;l++)s.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:s.align[l]});for(let l of i)s.rows.push(mM(l,s.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[c]})));return s}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let s=Mc(t.slice(0,-1),"\\");if((t.length-s.length)%2===0)return}else{let s=A3(e[2],"()");if(s===-2)return;if(s>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),gM(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let s=t[0].charAt(0);return{type:"text",raw:s,text:s}}return gM(t,i,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let s=[...r[0]].length-1,o,l,a=s,c=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*n.length+s);(r=h.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(l=[...o].length,r[3]||r[4]){a+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){c+=l;continue}if(a-=l,a>0)continue;l=Math.min(l,l+a+c);let u=[...r[0]][0].length,f=n.slice(0,s+r.index+u+l);if(Math.min(s,l)%2){let p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}let d=f.slice(2,-2);return{type:"strong",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t,r;let e;if(e=this.rules.inline.url.exec(n)){let i,s;if(e[2]==="@")i=e[0],s="mailto:"+i;else{let o;do o=e[0],e[0]=(r=(t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])!=null?r:"";while(o!==e[0]);i=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},hi=class Ty{constructor(e){ke(this,"tokens");ke(this,"options");ke(this,"state");ke(this,"tokenizer");ke(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||oo,this.options.tokenizer=this.options.tokenizer||new $d,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Vt,block:Ad.normal,inline:Ac.normal};this.options.pedantic?(t.block=Ad.pedantic,t.inline=Ac.pedantic):this.options.gfm&&(t.block=Ad.gfm,this.options.breaks?t.inline=Ac.breaks:t.inline=Ac.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ad,inline:Ac}}static lex(e,t){return new Ty(t).lex(e)}static lexInline(e,t){return new Ty(t).inlineTokens(e)}lex(e){e=e.replace(Vt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){var i,s,o;for(this.options.pedantic&&(e=e.replace(Vt.tabCharGlobal,"    ").replace(Vt.spaceLine,""));e;){let l;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(l=c.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let c=t.at(-1);l.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+l.raw,c.text+=`
`+l.text,this.inlineQueue.at(-1).src=c.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+l.raw,c.text+=`
`+l.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let a=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,h=e.slice(1),u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(a=e.substring(0,c+1))}if(this.state.top&&(l=this.tokenizer.paragraph(a))){let c=t.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+l.raw,c.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(l),r=a.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+l.raw,c.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(l);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var l,a,c;let r=e,i=null;if(this.tokens.links){let h=Object.keys(this.tokens.links);if(h.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)h.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let h;if((a=(l=this.options.extensions)==null?void 0:l.inline)!=null&&a.some(f=>(h=f.call({lexer:this},e,t))?(e=e.substring(h.raw.length),t.push(h),!0):!1))continue;if(h=this.tokenizer.escape(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.tag(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.link(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(h.raw.length);let f=t.at(-1);h.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=h.raw,f.text+=h.text):t.push(h);continue}if(h=this.tokenizer.emStrong(e,r,o)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.codespan(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.br(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.del(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.autolink(e)){e=e.substring(h.raw.length),t.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(e))){e=e.substring(h.raw.length),t.push(h);continue}let u=e;if((c=this.options.extensions)!=null&&c.startInline){let f=1/0,d=e.slice(1),p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},d),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(u=e.substring(0,f+1))}if(h=this.tokenizer.inlineText(u)){e=e.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(o=h.raw.slice(-1)),s=!0;let f=t.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=h.raw,f.text+=h.text):t.push(h);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}},Ed=class{constructor(n){ke(this,"options");ke(this,"parser");this.options=n||oo}space(n){return""}code({text:n,lang:e,escaped:t}){var s;let r=(s=(e||"").match(Vt.notSpaceStart))==null?void 0:s[0],i=n.replace(Vt.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Sr(r)+'">'+(t?i:Sr(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:Sr(i,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,r="";for(let o=0;o<n.items.length;o++){let l=n.items[o];r+=this.listitem(l)}let i=e?"ol":"ul",s=e&&t!==1?' start="'+t+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(n){var t;let e="";if(n.task){let r=this.checkbox({checked:!!n.checked});n.loose?((t=n.tokens[0])==null?void 0:t.type)==="paragraph"?(n.tokens[0].text=r+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=r+" "+Sr(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let i=0;i<n.header.length;i++)t+=this.tablecell(n.header[i]);e+=this.tablerow({text:t});let r="";for(let i=0;i<n.rows.length;i++){let s=n.rows[i];t="";for(let o=0;o<s.length;o++)t+=this.tablecell(s[o]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${Sr(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let r=this.parser.parseInline(t),i=pM(n);if(i===null)return r;n=i;let s='<a href="'+n+'"';return e&&(s+=' title="'+Sr(e)+'"'),s+=">"+r+"</a>",s}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));let i=pM(n);if(i===null)return Sr(t);n=i;let s=`<img src="${n}" alt="${t}"`;return e&&(s+=` title="${Sr(e)}"`),s+=">",s}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:Sr(n.text)}},Ly=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},ui=class Py{constructor(e){ke(this,"options");ke(this,"renderer");ke(this,"textRenderer");this.options=e||oo,this.options.renderer=this.options.renderer||new Ed,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ly}static parse(e,t){return new Py(t).parse(e)}static parseInline(e,t){return new Py(t).parseInline(e)}parse(e,t=!0){var i,s;let r="";for(let o=0;o<e.length;o++){let l=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[l.type]){let c=l,h=this.options.extensions.renderers[c.type].call({parser:this},c);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=h||"";continue}}let a=l;switch(a.type){case"space":{r+=this.renderer.space(a);continue}case"hr":{r+=this.renderer.hr(a);continue}case"heading":{r+=this.renderer.heading(a);continue}case"code":{r+=this.renderer.code(a);continue}case"table":{r+=this.renderer.table(a);continue}case"blockquote":{r+=this.renderer.blockquote(a);continue}case"list":{r+=this.renderer.list(a);continue}case"html":{r+=this.renderer.html(a);continue}case"paragraph":{r+=this.renderer.paragraph(a);continue}case"text":{let c=a,h=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],h+=`
`+this.renderer.text(c);t?r+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):r+=h;continue}default:{let c='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,t=this.renderer){var i,s;let r="";for(let o=0;o<e.length;o++){let l=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[l.type]){let c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){r+=c||"";continue}}let a=l;switch(a.type){case"escape":{r+=t.text(a);break}case"html":{r+=t.html(a);break}case"link":{r+=t.link(a);break}case"image":{r+=t.image(a);break}case"strong":{r+=t.strong(a);break}case"em":{r+=t.em(a);break}case"codespan":{r+=t.codespan(a);break}case"br":{r+=t.br(a);break}case"del":{r+=t.del(a);break}case"text":{r+=t.text(a);break}default:{let c='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},Md=(vy=class{constructor(n){ke(this,"options");ke(this,"block");this.options=n||oo}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}provideLexer(){return this.block?hi.lex:hi.lexInline}provideParser(){return this.block?ui.parse:ui.parseInline}},ke(vy,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),vy),Q3=class{constructor(...n){ke(this,"defaults",Ay());ke(this,"options",this.setOptions);ke(this,"parse",this.parseMarkdown(!0));ke(this,"parseInline",this.parseMarkdown(!1));ke(this,"Parser",ui);ke(this,"Renderer",Ed);ke(this,"TextRenderer",Ly);ke(this,"Lexer",hi);ke(this,"Tokenizer",$d);ke(this,"Hooks",Md);this.use(...n)}walkTokens(n,e){var r,i;let t=[];for(let s of n)switch(t=t.concat(e.call(this,s)),s.type){case"table":{let o=s;for(let l of o.header)t=t.concat(this.walkTokens(l.tokens,e));for(let l of o.rows)for(let a of l)t=t.concat(this.walkTokens(a.tokens,e));break}case"list":{let o=s;t=t.concat(this.walkTokens(o.items,e));break}default:{let o=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{let a=o[l].flat(1/0);t=t.concat(this.walkTokens(a,e))}):o.tokens&&(t=t.concat(this.walkTokens(o.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=s.apply(this,o)),l}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){let i=this.defaults.renderer||new Ed(this.defaults);for(let s in t.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,l=t.renderer[o],a=i[o];i[o]=(...c)=>{let h=l.apply(i,c);return h===!1&&(h=a.apply(i,c)),h||""}}r.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new $d(this.defaults);for(let s in t.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,l=t.tokenizer[o],a=i[o];i[o]=(...c)=>{let h=l.apply(i,c);return h===!1&&(h=a.apply(i,c)),h}}r.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new Md;for(let s in t.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,l=t.hooks[o],a=i[o];Md.passThroughHooks.has(s)?i[o]=c=>{if(this.defaults.async)return Promise.resolve(l.call(i,c)).then(u=>a.call(i,u));let h=l.call(i,c);return a.call(i,h)}:i[o]=(...c)=>{let h=l.apply(i,c);return h===!1&&(h=a.apply(i,c)),h}}r.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,s=t.walkTokens;r.walkTokens=function(o){let l=[];return l.push(s.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return hi.lex(n,e!=null?e:this.defaults)}parser(n,e){return ui.parse(n,e!=null?e:this.defaults)}parseMarkdown(n){return(t,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t=="undefined"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=n);let l=s.hooks?s.hooks.provideLexer():n?hi.lex:hi.lexInline,a=s.hooks?s.hooks.provideParser():n?ui.parse:ui.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>a(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(o);try{s.hooks&&(t=s.hooks.preprocess(t));let c=l(t,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let h=a(c,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(c){return o(c)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+Sr(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},so=new Q3;ge.options=ge.setOptions=function(n){return so.setOptions(n),ge.defaults=so.defaults,OM(ge.defaults),ge};ge.getDefaults=Ay;ge.defaults=oo;ge.use=function(...n){return so.use(...n),ge.defaults=so.defaults,OM(ge.defaults),ge};ge.walkTokens=function(n,e){return so.walkTokens(n,e)};ge.parseInline=so.parseInline;ge.Parser=ui;ge.parser=ui.parse;ge.Renderer=Ed;ge.TextRenderer=Ly;ge.Lexer=hi;ge.lexer=hi.lex;ge.Tokenizer=$d;ge.Hooks=Md;ge.parse=ge;hK=ge.options,uK=ge.setOptions,fK=ge.use,dK=ge.walkTokens,pK=ge.parseInline,mK=ui.parse,gK=hi.lex});function $3(n){if(n<768)return!1;for(let e=0,t=_y.length;;){let r=e+t>>1;if(n<_y[r])t=r;else if(n>=EM[r])e=r+1;else return!0;if(e==t)return!1}}function MM(n){return n>=127462&&n<=127487}function RM(n,e,t=!0,r=!0){return(t?DM:E3)(n,e,r)}function DM(n,e,t){if(e==n.length)return e;e&&NM(n.charCodeAt(e))&&LM(n.charCodeAt(e-1))&&e--;let r=Iy(n,e);for(e+=$M(r);e<n.length;){let i=Iy(n,e);if(r==QM||i==QM||t&&$3(i))e+=$M(i),r=i;else if(MM(i)){let s=0,o=e-2;for(;o>=0&&MM(Iy(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function E3(n,e,t){for(;e>0;){let r=DM(n,e-2,t);if(r<e)return r;e--}return 0}function Iy(n,e){let t=n.charCodeAt(e);if(!LM(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return NM(r)?(t-55296<<10)+(r-56320)+65536:t}function NM(n){return n>=56320&&n<57344}function LM(n){return n>=55296&&n<56320}function $M(n){return n<65536?1:2}var _y,EM,QM,IM=S(()=>{_y=[],EM=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?EM:_y).push(t=t+n[e])})();QM=8205});function R3(n){let e=-1;for(let t of n)e+=t.length+1;return e}function _d(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let l=n[s],a=i+l.length;a>=t&&(a>r&&(l=l.slice(0,r-i)),i<t&&(l=l.slice(t-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=a+1}return e}function _M(n,e,t){return _d(n,[""],e,t)}function El(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function er(n,e,t=!0,r=!0){return RM(n,e,t,r)}function D3(n){return n>=56320&&n<57344}function N3(n){return n>=55296&&n<56320}function Jy(n,e){let t=n.charCodeAt(e);if(!N3(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return D3(r)?(t-55296<<10)+(r-56320)+65536:t}function eb(n){return n<65536?1:2}function $t(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Hi(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(he.empty);n.push(t)}}function zy(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)i+=l,s+=l;else{let c=i,h=s,u=he.empty;for(;c+=l,h+=a,a&&r&&(u=u.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(i,c,s,h,u),i=c,s=h}}}function Zy(n,e,t,r=!1){let i=[],s=r?[]:null,o=new uo(n),l=new uo(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);$t(i,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for($t(i,l.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=h&&($t(i,0,o.ins),s&&Hi(s,i,o.text),a=o.i),o.forward(h),c-=h}l.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(l.ins==-1){let u=Math.min(h,l.len);c+=u,h-=u,l.forward(u)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;$t(i,c,a<o.i?o.ins:0),s&&a<o.i&&Hi(s,i,o.text),a=o.i,o.forward(o.len-h)}else{if(o.done&&l.done)return s?un.createSet(i,s):ho.create(i);throw new Error("Mismatched change set lengths")}}}function ZM(n,e,t=!1){let r=[],i=t?[]:null,s=new uo(n),o=new uo(e);for(let l=!1;;){if(s.done&&o.done)return i?un.createSet(r,i):ho.create(r);if(s.ins==0)$t(r,s.len,0,l),s.next();else if(o.len==0&&!o.done)$t(r,0,o.ins,l),i&&Hi(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;$t(r,a,h,l),i&&h&&Hi(i,r,o.text)}else o.ins==-1?($t(r,s.off?0:s.len,a,l),i&&Hi(i,r,s.textBit(a))):($t(r,s.off?0:s.len,o.off?0:o.ins,l),i&&!o.off&&Hi(i,r,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||r.length>c),s.forward2(a),o.forward(a)}}}}function qM(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}function nb(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}function BM(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function qy(n,e){let t=!1;for(let r of e)Rc(n,r)&1&&(t=!0);return t}function L3(n,e,t){let r=t.map(a=>n[a.id]),i=t.map(a=>a.type),s=r.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let c=[];for(let h=0;h<r.length;h++){let u=qd(a,r[h]);if(i[h]==2)for(let f of u)c.push(f);else c.push(u)}return e.combine(c)}return{create(a){for(let c of r)Rc(a,c);return a.values[o]=l(a),1},update(a,c){if(!qy(a,s))return 0;let h=l(a);return e.compare(h,a.values[o])?0:(a.values[o]=h,1)},reconfigure(a,c){let h=qy(a,r),u=c.config.facets[e.id],f=c.facet(e);if(u&&!h&&nb(t,u))return a.values[o]=f,0;let d=l(a);return e.compare(d,f)?(a.values[o]=f,0):(a.values[o]=d,1)}}}function Ec(n){return e=>new Xd(e,n)}function I3(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,l){let a=i.get(o);if(a!=null){if(a<=l)return;let c=r[a].indexOf(o);c>-1&&r[a].splice(c,1),o instanceof Dc&&t.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let c of o)s(c,l);else if(o instanceof Dc){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,l)}else if(o instanceof Xd)s(o.inner,o.prec);else if(o instanceof tr)r[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Ql)r[l].push(o),o.facet.extensions&&s(o.facet.extensions,lo.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,l)}}return s(n,lo.default),r.reduce((o,l)=>o.concat(l))}function Rc(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function qd(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}function _3(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function GM(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=un.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:De.mapEffects(n.effects,i).concat(De.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Yy(n,e,t){let r=e.selection,i=$l(e.annotations);return e.userEvent&&(i=i.concat(Et.userEvent.of(e.userEvent))),{changes:e.changes instanceof un?e.changes:un.of(e.changes||[],t,n.facet(jM)),selection:r&&(r instanceof X?r:X.single(r.anchor,r.head)),effects:$l(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function KM(n,e,t){let r=Yy(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=GM(r,Yy(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=Et.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return V3(t?B3(i):i)}function B3(n){let e=n.startState,t=!0;for(let i of e.facet(WM)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:_3(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=un.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Et.create(e,i,n.selection&&n.selection.map(s),De.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(YM);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof Et?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Et?n=s[0]:n=KM(e,$l(s),!1)}return n}function V3(n){let e=n.startState,t=e.facet(HM),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=GM(r,Yy(e,s,n.changes.newLength),!0))}return r==n?n:Et.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}function $l(n){return n==null?X3:Array.isArray(n)?n:[n]}function Z3(n){if(Hy)return Hy.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||z3.test(t)))return!0}return!1}function q3(n){return e=>{if(!/\S/.test(e))return Jn.Space;if(Z3(e))return Jn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Jn.Word;return Jn.Other}}function jd(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],l=r[s];if(l===void 0)r[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}function Fy(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}function U3(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Fy(e,r)>0)return n.slice().sort(Fy);e=r}return n}function VM(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=r.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&i.add(s.chunk[o])}return i}function By(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}function XM(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,l=r,a=r-e;for(;;){let c=n.to+a-t.to,h=c||n.endSide-t.endSide,u=h<0?n.to+a:t.to,f=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Ky(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(l,f,n.point,t.point):f>l&&!Ky(n.active,t.active)&&s.compareRange(l,f,n.active,t.active),u>o)break;(c||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(u),l=u,h<=0&&n.next(),h>=0&&t.next()}}function Ky(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Ld(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Id(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function zM(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Fi(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=er(n,i));return r}function JM(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=er(n,i)}return r===!0?-1:n.length}var he,hn,Ml,co,Bd,Vd,Vy,Xy,wt,ho,un,uo,Al,X,tb,j,Ql,Nd,tr,lo,fi,Xd,zd,Dc,Zd,UM,Uy,jM,WM,YM,HM,FM,nr,jy,Wy,De,Et,X3,Jn,z3,Hy,xe,rr,Nc,Gy,Ne,fo,Ud,Lc,ao,vr=S(()=>{IM();he=class n{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=El(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Ml.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=El(this,e,t);let r=[];return this.decompose(e,t,r,0),Ml.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new co(this),s=new co(e);for(let o=t,l=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new co(this,e)}iterRange(e,t=this.length){return new Bd(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Vd(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?n.empty:e.length<=32?new hn(e):Ml.from(hn.split(e,[]))}},hn=class n extends he{constructor(e,t=R3(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],l=i+o.length;if((t?r:l)>=e)return new Vy(i,l,r,o);i=l+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new n(_M(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),l=_d(s.text,o.text.slice(),0,s.length);if(l.length<=32)r.push(new n(l,o.length+s.length));else{let a=l.length>>1;r.push(new n(l.slice(0,a)),new n(l.slice(a)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof n))return super.replace(e,t,r);[e,t]=El(this,e,t);let i=_d(this.text,_d(r.text,_M(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new n(i,s):Ml.from(n.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=El(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(i+=r),e<a&&t>s&&(i+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new n(r,i)),r=[],i=-1);return i>-1&&t.push(new n(r,i)),t}},Ml=class n extends he{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],l=i+o.length,a=r+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,r,i);i=l+1,r=a+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let c=i&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?r.push(l):l.decompose(e-o,t-o,r,c)}o=a+1}}replace(e,t,r){if([e,t]=El(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,r),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let h=this.children.slice();return h[i]=a,new n(h,this.length-(t-e)+r.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=El(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(i+=r),e<a&&t>o&&(i+=l.sliceString(e-o,t-o,r)),o=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof n))return 0;let r=0,[i,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==l)return r;let a=this.children[i],c=e.children[s];if(a!=c)return r+a.scanIdentical(c,t);r+=a.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new hn(d,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,l=[],a=0,c=-1,h=[];function u(d){let p;if(d.lines>s&&d instanceof n)for(let m of d.children)u(m);else d.lines>o&&(a>o||!a)?(f(),l.push(d)):d instanceof hn&&a&&(p=h[h.length-1])instanceof hn&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,h[h.length-1]=new hn(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,c+=d.length+1,h.push(d))}function f(){a!=0&&(l.push(h.length==1?h[0]:n.from(h,c)),c=-1,a=h.length=0)}for(let d of e)u(d);return f(),l.length==1?l[0]:new n(l,t)}};he.empty=new hn([""],0);co=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof hn?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,l=i instanceof hn?i.text.length:i.children.length;if(o==(t>0?l:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof hn){let a=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof hn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Bd=class{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new co(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Vd=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol!="undefined"&&(he.prototype[Symbol.iterator]=function(){return this.iter()},co.prototype[Symbol.iterator]=Bd.prototype[Symbol.iterator]=Vd.prototype[Symbol.iterator]=function(){return this});Vy=class{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}};Xy=/\r\n?|\n/,wt=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(wt||(wt={})),ho=class n{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){zy(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new n(e)}composeDesc(e){return this.empty?e:e.empty?this:ZM(this,e)}mapDesc(e,t=!1){return e.empty?this:Zy(this,e,t)}mapPos(e,t=-1,r=wt.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=i+l;if(a<0){if(c>e)return s+(e-i);s+=l}else{if(r!=wt.Simple&&c>=e&&(r==wt.TrackDel&&i<e&&c>e||r==wt.TrackBefore&&i<e||r==wt.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==i||t<0?s:s+a;s+=a}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],l=i+s;if(o>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new n(e)}static create(e){return new n(e)}},un=class n extends ho{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zy(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return Zy(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=o;let a=i>>1;for(;r.length<a;)r.push(he.empty);r.push(o?e.slice(s,s+o):he.empty)}s+=o}return new n(t,r)}compose(e){return this.empty?e:e.empty?this:ZM(this,e,!0)}map(e,t=!1){return e.empty?this:Zy(this,e,t,!0)}iterChanges(e,t=!1){zy(this,e,t)}get desc(){return ho.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new uo(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-l);$t(i,h,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;$t(t,h,u),u>0&&Hi(r,t,s.text),s.forward(h),l+=h}let c=e[o++];for(;l<c;){if(s.done)break e;let h=Math.min(s.len,c-l);$t(t,h,-1),$t(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),l+=h}}return{changes:new n(t,r),filtered:ho.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,l=null;function a(h=!1){if(!h&&!i.length)return;o<t&&$t(i,t-o,-1);let u=new n(i,s);l=l?l.compose(u.map(l)):u,i=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof n){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:u,to:f=u,insert:d}=h;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let p=d?typeof d=="string"?he.of(d.split(r||Xy)):d:he.empty,m=p.length;if(u==f&&m==0)return;u<o&&a(),u>o&&$t(i,u-o,-1),$t(i,f-u,m),Hi(s,i,p),o=f}}return c(e),a(!l),l}static empty(e){return new n(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(he.empty);r[i]=he.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new n(t,r)}static createSet(e,t){return new n(e,t)}};uo=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?he.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?he.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},Al=class n{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new n(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return X.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return X.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return X.range(e.anchor,e.head)}static create(e,t,r){return new n(e,t,r)}},X=class n{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:n.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new n([this.main],0)}addRange(e,t=!0){return n.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,n.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new n(e.ranges.map(t=>Al.fromJSON(t)),e.main)}static single(e,t=e){return new n([n.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return n.normalized(e.slice(),t);r=s.to}return new n(e,t)}static cursor(e,t=0,r,i){return Al.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i!=null?i:16777215)<<6)}static range(e,t,r,i){let s=(r!=null?r:16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Al.create(t,e,48|s):Al.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?n.range(a,l):n.range(l,a))}}return new n(e,t)}};tb=0,j=class n{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=tb++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new n(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:nb),!!e.static,e.enables)}of(e){return new Ql([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ql(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ql(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}};Ql=class{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=tb++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?c=!0:(((t=e[u.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[u.id]);return{create(u){return u.values[o]=r(u),1},update(u,f){if(a&&f.docChanged||c&&(f.docChanged||f.selection)||qy(u,h)){let d=r(u);if(l?!BM(d,u.values[o],i):!i(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d,p=f.config.address[s];if(p!=null){let m=qd(f,p);if(this.dependencies.every(g=>g instanceof j?f.facet(g)===u.facet(g):g instanceof tr?f.field(g,!1)==u.field(g,!1):!0)||(l?BM(d=r(u),m,i):i(d=r(u),m)))return u.values[o]=m,0}else d=r(u);return u.values[o]=d,1}}}};Nd=j.define({static:!0}),tr=class n{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new n(tb++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Nd).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Nd),o=i.facet(Nd),l;return(l=s.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(r.values[t]=l.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Nd.of({field:this,create:e})]}get extension(){return this}},lo={lowest:4,low:3,default:2,high:1,highest:0};fi={highest:Ec(lo.highest),high:Ec(lo.high),default:Ec(lo.default),low:Ec(lo.low),lowest:Ec(lo.lowest)},Xd=class{constructor(e,t){this.inner=e,this.prec=t}},zd=class n{of(e){return new Dc(this,e)}reconfigure(e){return n.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Dc=class{constructor(e,t){this.compartment=e,this.inner=t}},Zd=class n{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let f of I3(e,t,o))f instanceof tr?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],c=[];for(let f of i)l[f.id]=c.length<<1,c.push(d=>f.slot(d));let h=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=h&&h[f]||[];if(d.every(g=>g.type==0))if(l[p.id]=a.length<<1|1,nb(m,d))a.push(r.facet(p));else{let g=p.combine(d.map(O=>O.value));a.push(r&&p.compare(g,r.facet(p))?r.facet(p):g)}else{for(let g of d)g.type==0?(l[g.id]=a.length<<1|1,a.push(g.value)):(l[g.id]=c.length<<1,c.push(O=>g.dynamicSlot(O)));l[p.id]=c.length<<1,c.push(g=>L3(g,p,d))}}let u=c.map(f=>f(l));return new n(e,o,u,l,a,s)}};UM=j.define(),Uy=j.define({combine:n=>n.some(e=>e),static:!0}),jM=j.define({combine:n=>n.length?n[0]:void 0,static:!0}),WM=j.define(),YM=j.define(),HM=j.define(),FM=j.define({combine:n=>n.length?n[0]:!1}),nr=class{constructor(e,t){this.type=e,this.value=t}static define(){return new jy}},jy=class{of(e){return new nr(this,e)}},Wy=class{constructor(e){this.map=e}of(e){return new De(this,e)}},De=class n{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new n(this.type,t)}is(e){return this.type==e}static define(e={}){return new Wy(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}};De.reconfigure=De.define();De.appendConfig=De.define();Et=class n{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&qM(r,t.newLength),s.some(l=>l.type==n.time)||(this.annotations=s.concat(n.time.of(Date.now())))}static create(e,t,r,i,s,o){return new n(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(n.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};Et.time=nr.define();Et.userEvent=nr.define();Et.addToHistory=nr.define();Et.remote=nr.define();X3=[];Jn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Jn||(Jn={})),z3=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{Hy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(n){}xe=class n{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Rc(this,l<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Rc(this,r),qd(this,r)}update(...e){return KM(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let l of e.effects)l.is(zd.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,c)=>i.set(c,a)),t=null),i.set(l.value.compartment,l.value.extension)):l.is(De.reconfigure)?(t=null,r=l.value):l.is(De.appendConfig)&&(t=null,r=$l(r).concat(l.value));let s;t?s=e.startState.values.slice():(t=Zd.resolve(r,i,this),s=new n(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(Uy)?e.newSelection:e.newSelection.asSingle();new n(t,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:X.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=$l(r.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),h=c.map(i);for(let f=0;f<l;f++)s[f]=s[f].map(h);let u=i.mapDesc(c,!0);s.push(a.range.map(u)),i=i.compose(h),o=De.mapEffects(o,h).concat(De.mapEffects($l(a.effects),u))}return{changes:i,selection:X.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof un?e:un.of(e,this.doc.length,this.facet(n.lineSeparator))}toText(e){return he.of(e.split(this.facet(n.lineSeparator)||Xy))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Rc(this,t),qd(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof tr&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],l=e[s];i.push(o.init(a=>o.spec.fromJSON(l,a)))}}return n.create({doc:e.doc,selection:X.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Zd.resolve(e.extensions||[],new Map),r=e.doc instanceof he?e.doc:he.of((e.doc||"").split(t.staticFacet(n.lineSeparator)||Xy)),i=e.selection?e.selection instanceof X?e.selection:X.single(e.selection.anchor,e.selection.head):X.single(0);return qM(i,r.length),t.staticFacet(Uy)||(i=i.asSingle()),new n(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||`
`}get readOnly(){return this.facet(FM)}phrase(e,...t){for(let r of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(UM))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return q3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,l=e-r;for(;o>0;){let a=er(t,o,!1);if(s(t.slice(a,o))!=Jn.Word)break;o=a}for(;l<i;){let a=er(t,l);if(s(t.slice(l,a))!=Jn.Word)break;l=a}return o==l?null:X.range(o+r,l+r)}};xe.allowMultipleSelections=Uy;xe.tabSize=j.define({combine:n=>n.length?n[0]:4});xe.lineSeparator=jM;xe.readOnly=FM;xe.phrases=j.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});xe.languageData=UM;xe.changeFilter=WM;xe.transactionFilter=YM;xe.transactionExtender=HM;zd.reconfigure=De.define();rr=class{eq(e){return this==e}range(e,t=e){return Nc.create(e,t,this)}};rr.prototype.startSide=rr.prototype.endSide=0;rr.prototype.point=!1;rr.prototype.mapMode=wt.TrackDel;Nc=class n{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new n(e,t,r)}};Gy=class n{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,l=s.length;;){if(o==l)return o;let a=o+l>>1,c=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],h=this.from[a]+e,u=this.to[a]+e,f,d;if(h==u){let p=t.mapPos(h,c.startSide,c.mapMode);if(p==null||(f=d=p,c.startSide!=c.endSide&&(d=t.mapPos(h,c.endSide),d<f)))continue}else if(f=t.mapPos(h,c.startSide),d=t.mapPos(u,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(l=Math.max(l,d-f)),r.push(c),i.push(f-o),s.push(d-o))}return{mapped:r.length?new n(i,s,r,l):null,pos:o}}},Ne=class n{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new n(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Fy)),this.isEmpty)return t.length?n.of(t):this;let l=new Ud(this,null,-1).goto(0),a=0,c=[],h=new fo;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];h.addInner(u.from,u.to,u.value)||c.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||s<l.from||o(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||c.push(Nc.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?n.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)i=Math.max(i,a.maxPoint),t.push(a),r.push(e.mapPos(l));else if(c===!0){let{mapped:h,pos:u}=a.map(l,e);h&&(i=Math.max(i,h.maxPoint),t.push(h),r.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new n(r,t,s||n.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Lc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Lc.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=VM(o,l,r),c=new ao(o,a,s),h=new ao(l,a,s);r.iterGaps((u,f,d)=>XM(c,u,h,f,d,i)),r.empty&&r.length==0&&XM(c,0,h,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=VM(s,o),a=new ao(s,l,0).goto(r),c=new ao(o,l,0).goto(r);for(;;){if(a.to!=c.to||!Ky(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>i)return!0;a.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new ao(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let h=o.activeForPoint(o.to),u=o.pointFrom<t?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,a);i.point(l,c,o.point,h,u,o.pointRank),a=Math.min(o.openEnd(c),h.length)}else c>l&&(i.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>r)return a+(o.point&&o.to>r?1:0);l=o.to,o.next()}}static of(e,t=!1){let r=new fo;for(let i of e instanceof Nc?[e]:t?U3(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return n.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=n.empty;i=i.nextLayer)t=new n(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}};Ne.empty=new Ne([],[],null,-1);Ne.empty.nextLayer=Ne.empty;fo=class n{finishChunk(e){this.chunks.push(new Gy(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new n)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ne.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ne.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};Ud=class{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},Lc=class n{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new Ud(o,t,r,s));return i.length==1?i[0]:new n(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)By(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)By(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),By(this.heap,0)}}};ao=class{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lc.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ld(this.active,e),Ld(this.activeTo,e),Ld(this.activeRank,e),this.minActive=zM(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Id(this.active,t,r),Id(this.activeTo,t,i),Id(this.activeRank,t,s),e&&Id(e,t,this.cursor.from),this.minActive=zM(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Ld(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}});var rb,eQ,ib,tQ,Dn,nQ,sb,ob=S(()=>{rb="\u037C",eQ=typeof Symbol=="undefined"?"__"+rb:Symbol.for(rb),ib=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),tQ=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{},Dn=class{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,a);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,h,f)}else p!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(h.length||f)&&a.push((r&&!u&&!c?o.map(r):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=tQ[eQ]||1;return tQ[eQ]=e+1,rb+e.toString(36)}static mount(e,t,r){let i=e[ib],s=r&&r.nonce;i?s&&i.setNonce(s):i=new sb(e,s),i.mount(Array.isArray(t)?t:[t],e)}},nQ=new Map,sb=class{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=nQ.get(r);if(s)return e[ib]=s;this.sheet=new i.CSSStyleSheet,nQ.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[ib]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),r)for(let c=0;c<l.rules.length;c++)r.insertRule(l.rules[c],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=l.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}});var rQ=S(()=>{});function jc(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function db(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function tp(n,e){if(!e.anchorNode)return!1;try{return db(n,e.anchorNode)}catch(t){return!1}}function Wc(n){return n.nodeType==3?go(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Vc(n,e,t,r){return t?iQ(n,e,t,r,-1)||iQ(n,e,t,r,1):!1}function mo(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function op(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function iQ(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Mr(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=mo(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Mr(n):0}else return!1}}function Mr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function bp(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function j3(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function IQ(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function W3(n,e,t,r,i,s,o,l){let a=n.ownerDocument,c=a.defaultView||window;for(let h=n,u=!1;h&&!u;)if(h.nodeType==1){let f,d=h==a.body,p=1,m=1;if(d)f=j3(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let w=h.getBoundingClientRect();({scaleX:p,scaleY:m}=IQ(h,w)),f={left:w.left,right:w.left+h.clientWidth*p,top:w.top,bottom:w.top+h.clientHeight*m}}let g=0,O=0;if(i=="nearest")e.top<f.top?(O=e.top-(f.top+o),t>0&&e.bottom>f.bottom+O&&(O=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(O=e.bottom-f.bottom+o,t<0&&e.top-O<f.top&&(O=e.top-(f.top+o)));else{let w=e.bottom-e.top,k=f.bottom-f.top;O=(i=="center"&&w<=k?e.top+w/2-k/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-k+o)-f.top}if(r=="nearest"?e.left<f.left?(g=e.left-(f.left+s),t>0&&e.right>f.right+g&&(g=e.right-f.right+s)):e.right>f.right&&(g=e.right-f.right+s,t<0&&e.left<f.left+g&&(g=e.left-(f.left+s))):g=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,g||O)if(d)c.scrollBy(g,O);else{let w=0,k=0;if(O){let b=h.scrollTop;h.scrollTop+=O/m,k=(h.scrollTop-b)*m}if(g){let b=h.scrollLeft;h.scrollLeft+=g/p,w=(h.scrollLeft-b)*p}e={left:e.left-w,top:e.top-k,right:e.right-w,bottom:e.bottom-k},w&&Math.abs(w-g)<1&&(r="nearest"),k&&Math.abs(k-O)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function Y3(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}function _Q(n){if(n.setActive)return n.setActive();if(Rl)return n.focus(Rl);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Rl==null?{get preventScroll(){return Rl={preventScroll:!0},!0}}:void 0),!Rl){Rl=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}function go(n,e,t=e){let r=sQ||(sQ=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Il(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function H3(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function BQ(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function F3(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Mr(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Mr(t))}else{if(t==n)return!0;r=mo(t),t=t.parentNode}}function VQ(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function XQ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Mr(t)}else if(t.parentNode&&!op(t))r=mo(t),t=t.parentNode;else return null}}function zQ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!op(t))r=mo(t)+1,t=t.parentNode;else return null}}function oQ(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}function ZQ(n,e,t,r,i,s,o,l,a){let{children:c}=n,h=c.length?c[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==r&&h&&!o&&!f&&s.length<2&&h.merge(t,i,s.length?u:null,t==0,l,a))){if(r<c.length){let d=c[r];d&&(i<d.length||d.breakAfter&&(u!=null&&u.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&u&&d.merge(0,i,u,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(u?u.breakAfter=1:o=1),r++}for(h&&(h.breakAfter=o,t>0&&(!o&&s.length&&h.merge(t,h.length,s[0],!1,l,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,l,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:l;else if(c[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,l,a)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function qQ(n,e,t,r,i,s){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:h}=o.findPos(e,-1),u=e-t;for(let f of r)u+=f.length;n.length+=u,ZQ(n,c,h,l,a,r,0,i,s)}function K3(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?_.chrome||_.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let l=go(n,i,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return _.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?bp(a,o<0):a||null}function WQ(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Xt(t,0)}function YQ(n,e,t){let r,{children:i}=n;t>0&&e instanceof Ji&&i.length&&(r=i[i.length-1])instanceof Ji&&r.mark.eq(e.mark)?YQ(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function HQ(n,e,t){let r=null,i=-1,s=null,o=-1;function l(c,h){for(let u=0,f=0;u<c.children.length&&f<=h;u++){let d=c.children[u],p=f+d.length;p>=h&&(d.children.length?l(d,h-f):(!s||s.isHidden&&(t>0||eZ(s,d)))&&(p>h||f==p&&d.getSide()>0)?(s=d,o=h-f):(f<h||f==p&&d.getSide()<0&&!d.isHidden)&&(r=d,i=h-f)),f=p}}l(n,e);let a=(t<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:o),t):J3(n)}function J3(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Wc(e);return t[t.length-1]||null}function eZ(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function yb(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function cp(n,e,t){if(n==e)return!0;n||(n=hQ),e||(e=hQ);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function bb(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function tZ(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}function FQ(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t!=null?t:e,end:r!=null?r:e}}function nZ(n,e){return n==e||!!(n&&e&&n.compare(e))}function np(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}function Wd(n,e){for(let t of e)n=new Ji(t,[n],n.length);return n}function GQ(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}function KQ(n){return n<=247?rZ[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?iZ[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}function JQ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!JQ(r.inner,i.inner))return!1}return!0}function oZ(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,l=s<r.length?r[s].from:t,a=s?256:i;for(let c=o,h=a,u=a;c<l;c++){let f=KQ(n.charCodeAt(c));f==512?f=h:f==8&&u==4&&(f=16),Ce[c]=f==4?2:f,f&7&&(u=f),h=f}for(let c=o,h=a,u=a;c<l;c++){let f=Ce[c];if(f==128)c<l-1&&h==Ce[c+1]&&h&24?f=Ce[c]=h:Ce[c]=256;else if(f==64){let d=c+1;for(;d<l&&Ce[d]==64;)d++;let p=c&&h==8||d<t&&Ce[d]==8?u==1?1:8:256;for(let m=c;m<d;m++)Ce[m]=p;c=d-1}else f==8&&u==1&&(Ce[c]=1);h=f,f&7&&(u=f)}}}function lZ(n,e,t,r,i){let s=i==1?2:1;for(let o=0,l=0,a=0;o<=r.length;o++){let c=o?r[o-1].to:e,h=o<r.length?r[o].from:t;for(let u=c,f,d,p;u<h;u++)if(d=wb[f=n.charCodeAt(u)])if(d<0){for(let m=l-3;m>=0;m-=3)if(Cr[m+1]==-d){let g=Cr[m+2],O=g&2?i:g&4?g&1?s:i:0;O&&(Ce[u]=Ce[Cr[m]]=O),l=m;break}}else{if(Cr.length==189)break;Cr[l++]=u,Cr[l++]=f,Cr[l++]=a}else if((p=Ce[u])==2||p==1){let m=p==i;a=m?0:1;for(let g=l-3;g>=0;g-=3){let O=Cr[g+2];if(O&2)break;if(m)Cr[g+2]|=2;else{if(O&4)break;Cr[g+2]|=4}}}}}function aZ(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,l=i<t.length?t[i].from:e;for(let a=o;a<l;){let c=Ce[a];if(c==256){let h=a+1;for(;;)if(h==l){if(i==t.length)break;h=t[i++].to,l=i<t.length?t[i].from:e}else if(Ce[h]==256)h++;else break;let u=s==1,f=(h<e?Ce[h]:r)==1,d=u==f?u?1:2:r;for(let p=h,m=i,g=m?t[m-1].to:n;p>a;)p==g&&(p=t[--m].from,g=m?t[m-1].to:n),Ce[--p]=d;a=h}else s=c,a++}}}function xb(n,e,t,r,i,s,o){let l=r%2?2:1;if(r%2==i%2)for(let a=e,c=0;a<t;){let h=!0,u=!1;if(c==s.length||a<s[c].from){let m=Ce[a];m!=l&&(h=!1,u=m==16)}let f=!h&&l==1?[]:null,d=h?r:r+1,p=a;e:for(;;)if(c<s.length&&p==s[c].from){if(u)break e;let m=s[c];if(!h)for(let g=m.to,O=c+1;;){if(g==t)break e;if(O<s.length&&s[O].from==g)g=s[O++].to;else{if(Ce[g]==l)break e;break}}if(c++,f)f.push(m);else{m.from>a&&o.push(new Pr(a,m.from,d));let g=m.direction==Oo!=!(d%2);kb(n,g?r+1:r,i,m.inner,m.from,m.to,o),a=m.to}p=m.to}else{if(p==t||(h?Ce[p]!=l:Ce[p]==l))break;p++}f?xb(n,a,p,r+1,i,f,o):a<p&&o.push(new Pr(a,p,d)),a=p}else for(let a=t,c=s.length;a>e;){let h=!0,u=!1;if(!c||a>s[c-1].to){let m=Ce[a-1];m!=l&&(h=!1,u=m==16)}let f=!h&&l==1?[]:null,d=h?r:r+1,p=a;e:for(;;)if(c&&p==s[c-1].to){if(u)break e;let m=s[--c];if(!h)for(let g=m.from,O=c;;){if(g==e)break e;if(O&&s[O-1].to==g)g=s[--O].from;else{if(Ce[g-1]==l)break e;break}}if(f)f.push(m);else{m.to<a&&o.push(new Pr(m.to,a,d));let g=m.direction==Oo!=!(d%2);kb(n,g?r+1:r,i,m.inner,m.from,m.to,o),a=m.from}p=m.from}else{if(p==e||(h?Ce[p-1]!=l:Ce[p-1]==l))break;p--}f?xb(n,p,a,r+1,i,f,o):p<a&&o.push(new Pr(p,a,d)),a=p}}function kb(n,e,t,r,i,s,o){let l=e%2?2:1;oZ(n,i,s,r,l),lZ(n,i,s,r,l),aZ(i,s,r,l),xb(n,i,s,e,t,r,o)}function cZ(n,e,t){if(!n)return[new Pr(0,0,e==Wb?1:0)];if(e==Oo&&!t.length&&!sZ.test(n))return e$(n.length);if(t.length)for(;n.length>Ce.length;)Ce[Ce.length]=256;let r=[],i=e==Oo?0:1;return kb(n,i,i,t,0,n.length,r),r}function e$(n){return[new Pr(0,n,0)]}function hZ(n,e,t,r,i){var s;let o=r.head-n.from,l=Pr.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[l],c=a.side(i,t);if(o==c){let f=l+=i?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!i,t),c=a.side(i,t)}let h=er(n.text,o,a.forward(i,t));(h<a.from||h>a.to)&&(h=c),t$=n.text.slice(Math.min(o,h),Math.max(o,h));let u=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return u&&h==c&&u.level+(i?0:1)<a.level?X.cursor(u.side(!i,t)+n.from,u.forward(i,t)?1:-1,u.level):X.cursor(h+n.from,a.forward(i,t)?-1:1,a.level)}function uZ(n,e,t){for(let r=e;r<t;r++){let i=KQ(n.charCodeAt(r));if(i==1)return Oo;if(i==2||i==4)return Wb}return Oo}function Ln(n,e,t){let r=n.facet(s$);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}function uQ(n,e){let t=n.state.facet(d$);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return Ne.spans(r,e.from,e.to,{point(){},span(s,o,l,a){let c=s-e.from,h=o-e.from,u=i;for(let f=l.length-1;f>=0;f--,a--){let d=l[f].spec.bidiIsolate,p;if(d==null&&(d=uZ(e.text,c,h)),a>0&&u.length&&(p=u[u.length-1]).to==c&&p.direction==d)p.to=h,u=p.inner;else{let m={from:c,to:h,direction:d,inner:[]};u.push(m),u=m.inner}}}}),i}function m$(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(p$)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}function pZ(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function g$(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=XQ(t.focusNode,t.focusOffset),i=zQ(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let l=Qe.get(i.node);if(!l||l instanceof Qr&&l.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let a=Qe.get(r.node);!a||a instanceof Qr&&a.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function mZ(n,e,t){let r=g$(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(r.from,r.to)!=l)return null;let a=e.invertedDesc,c=new Ar(a.mapPos(s),a.mapPos(o),s,o),h=[];for(let u=i.parentNode;;u=u.parentNode){let f=Qe.get(u);if(f instanceof Ji)h.push({node:u,deco:f.mark});else{if(f instanceof xt||u.nodeName=="DIV"&&u.parentNode==n.contentDOM)return{range:c,text:i,marks:h,line:u};if(u!=n.contentDOM)h.push({node:u,deco:new Hc({inclusive:!0,attributes:tZ(u),tagName:u.tagName.toLowerCase()})});else return null}}}function gZ(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}function yZ(n,e,t){let r=new OZ;return Ne.compare(n,e,t,r),r.changes}function bZ(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function wZ(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function xZ(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return X.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,l=s;t<0?o=er(i.text,s,!1):l=er(i.text,s);let a=r(i.text.slice(o,l));for(;o>0;){let c=er(i.text,o,!1);if(r(i.text.slice(c,o))!=a)break;o=c}for(;l<i.length;){let c=er(i.text,l);if(r(i.text.slice(l,c))!=a)break;l=c}return X.range(o+i.from,l+i.from)}function kZ(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function SZ(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function ab(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function fQ(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function dQ(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function vb(n,e,t){let r,i,s,o,l=!1,a,c,h,u;for(let p=n.firstChild;p;p=p.nextSibling){let m=Wc(p);for(let g=0;g<m.length;g++){let O=m[g];i&&ab(i,O)&&(O=fQ(dQ(O,i.bottom),i.top));let w=kZ(e,O),k=SZ(t,O);if(w==0&&k==0)return p.nodeType==3?pQ(p,e,t):vb(p,e,t);(!r||o>k||o==k&&s>w)&&(r=p,i=O,s=w,o=k,l=w?e<O.left?g>0:g<m.length-1:!0),w==0?t>O.bottom&&(!h||h.bottom<O.bottom)?(a=p,h=O):t<O.top&&(!u||u.top>O.top)&&(c=p,u=O):h&&ab(h,O)?h=dQ(h,O.bottom):u&&ab(u,O)&&(u=fQ(u,O.top))}}if(h&&h.bottom>=t?(r=a,i=h):u&&u.top<=t&&(r=c,i=u),!r)return{node:n,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return pQ(r,f,t);if(l&&r.contentEditable!="false")return vb(r,f,t);let d=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:d}}function pQ(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let l=0;l<r;l++){let a=go(n,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let u=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&u<s){let f=e>=(h.left+h.right)/2,d=f;if((_.chrome||_.gecko)&&go(n,l).getBoundingClientRect().left==h.right&&(d=!f),u<=0)return{node:n,offset:l+(d?1:0)};i=l+(d?1:0),s=u}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function O$(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,a,{docHeight:c}=n.viewState,{x:h,y:u}=e,f=u-l;if(f<0)return 0;if(f>c)return n.state.doc.length;for(let b=n.viewState.heightOracle.textHeight/2,v=!1;a=n.elementAtHeight(f),a.type!=In.Text;)for(;f=r>0?a.bottom+b:a.top-b,!(f>=0&&f<=c);){if(v)return t?null:0;v=!0,r=-r}u=l+f;let d=a.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:mQ(n,o,a,h,u);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:mQ(n,o,a,h,u);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,g=m.elementFromPoint(h,u);g&&!n.contentDOM.contains(g)&&(g=null),g||(h=Math.max(o.left+1,Math.min(o.right-1,h)),g=m.elementFromPoint(h,u),g&&!n.contentDOM.contains(g)&&(g=null));let O,w=-1;if(g&&((i=n.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(h,u);b&&({offsetNode:O,offset:w}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(h,u);b&&({startContainer:O,startOffset:w}=b,(!n.contentDOM.contains(O)||_.safari&&vZ(O,w,h)||_.chrome&&CZ(O,w,h))&&(O=void 0))}O&&(w=Math.min(Mr(O),w))}if(!O||!n.docView.dom.contains(O)){let b=xt.find(n.docView,d);if(!b)return f>a.top+a.height/2?a.to:a.from;({node:O,offset:w}=vb(b.dom,h,u))}let k=n.docView.nearest(O);if(!k)return null;if(k.isWidget&&((s=k.dom)===null||s===void 0?void 0:s.nodeType)==1){let b=k.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?k.posAtStart:k.posAtEnd}else return k.localPosFromDOM(O,w)+k.posAtStart}function mQ(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((i-t.top-(n.defaultLineHeight-l)*.5)/l);s+=a*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+JM(o,s,n.state.tabSize)}function vZ(n,e,t){let r,i=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return go(n,r-1,r).getBoundingClientRect().right>t}function CZ(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():go(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function TZ(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==In.Text&&(i.type!=s.type||(t<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function PZ(n,e,t,r){let i=TZ(n,e.head,e.assoc||-1),s=!r||i.type!=In.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(i.from),a=n.posAtCoords({x:t==(l==nt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return X.cursor(a,t?-1:1)}return X.cursor(t?i.to:i.from,t?-1:1)}function gQ(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let l=e,a=null;;){let c=hZ(i,s,o,l,t),h=t$;if(!c){if(i.number==(t?n.state.doc.lines:1))return l;h=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=n.visualLineSide(i,!t)}if(a){if(!a(h))return l}else{if(!r)return c;a=r(h)}l=c}}function AZ(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Jn.Space&&(i=o),i==o}}function MZ(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return X.cursor(i,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i,e.assoc||-1),h=n.documentTop;if(c)o==null&&(o=c.left-a.left),l=s<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(i-d.from))),l=(s<0?d.top:d.bottom)+h}let u=a.left+o,f=r!=null?r:n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(f+d)*s,m=O$(n,{x:u,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?m<i:m>i)){let g=n.docView.coordsForChar(m),O=!g||p<g.top?-1:1;return X.cursor(m,O,void 0,o)}}}function rp(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=r||t||(e-s<o-e?-1:1);e=a<0?s:o,r=a}});if(!r)return e}}function cb(n,e,t){let r=rp(n.state.facet(Gb).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:X.cursor(r,r<t.from?1:-1)}function QZ(n,e,t){for(;;){if(!e||t<Mr(e))return!1;if(e==n)return!0;t=mo(e)+1,e=e.parentNode}}function y$(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=i.from,c=null;(s===8||_.android&&e.text.length<l-o)&&(a=i.to,c="end");let h=EZ(n.state.doc.sliceString(o,l,_c),e.text,a-o,c);h&&(_.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==_c+_c&&h.toB--,t={from:o+h.from,to:o+h.toA,insert:he.of(e.text.slice(h.from,h.toB).split(_c))})}else r&&(!n.hasFocus&&n.state.facet(di)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(_.mac||_.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=X.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:he.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:_.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=X.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:he.of([" "])}),t)return Kb(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:l}),!0}else return!1}function Kb(n,e,t,r=-1){if(_.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(_.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Il(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Il(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Il(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=$Z(n,e,t));return n.state.facet(o$).some(a=>a(n,e.from,e.to,s,l))||n.dispatch(l()),!0}function $Z(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",a=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+a))}else{let l=i.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),h,u=t&&g$(n,t.main.head);if(u){let p=e.insert.length-(e.to-e.from);h={from:u.from,to:u.to-p}}else h=n.state.doc.lineAt(s.head);let f=s.to-e.to,d=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:a||p.map(l)};let m=p.to-f,g=m-c.length;if(p.to-p.from!=d||n.state.sliceDoc(g,m)!=c||p.to>=h.from&&p.from<=h.to)return{range:p};let O=i.changes({from:g,to:m,insert:e.insert}),w=p.to-s.to;return{changes:O,range:a?X.range(Math.max(0,a.anchor+w),Math.max(0,a.head+w)):p.map(O)}})}else r={changes:l,selection:a&&i.selection.replaceRange(a)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function EZ(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(r=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&n.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function RZ(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new fp(t,r)),(i!=t||s!=r)&&e.push(new fp(i,s))),e}function DZ(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?X.single(t+e,r+e):null}function OQ(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){Ln(t.state,i)}}}function NZ(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let l in s){let a=s[l];a&&t(l).handlers.push(OQ(r.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(OQ(r.value,a))}}for(let r in ir)t(r).handlers.push(ir[r]);for(let r in _n)t(r).observers.push(_n[r]);return e}function Fd(n){return Math.max(0,n)*.7+8}function IZ(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}function _Z(n,e){let t=n.state.facet(n$);return t.length?t[0](e):_.mac?e.metaKey:e.ctrlKey}function BZ(n,e){let t=n.state.facet(r$);return t.length?t[0](e):_.mac?!e.altKey:!e.ctrlKey}function VZ(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=jc(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function XZ(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Qe.get(t))&&r.ignoreEvent(e))return!1;return!0}function zZ(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),k$(n,t.value)},50)}function xp(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function k$(n,e){e=xp(n.state,Yb,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Mb!=null&&t.selection.ranges.every(a=>a.empty)&&Mb==s.toString()){let a=-1;r=t.changeByRange(c=>{let h=t.doc.lineAt(c.from);if(h.from==a)return{range:c};a=h.from;let u=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:u},range:X.cursor(c.from+u.length)}})}else o?r=t.changeByRange(a=>{let c=s.line(i++);return{changes:{from:a.from,to:a.to,insert:c.text},range:X.cursor(a.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function yQ(n,e,t,r){if(r==1)return X.cursor(e,t);if(r==2)return xZ(n.state,e,t);{let i=xt.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,l=i?i.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,X.range(o,l)}}function ZZ(n,e,t,r){let i=xt.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&bQ(t,r,o))return-1;let l=i.coordsAt(s,1);return l&&bQ(t,r,l)?1:o&&o.bottom>=r?-1:1}function wQ(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:ZZ(n,t,e.clientX,e.clientY)}}function S$(n){if(!qZ)return n.detail;let e=xQ,t=SQ;return xQ=n,SQ=Date.now(),kQ=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(kQ+1)%3:1}function UZ(n,e){let t=wQ(n,e),r=S$(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,l){let a=wQ(n,s),c,h=yQ(n,a.pos,a.bias,r);if(t.pos!=a.pos&&!o){let u=yQ(n,t.pos,t.bias,r),f=Math.min(u.from,h.from),d=Math.max(u.to,h.to);h=f<h.from?X.range(f,d):X.range(d,f)}return o?i.replaceRange(i.main.extend(h.from,h.to)):l&&r==1&&i.ranges.length>1&&(c=jZ(i,a.pos))?c:l?i.addRange(h):X.create([h])}}}function jZ(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return X.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}function vQ(n,e,t,r){if(t=xp(n.state,Yb,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&BZ(n,e)?{from:s.from,to:s.to}:null,l={from:i,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}function WZ(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function YZ(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:xp(n,Hb,e.join(n.lineBreak)),ranges:t,linewise:r}}function C$(n,e){let t=[];for(let r of n.facet(l$)){let i=r(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:v$.of(!0)}):null}function T$(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=C$(n.state,e);t?n.dispatch(t):n.update([])}},10)}function HZ(n){CQ.has(n)||(CQ.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}function PQ(){_l=!1}function dp(n,e){return n==e?n:(n.constructor!=e.constructor&&(_l=!0),e)}function AQ(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Ki&&(r=n[e+1])instanceof Ki&&n.splice(e-1,3,new Ki(t.length+1+r.length))}function GZ(n,e,t){let r=new Db;return Ne.compare(n,e,t,r,0),r.changes}function KZ(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(i.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=r.body;)if(c.nodeType==1){let h=c,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=Math.min(c==n.parentNode?i.innerHeight:a,f.bottom)}c=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function JZ(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function eq(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}function tq(n,e,t){let r=[],i=n,s=0;return Ne.spans(t,n,e,{span(){},point(o,l){o>i&&(r.push({from:i,to:o}),s+=o-i),i=l}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Gd({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],l=o-s;if(r<=l)return s+r;r-=l}}function Kd(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function nq(n,e){for(let t of n)if(e(t))return t}function Bc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Tr(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Bc(i,e)):n._content)}function Bb(n,e,t){return new Dn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}function QQ(n,e,t){for(;e;){let r=Qe.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function $Q(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Vc(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function sq(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return $Q(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?$Q(n,t):null}function RQ(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&yb(o,t)}return t}function aq(n,e){let t=n.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,l;for(let a=0;a<t.length-1;++a){let c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),l&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function ep(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}function hq(n){let e=n.facet(Jc),t=DQ.get(e);return t||DQ.set(e,t=fq(e.reduce((r,i)=>r.concat(i),[]))),t}function fq(n,e=lq){let t=Object.create(null),r=Object.create(null),i=(o,l)=>{let a=r[o];if(a==null)r[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,c,h)=>{var u,f;let d=t[o]||(t[o]=Object.create(null)),p=l.split(/ (?!$)/).map(O=>aq(O,e));for(let O=1;O<p.length;O++){let w=p.slice(0,O).join(" ");i(w,!0),d[w]||(d[w]={preventDefault:!0,stopPropagation:!1,run:[k=>{let b=Gi={view:k,prefix:w,scope:o};return setTimeout(()=>{Gi==b&&(Gi=null)},uq),!0}]})}let m=p.join(" ");i(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((f=(u=d._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});a&&g.run.push(a),c&&(g.preventDefault=!0),h&&(g.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let h=t[c]||(t[c]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let f in h)h[f].run.push(d=>u(d,zb))}let a=o[e]||o.key;if(a)for(let c of l)s(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}function dq(n,e,t,r){zb=e;let i=au(e),s=Jy(i,0),o=eb(s)==i.length&&i!=" ",l="",a=!1,c=!1,h=!1;Gi&&Gi.view==t&&Gi.scope==r&&(l=Gi.prefix+" ",w$.indexOf(e.keyCode)<0&&(c=!0,Gi=null));let u=new Set,f=g=>{if(g){for(let O of g.run)if(!u.has(O)&&(u.add(O),O(t)))return g.stopPropagation&&(h=!0),!0;g.preventDefault&&(g.stopPropagation&&(h=!0),c=!0)}return!1},d=n[r],p,m;return d&&(f(d[l+ep(i,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_.windows&&e.ctrlKey&&e.altKey)&&(p=zn[e.keyCode])&&p!=i?(f(d[l+ep(p,e,!0)])||e.shiftKey&&(m=zo[e.keyCode])!=i&&m!=p&&f(d[l+ep(m,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(d[l+ep(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),c&&(a=!0),a&&h&&e.stopPropagation(),zb=null,a}function mq(n){let e=[gq];return n&&n.fixed===!1&&e.push(Zb.of(!0)),e}function NQ(n){return Array.isArray(n)?n:[n]}function qb(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}function Oq(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}function fb(n,e){return n.state.facet(Ll).formatNumber(e,n.state)}function Q$(n={}){return[Ll.of(n),mq(),wq]}function LQ(n){let e=9;for(;e<n;)e=e*10+9;return e}var pb,Rl,sQ,Xt,jb,Qe,lp,Jt,mb,gb,UQ,Ob,wp,lQ,lb,aQ,jQ,cQ,_,G3,Qr,Ji,ap,Yc,hQ,es,In,$e,Hc,Fc,ts,xt,po,Gc,Xc,ns,nt,Oo,Wb,rZ,iZ,wb,Cr,sZ,Pr,Ce,t$,n$,r$,i$,s$,Sb,o$,l$,Yb,Hb,a$,fZ,c$,zc,Yd,h$,di,dZ,Dl,pi,Zc,u$,Fb,Kc,f$,Gb,d$,p$,Ic,Ar,hp,up,OZ,_c,Cb,fp,Tb,Pb,b$,LZ,w$,Hd,Ab,ir,_n,x$,bQ,qZ,xQ,kQ,SQ,Mb,v$,CQ,TQ,_l,Qb,$b,Tr,Le,ip,fn,pp,Nn,Ki,Eb,FZ,Rb,Db,qc,Nb,mp,Nl,MQ,Lb,Jd,Ib,_b,P$,A$,M$,rq,iq,hb,Vb,Xb,B,oq,EQ,gp,lq,cq,Jc,DQ,Gi,uq,zb,NK,LK,$r,ub,pq,sp,Zb,gq,Ub,Op,yp,yq,bq,Ll,Uc,wq,Er=S(()=>{vr();ob();eg();rQ();pb=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Mr(t):0),r,Math.min(e.focusOffset,r?Mr(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}},Rl=null;Xt=class n{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new n(e.parentNode,mo(e),t)}static after(e,t){return new n(e.parentNode,mo(e)+1,t)}},jb=[],Qe=class n{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let l=n.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=oQ(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=oQ(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Mr(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!n.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,l=-1;for(let a=0,c=r,h=r;a<this.children.length;a++){let u=this.children[a],f=c+u.length;if(c<e&&f>t)return u.domBoundsAround(e,t,c);if(f>=e&&i==-1&&(i=a,s=c),c>t&&u.dom.parentNode==this.dom){o=a,l=h;break}h=f,c=f+u.breakAfter}return{from:s,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=jb){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new lp(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};Qe.prototype.breakAfter=0;lp=class{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}};Jt=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},mb=typeof document!="undefined"?document:{documentElement:{style:{}}},gb=/Edge\/(\d+)/.exec(Jt.userAgent),UQ=/MSIE \d/.test(Jt.userAgent),Ob=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jt.userAgent),wp=!!(UQ||Ob||gb),lQ=!wp&&/gecko\/(\d+)/i.test(Jt.userAgent),lb=!wp&&/Chrome\/(\d+)/.exec(Jt.userAgent),aQ="webkitFontSmoothing"in mb.documentElement.style,jQ=!wp&&/Apple Computer/.test(Jt.vendor),cQ=jQ&&(/Mobile\/\w+/.test(Jt.userAgent)||Jt.maxTouchPoints>2),_={mac:cQ||/Mac/.test(Jt.platform),windows:/Win/.test(Jt.platform),linux:/Linux|X11/.test(Jt.platform),ie:wp,ie_version:UQ?mb.documentMode||6:Ob?+Ob[1]:gb?+gb[1]:0,gecko:lQ,gecko_version:lQ?+(/Firefox\/(\d+)/.exec(Jt.userAgent)||[0,0])[1]:0,chrome:!!lb,chrome_version:lb?+lb[1]:0,ios:cQ,android:/Android\b/.test(Jt.userAgent),webkit:aQ,safari:jQ,webkit_version:aQ?+(/\bAppleWebKit\/(\d+)/.exec(Jt.userAgent)||[0,0])[1]:0,tabSize:mb.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},G3=256,Qr=class n extends Qe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof n)||this.length-(t-e)+r.length>G3||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new n(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Xt(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return K3(this.dom,e,t)}},Ji=class n extends Qe{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(BQ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof n&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(qQ(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let l of this.children){let a=r+l.length;a>e&&t.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=s),r=a,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new n(this.mark,t,o)}domAtPos(e){return WQ(this,e)}coordsAt(e,t){return HQ(this,e,t)}};ap=class n extends Qe{static create(e,t,r){return new n(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=n.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof n)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof n&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return he.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):he.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Xt.before(this.dom):Xt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;s=i[l],!(e>0?l==0:l==i.length-1||s.top<s.bottom);l+=o?-1:1);return bp(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},Yc=class n extends Qe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof n&&e.side==this.side}split(){return new n(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Xt.before(this.dom):Xt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return he.empty}get isHidden(){return!0}};Qr.prototype.children=ap.prototype.children=Yc.prototype.children=jb;hQ=Object.create(null);es=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},In=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(In||(In={})),$e=class extends rr{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Hc(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ts(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=FQ(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new ts(e,r,i,t,e.widget||null,!0)}static line(e){return new Fc(e)}static set(e,t=!1){return Ne.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};$e.none=Ne.empty;Hc=class n extends $e{constructor(e){let{start:t,end:r}=FQ(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof n&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&cp(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};Hc.prototype.point=!1;Fc=class n extends $e{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof n&&this.spec.class==e.spec.class&&cp(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};Fc.prototype.mapMode=wt.TrackBefore;Fc.prototype.point=!0;ts=class n extends $e{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?wt.TrackBefore:wt.TrackAfter:wt.TrackDel}get type(){return this.startSide!=this.endSide?In.WidgetRange:this.startSide<=0?In.WidgetBefore:In.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof n&&nZ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};ts.prototype.point=!0;xt=class n extends Qe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof n))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),qQ(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new n;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){cp(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){YQ(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=yb(t,this.attrs||{})),r&&(this.attrs=yb({class:r},this.attrs||{}))}domAtPos(e){return WQ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(BQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(bb(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Qe.get(i)instanceof Ji;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Qe.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!_.ios||!this.children.some(s=>s instanceof Qr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Qr)||/[^ -~]/.test(r.text))return null;let i=Wc(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=HQ(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof n&&this.children.length==0&&e.children.length==0&&cp(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof n)return s;if(o>t)break}i=o+s.breakAfter}return null}},po=class n extends Qe{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof n)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Xt.before(this.dom):Xt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new n(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return jb}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):he.empty}domBoundsAround(){return null}become(e){return e instanceof n&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Gc?null:bp(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}},Gc=class extends es{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},Xc=class n{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof po&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new xt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Wd(new Yc(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof po)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Wd(new Qr(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof ts){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(r instanceof ts)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new po(r.widget||ns.block,l,r));else{let a=ap.create(r.widget||ns.inline,l,l?0:r.startSide),c=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<t||r.startSide>0),h=!a.isEditable&&(e<t||s>i.length||r.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(u.append(Wd(new Yc(1),i),s),s=i.length+Math.max(0,s-i.length)),u.append(Wd(a,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new n(e,t,r,s);return o.openEnd=Ne.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}};ns=class extends es{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};ns.inline=new ns("span");ns.block=new ns("div");nt=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(nt||(nt={})),Oo=nt.LTR,Wb=nt.RTL;rZ=GQ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),iZ=GQ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),wb=Object.create(null),Cr=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);wb[e]=t,wb[t]=-e}sZ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Pr=class{get dir(){return this.level%2?Wb:Oo}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==r)return o;(s<0||(i!=0?i<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}};Ce=[];t$="";n$=j.define(),r$=j.define(),i$=j.define(),s$=j.define(),Sb=j.define(),o$=j.define(),l$=j.define(),Yb=j.define(),Hb=j.define(),a$=j.define({combine:n=>n.some(e=>e)}),fZ=j.define({combine:n=>n.some(e=>e)}),c$=j.define(),zc=class n{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new n(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new n(X.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Yd=De.define({map:(n,e)=>n.map(e)}),h$=De.define();di=j.define({combine:n=>n.length?n[0]:!0}),dZ=0,Dl=j.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}}),pi=class n{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Dl.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Dl.of({plugin:this,arg:e}))}static define(e,t){let{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new n(dZ++,e,r,i,l=>{let a=[];return o&&a.push(Kc.of(c=>{let h=c.plugin(l);return h?o(h):$e.none})),s&&a.push(s(l)),a})}static fromClass(e,t){return n.define((r,i)=>new e(r,i),t)}},Zc=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Ln(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(i){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ln(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Ln(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},u$=j.define(),Fb=j.define(),Kc=j.define(),f$=j.define(),Gb=j.define(),d$=j.define();p$=j.define();Ic=j.define(),Ar=class n{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new n(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,l=0;;i++){let a=i==e.length?null:e[i],c=o-l,h=a?a.fromB:1e9;for(;s<t.length&&t[s]<h;){let u=t[s],f=t[s+1],d=Math.max(l,u),p=Math.min(h,f);if(d<=p&&new n(d+c,p+c,d,p).addToSet(r),f>h)break;s+=2}if(!a)return r;new n(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),o=a.toA,l=a.toB}}},hp=class n{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=un.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,l,a)=>i.push(new Ar(s,o,l,a))),this.changedRanges=i}static create(e,t,r){return new n(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},up=class extends Qe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=$e.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new xt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ar(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!wZ(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?mZ(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:h}=this.hasComposition;r=new Ar(c,h,e.changes.mapPos(c,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_.ie||_.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=yZ(o,l,e.changes);return r=Ar.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_.chrome||_.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof po&&o.widget instanceof Gc&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:h,toB:u}=l,f,d,p,m;if(r&&r.range.fromB<u&&r.range.toB>h){let b=Xc.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),v=Xc.build(this.view.state.doc,r.range.toB,u,this.decorations,this.dynamicDecorationMap);d=b.breakAtStart,p=b.openStart,m=v.openEnd;let x=this.compositionView(r);v.breakAtStart?x.breakAfter=1:v.content.length&&x.merge(x.length,x.length,v.content[0],!1,v.openStart,0)&&(x.breakAfter=v.content[0].breakAfter,v.content.shift()),b.content.length&&x.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),f=b.content.concat(x).concat(v.content)}else({content:f,breakAtStart:d,openStart:p,openEnd:m}=Xc.build(this.view.state.doc,h,u,this.decorations,this.dynamicDecorationMap));let{i:g,off:O}=s.findPos(c,1),{i:w,off:k}=s.findPos(a,-1);ZQ(this,w,k,g,O,f,d,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(h$)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Qr(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Ji(i,[t],t.length);let r=new xt;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=Qe.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(di)||this.dom.tabIndex>-1)&&tp(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(_.gecko&&l.empty&&!this.hasComposition&&pZ(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=c=new Xt(u,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!Vc(a.node,a.offset,h.anchorNode,h.anchorOffset)||!Vc(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{_.android&&_.chrome&&this.dom.contains(h.focusNode)&&bZ(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=jc(this.view.root);if(u)if(l.empty){if(_.gecko){let f=gZ(a.node,a.offset);if(f&&f!=3){let d=(f==1?XQ:zQ)(a.node,a.offset);d&&(a=new Xt(d.node,d.offset))}}u.collapse(a.node,a.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(c.node,c.offset)}catch(f){}}else{let f=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),f.setEnd(c.node,c.offset),f.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new Xt(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new Xt(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Vc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=jc(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=xt.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let h=this.domAtPos(t.head+t.assoc);r.collapse(h.node,h.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=Qe.get(t.childNodes[i]);s instanceof xt&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Qe.get(t.childNodes[i]);s instanceof xt&&(r=s.domAtPos(s.length))}return r?new Xt(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Qe.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof xt)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!r||l instanceof xt&&!(r instanceof xt&&t>=0)))r=l,i=c;else if(r&&c==e&&a==e&&l instanceof po&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof xt))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=a}if(!(i instanceof Qr))return null;let s=er(i.text,r);if(s==r)return null;let o=go(i.dom,r,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==nt.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],f=c+u.length;if(f>i)break;if(c>=r){let d=u.dom.getBoundingClientRect();if(t.push(d.height),o){let p=u.dom.lastChild,m=p?Wc(p):[];if(m.length){let g=m[m.length-1],O=a?g.right-d.left:d.right-g.left;O>l&&(l=O,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?nt.RTL:nt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof xt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Wc(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new lp(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push($e.replace({widget:new Gc(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return $e.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Kc).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(f$).map((s,o)=>{let l=typeof s=="function";return l&&(r=!0),l?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Ne.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(c$))try{if(c(this.view,e.range,e))return!0}catch(h){Ln(this.view.state,h,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=m$(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;W3(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==nt.LTR)}};OZ=class{constructor(){this.changes=[]}compareRange(e,t){np(e,t,this.changes)}comparePoint(e,t){np(e,t,this.changes)}boundChange(e){np(e,e,this.changes)}};_c="\uFFFF",Cb=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(xe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=_c}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let l=Qe.get(i),a=Qe.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:op(i))||op(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(l=i.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Qe.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(QZ(e,r.node,r.offset)?t:0))}};fp=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},Tb=class{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let l=s||o?[]:RZ(e),a=new Cb(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=DZ(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!db(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!db(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),h=e.viewport;if((_.ios||_.chrome)&&e.state.selection.main.empty&&a!=c&&(h.from>0||h.to<e.state.doc.length)){let u=Math.min(a,c),f=Math.max(a,c),d=h.from-u,p=h.to-f;(d==0||d==1||u==0)&&(p==0||p==-1||f==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=X.single(c,a)}}};Pb=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_.safari&&e.contentDOM.addEventListener("input",()=>null),_.gecko&&HZ(e.contentDOM.ownerDocument)}handleEvent(e){!XZ(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=NZ(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=r[s];l&&o!=!l.handlers.length&&(i.removeEventListener(s,this.handleEvent),l=null),l||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&w$.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_.android&&_.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return _.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=b$.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||LZ.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Il(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_.safari&&!_.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};b$=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],LZ="dthko",w$=[16,17,18,20,91,92,224,225],Hd=6;Ab=class{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Y3(e.contentDOM),this.atoms=e.state.facet(Gb).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(xe.allowMultipleSelections)&&_Z(e,t),this.dragging=VZ(e,t)&&S$(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&IZ(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=m$(this.view);e.clientX-a.left<=i+Hd?t=-Fd(i-e.clientX):e.clientX+a.right>=o-Hd&&(t=Fd(e.clientX-o)),e.clientY-a.top<=s+Hd?r=-Fd(s-e.clientY):e.clientY+a.bottom>=l-Hd&&(r=Fd(e.clientY-l)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=rp(this.atoms,i.from,0);o!=i.from&&(s=X.cursor(o,-1))}else{let o=rp(this.atoms,i.from,-1),l=rp(this.atoms,i.to,1);(o!=i.from||l!=i.to)&&(s=X.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?X.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};ir=Object.create(null),_n=Object.create(null),x$=_.ie&&_.ie_version<15||_.ios&&_.webkit_version<604;_n.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};ir.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);_n.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};_n.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};ir.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(i$))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=UZ(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new Ab(n,e,t,r)),r&&n.observer.ignore(()=>{_Q(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};bQ=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;qZ=_.ie&&_.ie_version<=11,xQ=null,kQ=0,SQ=0;ir.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=X.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",xp(n.state,Hb,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ir.dragend=n=>(n.inputState.draggedContent=null,!1);ir.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&vQ(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return vQ(n,e,r,!0),!0}return!1};ir.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=x$?null:e.clipboardData;return t?(k$(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(zZ(n),!1)};Mb=null;ir.copy=ir.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=YZ(n.state);if(!t&&!i)return!1;Mb=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=x$?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(WZ(n,t),!1)};v$=nr.define();_n.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),T$(n)};_n.blur=n=>{n.observer.clearSelectionRange(),T$(n)};_n.compositionstart=_n.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};_n.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,_.chrome&&_.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};_n.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ir.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=n.posAtDOM(l.startContainer,l.startOffset),c=n.posAtDOM(l.endContainer,l.endOffset);return Kb(n,{from:a,to:c,insert:n.state.toText(s)},null),!0}}let i;if(_.chrome&&_.android&&(i=b$.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return _.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),_.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>_n.compositionend(n,e),20),!1};CQ=new Set;TQ=["pre-wrap","normal","pre-line","break-spaces"],_l=!1;Qb=class{constructor(e){this.lineWrapping=e,this.doc=he.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return TQ.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let l=TQ.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let c=0;c<o.length;c++){let h=o[c];h<0?c++:this.heightSamples[Math.floor(h*10)]=!0}}return a}},$b=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},Tr=class n{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?In.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ts?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new n(this.from,this.length+e.length,this.top,this.height+e.height,t)}},Le=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Le||(Le={})),ip=.001,fn=class n{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ip&&(_l=!0),this.height=e)}replace(e,t,r){return n.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:h,toB:u}=i[l],f=s.lineAt(a,Le.ByPosNoHeight,r.setDoc(t),0,0),d=f.to>=c?f:s.lineAt(c,Le.ByPosNoHeight,r,0,0);for(u+=d.to-c,c=d.to;l>0&&f.from<=i[l-1].toA;)a=i[l-1].fromA,h=i[l-1].fromB,l--,a<f.from&&(f=s.lineAt(a,Le.ByPosNoHeight,r,0,0));h+=f.from-a,a=f.from;let p=Rb.build(r.setDoc(o),e,h,u);s=dp(s,s.replace(a,c,p))}return s.updateHeight(r,0)}static empty(){return new Nn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(s>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,s-=l.size}else break;else if(i<s){let l=e[t++];l&&(i+=l.size)}else{let l=e[--r];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new Eb(n.of(e.slice(0,t)),o,n.of(e.slice(r)))}};fn.prototype.size=1;pp=class extends fn{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Tr(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Nn=class n extends pp{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Tr(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof n||i instanceof Ki&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ki?i=new n(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):fn.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Ki=class n extends fn{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:l}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=t.doc.lineAt(c),u=l+h.length*a,f=Math.max(r,e-u/2);return new Tr(h.from,h.length,f,u,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/l))),{from:h,length:u}=t.doc.line(s+c);return new Tr(h,u,r+l*c,l,0)}}lineAt(e,t,r,i,s){if(t==Le.ByHeight)return this.blockAt(e,r,i,s);if(t==Le.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new Tr(d,p-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(r,s),c=r.doc.lineAt(e),h=l+c.length*a,u=c.number-o,f=i+l*u+a*(c.from-s-u);return new Tr(c.from,c.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(r,s);for(let h=e,u=i;h<=t;){let f=r.doc.lineAt(h);if(h==e){let p=f.number-l;u+=a*p+c*(e-s-p)}let d=a+c*f.length;o(new Tr(f.from,f.length,u,d,0)),u+=d,h=f.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof n?r[r.length-1]=new n(s.length+i):r.push(null,new n(i-1))}if(e>0){let s=r[0];s instanceof n?r[0]=new n(e+s.length):r.unshift(new n(e-1),null)}return fn.of(r)}decomposeLeft(e,t){t.push(new n(e-1),null)}decomposeRight(e,t){t.push(null,new n(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],l=Math.max(t,i.from),a=-1;for(i.from>t&&o.push(new n(i.from-t-1).updateHeight(e,t));l<=s&&i.more;){let h=e.doc.lineAt(l).length;o.length&&o.push(null);let u=i.heights[i.index++];a==-1?a=u:Math.abs(u-a)>=ip&&(a=-2);let f=new Nn(h,u);f.outdated=!1,o.push(f),l+=h+1}l<=s&&o.push(null,new n(s-l).updateHeight(e,l));let c=fn.of(o);return(a<0||Math.abs(c.height-this.height)>=ip||Math.abs(a-this.heightMetrics(e,t).perLine)>=ip)&&(_l=!0),dp(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},Eb=class extends fn{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,l=s+this.left.length+this.break,a=t==Le.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let h=t==Le.ByPosNoHeight?Le.ByPosNoHeight:Le.ByPos;return a?c.join(this.right.lineAt(l,h,r,o,l)):this.left.lineAt(l,h,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let l=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,r,i,s,o),t>=a&&this.right.forEachLine(e,t,r,l,a,o);else{let c=this.lineAt(a,Le.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,l,a,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of r)s.push(l);if(e>0&&AQ(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),AQ(s,l)}return fn.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?fn.of(this.break?[e,null,t]:[e,t]):(this.left=dp(this.left,e),this.right=dp(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return i&&i.from<=t+s.length&&i.more?a=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=l+o.length&&i.more?a=o=o.updateHeight(e,l,r,i):o.updateHeight(e,l,r),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};FZ=5,Rb=class n{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Nn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Nn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new pp(o,i,r)):(o||s||i>=FZ)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Nn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Ki(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Nn)return e;let t=new Nn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Nn)&&!this.isCovered?this.nodes.push(new Nn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Nn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new n(r,e);return Ne.spans(t,r,i,s,0),s.finish(r)}};Db=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&np(e,t,this.changes,5)}};qc=class{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return $e.replace({widget:new Nb(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}},Nb=class extends es{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},mp=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=MQ,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=nt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Fb).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Qb(t),this.stateDeco=e.facet(Kc).filter(r=>typeof r!="function"),this.heightMap=fn.empty().applyChanges(this.stateDeco,he.empty,this.heightOracle.setDoc(e.doc),[new Ar(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=$e.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Nl(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?MQ:new Lb(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Bc(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Kc).filter(h=>typeof h!="function");let i=e.changedRanges,s=Ar.extendWithRanges(i,GZ(r,this.stateDeco,e?e.changes:un.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);PQ(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||_l)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(fZ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?nt.RTL:nt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,h=0;if(l.width&&l.height){let{scaleX:b,scaleY:v}=IQ(t,l);(b>.005&&Math.abs(this.scaleX-b)>.005||v>.005&&Math.abs(this.scaleY-v)>.005)&&(this.scaleX=b,this.scaleY=v,c|=16,o=a=!0)}let u=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=VQ(e.scrollDOM);let p=(this.printing?eq:KZ)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(a=!0)),!this.inView&&!this.scrollTarget&&!JZ(e.dom))return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let b=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(b)&&(o=!0),o||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){let{lineHeight:v,charWidth:x,textHeight:T}=e.docView.measureTextSize();o=v>0&&i.refresh(s,v,x,T,w/x,b),o&&(e.docView.minWidth=0,c|=16)}m>0&&g>0?h=Math.max(m,g):m<0&&g<0&&(h=Math.min(m,g)),PQ();for(let v of this.viewports){let x=v.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(v);this.heightMap=(o?fn.empty().applyChanges(this.stateDeco,he.empty,this.heightOracle,[new Ar(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new $b(v.from,x))}_l&&(c|=2)}let k=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(c&2||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Nl(i.lineAt(o-r*1e3,Le.ByHeight,s,0,0).from,i.lineAt(l+(1-r)*1e3,Le.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=i.lineAt(c,Le.ByPos,s,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&c<a.from?f=u.top:f=u.bottom-h,a=new Nl(i.lineAt(f-1e3/2,Le.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,Le.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Nl(this.heightMap.lineAt(r,Le.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Le.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Le.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Le.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new qc(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=nt.LTR&&!r)return[];let l=[],a=(h,u,f,d)=>{if(u-h<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let O of m)if(O>h&&O<u){a(h,O-10,f,d),a(O+10,u,f,d);return}let g=nq(e,O=>O.from>=f.from&&O.to<=f.to&&Math.abs(O.from-h)<s&&Math.abs(O.to-u)<s&&!m.some(w=>O.from<w&&O.to>w));if(!g){if(u<f.to&&t&&r&&t.visibleRanges.some(k=>k.from<=u&&k.to>=u)){let k=t.moveToLineBoundary(X.cursor(u),!1,!0).head;k>h&&(u=k)}let O=this.gapSize(f,h,u,d),w=r||O<2e6?O:2e6;g=new qc(h,u,O,w)}l.push(g)},c=h=>{if(h.length<o||h.type!=In.Text)return;let u=tq(h.from,h.to,this.stateDeco);if(u.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,O;if(f!=null){let w=Kd(u,f),k=((this.visibleBottom-this.visibleTop)/2+m)/h.height;g=w-k,O=w+k}else g=(this.visibleTop-h.top-m)/h.height,O=(this.visibleBottom-h.top+m)/h.height;d=Gd(u,g),p=Gd(u,O)}else{let m=u.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,O=0;if(m>2e6)for(let x of e)x.from>=h.from&&x.from<h.to&&x.size!=x.displaySize&&x.from*this.heightOracle.charWidth+O<this.pixelViewport.left&&(O=x.size-x.displaySize);let w=this.pixelViewport.left+O,k=this.pixelViewport.right+O,b,v;if(f!=null){let x=Kd(u,f),T=((k-w)/2+g)/m;b=x-T,v=x+T}else b=(w-g)/m,v=(k+g)/m;d=Gd(u,b),p=Gd(u,v)}d>h.from&&a(h.from,d,h,u),p<h.to&&a(p,h.to,h,u)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(c):c(h);return l}gapSize(e,t,r,i){let s=Kd(i,r)-Kd(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){qc.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=$e.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Ne.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],l=r[s];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Bc(this.heightMap.lineAt(e,Le.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Bc(this.heightMap.lineAt(this.scaler.fromDOM(e),Le.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Bc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},Nl=class{constructor(e,t){this.from=e,this.to=t}};MQ={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}},Lb=class n{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:l,to:a})=>{let c=t.lineAt(l,Le.ByPos,e,0,0).top,h=t.lineAt(a,Le.ByPos,e,0,0).bottom;return i+=h-c,{from:l,to:a,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof n?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}};Jd=j.define({combine:n=>n.join(" ")}),Ib=j.define({combine:n=>n.indexOf(!0)>-1}),_b=Dn.newName(),P$=Dn.newName(),A$=Dn.newName(),M$={"&light":"."+P$,"&dark":"."+A$};rq=Bb("."+_b,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},M$),iq={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hb=_.ie&&_.ie_version<=11,Vb=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new pb,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(_.ie&&_.ie_version<=11||_.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(_.chrome&&_.chrome_version<126)&&(this.editContext=new Xb(e),e.state.facet(di)&&(e.contentDOM.editContext=this.editContext.editContext)),hb&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(di)?r.root.activeElement!=this.dom:!tp(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(_.ie&&_.ie_version<=11||_.android&&_.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Vc(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=jc(e.root);if(!t)return!1;let r=_.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&sq(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=tp(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&F3(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,iq),hb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Il(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&tp(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Tb(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=y$(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=QQ(t,e.previousSibling||e.target.previousSibling,-1),i=QQ(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(di)!=e.state.facet(di)&&(e.view.contentDOM.editContext=e.state.facet(di)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};Xb=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,l=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let c={from:l,to:a,insert:he.of(r.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let h=X.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((_.mac||_.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:l,to:a,insert:he.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let h=this.to-this.from+(c.to-c.from+c.insert.length);Kb(e,c,X.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(a<c){let h=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;i.push($e.mark({attributes:{style:h}}).range(a,c))}}}e.dispatch({effects:h$.of($e.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=jc(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,c)=>{if(r)return;let h=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,t+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=h}t+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},B=class n{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||H3(e.parent)||document,this.viewState=new mp(e.state||xe.create(e)),e.scrollTo&&e.scrollTo.is(Yd)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Dl).map(i=>new Zc(i));for(let i of this.plugins)i.update(this);this.observer=new Vb(this),this.inputState=new Pb(this),this.inputState.ensureHandlers(this.plugins),this.docView=new up(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Et?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(v$))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=C$(s,o),a||(l=1));let c=this.observer.delayedAndroidKey,h=null;if(c?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(xe.phrases)!=this.state.facet(xe.phrases))return this.setState(s);i=hp.create(this,s,e),i.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(u&&(u=u.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;u=new zc(d.empty?d:X.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(Yd)&&(u=d.value.clip(this.state))}this.viewState.update(i,u),this.bidiCache=gp.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ic)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Jd)!=i.state.facet(Jd)&&(this.viewState.mustMeasureContent=!0),(t||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Sb))try{f(i)}catch(d){Ln(this.state,d,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!y$(this,h)&&c.force&&Il(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new mp(e),this.plugins=e.facet(Dl).map(r=>new Zc(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new up(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Dl),r=e.state.facet(Dl);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new Zc(s));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Ln(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(VQ(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let h=c.map(d=>{try{return d.read(this)}catch(p){return Ln(this.state,p),EQ}}),u=hp.create(this,this.state,[]),f=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),f=this.docView.update(u),f&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(h[d]!=EQ)try{let p=c[d];p.write&&p.write(h[d],this)}catch(p){Ln(this.state,p)}if(f&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Sb))l(t)}get themeClasses(){return _b+" "+(this.state.facet(Ib)?A$:P$)+" "+this.state.facet(Jd)}updateAttrs(){let e=RQ(this,u$,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(di)?"true":"false",class:"cm-content",style:`${_.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),RQ(this,Fb,t);let r=this.observer.ignore(()=>{let i=bb(this.contentDOM,this.contentAttrs,t),s=bb(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(n.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ic);let e=this.state.facet(n.cspNonce);Dn.mount(this.root,this.styleModules.concat(rq).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return cb(this,e,gQ(this,e,t,r))}moveByGroup(e,t){return cb(this,e,gQ(this,e,t,r=>AZ(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return X.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return PZ(this,e,t,r)}moveVertically(e,t,r){return cb(this,e,MZ(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),O$(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Pr.find(s,e-i.from,-1,t)];return bp(r,o.dir==nt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(a$)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>oq)return e$(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||JQ(s.isolates,r=uQ(this,e))))return s.order;r||(r=uQ(this,e));let i=cZ(e.text,t,r);return this.bidiCache.push(new gp(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{_Q(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Yd.of(new zc(typeof e=="number"?X.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Yd.of(new zc(X.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return pi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return pi.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Dn.newName(),i=[Jd.of(r),Ic.of(Bb(`.${r}`,e))];return t&&t.dark&&i.push(Ib.of(!0)),i}static baseTheme(e){return fi.lowest(Ic.of(Bb("."+_b,e,M$)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Qe.get(r)||Qe.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}};B.styleModule=Ic;B.inputHandler=o$;B.clipboardInputFilter=Yb;B.clipboardOutputFilter=Hb;B.scrollHandler=c$;B.focusChangeEffect=l$;B.perLineTextDirection=a$;B.exceptionSink=s$;B.updateListener=Sb;B.editable=di;B.mouseSelectionStyle=i$;B.dragMovesSelection=r$;B.clickAddsSelectionRange=n$;B.decorations=Kc;B.outerDecorations=f$;B.atomicRanges=Gb;B.bidiIsolatedRanges=d$;B.scrollMargins=p$;B.darkTheme=Ib;B.cspNonce=j.define({combine:n=>n.length?n[0]:""});B.contentAttributes=Fb;B.editorAttributes=u$;B.lineWrapping=B.contentAttributes.of({class:"cm-lineWrapping"});B.announce=De.define();oq=4096,EQ={},gp=class n{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:nt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new n(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}};lq=_.mac?"mac":_.windows?"win":_.linux?"linux":"key";cq=fi.default(B.domEventHandlers({keydown(n,e){return dq(hq(e.state),n,e,"editor")}})),Jc=j.define({enables:cq}),DQ=new WeakMap;Gi=null,uq=4e3;zb=null;NK=/x/.unicode!=null?"gu":"g",LK=B.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),$r=class extends rr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};$r.prototype.elementClass="";$r.prototype.toDOM=void 0;$r.prototype.mapMode=wt.TrackBefore;$r.prototype.startSide=$r.prototype.endSide=-1;$r.prototype.point=!0;ub=j.define(),pq=j.define(),sp=j.define(),Zb=j.define({combine:n=>n.some(e=>e)});gq=pi.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(sp).map(e=>new Op(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Zb),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Zb)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ne.iter(this.view.state.facet(ub),this.view.viewport.from),r=[],i=this.gutters.map(s=>new Ub(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==In.Text&&o){qb(t,r,l.from);for(let a of i)a.line(this.view,l,r);o=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(s.type==In.Text){qb(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(sp),t=n.state.facet(sp),r=n.docChanged||n.heightChanged||n.viewportChanged||!Ne.eq(n.startState.facet(ub),n.state.facet(ub),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new Op(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>B.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==nt.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});Ub=class{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Ne.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let l=new yp(e,o,s,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];qb(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet(pq)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},Op=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=NQ(t.markers(e)),t.initialSpacer&&(this.spacer=new yp(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=NQ(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Ne.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},yp=class{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Oq(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,c=!1;if(a){let h=a.elementClass;h&&(r+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,c=!0;break}}else l=this.markers.length;for(;o<l;){let h=this.markers[o++];if(h.toDOM){h.destroy(i);let u=i.nextSibling;i.remove(),i=u}}if(!a)break;a.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}};yq=j.define(),bq=j.define(),Ll=j.define({combine(n){return jd(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(l,a,c)=>s(l,a,c)||o(l,a,c):o}return r}})}}),Uc=class extends $r{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};wq=sp.compute([Ll],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(yq)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Uc(fb(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(bq)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ll)!=e.state.facet(Ll),initialSpacer(e){return new Uc(fb(e,LQ(e.state.doc.lines)))},updateSpacer(e,t){let r=fb(t.view,LQ(t.view.state.doc.lines));return r==e.number?e:new Uc(r)},domEventHandlers:n.facet(Ll).domEventHandlers}))});function _$(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function eh(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof tn&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:be.IgnoreOverlays;if(r)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof tn&&o.index<0&&((i=l.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}function E$(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function ew(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}function B$(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof tn&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new nw(i,t)}function Sq(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof tn?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=yo.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new tn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(eh(l,e,t,!1))}}return i?B$(i):r}function aw(n){return n.children.some(e=>e instanceof is||!e.type.isAnonymous||aw(e))}function vq(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=1024,reused:s=[],minRepeatType:o=r.types.length}=n,l=Array.isArray(t)?new Jb(t,t.length):t,a=r.types,c=0,h=0;function u(v,x,T,C,M,$){let{id:L,start:D,end:W,size:G}=l,oe=h,ae=c;for(;G<0;)if(l.next(),G==-1){let Fe=s[L];T.push(Fe),C.push(D-v);return}else if(G==-3){c=L;return}else if(G==-4){h=L;return}else throw new RangeError(`Unrecognized record size: ${G}`);let me=a[L],Ee,Ue,St=D-v;if(W-D<=i&&(Ue=g(l.pos-x,M))){let Fe=new Uint16Array(Ue.size-Ue.skip),Te=l.pos-Ue.size,je=Fe.length;for(;l.pos>Te;)je=O(Ue.start,Fe,je);Ee=new is(Fe,W-Ue.start,r),St=Ue.start-v}else{let Fe=l.pos-G;l.next();let Te=[],je=[],Ge=L>=o?L:-1,Be=0,Ut=W;for(;l.pos>Fe;)Ge>=0&&l.id==Ge&&l.size>=0?(l.end<=Ut-i&&(p(Te,je,D,Be,l.end,Ut,Ge,oe,ae),Be=Te.length,Ut=l.end),l.next()):$>2500?f(D,Fe,Te,je):u(D,Fe,Te,je,Ge,$+1);if(Ge>=0&&Be>0&&Be<Te.length&&p(Te,je,D,Be,D,Ut,Ge,oe,ae),Te.reverse(),je.reverse(),Ge>-1&&Be>0){let Lr=d(me,ae);Ee=cw(me,Te,je,0,Te.length,0,W-D,Lr,Lr)}else Ee=m(me,Te,je,W-D,oe-W,ae)}T.push(Ee),C.push(St)}function f(v,x,T,C){let M=[],$=0,L=-1;for(;l.pos>x;){let{id:D,start:W,end:G,size:oe}=l;if(oe>4)l.next();else{if(L>-1&&W<L)break;L<0&&(L=G-i),M.push(D,W,G),$++,l.next()}}if($){let D=new Uint16Array($*4),W=M[M.length-2];for(let G=M.length-3,oe=0;G>=0;G-=3)D[oe++]=M[G],D[oe++]=M[G+1]-W,D[oe++]=M[G+2]-W,D[oe++]=oe;T.push(new is(D,M[2]-W,r)),C.push(W-v)}}function d(v,x){return(T,C,M)=>{let $=0,L=T.length-1,D,W;if(L>=0&&(D=T[L])instanceof pe){if(!L&&D.type==v&&D.length==M)return D;(W=D.prop(Y.lookAhead))&&($=C[L]+D.length+W)}return m(v,T,C,M,$,x)}}function p(v,x,T,C,M,$,L,D,W){let G=[],oe=[];for(;v.length>C;)G.push(v.pop()),oe.push(x.pop()+T-M);v.push(m(r.types[L],G,oe,$-M,D-$,W)),x.push(M-T)}function m(v,x,T,C,M,$,L){if($){let D=[Y.contextHash,$];L=L?[D].concat(L):[D]}if(M>25){let D=[Y.lookAhead,M];L=L?[D].concat(L):[D]}return new pe(v,x,T,C,L)}function g(v,x){let T=l.fork(),C=0,M=0,$=0,L=T.end-i,D={size:0,start:0,skip:0};e:for(let W=T.pos-v;T.pos>W;){let G=T.size;if(T.id==x&&G>=0){D.size=C,D.start=M,D.skip=$,$+=4,C+=4,T.next();continue}let oe=T.pos-G;if(G<0||oe<W||T.start<L)break;let ae=T.id>=o?4:0,me=T.start;for(T.next();T.pos>oe;){if(T.size<0)if(T.size==-3)ae+=4;else break e;else T.id>=o&&(ae+=4);T.next()}M=me,C+=G,$+=ae}return(x<0||C==v)&&(D.size=C,D.start=M,D.skip=$),D.size>4?D:void 0}function O(v,x,T){let{id:C,start:M,end:$,size:L}=l;if(l.next(),L>=0&&C<o){let D=T;if(L>4){let W=l.pos-(L-4);for(;l.pos>W;)T=O(v,x,T)}x[--T]=D,x[--T]=$-v,x[--T]=M-v,x[--T]=C}else L==-3?c=C:L==-4&&(h=C);return T}let w=[],k=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,w,k,-1,0);let b=(e=n.length)!==null&&e!==void 0?e:w.length?k[0]+w[0].length:0;return new pe(a[n.topID],w.reverse(),k.reverse(),b)}function Sp(n,e){if(!n.isAnonymous||e instanceof is||e.type!=n)return 1;let t=R$.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof pe)){t=1;break}t+=Sp(n,r)}R$.set(e,t)}return t}function cw(n,e,t,r,i,s,o,l,a){let c=0;for(let p=r;p<i;p++)c+=Sp(n,e[p]);let h=Math.ceil(c*1.5/8),u=[],f=[];function d(p,m,g,O,w){for(let k=g;k<O;){let b=k,v=m[k],x=Sp(n,p[k]);for(k++;k<O;k++){let T=Sp(n,p[k]);if(x+T>=h)break;x+=T}if(k==b+1){if(x>h){let T=p[b];d(T.children,T.positions,0,T.children.length,m[b]+w);continue}u.push(p[b])}else{let T=m[k-1]+p[k-1].length-v;u.push(cw(n,p,m,b,k,v,T,null,a))}f.push(v+w-s)}}return d(e,t,r,i,0),(l||a)(u,f,o)}function Pp(n){return(e,t,r,i)=>new ow(e,n,t,r,i)}function D$(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}function Cq(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function N$(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1];r.push(n.slice(e,t,o)),i.push(o-s)}}function Tq(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,s=i.children.indexOf(r),o=i.children[s],l=o.buffer,a=[s];function c(h,u,f,d,p,m){let g=t[m],O=[],w=[];N$(o,h,g,O,w,d);let k=l[g+1],b=l[g+2];a.push(O.length);let v=m?c(g+4,l[g+3],o.set.types[l[g]],k,b-k,m-1):e.toTree();return O.push(v),w.push(k-d),N$(o,l[g+3],u,O,w,d),new pe(f,O,w,p)}i.children[s]=c(0,l.length,Ze.none,0,o.length,t.length-1);for(let h of a){let u=n.tree.children[h],f=n.tree.positions[h];n.yield(new tn(u,f+n.from,h,n._tree))}}function L$(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,l=n[i].from;for(;s<r.length;s++){let a=r[s];if(a.from>=l)break;a.to<=o||(t||(r=t=e.slice()),a.from<o?(t[s]=new en(a.from,o),a.to>l&&t.splice(s+1,0,new en(l,a.to))):a.to>l?t[s--]=new en(l,a.to):t.splice(s--,1))}}return r}function Pq(n,e,t,r){let i=0,s=0,o=!1,l=!1,a=-1e9,c=[];for(;;){let h=i==n.length?1e9:o?n[i].to:n[i].from,u=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let f=Math.max(a,t),d=Math.min(h,u,r);f<d&&c.push(new en(f,d))}if(a=Math.min(h,u),a==1e9)break;h==a&&(o?(o=!1,i++):o=!0),u==a&&(l?(l=!1,s++):l=!0)}return c}function I$(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),l=o+i.tree.length,a=Math.max(s.from,o),c=Math.min(s.to,l);if(i.overlay){let h=i.overlay.map(f=>new en(f.from+r,f.to+r)),u=Pq(e,h,a,c);for(let f=0,d=a;;f++){let p=f==u.length,m=p?c:u[f].from;if(m>d&&t.push(new mi(d,m,i.tree,-o,s.from>=d||s.openStart,s.to<=m||s.openEnd)),p)break;d=u[f].to}}else t.push(new mi(a,c,i.tree,-o,s.from>=o||s.openStart,s.to<=l||s.openEnd))}return t}var xq,en,Y,yo,kq,Ze,rs,kp,$$,be,pe,Jb,is,vp,tn,tw,bo,nw,Bl,R$,Vl,mi,ss,rw,Cp,iw,sw,ow,Tp,lw,gi=S(()=>{xq=0,en=class{constructor(e,t){this.from=e,this.to=t}},Y=class{constructor(e={}){this.id=xq++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ze.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};Y.closedBy=new Y({deserialize:n=>n.split(" ")});Y.openedBy=new Y({deserialize:n=>n.split(" ")});Y.group=new Y({deserialize:n=>n.split(" ")});Y.isolate=new Y({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Y.contextHash=new Y({perNode:!0});Y.lookAhead=new Y({perNode:!0});Y.mounted=new Y({perNode:!0});yo=class{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Y.mounted.id]}},kq=Object.create(null),Ze=class n{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):kq,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new n(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Y.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Y.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}};Ze.none=new Ze("",Object.create(null),0,8);rs=class n{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new Ze(r.name,i,r.id,r.flags):r)}return new n(t)}},kp=new WeakMap,$$=new WeakMap;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(be||(be={}));pe=class n{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=yo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Bl(this.topNode,e)}cursorAt(e,t=0,r=0){let i=kp.get(this)||this.topNode,s=new Bl(i);return s.moveTo(e,t),kp.set(this,s._tree),s}get topNode(){return new tn(this,0,0,null)}resolve(e,t=0){let r=eh(kp.get(this)||this.topNode,e,t,!1);return kp.set(this,r),r}resolveInner(e,t=0){let r=eh($$.get(this)||this.topNode,e,t,!0);return $$.set(this,r),r}resolveStack(e,t=0){return Sq(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,l=(o&be.IncludeAnonymous)>0;for(let a=this.cursor(o|be.IncludeAnonymous);;){let c=!1;if(a.from<=s&&a.to>=i&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:cw(Ze.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new n(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new n(Ze.none,t,r,i)))}static build(e){return vq(e)}};pe.empty=new pe(Ze.none,[],[],0);Jb=class n{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n(this.buffer,this.index)}},is=class n{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Ze.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(_$(s,i,o[a+1],o[a+2])&&(l=a,r>0));a=o[a+3]);return l}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=i[l++],s[a++]=i[l++]-r;let c=s[a++]=i[l++]-r;s[a++]=i[l++]-e,o=Math.max(o,c)}return new n(s,o,this.set)}};vp=class{cursor(e=0){return new Bl(this,e)}getChild(e,t=null,r=null){let i=E$(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return E$(this,e,t,r)}resolve(e,t=0){return eh(this,e,t,!1)}resolveInner(e,t=0){return eh(this,e,t,!0)}matchContext(e){return ew(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}},tn=class n extends vp{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let h=l[e],u=a[e]+o.from;if(_$(i,r,u,u+h.length)){if(h instanceof is){if(s&be.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,t,r-u,i);if(f>-1)return new bo(new tw(o,h,e,u),null,f)}else if(s&be.IncludeAnonymous||!h.type.isAnonymous||aw(h)){let f;if(!(s&be.IgnoreMounts)&&(f=yo.get(h))&&!f.overlay)return new n(f.tree,u,e,o);let d=new n(h,u,e,o);return s&be.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?h.children.length-1:0,t,r,i)}}}if(s&be.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&be.IgnoreOverlays)&&(i=yo.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new n(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};tw=class{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}},bo=class n extends vp{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new n(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&be.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new n(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new n(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new n(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new pe(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};nw=class{constructor(e,t){this.heads=e,this.node=t}get next(){return B$(this.heads)}};Bl=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof tn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof tn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&be.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&be.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&be.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let l=r._tree.children[s];if(this.mode&be.IncludeAnonymous||l instanceof is||!l.type.isAnonymous||aw(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new bo(this.buffer,t,this.stack[i]);return this.bufferNode=new bo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return ew(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return ew(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}};R$=new WeakMap;Vl=class{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof bo?this.setBuffer(e.context.buffer,e.index,t):e instanceof tn&&this.map.set(e.tree,t)}get(e){return e instanceof bo?this.getBuffer(e.context.buffer,e.index):e instanceof tn?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}},mi=class n{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new n(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let h=l<t.length?t[l]:null,u=h?h.fromA:1e9;if(u-a>=r)for(;o&&o.from<u;){let f=o;if(a>=f.from||u<=f.to||c){let d=Math.max(f.from,a)-c,p=Math.min(f.to,u)-c;f=d>=p?null:new n(d,p,f.tree,f.offset+c,l>0,!!h)}if(f&&i.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!h)break;a=h.toA,c=h.toA-h.toB}return i}},ss=class{startParse(e,t,r){return typeof e=="string"&&(e=new rw(e)),r=r?r.length?r.map(i=>new en(i.from,i.to)):[new en(0,0)]:[new en(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}},rw=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};Cp=class{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.from=s}};iw=class{constructor(e,t,r,i,s,o,l){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}},sw=new Y({perNode:!0}),ow=class{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new pe(r.type,r.children,r.positions,r.length,r.propValues.concat([[sw,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[Y.mounted.id]=new yo(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new lw(this.fragments),t=null,r=null,i=new Bl(new tn(this.baseTree,this.ranges[0].from,0,null),be.IncludeAnonymous|be.IgnoreMounts);e:for(let s,o;;){let l=!0,a;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)l=!1;else if(e.hasNode(i)){if(t){let c=t.mounts.find(h=>h.frag.from<=i.from&&h.frag.to>=i.to&&h.mount.overlay);if(c)for(let h of c.mount.overlay){let u=h.from+c.pos,f=h.to+c.pos;u>=i.from&&f<=i.to&&!t.ranges.some(d=>d.from<f&&d.to>u)&&t.ranges.push({from:u,to:f})}}l=!1}else if(r&&(o=Cq(r.ranges,i.from,i.to)))l=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||Tq(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new iw(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,t);else{let h=L$(this.ranges,s.overlay||(i.from<i.to?[new en(i.from,i.to)]:[]));h.length&&D$(h),(h.length||!s.overlay)&&this.inner.push(new Cp(s.parser,h.length?s.parser.startParse(this.input,I$(c,h),h):s.parser.startParse(""),s.overlay?s.overlay.map(u=>new en(u.from-i.from,u.to-i.from)):null,i.tree,h.length?h[0].from:i.from)),s.overlay?h.length&&(r={ranges:h,depth:0,prev:r}):l=!1}}else if(t&&(a=t.predicate(i))&&(a===!0&&(a=new en(i.from,i.to)),a.from<a.to)){let c=t.ranges.length-1;c>=0&&t.ranges[c].to==a.from?t.ranges[c]={from:t.ranges[c].from,to:a.to}:t.ranges.push(a)}if(l&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let c=L$(this.ranges,t.ranges);c.length&&(D$(c),this.inner.splice(t.index,0,new Cp(t.parser,t.parser.startParse(this.input,I$(t.mounts,c),c),t.ranges.map(h=>new en(h.from-t.start,h.to-t.start)),t.target,c[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}};Tp=class{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(be.IncludeAnonymous|be.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,be.IgnoreOverlays|be.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof pe)t=t.children[0];else break}return!1}},lw=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(sw))!==null&&t!==void 0?t:r.to,this.inner=new Tp(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(sw))!==null&&e!==void 0?e:t.to,this.inner=new Tp(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(Y.mounted);if(o&&o.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&i.push({frag:a,pos:s.from-a.offset,mount:o})}}}return i}}});function th(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[i++]=s:t=new e(s)}return t}function U$(n,e,t,r,i,s){let o=0,l=1<<r,{dialect:a}=t.p.parser;e:for(;(l&n[o])!=0;){let c=n[o+1];for(let d=o+3;d<c;d+=2)if((n[d+1]&l)>0){let p=n[d];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||Mq(p,e.token.value,i,s))){e.acceptToken(p);break}}let h=e.next,u=0,f=n[o+2];if(e.next<0&&f>u&&n[c+f*3-3]==65535){o=n[c+f*3-1];continue e}for(;u<f;){let d=u+f>>1,p=c+d+(d<<1),m=n[p],g=n[p+1]||65536;if(h<m)f=d;else if(h>=g)u=d+1;else{o=n[p+2],e.advance();continue e}}break}}function X$(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function Mq(n,e,t,r){let i=X$(t,r,e);return i<0||X$(t,r,n)<i}function z$(n,e,t){let r=n.cursor(be.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}function Z$(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}function Oi(n,e){return n[e]|n[e+1]<<16}function Qq(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function q$(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}var fw,Ap,dw,pw,Xl,V$,mw,ls,as,kt,dn,hw,gw,Ow,yw,bw,uw,zl,cs,Mp=S(()=>{gi();fw=class n{constructor(e,t,r,i,s,o,l,a,c,h=0,u){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new n(e,[],t,r,r,0,[],0,i?new Ap(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(i);if(l&&(this.score+=l),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let a=this.stack.length-(r-1)*3-(e&262144?6:0),c=a?this.stack[a-2]:this.p.ranges[0].from,h=this.reducePos-c;h>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=h):this.p.lastBigReductionSize<h&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=h));let u=a?this.stack[a-1]:0,f=this.bufferBase+this.buffer.length-u;if(i<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,c,d,f+4,!0)}if(e&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=s.getGoto(d,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,c)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==r)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>r;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new n(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new dw(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((l,a)=>a&1&&l==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let a=o&65535,c=this.stack.length-l*3;if(c>=0&&e.getGoto(this.stack[c],a,!1)>=0)return l<<19|65536|a}}else{let l=r(o,s+1);if(l!=null)return l}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Ap(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},Ap=class{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}},dw=class{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}},pw=class n{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new n(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new n(this.stack,this.pos,this.index)}};Xl=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},V$=new Xl,mw=class{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=V$,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=r;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=V$,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}},ls=class{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;U$(this.data,e,t,this.id,r.data,r.tokenPrecTable)}};ls.prototype.contextual=ls.prototype.fallback=ls.prototype.extend=!1;as=class{constructor(e,t,r){this.precTable=t,this.elseToken=r,this.data=typeof e=="string"?th(e):e}token(e,t){let r=e.pos,i=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(U$(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}};as.prototype.contextual=ls.prototype.fallback=ls.prototype.extend=!1;kt=class{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}};dn=typeof process!="undefined"&&process.env&&/\bparse\b/.test(process.env.LOG),hw=null;gw=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?z$(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?z$(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof pe){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(Y.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}},Ow=class{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Xl)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<s.length;c++){if((1<<c&o)==0)continue;let h=s[c],u=this.tokens[c];if(!(r&&!h.fallback)&&((h.contextual||u.start!=e.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,h,e),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let f=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!h.extend&&(r=u,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!r&&e.pos==this.stream.end&&(r=new Xl,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Xl,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),r);if(l>=0&&r.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let c=o.stateSlot(s,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Oi(l,c+2);else{i==0&&l[c+1]==2&&(i=this.putAction(Oi(l,c+2),t,r,i));break}l[c]==t&&(i=this.putAction(Oi(l,c+1),t,r,i))}return i}},yw=class{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new mw(t,i),this.tokens=new Ow(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[fw.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new gw(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)r.push(l);else{if(this.advanceStack(l,r,e))continue;{i||(i=[],s=[]),i.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!r.length){let o=i&&Qq(i);if(o)return dn&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw dn&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return dn&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((l,a)=>a.score-l.score);r.length>o;)r.pop();r.some(l=>l.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let l=r[o];for(let a=o+1;a<r.length;a++){let c=r[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)r.splice(a--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=dn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,h=c?e.curContext.hash:0;for(let u=this.fragments.nodeAt(i);u;){let f=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(f>-1&&u.length&&(!c||(u.prop(Y.contextHash)||0)==h))return e.useNode(u,f),dn&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof pe)||u.children.length==0||u.positions[0]>0)break;let d=u.children[0];if(d instanceof pe&&u.positions[0]==0)u=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),dn&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let h=a[c++],u=a[c++],f=a[c++],d=c==a.length||!r,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(h,u,m?m.start:p.pos,f),dn&&console.log(o+this.stackID(p)+` (via ${(h&65536)==0?"shift":`reduce of ${s.getName(h&65535)}`} for ${s.getName(u)} @ ${i}${p==e?"":", split"})`),d)return!0;p.pos>i?t.push(p):r.push(p)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Z$(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],c=t[(o<<1)+1],h=dn?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),dn&&console.log(h+this.stackID(l)+" (restarted)"),this.advanceFully(l,r))))continue;let u=l.split(),f=h;for(let d=0;u.forceReduce()&&d<10&&(dn&&console.log(f+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,r));d++)dn&&(f=this.stackID(u)+" -> ");for(let d of l.recoverByInsert(a))dn&&console.log(h+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,r);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),dn&&console.log(h+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),Z$(l,r)):(!i||i.score<l.score)&&(i=l)}return i}stackToTree(e){return e.close(),pe.build({buffer:pw.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(hw||(hw=new WeakMap)).get(e);return t||hw.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}};bw=class{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}},uw=n=>n,zl=class{constructor(e){this.start=e.start,this.shift=e.shift||uw,this.reduce=e.reduce||uw,this.reuse=e.reuse||uw,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}},cs=class n extends ss{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let r=Object.keys(e.topRules).map(l=>e.topRules[l][1]),i=[];for(let l=0;l<t.length;l++)i.push([]);function s(l,a,c){i[l].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=Y[a]);for(let c=1;c<l.length;){let h=l[c++];if(h>=0)s(h,a,l[c++]);else{let u=l[c+-h];for(let f=-h;f>0;f--)s(l[c++],a,u);c++}}}this.nodeSet=new rs(t.map((l,a)=>Ze.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:i[a],top:r.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=th(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(q$),this.states=th(e.states,Uint32Array),this.data=th(e.stateData),this.goto=th(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new ls(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new yw(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],l=o&1,a=i[s++];if(l&&r)return a;for(let c=s+(o>>1);s<c;s++)if(i[s]==e)return a;if(l)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Oi(r,s+2)];else{if(r[s+1]==2)return Oi(r,s+2);break}if(o==t||o==0)return Oi(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Oi(this.data,s+2);else break;i=t(Oi(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Oi(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(n.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(l=>l.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=q$(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[l]=1;return new bw(e,r,i)}static deserialize(e){return new n(e)}}});function Rq(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function Dq(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function sr(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,l=i;for(let u=0;;){if(l=="..."&&u>0&&u+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==i.length)break;let d=i[u++];if(u==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);l=i.slice(u)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+i);let h=new Zl(r,o,a>0?s.slice(0,a):null);e[c]=h.sort(e[c])}}return Y$.add(e)}function Sw(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let l of s)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function Nq(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function H$(n,e,t,r=0,i=n.length){let s=new xw(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}function Lq(n){let e=n.type.prop(Y$);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}var $q,pn,Eq,Rp,Y$,Zl,xw,N,Qp,hs,j$,W$,us,$p,ww,Nr,wo,Rr,Dr,kw,nh,Ep,y,ZK,fs=S(()=>{gi();$q=0,pn=class n{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=$q++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof n&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new n(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Rp(e);return r=>r.modified.indexOf(t)>-1?r:Rp.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}},Eq=0,Rp=class n{constructor(e){this.name=e,this.instances=[],this.id=Eq++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&Rq(t,l.modified));if(r)return r;let i=[],s=new pn(e.name,i,e,t);for(let l of t)l.instances.push(s);let o=Dq(t);for(let l of e.set)if(!l.modified.length)for(let a of o)i.push(n.get(l,a));return s}};Y$=new Y,Zl=class{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Zl.empty=new Zl([],2,null);xw=class{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:l,to:a}=e;if(l>=r||a<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,h=Lq(e)||Zl.empty,u=Nq(s,h.tags);if(u&&(c&&(c+=" "),c+=u,h.mode==1&&(i+=(i?" ":"")+u)),this.startSpan(Math.max(t,l),c),h.opaque)return;let f=e.tree&&e.tree.prop(Y.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),p=this.highlighters.filter(g=>!g.scope||g.scope(f.tree.type)),m=e.firstChild();for(let g=0,O=l;;g++){let w=g<f.overlay.length?f.overlay[g]:null,k=w?w.from+l:a,b=Math.max(t,O),v=Math.min(r,k);if(b<v&&m)for(;e.from<v&&(this.highlightRange(e,b,v,i,s),this.startSpan(Math.min(v,e.to),c),!(e.to>=k||!e.nextSibling())););if(!w||k>r)break;O=w.to+l,O>t&&(this.highlightRange(d.cursor(),Math.max(t,w.from+l),Math.min(r,O),"",p),this.startSpan(Math.min(r,O),c))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}};N=pn.define,Qp=N(),hs=N(),j$=N(hs),W$=N(hs),us=N(),$p=N(us),ww=N(us),Nr=N(),wo=N(Nr),Rr=N(),Dr=N(),kw=N(),nh=N(kw),Ep=N(),y={comment:Qp,lineComment:N(Qp),blockComment:N(Qp),docComment:N(Qp),name:hs,variableName:N(hs),typeName:j$,tagName:N(j$),propertyName:W$,attributeName:N(W$),className:N(hs),labelName:N(hs),namespace:N(hs),macroName:N(hs),literal:us,string:$p,docString:N($p),character:N($p),attributeValue:N($p),number:ww,integer:N(ww),float:N(ww),bool:N(us),regexp:N(us),escape:N(us),color:N(us),url:N(us),keyword:Rr,self:N(Rr),null:N(Rr),atom:N(Rr),unit:N(Rr),modifier:N(Rr),operatorKeyword:N(Rr),controlKeyword:N(Rr),definitionKeyword:N(Rr),moduleKeyword:N(Rr),operator:Dr,derefOperator:N(Dr),arithmeticOperator:N(Dr),logicOperator:N(Dr),bitwiseOperator:N(Dr),compareOperator:N(Dr),updateOperator:N(Dr),definitionOperator:N(Dr),typeOperator:N(Dr),controlOperator:N(Dr),punctuation:kw,separator:N(kw),bracket:nh,angleBracket:N(nh),squareBracket:N(nh),paren:N(nh),brace:N(nh),content:Nr,heading:wo,heading1:N(wo),heading2:N(wo),heading3:N(wo),heading4:N(wo),heading5:N(wo),heading6:N(wo),contentSeparator:N(Nr),list:N(Nr),quote:N(Nr),emphasis:N(Nr),strong:N(Nr),link:N(Nr),monospace:N(Nr),strikethrough:N(Nr),inserted:N(),deleted:N(),changed:N(),invalid:N(),meta:Ep,documentMeta:N(Ep),annotation:N(Ep),processingInstruction:N(Ep),definition:pn.defineModifier("definition"),constant:pn.defineModifier("constant"),function:pn.defineModifier("function"),standard:pn.defineModifier("standard"),local:pn.defineModifier("local"),special:pn.defineModifier("special")};for(let n in y){let e=y[n];e instanceof pn&&(e.name=n)}ZK=Sw([{tag:y.link,class:"tok-link"},{tag:y.heading,class:"tok-heading"},{tag:y.emphasis,class:"tok-emphasis"},{tag:y.strong,class:"tok-strong"},{tag:y.keyword,class:"tok-keyword"},{tag:y.atom,class:"tok-atom"},{tag:y.bool,class:"tok-bool"},{tag:y.url,class:"tok-url"},{tag:y.labelName,class:"tok-labelName"},{tag:y.inserted,class:"tok-inserted"},{tag:y.deleted,class:"tok-deleted"},{tag:y.literal,class:"tok-literal"},{tag:y.string,class:"tok-string"},{tag:y.number,class:"tok-number"},{tag:[y.regexp,y.escape,y.special(y.string)],class:"tok-string2"},{tag:y.variableName,class:"tok-variableName"},{tag:y.local(y.variableName),class:"tok-variableName tok-local"},{tag:y.definition(y.variableName),class:"tok-variableName tok-definition"},{tag:y.special(y.variableName),class:"tok-variableName2"},{tag:y.definition(y.propertyName),class:"tok-propertyName tok-definition"},{tag:y.typeName,class:"tok-typeName"},{tag:y.namespace,class:"tok-namespace"},{tag:y.className,class:"tok-className"},{tag:y.macroName,class:"tok-macroName"},{tag:y.propertyName,class:"tok-propertyName"},{tag:y.operator,class:"tok-operator"},{tag:y.comment,class:"tok-comment"},{tag:y.meta,class:"tok-meta"},{tag:y.invalid,class:"tok-invalid"},{tag:y.punctuation,class:"tok-punctuation"}])});function s4(n){return n==45||n==46||n==58||n>=65&&n<=90||n==95||n>=97&&n<=122||n>=161}function uE(n){return n==9||n==10||n==13||n==32}function Pw(n,e){let t=n.pos+e;if(tE==t&&eE==n)return J$;let r=n.peek(e);for(;uE(r);)r=n.peek(++e);let i="";for(;s4(r);)i+=String.fromCharCode(r),r=n.peek(++e);return eE=n,tE=t,J$=i?i.toLowerCase():r==o4||r==l4?void 0:null}function nE(n,e){this.name=n,this.parent=e}function d4(n){for(;n;n=n.parent)if(n.name=="svg"||n.name=="math")return!0;return!1}function Mw(n,e,t){let r=2+n.length;return new kt(i=>{for(let s=0,o=0,l=0;;l++){if(i.next<0){l&&i.acceptToken(e);break}if(s==0&&i.next==fE||s==1&&i.next==Aw||s>=2&&s<r&&i.next==n.charCodeAt(s-2))s++,o++;else if((s==2||s==r)&&uE(i.next))o++;else if(s==r&&i.next==Np){l>o?i.acceptToken(e,-o):i.acceptToken(t,-(o-2));break}else if((i.next==10||i.next==13)&&l){i.acceptToken(e,1);break}else s=o=0;i.advance()}})}function pE(n,e){let t=Object.create(null);for(let r of n.getChildren(cE)){let i=r.getChild(Hq),s=r.getChild(Tw)||r.getChild(hE);i&&(t[e.read(i.from,i.to)]=s?s.type.id==Tw?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return t}function rE(n,e){let t=n.getChild(Yq);return t?e.read(t.from,t.to):" "}function Cw(n,e,t){let r;for(let i of t)if(!i.attrs||i.attrs(r||(r=pE(n.node.parent.firstChild,e))))return{parser:i.parser};return null}function Qw(n=[],e=[]){let t=[],r=[],i=[],s=[];for(let l of n)(l.tag=="script"?t:l.tag=="style"?r:l.tag=="textarea"?i:s).push(l);let o=e.length?Object.create(null):null;for(let l of e)(o[l.name]||(o[l.name]=[])).push(l);return Pp((l,a)=>{let c=l.type.id;if(c==Fq)return Cw(l,a,t);if(c==Gq)return Cw(l,a,r);if(c==Kq)return Cw(l,a,i);if(c==aE&&s.length){let h=l.node,u=h.firstChild,f=u&&rE(u,a),d;if(f){for(let p of s)if(p.tag==f&&(!p.attrs||p.attrs(d||(d=pE(u,a))))){let m=h.lastChild,g=m.type.id==e4?m.from:h.to;if(g>u.to)return{parser:p.parser,overlay:[{from:u.to,to:g}]}}}}if(o&&c==cE){let h=l.node,u;if(u=h.firstChild){let f=o[a.read(u.from,u.to)];if(f)for(let d of f){if(d.tagName&&d.tagName!=rE(h.parent,a))continue;let p=h.lastChild;if(p.type.id==Tw){let m=p.from+1,g=p.lastChild,O=p.to-(g&&g.isError?0:1);if(O>m)return{parser:d.parser,overlay:[{from:m,to:O}]}}else if(p.type.id==hE)return{parser:d.parser,overlay:[{from:p.from,to:p.to}]}}}}return null})}var Iq,_q,Bq,Vq,Xq,zq,F$,Zq,Dp,iE,sE,oE,lE,qq,Uq,jq,vw,Wq,G$,aE,Yq,cE,Hq,Tw,hE,Fq,Gq,Kq,Jq,e4,t4,n4,r4,i4,K$,J$,eE,tE,fE,Np,Aw,o4,l4,a4,c4,h4,u4,f4,p4,m4,g4,O4,y4,dE,mE=S(()=>{Mp();fs();gi();Iq=54,_q=1,Bq=55,Vq=2,Xq=56,zq=3,F$=4,Zq=5,Dp=6,iE=7,sE=8,oE=9,lE=10,qq=11,Uq=12,jq=13,vw=57,Wq=14,G$=58,aE=20,Yq=22,cE=23,Hq=24,Tw=26,hE=27,Fq=28,Gq=31,Kq=34,Jq=36,e4=37,t4=0,n4=1,r4={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},i4={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},K$={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};J$=null,eE=null,tE=0;fE=60,Np=62,Aw=47,o4=63,l4=33,a4=45;c4=[Dp,lE,iE,sE,oE],h4=new zl({start:null,shift(n,e,t,r){return c4.indexOf(e)>-1?new nE(Pw(r,1)||"",n):n},reduce(n,e){return e==aE&&n?n.parent:n},reuse(n,e,t,r){let i=e.type.id;return i==Dp||i==Jq?new nE(Pw(r,1)||"",n):n},strict:!1}),u4=new kt((n,e)=>{if(n.next!=fE){n.next<0&&e.context&&n.acceptToken(vw);return}n.advance();let t=n.next==Aw;t&&n.advance();let r=Pw(n,0);if(r===void 0)return;if(!r)return n.acceptToken(t?Wq:Dp);let i=e.context?e.context.name:null;if(t){if(r==i)return n.acceptToken(qq);if(i&&i4[i])return n.acceptToken(vw,-2);if(e.dialectEnabled(t4))return n.acceptToken(Uq);for(let s=e.context;s;s=s.parent)if(s.name==r)return;n.acceptToken(jq)}else{if(r=="script")return n.acceptToken(iE);if(r=="style")return n.acceptToken(sE);if(r=="textarea")return n.acceptToken(oE);if(r4.hasOwnProperty(r))return n.acceptToken(lE);i&&K$[i]&&K$[i][r]?n.acceptToken(vw,-1):n.acceptToken(Dp)}},{contextual:!0}),f4=new kt(n=>{for(let e=0,t=0;;t++){if(n.next<0){t&&n.acceptToken(G$);break}if(n.next==a4)e++;else if(n.next==Np&&e>=2){t>=3&&n.acceptToken(G$,-2);break}else e=0;n.advance()}});p4=new kt((n,e)=>{if(n.next==Aw&&n.peek(1)==Np){let t=e.dialectEnabled(n4)||d4(e.context);n.acceptToken(t?Zq:F$,2)}else n.next==Np&&n.acceptToken(F$,1)});m4=Mw("script",Iq,_q),g4=Mw("style",Bq,Vq),O4=Mw("textarea",Xq,zq),y4=sr({"Text RawText":y.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":y.angleBracket,TagName:y.tagName,"MismatchedCloseTag/TagName":[y.tagName,y.invalid],AttributeName:y.attributeName,"AttributeValue UnquotedAttributeValue":y.attributeValue,Is:y.definitionOperator,"EntityReference CharacterReference":y.character,Comment:y.blockComment,ProcessingInst:y.processingInstruction,DoctypeDecl:y.documentMeta}),dE=cs.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:h4,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[y4],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[m4,g4,O4,p4,u4,f4,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511})});function rh(n){return n>=65&&n<=90||n>=97&&n<=122||n>=161}function xE(n){return n>=48&&n<=57}var b4,gE,w4,x4,OE,yE,bE,k4,S4,wE,v4,Lp,C4,T4,P4,A4,M4,Q4,$4,E4,R4,D4,N4,L4,I4,_4,kE,SE=S(()=>{Mp();fs();b4=107,gE=1,w4=108,x4=109,OE=2,yE=110,bE=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],k4=58,S4=40,wE=95,v4=91,Lp=45,C4=46,T4=35,P4=37,A4=38,M4=92,Q4=10,$4=42;E4=new kt((n,e)=>{for(let t=!1,r=0,i=0;;i++){let{next:s}=n;if(rh(s)||s==Lp||s==wE||t&&xE(s))!t&&(s!=Lp||i>0)&&(t=!0),r===i&&s==Lp&&r++,n.advance();else if(s==M4&&n.peek(1)!=Q4)n.advance(),n.next>-1&&n.advance(),t=!0;else{t&&n.acceptToken(r==2&&e.canShift(OE)?OE:e.canShift(yE)?yE:s==S4?w4:x4);break}}}),R4=new kt(n=>{if(bE.includes(n.peek(-1))){let{next:e}=n;(rh(e)||e==wE||e==T4||e==C4||e==$4||e==v4||e==k4&&rh(n.peek(1))||e==Lp||e==A4)&&n.acceptToken(b4)}}),D4=new kt(n=>{if(!bE.includes(n.peek(-1))){let{next:e}=n;if(e==P4&&(n.advance(),n.acceptToken(gE)),rh(e)){do n.advance();while(rh(n.next)||xE(n.next));n.acceptToken(gE)}}}),N4=sr({"AtKeyword import charset namespace keyframes media supports":y.definitionKeyword,"from to selector":y.keyword,NamespaceName:y.namespace,KeyframeName:y.labelName,KeyframeRangeName:y.operatorKeyword,TagName:y.tagName,ClassName:y.className,PseudoClassName:y.constant(y.className),IdName:y.labelName,"FeatureName PropertyName":y.propertyName,AttributeName:y.attributeName,NumberLiteral:y.number,KeywordQuery:y.keyword,UnaryQueryOp:y.operatorKeyword,"CallTag ValueName":y.atom,VariableName:y.variableName,Callee:y.operatorKeyword,Unit:y.unit,"UniversalSelector NestingSelector":y.definitionOperator,"MatchOp CompareOp":y.compareOperator,"ChildOp SiblingOp, LogicOp":y.logicOperator,BinOp:y.arithmeticOperator,Important:y.modifier,Comment:y.blockComment,ColorLiteral:y.color,"ParenthesizedContent StringLiteral":y.string,":":y.punctuation,"PseudoOp #":y.derefOperator,"; ,":y.separator,"( )":y.paren,"[ ]":y.squareBracket,"{ }":y.brace}),L4={__proto__:null,lang:34,"nth-child":34,"nth-last-child":34,"nth-of-type":34,"nth-last-of-type":34,dir:34,"host-context":34,url:62,"url-prefix":62,domain:62,regexp:62},I4={__proto__:null,"@import":120,"@media":154,"@charset":158,"@namespace":162,"@keyframes":168,"@supports":180},_4={__proto__:null,layer:124,not:144,only:144,selector:150},kE=cs.deserialize({version:14,states:">`QYQ[OOO#kQ[OOP#rOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#wQ[O'#CfO$hQXO'#CaO$rQ[O'#CiO$}Q[O'#DUO%SQ[O'#DXO%XQ[O'#D[O%XQ[O'#D_OOQP'#Ev'#EvO%yQdO'#DhO&hQ[O'#DzO%yQdO'#D|O&yQ[O'#EOO'UQ[O'#ERO'^Q[O'#EXO'lQ[O'#EZOOQS'#Eu'#EuOOQS'#E^'#E^QYQ[OOO'sQXO'#CdO(hQWO'#DdO(mQWO'#E{O(xQ[O'#E{QOQWOOP)SO#tO'#C_POOO)C@e)C@eOOQP'#Ch'#ChOOQP,59Q,59QO#wQ[O,59QO)_Q[O,59TO$}Q[O,59pO%SQ[O,59sO%XQ[O,59vO%XQ[O,59xO%XQ[O,59yO%XQ[O'#EcO)jQWO,58{O)rQ[O'#DcOOQS,58{,58{OOQP'#Cl'#ClOOQO'#DS'#DSOOQP,59T,59TO)yQWO,59TO*OQWO,59TOOQP'#DW'#DWOOQP,59p,59pOOQO'#DY'#DYO*TQ`O,59sO*nQXO,59vO+UQXO,59yOOQS'#Cq'#CqO%yQdO'#CrO+lQvO'#CtO-hQtO,5:SOOQO'#Cy'#CyO*OQWO'#CxO-rQWO'#CzO-wQ[O'#DPOOQS'#Ex'#ExOOQO'#Dn'#DnO.eQdO'#DwO.uQWO'#E|O'^Q[O'#DuO/TQWO'#DxOOQO'#E}'#E}O)mQWO,5:fO/YQpO,5:hOOQS'#EQ'#EQO/bQWO,5:jO/gQ[O,5:jOOQO'#ET'#ETO/oQWO,5:mO/tQWO,5:sO/|QWO,5:uOOQS-E8[-E8[O0UQdO,5:OO0fQ[O'#EeO0sQWO,5;gO0sQWO,5;gPOOO'#E]'#E]P1OO#tO,58yPOOO,58y,58yOOQP1G.l1G.lOOQP1G.o1G.oO)yQWO1G.oO*OQWO1G.oOOQP1G/[1G/[O1ZQ`O1G/_O1cQXO1G/bO1yQXO1G/dO2aQXO1G/eO2wQXO,5:}OOQO-E8a-E8aOOQS1G.g1G.gO3RQWO,59}O3WQ[O'#DTO3_QdO'#CpOOQP1G/_1G/_O%yQdO1G/_O3fQpO,59^OOQS,59`,59`O%yQdO,59bO3nQ[O'#DkO4PQWO1G/nO-VQ[O1G/nOOQS,59d,59dO4UQ!bO,59fOOQS'#DQ'#DQOOQS'#E`'#E`O4aQ[O,59kOOQS,59k,59kO4iQpO'#DnO4wQpO,5:ZO5PQWO,5:cOOQO'#FO'#FOO4zQpO,5:_O'^Q[O,5:]O5XQ[O'#EgO5pQWO,5;hO5{QWO,5:aO%XQ[O,5:dOOQS1G0Q1G0QOOQS1G0S1G0SOOQS1G0U1G0UO6^QWO1G0UO6cQdO'#EUOOQS1G0X1G0XOOQS1G0_1G0_OOQS1G0a1G0aO6nQtO1G/jOOQO1G/j1G/jOOQO,5;P,5;PO7UQ[O,5;POOQO-E8c-E8cO7cQWO1G1RPOOO-E8Z-E8ZPOOO1G.e1G.eOOQP7+$Z7+$ZOOQP7+$y7+$yO%yQdO7+$yOOQS1G/i1G/iO7nQXO'#EzO7xQWO,59oO7}QtO'#E_O8uQdO'#EwO9PQWO,59[O9UQpO7+$yOOQS1G.x1G.xOOQS1G.|1G.|O9^Q[O,5:VOOQS7+%Y7+%YO9cQWO7+%YOOQS1G/Q1G/QO9hQWO1G/QOOQS-E8^-E8^OOQS1G/V1G/VO%yQdO1G/uO9mQdO1G/yOOQO1G/}1G/}OOQO1G/w1G/wO9tQWO,5;ROOQO-E8e-E8eO:SQXO1G0OOOQS7+%p7+%pO:ZQYO'#CtOOQO'#EW'#EWO:iQ`O'#EVOOQO'#EV'#EVO:tQWO'#EhO:|QdO,5:pOOQS,5:p,5:pO;XQtO'#EdO%yQdO'#EdO<YQdO7+%UOOQO7+%U7+%UOOQO1G0k1G0kO<mQpO<<HeO<uQ[O'#EbO=PQWO,5;fOOQP1G/Z1G/ZOOQS-E8]-E8]O=XQdO'#EaO=cQWO,5;cOOQT1G.v1G.vOOQP<<He<<HeOOQO'#Dm'#DmO=kQWO1G/qOOQS<<Ht<<HtOOQS7+$l7+$lO=sQdO7+%aOOQO'#Dp'#DpO=zQpO7+%eOOQO7+%j7+%jOOQO,5:q,5:qO6fQdO'#EiO:tQWO,5;SOOQS,5;S,5;SOOQS-E8f-E8fOOQS1G0[1G0[O>SQtO,5;OOOQS-E8b-E8bOOQO<<Hp<<HpOOQPAN>PAN>PO?TQXO,5:|OOQO-E8`-E8`O?_QdO,5:{OOQO-E8_-E8_O9^Q[O'#EfO?iQWO7+%]OOQS7+%]7+%]OOQO<<H{<<H{OOQO<<IP<<IPO?qQdO<<IPOOQO,5;T,5;TOOQO-E8g-E8gOOQS1G0n1G0nOOQO,5;Q,5;QOOQO-E8d-E8dOOQS<<Hw<<HwO@YQWOAN>kOOQOG24VG24V",stateData:"@g~O#dOS#eQQ~OU[OX[OZTO^VO_VOrXOyWO!PYO!SZO!]cO!^]O!o^O!q_O!s`O!vaO!|bO#aRO~OQhOU[OX[OZTO^VO_VOrXOyWO!PYO!SZO!]cO!^]O!o^O!q_O!s`O!vaO!|bO#agO~O#^#oP~P!aO#elO~O#anO~OZpO^qO_qOrsOyrO!PtO!SvO#_uO~OuwO!UyO~P#|Oa!PO#`|O#a{O~O#a!QO~O#a!SO~OU[OX[OZTO^VO_VOrXOyWO!PYO!SZO#aRO~OQ!`Oc!XOg!`Oi!`Oo!^Or!_O#`![O#a!WO#m!YO~Oc!bO!j!dO!m!eO#b!aO!U#pP~Oi!jOo!^O#a!iO~Oi!lO#a!lO~Oc!bO!j!dO!m!eO#b!aO~O!Z#pP~P&hOZWX^WX^!XX_WXrWXuWXyWX!PWX!SWX!UWX#_WX~O^!qO~O!Z!rO#^#oX!T#oX~O#^#oX!T#oX~P!aO#f!uO#g!uO#h!wO~Oa!{O#`|O#a{O~OuwO!UyO~O!T#oP~P!aOc#VO~Oc#WO~Oq#XO}#YO~OZpO^qO_qOrsOyrO~Ou!Oa!P!Oa!S!Oa!U!Oa#_!Oab!Oa~P*]Ou!Ra!P!Ra!S!Ra!U!Ra#_!Rab!Ra~P*]OP#[OchXkhX!ZhX!`hX!jhX!mhX#bhXbhX!hhXQhXghXihXohXrhXuhX!YhX#^hX#`hX#ahX#mhXqhX!ThX~Oc!bO!j!dO!m!eO#b!aO!Z#pP~Ok#]O!`#^O~P-VOc#bO~Oq#fO#a#cO~OQ#jOg#jOi#jOo!^O#`![O#m!YO~Oc!bO!j!dO!m!eO#b#gO~P.POu#mO!f#lO!U#pX!Z#pX~Oc#pO~Ok#]O!Z#rO~O!Z#sO~Oi#tOo!^O~O!U#uO~O!UyO!f#lO~O!UyO!Z#xO~O!Y#zO!Z!Wa#^!Wa!T!Wa~P%yO!Z#XX#^#XX!T#XX~P!aO!Z!rO#^#oa!T#oa~O#f!uO#g!uO#h$QO~Oq$SO}$TO~Ou!Oi!P!Oi!S!Oi!U!Oi#_!Oib!Oi~P*]Ou!Qi!P!Qi!S!Qi!U!Qi#_!Qib!Qi~P*]Ou!Ri!P!Ri!S!Ri!U!Ri#_!Rib!Ri~P*]Ou#Va!U#Va~P#|O!T$UO~Ob#nP~P%XOb#kP~P%yOb$]Ok#]O~Oc$_O!Z!_X!j!_X!m!_X#b!_X~O!Z$`O~Ob$bOi$cOp$cO~Oq$eO#a#cO~O^!dXb!bX!f!bX!h!dX~O^$fO!h$gO~Ob$hO!f#lO~Oc!bO!j!dO!m!eO#b!aOu#ZX!U#ZX!Z#ZX~Ou#mO!U#pa!Z#pa~O!f#lOu!ia!U!ia!Z!iab!ia~O!Z$mO~O!T$tO#a$oO#m$nO~Ok#]Ou$vO!Y$xO!Z!Wi#^!Wi!T!Wi~P%yO!Z#Xa#^#Xa!T#Xa~P!aO!Z!rO#^#oi!T#oi~Ou${Ob#nX~P#|Ob$}O~Ok#]OQ#RXb#RXc#RXg#RXi#RXo#RXr#RXu#RX#`#RX#a#RX#m#RX~Ou%POb#kX~P%yOb%RO~Ok#]Oq%SO~O#a%TO~O!Z%VO~Ob%WO~O#b%YO~P.PO!f#lOu#Za!U#Za!Z#Za~Ob%[O~P#|OP#[OuhX!UhXbhX~O#m$nOu!yX!U!yX~Ou%^O!UyO~O!T%bO#a$oO#m$nO~Ok#]OQ#WXc#WXg#WXi#WXo#WXr#WXu#WX!Y#WX!Z#WX#^#WX#`#WX#a#WX#m#WX!T#WX~Ou$vO!Y%eO!Z!Wq#^!Wq!T!Wq~P%yOk#]Oq%fO~Ob#UXu#UX~P%XOu${Ob#na~Ob#TXu#TX~P%yOu%POb#ka~OZ%kOb%mO~Ob%nO~P%yOb%oO!h%pO~Ok#]OQ#Wac#Wag#Wai#Wao#War#Wau#Wa!Y#Wa!Z#Wa#^#Wa#`#Wa#a#Wa#m#Wa!T#Wa~Ob#Uau#Ua~P#|Ob#Tau#Ta~P%yOZ%kOb%vO~OQ#jOg#jOi#jOo!^O#`![O#b%YO#m$nO~Ob%xO~O#dp#e#mk!S#m~",goto:"/l#sPPP#tP#wP$Q$dP$QP$v$QPP$|PPP%S%]%]P%oP%]P&`&w'^PPPP%]'{P(P(V$QP(]$Q(cP$QP$Q$QPPP(i)O)]PP#wPP)dP)g)m)m)x)mP)mP)mP)m)mP#wP#wP#wP*R#wP*U*X*[*c#wP#wP*h*n*}+]+c+i+o+u+{,V,],c,iPPPPPPPPPPP,o,x-n-qP.g.j.p.|/cRmQ_dOPfjy!r#|q[OPYZfjtuvwy!r#V#p#|${qSOPYZfjtuvwy!r#V#p#|${QoTR!xpQ}VR!yqQ!y!PQ#a!]R$R!{q!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%ip!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%iU#j!b$g%pU$q#u$s%^R%]$pp!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%iV#j!b$g%pw!]]_!X!b!q#W#Y#]#y$T$Y$f$g$v$w%P%X%i%pp!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%iQ!j`U#j!b$g%pR#t!kT#d!_#eQ!OVR!zqQ!y!OR$R!zQ!RWR!|rQ!TXR!}sQzUQ#TxQ#q!gQ#w!nQ#x!oQ%`$rR%s%_SiPyQ!tjQ#{!rR$y#|ZhPjy!r#|R#`!ZQ%U$_R%t%kc!f^bc!Z!b!d#`#l#mQ#h!bQ%Z$gR%w%pR!k`R!maR#v!mS$r#u$sR%q%^V$p#u$s%^Q!vlR$P!vQfOSjPyU!pfj#|R#|!rQ$Y#WU%O$Y%X%iQ%X$fR%i%PQ#e!_R$d#eQ%Q$YR%j%QQ$|$VR%h$|QxUR#SxQ$w#yR%d$wQ!siS#}!s$OR$O!tQ%l%UR%u%lQ#n!cR$k#nQ$s#uR%a$sQ%_$rR%r%__eOPfjy!r#|^UOPfjy!r#|Q!UYQ!VZQ#OtQ#PuQ#QvQ#RwQ$V#VQ$l#pR%g${R$Z#WQ!Z]Q!h_Q#Z!XQ#y!q[$X#W$Y$f%P%X%iQ$[#YQ$^#]S$u#y$wQ$z$TR%c$vR$W#VQkPR#UyQ!g^Q!ocQ#_!ZR$a#`W!c^c!Z#`Q!nbQ#i!bQ#o!dQ$i#lR$j#mQ#k!bQ%Z$gR%w%p",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import Layer layer LayerName KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:126,nodeProps:[["isolate",-2,3,25,""],["openedBy",18,"(",33,"[",51,"{"],["closedBy",19,")",34,"]",52,"}"]],propSources:[N4],skippedNodes:[0,3,93],repeatNodeCount:13,tokenData:"LU~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_Cj!_!`Df!`!aDy!a!b$}!b!cEz!c!}$}!}#OHX#O#P$}#P#QHj#Q#R6d#R#T$}#T#UH{#U#c$}#c#dJ^#d#o$}#o#pJs#p#q6d#q#rKU#r#sKg#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`LO<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSp`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#d~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#d~p`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUp`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Up`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUp`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Up`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUp`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Up`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUp`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Up`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!Y[p`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOi~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYyQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYp`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYp`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYg[p`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYg[p`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYp`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYg[p`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYp`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSg[p`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS}Sp`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSc^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOb~n9{UUQkWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWkW!SQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUp`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYp`#m[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYp`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUp`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUp`#m[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[p`#m[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSu^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWkWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VUZQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTkWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSp`#e~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#m[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^jBbU^YOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S_Qp`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Z^Oy%^z;'S%^;'S;=`%o<%lO%^hCoU!hWOy%^z!_%^!_!`DR!`;'S%^;'S;=`%o<%lO%^hDYS!hWp`Oy%^z;'S%^;'S;=`%o<%lO%^lDmS!hW}SOy%^z;'S%^;'S;=`%o<%lO%^jEQV!PQ!hWOy%^z!_%^!_!`DR!`!aEg!a;'S%^;'S;=`%o<%lO%^bEnS!PQp`Oy%^z;'S%^;'S;=`%o<%lO%^bE}YOy%^z}%^}!OFm!O!c%^!c!}G[!}#T%^#T#oG[#o;'S%^;'S;=`%o<%lO%^bFrWp`Oy%^z!c%^!c!}G[!}#T%^#T#oG[#o;'S%^;'S;=`%o<%lO%^bGc[!]Qp`Oy%^z}%^}!OG[!O!Q%^!Q![G[![!c%^!c!}G[!}#T%^#T#oG[#o;'S%^;'S;=`%o<%lO%^nH^Sr^Oy%^z;'S%^;'S;=`%o<%lO%^nHoSq^Oy%^z;'S%^;'S;=`%o<%lO%^jIOUOy%^z#b%^#b#cIb#c;'S%^;'S;=`%o<%lO%^jIgUp`Oy%^z#W%^#W#XIy#X;'S%^;'S;=`%o<%lO%^jJQS!fYp`Oy%^z;'S%^;'S;=`%o<%lO%^jJaUOy%^z#f%^#f#gIy#g;'S%^;'S;=`%o<%lO%^fJxS!UUOy%^z;'S%^;'S;=`%o<%lO%^nKZS!T^Oy%^z;'S%^;'S;=`%o<%lO%^fKlU!SQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`LRP;=`<%l$}",tokenizers:[R4,D4,E4,1,2,3,4,new as("m~RRYZ[z{a~~g~aO#g~~dP!P!Qg~lO#h~~",28,114)],topRules:{StyleSheet:[0,4],Styles:[1,92]},specialized:[{term:108,get:n=>L4[n]||-1},{term:59,get:n=>I4[n]||-1},{term:110,get:n=>_4[n]||-1}],tokenPrec:1441})});function ah(n){return j.define({combine:n?e=>e.concat(n):void 0})}function vE(n,e,t){let r=n.facet(ql),i=qe(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,be.ExcludeBuffers))s.type.isTop&&(i=s);return i}function qe(n){let e=n.field(zt.state,!1);return e?e.tree:pe.empty}function CE(n,e,t){return mi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}function V4(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+c}}l=a.to}}function QE({closing:n,align:e=!0,units:t=1}){return r=>X4(r,e,t,n)}function X4(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=r&&s.slice(o,o+r.length)==r||i==n.pos+o,a=e?V4(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}function Ul({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}function Bp(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function Rw(n){let e=n.facet(Lw);return e.length?e:n.facet(RE)}function ch(n,e){let t=[z4],r;return n instanceof yi&&(n.module&&t.push(B.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(RE.of(n)):r?t.push(Lw.computeN([B.darkTheme],i=>i.facet(B.darkTheme)==(r=="dark")?[n]:[])):t.push(Lw.of(n)),t}function Dw(n,e){PE.indexOf(n)>-1||(PE.push(n),console.warn(e))}function U4(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let h=n[c]||y[c];h?typeof h=="function"?a.length?a=a.map(h):Dw(c,`Modifier ${c} used at start of tag`):a.length?Dw(c,`Tag ${c} used as modifier`):a=Array.isArray(h)?h:[h]:Dw(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(l=>l.id),s=AE[i];if(s)return s.id;let o=AE[i]=Ze.define({id:TE.length,name:r,props:[sr({[r]:t})]});return TE.push(o),o.id}var $w,ds,Ip,zt,ps,Nw,ih,sh,oh,ME,Ew,B4,ql,or,lh,_p,ms,$E,EE,bi,yi,Lw,RE,Iw,z4,sJ,DE,Z4,TE,PE,AE,q4,oJ,gs=S(()=>{gi();vr();Er();fs();ob();ds=new Y;Ip=new Y,zt=class{constructor(e,t,r=[],i=""){this.data=e,this.name=i,xe.prototype.hasOwnProperty("tree")||Object.defineProperty(xe.prototype,"tree",{get(){return qe(this)}}),this.parser=t,this.extension=[ql.of(this),xe.languageData.of((s,o,l)=>{let a=vE(s,o,l),c=a.type.prop(ds);if(!c)return[];let h=s.facet(c),u=a.type.prop(Ip);if(u){let f=a.resolve(o-a.from,l);for(let d of u)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(h)}}return h})].concat(r)}isActiveAt(e,t,r=-1){return vE(e,t,r).type.prop(ds)==this.data}findRegions(e){let t=e.facet(ql);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(ds)==this.data){r.push({from:o,to:o+s.length});return}let l=s.prop(Y.mounted);if(l){if(l.tree.prop(ds)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+o,to:a.to+o});else r.push({from:o,to:o+s.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+o),r.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof pe&&i(c,s.positions[a]+o)}};return i(qe(e),0),r}get allowsNesting(){return!0}};zt.setState=De.define();ps=class n extends zt{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=ah(e.languageData);return new n(t,e.parser.configure({props:[ds.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new n(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};Nw=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}},ih=null,sh=class n{constructor(e,t,r=[],i,s,o,l,a){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new n(e,t,[],pe.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Nw(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=pe.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(mi.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(mi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ih;ih=this;try{return e()}finally{ih=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=CE(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,h,u,f)=>a.push({fromA:c,toA:h,fromB:u,toB:f})),r=mi.applyChanges(r,a),i=pe.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);h<u&&l.push({from:h,to:u})}}}return new n(this.parser,t,r,i,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=CE(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ss{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let a=ih;if(a){for(let c of i)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new pe(Ze.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ih}};oh=class n{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new n(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=sh.create(e.facet(ql).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new n(r)}};zt.state=tr.define({create:oh.init,update(n,e){for(let t of e.effects)if(t.is(zt.setState))return t.value;return e.startState.facet(ql)!=e.state.facet(ql)?oh.init(e.state):n.apply(e)}});ME=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(ME=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});Ew=typeof navigator!="undefined"&&(!(($w=navigator.scheduling)===null||$w===void 0)&&$w.isInputPending)?()=>navigator.scheduling.isInputPending():null,B4=pi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(zt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(zt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=ME(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(zt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ew?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>Ew&&Ew()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:zt.setState.of(new oh(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ln(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ql=j.define({combine(n){return n.length?n[0]:null},enables:n=>[zt.state,B4,B.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),or=class{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}},lh=class n{constructor(e,t,r,i,s,o=void 0){this.name=e,this.alias=t,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:r}=e;if(!t){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(r)}return new n(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,t,r)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let r=/\.([^.]+)$/.exec(t);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,t,r=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(s=>s==t))return i;if(r)for(let i of e)for(let s of i.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return i}return null}},_p=j.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}}),ms=new Y;$E=n=>n.baseIndent;EE=j.define(),bi=new Y;yi=class n{constructor(e,t){this.specs=e;let r;function i(l){let a=Dn.newName();return(r||(r=Object.create(null)))["."+a]=l,a}let s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof zt?l=>l.prop(ds)==o.data:o?l=>l==o:void 0,this.style=Sw(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new Dn(r):null,this.themeType=t.themeType}static define(e,t){return new n(e,t||{})}},Lw=j.define(),RE=j.define({combine(n){return n.length?[n[0]]:null}});Iw=class{constructor(e){this.markCache=Object.create(null),this.tree=qe(e.state),this.decorations=this.buildDeco(e,Rw(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=qe(e.state),r=Rw(e.state),i=r!=Rw(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return $e.none;let r=new fo;for(let{from:i,to:s}of e.visibleRanges)H$(this.tree,t,(o,l,a)=>{r.add(o,l,this.markCache[a]||(this.markCache[a]=$e.mark({class:a})))},i,s);return r.finish()}},z4=fi.high(pi.fromClass(Iw,{decorations:n=>n.decorations})),sJ=yi.define([{tag:y.meta,color:"#404740"},{tag:y.link,textDecoration:"underline"},{tag:y.heading,textDecoration:"underline",fontWeight:"bold"},{tag:y.emphasis,fontStyle:"italic"},{tag:y.strong,fontWeight:"bold"},{tag:y.strikethrough,textDecoration:"line-through"},{tag:y.keyword,color:"#708"},{tag:[y.atom,y.bool,y.url,y.contentSeparator,y.labelName],color:"#219"},{tag:[y.literal,y.inserted],color:"#164"},{tag:[y.string,y.deleted],color:"#a11"},{tag:[y.regexp,y.escape,y.special(y.string)],color:"#e40"},{tag:y.definition(y.variableName),color:"#00f"},{tag:y.local(y.variableName),color:"#30a"},{tag:[y.typeName,y.namespace],color:"#085"},{tag:y.className,color:"#167"},{tag:[y.special(y.variableName),y.macroName],color:"#256"},{tag:y.definition(y.propertyName),color:"#00c"},{tag:y.comment,color:"#940"},{tag:y.invalid,color:"#f00"}]),DE=new Y,Z4=Object.create(null),TE=[Ze.none],PE=[],AE=Object.create(null),q4=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])q4[n]=U4(Z4,e);oJ={rtl:$e.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:nt.RTL}),ltr:$e.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:nt.LTR}),auto:$e.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})}});function Bw(){if(!_w&&typeof document=="object"&&document.body){let{style:n}=document.body,e=[],t=new Set;for(let r in n)r!="cssText"&&r!="cssFloat"&&typeof n[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),t.has(r)||(e.push(r),t.add(r)));_w=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return _w||[]}function H4(n,e){var t;if((n.name=="("||n.type.isError)&&(n=n.parent||n),n.name!="ArgList")return!1;let r=(t=n.parent)===null||t===void 0?void 0:t.firstChild;return(r==null?void 0:r.name)!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}function G4(n){for(let e=n;;){if(e.type.isTop)return e;if(!(e=e.parent))return n}}function _E(n,e,t){if(e.to-e.from>4096){let r=IE.get(e);if(r)return r;let i=[],s=new Set,o=e.cursor(be.IncludeAnonymous);if(o.firstChild())do for(let l of _E(n,o.node,t))s.has(l.label)||(s.add(l.label),i.push(l));while(o.nextSibling());return IE.set(e,i),i}else{let r=[],i=new Set;return e.cursor().iterate(s=>{var o;if(t(s)&&s.matchContext(F4)&&((o=s.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let l=n.sliceString(s.from,s.to);i.has(l)||(i.add(l),r.push({label:l,type:"variable"}))}}),r}}function BE(){return new or(hh,hh.data.of({autocomplete:J4}))}var _w,NE,LE,j4,W4,wi,Y4,IE,F4,K4,J4,hh,VE=S(()=>{SE();gs();gi();_w=null;NE=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(n=>({type:"class",label:n})),LE=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(n=>({type:"keyword",label:n})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(n=>({type:"constant",label:n}))),j4=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(n=>({type:"type",label:n})),W4=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(n=>({type:"keyword",label:n})),wi=/^(\w[\w-]*|-\w[\w-]*|)$/,Y4=/^-(-[\w-]*)?$/;IE=new Vl,F4=["Declaration"];K4=n=>e=>{let{state:t,pos:r}=e,i=qe(t).resolveInner(r,-1),s=i.type.isError&&i.from==i.to-1&&t.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(s||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:Bw(),validFor:wi};if(i.name=="ValueName")return{from:i.from,options:LE,validFor:wi};if(i.name=="PseudoClassName")return{from:i.from,options:NE,validFor:wi};if(n(i)||(e.explicit||s)&&H4(i,t.doc))return{from:n(i)||s?i.from:r,options:_E(t.doc,G4(i),n),validFor:Y4};if(i.name=="TagName"){for(let{parent:a}=i;a;a=a.parent)if(a.name=="Block")return{from:i.from,options:Bw(),validFor:wi};return{from:i.from,options:j4,validFor:wi}}if(i.name=="AtKeyword")return{from:i.from,options:W4,validFor:wi};if(!e.explicit)return null;let o=i.resolve(r),l=o.childBefore(r);return l&&l.name==":"&&o.name=="PseudoClassSelector"?{from:r,options:NE,validFor:wi}:l&&l.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:r,options:LE,validFor:wi}:o.name=="Block"||o.name=="Styles"?{from:r,options:Bw(),validFor:wi}:null},J4=K4(n=>n.name=="VariableName"),hh=ps.define({name:"css",parser:kE.configure({props:[ms.add({Declaration:Ul()}),bi.add({"Block KeyframeList":Bp})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}})});function Vw(n,e){return n>=65&&n<=90||n>=97&&n<=122||n==95||n>=192||!e&&n>=48&&n<=57}var eU,tU,XE,nU,rU,iU,sU,oU,lU,aU,cU,hU,Xw,zE,uU,zw,fU,dU,pU,mU,gU,OU,yU,bU,wU,xU,kU,SU,vU,CU,TU,PU,AU,MU,ZE,qE=S(()=>{Mp();fs();eU=315,tU=316,XE=1,nU=2,rU=3,iU=4,sU=317,oU=319,lU=320,aU=5,cU=6,hU=0,Xw=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],zE=125,uU=59,zw=47,fU=42,dU=43,pU=45,mU=60,gU=44,OU=63,yU=46,bU=91,wU=new zl({start:!1,shift(n,e){return e==aU||e==cU||e==oU?n:e==lU},strict:!1}),xU=new kt((n,e)=>{let{next:t}=n;(t==zE||t==-1||e.context)&&n.acceptToken(sU)},{contextual:!0,fallback:!0}),kU=new kt((n,e)=>{let{next:t}=n,r;Xw.indexOf(t)>-1||t==zw&&((r=n.peek(1))==zw||r==fU)||t!=zE&&t!=uU&&t!=-1&&!e.context&&n.acceptToken(eU)},{contextual:!0}),SU=new kt((n,e)=>{n.next==bU&&!e.context&&n.acceptToken(tU)},{contextual:!0}),vU=new kt((n,e)=>{let{next:t}=n;if(t==dU||t==pU){if(n.advance(),t==n.next){n.advance();let r=!e.context&&e.canShift(XE);n.acceptToken(r?XE:nU)}}else t==OU&&n.peek(1)==yU&&(n.advance(),n.advance(),(n.next<48||n.next>57)&&n.acceptToken(rU))},{contextual:!0});CU=new kt((n,e)=>{if(n.next!=mU||!e.dialectEnabled(hU)||(n.advance(),n.next==zw))return;let t=0;for(;Xw.indexOf(n.next)>-1;)n.advance(),t++;if(Vw(n.next,!0)){for(n.advance(),t++;Vw(n.next,!1);)n.advance(),t++;for(;Xw.indexOf(n.next)>-1;)n.advance(),t++;if(n.next==gU)return;for(let r=0;;r++){if(r==7){if(!Vw(n.next,!0))return;break}if(n.next!="extends".charCodeAt(r))break;n.advance(),t++}}n.acceptToken(iU,-t)}),TU=sr({"get set async static":y.modifier,"for while do if else switch try catch finally return throw break continue default case":y.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":y.operatorKeyword,"let var const using function class extends":y.definitionKeyword,"import export from":y.moduleKeyword,"with debugger new":y.keyword,TemplateString:y.special(y.string),super:y.atom,BooleanLiteral:y.bool,this:y.self,null:y.null,Star:y.modifier,VariableName:y.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":y.function(y.variableName),VariableDefinition:y.definition(y.variableName),Label:y.labelName,PropertyName:y.propertyName,PrivatePropertyName:y.special(y.propertyName),"CallExpression/MemberExpression/PropertyName":y.function(y.propertyName),"FunctionDeclaration/VariableDefinition":y.function(y.definition(y.variableName)),"ClassDeclaration/VariableDefinition":y.definition(y.className),"NewExpression/VariableName":y.className,PropertyDefinition:y.definition(y.propertyName),PrivatePropertyDefinition:y.definition(y.special(y.propertyName)),UpdateOp:y.updateOperator,"LineComment Hashbang":y.lineComment,BlockComment:y.blockComment,Number:y.number,String:y.string,Escape:y.escape,ArithOp:y.arithmeticOperator,LogicOp:y.logicOperator,BitOp:y.bitwiseOperator,CompareOp:y.compareOperator,RegExp:y.regexp,Equals:y.definitionOperator,Arrow:y.function(y.punctuation),": Spread":y.punctuation,"( )":y.paren,"[ ]":y.squareBracket,"{ }":y.brace,"InterpolationStart InterpolationEnd":y.special(y.brace),".":y.derefOperator,", ;":y.separator,"@":y.meta,TypeName:y.typeName,TypeDefinition:y.definition(y.typeName),"type enum interface implements namespace module declare":y.definitionKeyword,"abstract global Privacy readonly override":y.modifier,"is keyof unique infer asserts":y.operatorKeyword,JSXAttributeValue:y.attributeValue,JSXText:y.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":y.angleBracket,"JSXIdentifier JSXNameSpacedName":y.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":y.attributeName,"JSXBuiltin/JSXIdentifier":y.standard(y.tagName)}),PU={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,for:474,of:483,while:486,with:490,do:494,if:498,else:500,switch:504,case:510,try:516,catch:520,finally:524,return:528,throw:532,break:536,continue:540,debugger:544},AU={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},MU={__proto__:null,"<":193},ZE=cs.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Ik'#IkO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JqO6[Q!0MxO'#JrO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO7eQMhO'#F|O9[Q`O'#F{OOQ!0Lf'#Jr'#JrOOQ!0Lb'#Jq'#JqO9aQ`O'#GwOOQ['#K^'#K^O9lQ`O'#IXO9qQ!0LrO'#IYOOQ['#J_'#J_OOQ['#I^'#I^Q`QlOOQ`QlOOO9yQ!L^O'#DvO:QQlO'#EOO:XQlO'#EQO9gQ`O'#GsO:`QMhO'#CoO:nQ`O'#EnO:yQ`O'#EyO;OQMhO'#FeO;mQ`O'#GsOOQO'#K_'#K_O;rQ`O'#K_O<QQ`O'#G{O<QQ`O'#G|O<QQ`O'#HOO9gQ`O'#HRO<wQ`O'#HUO>`Q`O'#CeO>pQ`O'#HbO>xQ`O'#HhO>xQ`O'#HjO`QlO'#HlO>xQ`O'#HnO>xQ`O'#HqO>}Q`O'#HwO?SQ!0LsO'#H}O%[QlO'#IPO?_Q!0LsO'#IRO?jQ!0LsO'#ITO9qQ!0LrO'#IVO?uQ!0MxO'#CiO@wQpO'#DlQOQ`OOO%[QlO'#EQOA_Q`O'#ETO:`QMhO'#EnOAjQ`O'#EnOAuQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Ju'#JuO%[QlO'#JuOOQO'#Jx'#JxOOQO'#Ig'#IgOBuQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J|'#J|OCqQ!0MSO'#EgOC{QpO'#EWOOQO'#Jw'#JwODaQpO'#JxOEnQpO'#EWOC{QpO'#EgPE{O&2DjO'#CbPOOO)CD|)CD|OOOO'#I_'#I_OFWO#tO,59UOOQ!0Lh,59U,59UOOOO'#I`'#I`OFfO&jO,59UOFtQ!L^O'#DcOOOO'#Ib'#IbOF{O#@ItO,59{OOQ!0Lf,59{,59{OGZQlO'#IcOGnQ`O'#JsOImQ!fO'#JsO+}QlO'#JsOItQ`O,5:ROJ[Q`O'#EpOJiQ`O'#KSOJtQ`O'#KROJtQ`O'#KROJ|Q`O,5;^OKRQ`O'#KQOOQ!0Ln,5:^,5:^OKYQlO,5:^OMWQ!0MxO,5:fOMwQ`O,5:nONbQ!0LrO'#KPONiQ`O'#KOO9aQ`O'#KOON}Q`O'#KOO! VQ`O,5;]O! [Q`O'#KOO!#aQ!fO'#JrOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$PQ!fO,5:sOOQS'#Jy'#JyOOQO-E<i-E<iO9gQ`O,5=_O!$gQ`O,5=_O!$lQlO,5;ZO!&oQMhO'#EkO!(YQ`O,5;ZO!(_QlO'#DyO!(iQpO,5;dO!(qQpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)PQlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IoO!+SQ!0LrO,5<iO%[QlO,5;eO!&oQMhO,5;eO!+qQMhO,5;eO!-cQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-jQ,UO'#FjO!.gQ,UO'#KWO!.RQ,UO'#KWO!.nQ,UO'#KWOOQO'#KW'#KWO!/SQ,UO,5<SOOOW,5<`,5<`O!/eQlO'#FvOOOW'#In'#InO7VO7dO,5<QO!/lQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0]Q$IUO'#CyOOQ!0Lh'#C}'#C}O!0pO#@ItO'#DRO!1^QMjO,5<eO!1eQ`O,5<hO!3QQ(CWO'#GXO!3_Q`O'#GYO!3dQ`O'#GYO!5SQ(CWO'#G^O!6XQpO'#GbOOQO'#Gn'#GnO!+xQMhO'#GmOOQO'#Gp'#GpO!+xQMhO'#GoO!6zQ$IUO'#JkOOQ!0Lh'#Jk'#JkO!7UQ`O'#JjO!7dQ`O'#JiO!7lQ`O'#CuOOQ!0Lh'#C{'#C{O!7}Q`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO1SQ`O'#DZO!+xQMhO'#GPO!+xQMhO'#GRO!8SQ`O'#GTO!8XQ`O'#GUO!3dQ`O'#G[O!+xQMhO'#GaO<QQ`O'#JjO!8^Q`O'#EqO!8{Q`O,5<gOOQ!0Lb'#Cr'#CrO!9TQ`O'#ErO!9}QpO'#EsOOQ!0Lb'#KQ'#KQO!:UQ!0LrO'#K`O9qQ!0LrO,5=cO`QlO,5>sOOQ['#Jg'#JgOOQ[,5>t,5>tOOQ[-E<[-E<[O!<TQ!0MxO,5:bO!9xQpO,5:`O!>nQ!0MxO,5:jO%[QlO,5:jO!AUQ!0MxO,5:lOOQO,5@y,5@yO!AuQMhO,5=_O!BTQ!0LrO'#JhO9[Q`O'#JhO!BfQ!0LrO,59ZO!BqQpO,59ZO!ByQMhO,59ZO:`QMhO,59ZO!CUQ`O,5;ZO!C^Q`O'#HaO!CrQ`O'#KcO%[QlO,5;}O!9xQpO,5<PO!CzQ`O,5=zO!DPQ`O,5=zO!DUQ`O,5=zO9qQ!0LrO,5=zO<QQ`O,5=jOOQO'#Cy'#CyO!DdQpO,5=gO!DlQMhO,5=hO!DwQ`O,5=jO!D|Q!bO,5=mO!EUQ`O'#K_O>}Q`O'#HWO9gQ`O'#HYO!EZQ`O'#HYO:`QMhO'#H[O!E`Q`O'#H[OOQ[,5=p,5=pO!EeQ`O'#H]O!EvQ`O'#CoO!E{Q`O,59PO!FVQ`O,59PO!H[QlO,59POOQ[,59P,59PO!HlQ!0LrO,59PO%[QlO,59PO!JwQlO'#HdOOQ['#He'#HeOOQ['#Hf'#HfO`QlO,5=|O!K_Q`O,5=|O`QlO,5>SO`QlO,5>UO!KdQ`O,5>WO`QlO,5>YO!KiQ`O,5>]O!KnQlO,5>cOOQ[,5>i,5>iO%[QlO,5>iO9qQ!0LrO,5>kOOQ[,5>m,5>mO# xQ`O,5>mOOQ[,5>o,5>oO# xQ`O,5>oOOQ[,5>q,5>qO#!fQpO'#D_O%[QlO'#JuO##XQpO'#JuO##cQpO'#DmO##tQpO'#DmO#&VQlO'#DmO#&^Q`O'#JtO#&fQ`O,5:WO#&kQ`O'#EtO#&yQ`O'#KTO#'RQ`O,5;_O#'WQpO'#DmO#'eQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#'lQ`O,5:oO>}Q`O,5;YO!BqQpO,5;YO!ByQMhO,5;YO:`QMhO,5;YO#'tQ`O,5@aO#'yQ07dO,5:sOOQO-E<e-E<eO#)PQ!0MSO,5;ROC{QpO,5:rO#)ZQpO,5:rOC{QpO,5;RO!BfQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#)hQ!0LrO,5;RO#)sQ!0LrO,5;RO!BqQpO,5:rOOQO,5;X,5;XO#*RQ!0LrO,5;RPOOO'#I]'#I]P#*gO&2DjO,58|POOO,58|,58|OOOO-E<]-E<]OOQ!0Lh1G.p1G.pOOOO-E<^-E<^OOOO,59},59}O#*rQ!bO,59}OOOO-E<`-E<`OOQ!0Lf1G/g1G/gO#*wQ!fO,5>}O+}QlO,5>}OOQO,5?T,5?TO#+RQlO'#IcOOQO-E<a-E<aO#+`Q`O,5@_O#+hQ!fO,5@_O#+oQ`O,5@mOOQ!0Lf1G/m1G/mO%[QlO,5@nO#+wQ`O'#IiOOQO-E<g-E<gO#+oQ`O,5@mOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@kO#,]Q!0LrO,5@kO#,nQ!0LrO,5@kO#,uQ`O,5@jO9aQ`O,5@jO#,}Q`O,5@jO#-]Q`O'#IlO#,uQ`O,5@jOOQ!0Lb1G0w1G0wO!(iQpO,5:uO!(tQpO,5:uOOQS,5:w,5:wO#-}QdO,5:wO#.VQMhO1G2yO9gQ`O1G2yOOQ!0Lf1G0u1G0uO#.eQ!0MxO1G0uO#/jQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0WQ!0MzO'#JkO!$lQlO1G0uO#2cQ!fO'#JvO%[QlO'#JvO#2mQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#2rQ`O1G1OO#5WQ!0MxO1G1PO#5_Q!0MxO1G1PO#7uQ!0MxO1G1PO#7|Q!0MxO1G1PO#:dQ!0MxO1G1PO#<zQ!0MxO1G1PO#=RQ!0MxO1G1PO#=YQ!0MxO1G1PO#?pQ!0MxO1G1PO#?wQ!0MxO1G1PO#BUQ?MtO'#CiO#DPQ?MtO1G1`O#DWQ?MtO'#JrO#DkQ!0MxO,5?ZOOQ!0Lb-E<m-E<mO#FxQ!0MxO1G1PO#GuQ!0MzO1G1POOQ!0Lf1G1P1G1PO#HxQMjO'#J{O#ISQ`O,5:xO#IXQ!0MxO1G1cO#I{Q,UO,5<WO#JTQ,UO,5<XO#J]Q,UO'#FoO#JtQ`O'#FnOOQO'#KX'#KXOOQO'#Im'#ImO#JyQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#K[Q?MtO'#JqO#KfQ`O,5<bO!)PQlO,5<bOOOW-E<l-E<lOOQ!0Lf1G1l1G1lO#KkQpO'#KWOOQ!0Lf,5<d,5<dO#KsQpO,5<dO#KxQMhO'#DTOOOO'#Ia'#IaO#LPO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8XQ`O'#IqO#L[Q`O,5<zOOQ!0Lh,5<w,5<wO!+xQMhO'#ItO#LxQMjO,5=XO!+xQMhO'#IvO#MkQMjO,5=ZO!&oQMhO,5=]OOQO1G2S1G2SO#MuQ!dO'#CrO#NYQ(CWO'#ErO$ _QpO'#GbO$ uQ!dO,5<sO$ |Q`O'#KZO9aQ`O'#KZO$![Q`O,5<uO!+xQMhO,5<tO$!aQ`O'#GZO$!rQ`O,5<tO$!wQ!dO'#GWO$#UQ!dO'#K[O$#`Q`O'#K[O!&oQMhO'#K[O$#eQ`O,5<xO$#jQlO'#JuO$#tQpO'#GcO##tQpO'#GcO$$VQ`O'#GgO!3dQ`O'#GkO$$[Q!0LrO'#IsO$$gQpO,5<|OOQ!0Lp,5<|,5<|O$$nQpO'#GcO$${QpO'#GdO$%^QpO'#GdO$%cQMjO,5=XO$%sQMjO,5=ZOOQ!0Lh,5=^,5=^O!+xQMhO,5@UO!+xQMhO,5@UO$&TQ`O'#IxO$&iQ`O,5@TO$&qQ`O,59aOOQ!0Lh,59i,59iO$'hQ$IYO,59uOOQ!0Lh'#Jo'#JoO$(ZQMjO,5<kO$(|QMjO,5<mO@oQ`O,5<oOOQ!0Lh,5<p,5<pO$)WQ`O,5<vO$)]QMjO,5<{O$)mQ`O,5@UO$){Q`O'#KOO!$lQlO1G2RO$*QQ`O1G2RO9aQ`O'#KRO9aQ`O'#EtO%[QlO'#EtO9aQ`O'#IzO$*VQ!0LrO,5@zOOQ[1G2}1G2}OOQ[1G4_1G4_OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$,XQ!0MxO1G0UOOQ[1G2y1G2yO!&oQMhO1G2yO%[QlO1G2yO#.YQ`O1G2yO$.]QMhO'#EkOOQ!0Lb,5@S,5@SO$.jQ!0LrO,5@SOOQ[1G.u1G.uO!BfQ!0LrO1G.uO!BqQpO1G.uO!ByQMhO1G.uO$.{Q`O1G0uO$/QQ`O'#CiO$/]Q`O'#KdO$/eQ`O,5={O$/jQ`O'#KdO$/oQ`O'#KdO$/}Q`O'#JQO$0]Q`O,5@}O$0eQ!fO1G1iOOQ!0Lf1G1k1G1kO9gQ`O1G3fO@oQ`O1G3fO$0lQ`O1G3fO$0qQ`O1G3fOOQ[1G3f1G3fO!DwQ`O1G3UO!&oQMhO1G3RO$0vQ`O1G3ROOQ[1G3S1G3SO!&oQMhO1G3SO$0{Q`O1G3SO$1TQpO'#HQOOQ[1G3U1G3UO!6SQpO'#I|O!D|Q!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$1]QMhO,5=tO9gQ`O,5=tO$$VQ`O,5=vO9[Q`O,5=vO!BqQpO,5=vO!ByQMhO,5=vO:`QMhO,5=vO$1kQ`O'#KbO$1vQ`O,5=wOOQ[1G.k1G.kO$1{Q!0LrO1G.kO@oQ`O1G.kO$2WQ`O1G.kO9qQ!0LrO1G.kO$4`Q!fO,5APO$4mQ`O,5APO9aQ`O,5APO$4xQlO,5>OO$5PQ`O,5>OOOQ[1G3h1G3hO`QlO1G3hOOQ[1G3n1G3nOOQ[1G3p1G3pO>xQ`O1G3rO$5UQlO1G3tO$9YQlO'#HsOOQ[1G3w1G3wO$9gQ`O'#HyO>}Q`O'#H{OOQ[1G3}1G3}O$9oQlO1G3}O9qQ!0LrO1G4TOOQ[1G4V1G4VOOQ!0Lb'#G_'#G_O9qQ!0LrO1G4XO9qQ!0LrO1G4ZO$=vQ`O,5@aO!)PQlO,5;`O9aQ`O,5;`O>}Q`O,5:XO!)PQlO,5:XO!BqQpO,5:XO$={Q?MtO,5:XOOQO,5;`,5;`O$>VQpO'#IdO$>mQ`O,5@`OOQ!0Lf1G/r1G/rO$>uQpO'#IjO$?PQ`O,5@oOOQ!0Lb1G0y1G0yO##tQpO,5:XOOQO'#If'#IfO$?XQpO,5:qOOQ!0Ln,5:q,5:qO#'oQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO>}Q`O1G0tO!BqQpO1G0tO!ByQMhO1G0tOOQ!0Lb1G5{1G5{O!BfQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$?`Q!0LrO1G0mO$?kQ!0LrO1G0mO!BqQpO1G0^OC{QpO1G0^O$?yQ!0LrO1G0mOOQO1G0^1G0^O$@_Q!0MxO1G0mPOOO-E<Z-E<ZPOOO1G.h1G.hOOOO1G/i1G/iO$@iQ!bO,5<iO$@qQ!fO1G4iOOQO1G4o1G4oO%[QlO,5>}O$@{Q`O1G5yO$ATQ`O1G6XO$A]Q!fO1G6YO9aQ`O,5?TO$AgQ!0MxO1G6VO%[QlO1G6VO$AwQ!0LrO1G6VO$BYQ`O1G6UO$BYQ`O1G6UO9aQ`O1G6UO$BbQ`O,5?WO9aQ`O,5?WOOQO,5?W,5?WO$BvQ`O,5?WO$){Q`O,5?WOOQO-E<j-E<jOOQS1G0a1G0aOOQS1G0c1G0cO#.QQ`O1G0cOOQ[7+(e7+(eO!&oQMhO7+(eO%[QlO7+(eO$CUQ`O7+(eO$CaQMhO7+(eO$CoQ!0MzO,5=XO$EzQ!0MzO,5=ZO$HVQ!0MzO,5=XO$JhQ!0MzO,5=ZO$LyQ!0MzO,59uO% OQ!0MzO,5<kO%#ZQ!0MzO,5<mO%%fQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%'wQ!0MxO7+&aO%(kQlO'#IeO%(xQ`O,5@bO%)QQ!fO,5@bOOQ!0Lf1G0P1G0PO%)[Q`O7+&jOOQ!0Lf7+&j7+&jO%)aQ?MtO,5:fO%[QlO7+&zO%)kQ?MtO,5:bO%)xQ?MtO,5:jO%*SQ?MtO,5:lO%*^QMhO'#IhO%*hQ`O,5@gOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%*pQ!jO,5<ZO!)PQlO,5<YOOQO-E<k-E<kOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%*{Q`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%+QQ!dO,59oOOOO-E<_-E<_OOQ!0Lh1G/X1G/XO%+XQ!0MxO7+'kOOQ!0Lh,5?],5?]O%+{QMhO1G2fP%,SQ`O'#IqPOQ!0Lh-E<o-E<oO%,pQMjO,5?`OOQ!0Lh-E<r-E<rO%-cQMjO,5?bOOQ!0Lh-E<t-E<tO%-mQ!dO1G2wO%-tQ!dO'#CrO%.[QMhO'#KRO$#jQlO'#JuOOQ!0Lh1G2_1G2_O%.cQ`O'#IpO%.wQ`O,5@uO%.wQ`O,5@uO%/PQ`O,5@uO%/[Q`O,5@uOOQO1G2a1G2aO%/jQMjO1G2`O!+xQMhO1G2`O%/zQ(CWO'#IrO%0XQ`O,5@vO!&oQMhO,5@vO%0aQ!dO,5@vOOQ!0Lh1G2d1G2dO%2qQ!fO'#CiO%2{Q`O,5=POOQ!0Lb,5<},5<}O%3TQpO,5<}OOQ!0Lb,5=O,5=OOClQ`O,5<}O%3`QpO,5<}OOQ!0Lb,5=R,5=RO$){Q`O,5=VOOQO,5?_,5?_OOQO-E<q-E<qOOQ!0Lp1G2h1G2hO##tQpO,5<}O$#jQlO,5=PO%3nQ`O,5=OO%3yQpO,5=OO!+xQMhO'#ItO%4sQMjO1G2sO!+xQMhO'#IvO%5fQMjO1G2uO%5pQMjO1G5pO%5zQMjO1G5pOOQO,5?d,5?dOOQO-E<v-E<vOOQO1G.{1G.{O!9xQpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%6XQ`O1G2ZO!+xQMhO1G2bO!+xQMhO1G5pO!+xQMhO1G5pO%6^Q!0MxO7+'mOOQ!0Lf7+'m7+'mO!$lQlO7+'mO%7QQ`O,5;`OOQ!0Lb,5?f,5?fOOQ!0Lb-E<x-E<xO%7VQ!dO'#K]O#'oQ`O7+(eO4UQ!fO7+(eO$CXQ`O7+(eO%7aQ!0MvO'#CiO%7tQ!0MvO,5=SO%8fQ`O,5=SO%8nQ`O,5=SOOQ!0Lb1G5n1G5nOOQ[7+$a7+$aO!BfQ!0LrO7+$aO!BqQpO7+$aO!$lQlO7+&aO%8sQ`O'#JPO%9[Q`O,5AOOOQO1G3g1G3gO9gQ`O,5AOO%9[Q`O,5AOO%9dQ`O,5AOOOQO,5?l,5?lOOQO-E=O-E=OOOQ!0Lf7+'T7+'TO%9iQ`O7+)QO9qQ!0LrO7+)QO9gQ`O7+)QO@oQ`O7+)QOOQ[7+(p7+(pO%9nQ!0MvO7+(mO!&oQMhO7+(mO!DrQ`O7+(nOOQ[7+(n7+(nO!&oQMhO7+(nO%9xQ`O'#KaO%:TQ`O,5=lOOQO,5?h,5?hOOQO-E<z-E<zOOQ[7+(s7+(sO%;gQpO'#HZOOQ[1G3`1G3`O!&oQMhO1G3`O%[QlO1G3`O%;nQ`O1G3`O%;yQMhO1G3`O9qQ!0LrO1G3bO$$VQ`O1G3bO9[Q`O1G3bO!BqQpO1G3bO!ByQMhO1G3bO%<XQ`O'#JOO%<mQ`O,5@|O%<uQpO,5@|OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@oQ`O7+$VO9qQ!0LrO7+$VO%=QQ`O7+$VO%[QlO1G6kO%[QlO1G6lO%=VQ!0LrO1G6kO%=aQlO1G3jO%=hQ`O1G3jO%=mQlO1G3jOOQ[7+)S7+)SO9qQ!0LrO7+)^O`QlO7+)`OOQ['#Kg'#KgOOQ['#JR'#JRO%=tQlO,5>_OOQ[,5>_,5>_O%[QlO'#HtO%>RQ`O'#HvOOQ[,5>e,5>eO9aQ`O,5>eOOQ[,5>g,5>gOOQ[7+)i7+)iOOQ[7+)o7+)oOOQ[7+)s7+)sOOQ[7+)u7+)uO%>WQpO1G5{O%>rQ?MtO1G0zO%>|Q`O1G0zOOQO1G/s1G/sO%?XQ?MtO1G/sO>}Q`O1G/sO!)PQlO'#DmOOQO,5?O,5?OOOQO-E<b-E<bOOQO,5?U,5?UOOQO-E<h-E<hO!BqQpO1G/sOOQO-E<d-E<dOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#'oQ`O7+%uOOQ!0Lf7+&`7+&`O>}Q`O7+&`O!BqQpO7+&`OOQO7+%x7+%xO$@_Q!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%?cQ!0LrO7+&XO!BfQ!0LrO7+%xO!BqQpO7+%xO%?nQ!0LrO7+&XO%?|Q!0MxO7++qO%[QlO7++qO%@^Q`O7++pO%@^Q`O7++pOOQO1G4r1G4rO9aQ`O1G4rO%@fQ`O1G4rOOQS7+%}7+%}O#'oQ`O<<LPO4UQ!fO<<LPO%@tQ`O<<LPOOQ[<<LP<<LPO!&oQMhO<<LPO%[QlO<<LPO%@|Q`O<<LPO%AXQ!0MzO,5?`O%CdQ!0MzO,5?bO%EoQ!0MzO1G2`O%HQQ!0MzO1G2sO%J]Q!0MzO1G2uO%LhQ!fO,5?PO%[QlO,5?POOQO-E<c-E<cO%LrQ`O1G5|OOQ!0Lf<<JU<<JUO%LzQ?MtO1G0uO& RQ?MtO1G1PO& YQ?MtO1G1PO&#ZQ?MtO1G1PO&#bQ?MtO1G1PO&%cQ?MtO1G1PO&'dQ?MtO1G1PO&'kQ?MtO1G1PO&'rQ?MtO1G1PO&)sQ?MtO1G1PO&)zQ?MtO1G1PO&*RQ!0MxO<<JfO&+yQ?MtO1G1PO&,vQ?MvO1G1PO&-yQ?MvO'#JkO&0PQ?MtO1G1cO&0^Q?MtO1G0UO&0hQMjO,5?SOOQO-E<f-E<fO!)PQlO'#FqOOQO'#KY'#KYOOQO1G1u1G1uO&0rQ`O1G1tO&0wQ?MtO,5?ZOOOW7+'h7+'hOOOO1G/Z1G/ZO&1RQ!dO1G4wOOQ!0Lh7+(Q7+(QP!&oQMhO,5?]O!+xQMhO7+(cO&1YQ`O,5?[O9aQ`O,5?[OOQO-E<n-E<nO&1hQ`O1G6aO&1hQ`O1G6aO&1pQ`O1G6aO&1{QMjO7+'zO&2]Q!dO,5?^O&2gQ`O,5?^O!&oQMhO,5?^OOQO-E<p-E<pO&2lQ!dO1G6bO&2vQ`O1G6bO&3OQ`O1G2kO!&oQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%3TQpO1G2iO!BqQpO1G2iOClQ`O1G2iOOQ!0Lb1G2q1G2qO&3TQpO1G2iO&3cQ`O1G2kO$){Q`O1G2jOClQ`O1G2jO$#jQlO1G2kO&3kQ`O1G2jO&4_QMjO,5?`OOQ!0Lh-E<s-E<sO&5QQMjO,5?bOOQ!0Lh-E<u-E<uO!+xQMhO7++[OOQ!0Lh1G/c1G/cO&5[Q`O1G/cOOQ!0Lh7+'u7+'uO&5aQMjO7+'|O&5qQMjO7++[O&5{QMjO7++[O&6YQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&6|Q`O1G0zO!&oQMhO'#IyO&7RQ`O,5@wO&9TQ!fO<<LPO!&oQMhO1G2nO&9[Q!0LrO1G2nOOQ[<<G{<<G{O!BfQ!0LrO<<G{O&9mQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?k,5?kO&:aQ`O,5?kO&:fQ`O,5?kOOQO-E<}-E<}O&:tQ`O1G6jO&:tQ`O1G6jO9gQ`O1G6jO@oQ`O<<LlOOQ[<<Ll<<LlO&:|Q`O<<LlO9qQ!0LrO<<LlOOQ[<<LX<<LXO%9nQ!0MvO<<LXOOQ[<<LY<<LYO!DrQ`O<<LYO&;RQpO'#I{O&;^Q`O,5@{O!)PQlO,5@{OOQ[1G3W1G3WOOQO'#I}'#I}O9qQ!0LrO'#I}O&;fQpO,5=uOOQ[,5=u,5=uO&;mQpO'#EgO&;tQpO'#GeO&;yQ`O7+(zO&<OQ`O7+(zOOQ[7+(z7+(zO!&oQMhO7+(zO%[QlO7+(zO&<WQ`O7+(zOOQ[7+(|7+(|O9qQ!0LrO7+(|O$$VQ`O7+(|O9[Q`O7+(|O!BqQpO7+(|O&<cQ`O,5?jOOQO-E<|-E<|OOQO'#H^'#H^O&<nQ`O1G6hO9qQ!0LrO<<GqOOQ[<<Gq<<GqO@oQ`O<<GqO&<vQ`O7+,VO&<{Q`O7+,WO%[QlO7+,VO%[QlO7+,WOOQ[7+)U7+)UO&=QQ`O7+)UO&=VQlO7+)UO&=^Q`O7+)UOOQ[<<Lx<<LxOOQ[<<Lz<<LzOOQ[-E=P-E=POOQ[1G3y1G3yO&=cQ`O,5>`OOQ[,5>b,5>bO&=hQ`O1G4PO9aQ`O7+&fO!)PQlO7+&fOOQO7+%_7+%_O&=mQ?MtO1G6YO>}Q`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO>}Q`O<<IzOOQO<<Is<<IsO$@_Q!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!BfQ!0LrO<<IdO&=wQ!0LrO<<IsO&>SQ!0MxO<= ]O&>dQ`O<= [OOQO7+*^7+*^O9aQ`O7+*^OOQ[ANAkANAkO&>lQ!fOANAkO!&oQMhOANAkO#'oQ`OANAkO4UQ!fOANAkO&>sQ`OANAkO%[QlOANAkO&>{Q!0MzO7+'zO&A^Q!0MzO,5?`O&CiQ!0MzO,5?bO&EtQ!0MzO7+'|O&HVQ!fO1G4kO&HaQ?MtO7+&aO&JeQ?MvO,5=XO&LlQ?MvO,5=ZO&L|Q?MvO,5=XO&M^Q?MvO,5=ZO&MnQ?MvO,59uO' tQ?MvO,5<kO'#wQ?MvO,5<mO'&]Q?MvO,5<{O'(RQ?MtO7+'kO'(`Q?MtO7+'mO'(mQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*c7+*cO'(rQMjO<<K}OOQO1G4v1G4vO'(yQ`O1G4vO')UQ`O1G4vO')dQ`O7++{O')dQ`O7++{O!&oQMhO1G4xO')lQ!dO1G4xO')vQ`O7++|O'*OQ`O7+(VO'*ZQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!BqQpO7+(TOClQ`O7+(TO'*eQ`O7+(VO!&oQMhO7+(VO$){Q`O7+(UO'*jQ`O7+(VOClQ`O7+(UO'*rQMjO<<NvOOQ!0Lh7+$}7+$}O!+xQMhO<<NvO'*|Q!dO,5?eOOQO-E<w-E<wO'+WQ!0MvO7+(YO!&oQMhO7+(YOOQ[AN=gAN=gO9gQ`O1G5VOOQO1G5V1G5VO'+hQ`O1G5VO'+mQ`O7+,UO'+mQ`O7+,UO9qQ!0LrOANBWO@oQ`OANBWOOQ[ANBWANBWOOQ[ANAsANAsOOQ[ANAtANAtO'+uQ`O,5?gOOQO-E<y-E<yO',QQ?MtO1G6gOOQO,5?i,5?iOOQO-E<{-E<{OOQ[1G3a1G3aO',[Q`O,5=POOQ[<<Lf<<LfO!&oQMhO<<LfO&;yQ`O<<LfO',aQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9qQ!0LrO<<LhO$$VQ`O<<LhO9[Q`O<<LhO',iQpO1G5UO',tQ`O7+,SOOQ[AN=]AN=]O9qQ!0LrOAN=]OOQ[<= q<= qOOQ[<= r<= rO',|Q`O<= qO'-RQ`O<= rOOQ[<<Lp<<LpO'-WQ`O<<LpO'-]QlO<<LpOOQ[1G3z1G3zO>}Q`O7+)kO'-dQ`O<<JQO'-oQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$@_Q!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<Mx<<MxOOQ[G27VG27VO!&oQMhOG27VO#'oQ`OG27VO'-yQ!fOG27VO4UQ!fOG27VO'.QQ`OG27VO'.YQ?MtO<<JfO'.gQ?MvO1G2`O'0]Q?MvO,5?`O'2`Q?MvO,5?bO'4cQ?MvO1G2sO'6fQ?MvO1G2uO'8iQ?MtO<<KXO'8vQ?MtO<<I{OOQO1G1w1G1wO!+xQMhOANAiOOQO7+*b7+*bO'9TQ`O7+*bO'9`Q`O<= gO'9hQ!dO7+*dOOQ!0Lb<<Kq<<KqO$){Q`O<<KqOClQ`O<<KqO'9rQ`O<<KqO!&oQMhO<<KqOOQ!0Lb<<Ko<<KoO!BqQpO<<KoO'9}Q!dO<<KqOOQ!0Lb<<Kp<<KpO':XQ`O<<KqO!&oQMhO<<KqO$){Q`O<<KpO':^QMjOANDbO':hQ!0MvO<<KtOOQO7+*q7+*qO9gQ`O7+*qO':xQ`O<= pOOQ[G27rG27rO9qQ!0LrOG27rO!)PQlO1G5RO';QQ`O7+,RO';YQ`O1G2kO&;yQ`OANBQOOQ[ANBQANBQO!&oQMhOANBQO';_Q`OANBQOOQ[ANBSANBSO9qQ!0LrOANBSO$$VQ`OANBSOOQO'#H_'#H_OOQO7+*p7+*pOOQ[G22wG22wOOQ[ANE]ANE]OOQ[ANE^ANE^OOQ[ANB[ANB[O';gQ`OANB[OOQ[<<MV<<MVO!)PQlOAN?lOOQOG24yG24yO$@_Q!0MxOG24yO#'oQ`OLD,qOOQ[LD,qLD,qO!&oQMhOLD,qO';lQ!fOLD,qO';sQ?MvO7+'zO'=iQ?MvO,5?`O'?lQ?MvO,5?bO'AoQ?MvO7+'|O'CeQMjOG27TOOQO<<M|<<M|OOQ!0LbANA]ANA]O$){Q`OANA]OClQ`OANA]O'CuQ!dOANA]OOQ!0LbANAZANAZO'C|Q`OANA]O!&oQMhOANA]O'DXQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N]<<N]OOQ[LD-^LD-^O'DcQ?MtO7+*mOOQO'#Gf'#GfOOQ[G27lG27lO&;yQ`OG27lO!&oQMhOG27lOOQ[G27nG27nO9qQ!0LrOG27nOOQ[G27vG27vO'DmQ?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#'oQ`O!$(!]O!&oQMhO!$(!]O'DwQ!0MzOG27TOOQ!0LbG26wG26wO$){Q`OG26wO'GYQ`OG26wOClQ`OG26wO'GeQ!dOG26wO!&oQMhOG26wOOQ[LD-WLD-WO&;yQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#'oQ`O!)9EwOOQ!0LbLD,cLD,cO$){Q`OLD,cOClQ`OLD,cO'GlQ`OLD,cO'GwQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'HOQ?MvOG27TOOQ!0Lb!$( }!$( }O$){Q`O!$( }OClQ`O!$( }O'ItQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$){Q`O!)9EiOClQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$){Q`O!.K;TOOQ!0Lb!4/0o!4/0oO!)PQlO'#DzO1PQ`O'#EXO'JPQ!fO'#JqO'JWQ!L^O'#DvO'J_QlO'#EOO'JfQ!fO'#CiO'L|Q!fO'#CiO!)PQlO'#EQO'M^QlO,5;ZO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO'#IoO( aQ`O,5<iO!)PQlO,5;eO( iQMhO,5;eO(#SQMhO,5;eO!)PQlO,5;wO!&oQMhO'#GmO( iQMhO'#GmO!&oQMhO'#GoO( iQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&oQMhO'#GPO( iQMhO'#GPO!&oQMhO'#GRO( iQMhO'#GRO!&oQMhO'#GaO( iQMhO'#GaO!)PQlO,5:jO(#ZQpO'#D_O(#eQpO'#JuO!)PQlO,5@nO'M^QlO1G0uO(#oQ?MtO'#CiO!)PQlO1G2PO!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO(#yQ!dO'#CrO!&oQMhO,5<tO( iQMhO,5<tO'M^QlO1G2RO!)PQlO7+&zO!&oQMhO1G2`O( iQMhO1G2`O!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO!&oQMhO1G2bO( iQMhO1G2bO'M^QlO7+'mO'M^QlO7+&aO!&oQMhOANAiO( iQMhOANAiO($^Q`O'#EoO($cQ`O'#EoO($kQ`O'#F]O($pQ`O'#EyO($uQ`O'#KSO(%QQ`O'#KQO(%]Q`O,5;ZO(%bQMjO,5<eO(%iQ`O'#GYO(%nQ`O'#GYO(%sQ`O,5<gO(%{Q`O,5;ZO(&TQ?MtO1G1`O(&[Q`O,5<tO(&aQ`O,5<tO(&fQ`O,5<vO(&kQ`O,5<vO(&pQ`O1G2RO(&uQ`O1G0uO(&zQMjO<<K}O('RQMjO<<K}O7eQMhO'#F|O9[Q`O'#F{OAjQ`O'#EnO!)PQlO,5;tO!3dQ`O'#GYO!3dQ`O'#GYO!3dQ`O'#G[O!3dQ`O'#G[O!+xQMhO7+(cO!+xQMhO7+(cO%-mQ!dO1G2wO%-mQ!dO1G2wO!&oQMhO,5=]O!&oQMhO,5=]",stateData:"((X~O'{OS'|OSTOS'}RQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&V!WO&]!XO&_!YO&a!ZO&c![O&f!]O&l!^O&r!_O&t!`O&v!aO&x!bO&z!cO(SSO(UTO(XUO(`VO(n[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O'}!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'y]X(`]X(q]X(x]X(y]X~O!g%RX~P(qO_!}O(U#PO(V!}O(W#PO~O_#QO(W#PO(X#PO(Y#QO~Ox#SO!U#TO(a#TO(b#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S;{O(UTO(XUO(`VO(n[O~O![#ZO!]#WO!Y(gP!Y(uP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(UTO(XUO(`VO(n[O~Op#mO![#iO!|]O#i#lO#j#iO(S;|O!k(rP~P.iO!l#oO(S#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa(eX'y(eX'v(eX!k(eX!Y(eX!_(eX%i(eX!g(eX~P1qO#S$dO#`$eO$Q$eOP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX!_(fX%i(fX~Oa(fX'y(fX'v(fX!Y(fX!k(fXv(fX!g(fX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%cOk%cOl%cOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S$sO(UTO(XUO(`$uO(x$}O(y%POg(]P~O!l%dO~O!S%gO!_%hO(S%fO~O!g%lO~Oa%mO'y%mO~O!Q%qO~P%[O(T!lO~P%[O%n%uO~P%[Oh%VO!l%dO(S%fO(T!lO~Oe%|O!l%dO(S%fO~Oj$RO~O!Q&RO!_&OO!l&QO%j&UO(S%fO(T!lO(UTO(XUO`)VP~O!x#sO~O%s&WO!S)RX!_)RX(S)RX~O(S&XO~Ol!PO!u&^O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&cOe&bO!x&`O%h&aO%{&_O~P<VOd&fOeyOl!PO!_&eO!u&^O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&iO#`&lO%j&gO(T!lO~P=[O!l&mO!u&qO~O!l#oO~O!_XO~Oa%mO'w&yO'y%mO~Oa%mO'w&|O'y%mO~Oa%mO'w'OO'y%mO~O'v]X!Y]Xv]X!k]X&Z]X!_]X%i]X!g]X~P(qO!b']O!c'UO!d'UO(T!lO(UTO(XUO~Os'SO!S'RO!['VO(d'QO!^(hP!^(wP~P@cOn'`O!_'^O(S%fO~Oe'eO!l%dO(S%fO~O!Q&RO!l&QO~Os!nO!S!oO!|;wO#T!pO#U!pO#W!pO#X!pO(T!lO(UTO(XUO(d!mO(n!sO~O!b'kO!c'jO!d'jO#V!pO#['lO#]'lO~PA}Oa%mOh%VO!g#vO!l%dO'y%mO(q'nO~O!p'rO#`'pO~PC]Os!nO!S!oO(UTO(XUO(d!mO(n!sO~O!_XOs(lX!S(lX!b(lX!c(lX!d(lX!|(lX#T(lX#U(lX#V(lX#W(lX#X(lX#[(lX#](lX(T(lX(U(lX(X(lX(d(lX(n(lX~O!c'jO!d'jO(T!lO~PC{O(O'vO(P'vO(Q'xO~O_!}O(U'zO(V!}O(W'zO~O_#QO(W'zO(X'zO(Y#QO~Ov'|O~P%[Ox#SO!U#TO(a#TO(b(PO~O![(RO!Y'VX!Y']X!]'VX!]']X~P+}O!](TO!Y(gX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](TO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~O!Y(gX~PGvO!Y(YO~O!Y(tX!](tX!g(tX!k(tX(q(tX~O#`(tX#k#dX!^(tX~PIyO#`(ZO!Y(vX!](vX~O!]([O!Y(uX~O!Y(_O~O#`$eO~PIyO!^(`O~P`OR#zO!Q#yO!S#{O!l#xO(`VOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(q!na(x!na(y!na~Oa!na'y!na'v!na!Y!na!k!nav!na!_!na%i!na!g!na~PKaO!k(aO~O!g#vO#`(bO(q'nO!](sXa(sX'y(sX~O!k(sX~PM|O!S%gO!_%hO!|]O#i(gO#j(fO(S%fO~O!](hO!k(rX~O!k(jO~O!S%gO!_%hO#j(fO(S%fO~OP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~O!g#vO!k(fX~P! jOR(lO!Q(kO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(S!{a~P!#kO!x(pO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~O#k(vO~O![(xO!k(jP~P%[O(d(zO(n[O~O!S(|O!l#xO(d(zO(n[O~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]$_Oa$qa'y$qa'v$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)bO~P!&oOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Og(oP~P!+xO!Q)gO!g)fO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)fO!_(zX$Z(zX$](zX$_(zX$f(zX~O!Q)gO~P!.RO!Q)gO!_(zX$Z(zX$](zX$_(zX$f(zX~O!_)iO$Z)mO$])hO$_)hO$f)nO~O![)qO~P!)PO$]$hO$_$gO$f)uO~On$zX!Q$zX#S$zX'x$zX(x$zX(y$zX~OgmXg$zXnmX!]mX#`mX~P!/wOx)wO(a)xO(b)zO~On*TO!Q)|O'x)}O(x$}O(y%PO~Og){O~P!0{Og*UO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S*WO!_*XO!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~O![*[O(S*VO!k(}P~P!1jO#k*^O~O!l*_O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S*aO(UTO(XUO(`$uO(x$}O(y%PO~O![*dO!Y)OP~P!3iOr*pOs!nO!S*fO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO(d!mO~O!^*mO~P!5^O#S$dOn(_X!Q(_X'x(_X(x(_X(y(_X!](_X#`(_X~Og(_X$O(_X~P!6`On*uO#`*tOg(^X!](^X~O!]*vOg(]X~Oj%cOk%cOl%cO(S&XOg(]P~Os*yO~O!l+OO~O(S(tO~Op+TO!S%gO![#iO!_%hO!|]O#i#lO#j#iO(S%fO!k(rP~O!g#vO#k+UO~O!S%gO![+WO!]([O!_%hO(S%fO!Y(uP~Os'YO!S+YO![+XO(UTO(XUO(d(zO~O!^(wP~P!9iO!]+ZOa)SX'y)SX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa!ja!]!ja'y!ja'v!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:aOR#zO!Q#yO!S#{O!l#xO(`VOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(q!ra(x!ra(y!ra~Oa!ra'y!ra'v!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!<wOR#zO!Q#yO!S#{O!l#xO(`VOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(q!ta(x!ta(y!ta~Oa!ta'y!ta'v!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?_Oh%VOn+dO!_'^O%i+cO~O!g+fOa([X!_([X'y([X!]([X~Oa%mO!_XO'y%mO~Oh%VO!l%dO~Oh%VO!l%dO(S%fO~O!g#vO#k(vO~Ob+qO%j+rO(S+nO(UTO(XUO!^)WP~O!]+sO`)VX~O[+wO~O`+xO~O!_&OO(S%fO(T!lO`)VP~Oh%VO#`+}O~Oh%VOn,QO!_$|O~O!_,SO~O!Q,UO!_XO~O%n%uO~O!x,ZO~Oe,`O~Ob,aO(S#nO(UTO(XUO!^)UP~Oe%|O~O%j!QO(S&XO~P=[O[,fO`,eO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(UTO(XUO(`VO(n[O~O!_!eO!u!gO$W!kO(S!dO~P!F_O`,eOa%mO'y%mO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa,kOl!OO!uwO%l!OO%m!OO%n!OO~P!HwO!l&mO~O&],qO~O!_,sO~O&n,uO&p,vOP&kaQ&kaS&kaY&kaa&kad&kae&kal&kap&kar&kas&kat&kaz&ka|&ka!O&ka!S&ka!W&ka!X&ka!_&ka!i&ka!l&ka!o&ka!p&ka!q&ka!s&ka!u&ka!x&ka!|&ka$W&ka$n&ka%h&ka%j&ka%l&ka%m&ka%n&ka%q&ka%s&ka%v&ka%w&ka%y&ka&V&ka&]&ka&_&ka&a&ka&c&ka&f&ka&l&ka&r&ka&t&ka&v&ka&x&ka&z&ka'v&ka(S&ka(U&ka(X&ka(`&ka(n&ka!^&ka&d&kab&ka&i&ka~O(S,{O~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P# }O!g-QO#`-POh(iX!]#hX!^#hX!g(iX!l(iX~O!](iX!^(iX~P#!pOh%VO!g-SO!l%dO!]!aX!^!aX~Os!nO!S!oO(UTO(XUO(d!mO~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(UTO(XUO(`VO(n[O~O(S<rO~P#$VO!]-WO!^(hX~O!^-YO~O!g-QO#`-PO!]#hX!^#hX~O!]-ZO!^(wX~O!^-]O~O!c-^O!d-^O(T!lO~P##tO!^-aO~P'_On-dO!_'^O~O!Y-iO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(T!{a(U!{a(X!{a(d!{a(n!{a~P!#kO!p-nO#`-lO~PC]O!c-pO!d-pO(T!lO~PC{Oa%mO#`-lO'y%mO~Oa%mO!g#vO#`-lO'y%mO~Oa%mO!g#vO!p-nO#`-lO'y%mO(q'nO~O(O'vO(P'vO(Q-uO~Ov-vO~O!Y'Va!]'Va~P!:aO![-zO!Y'VX!]'VX~P%[O!](TO!Y(ga~O!Y(ga~PGvO!]([O!Y(ua~O!S%gO![.OO!_%hO(S%fO!Y']X!]']X~O#`.QO!](sa!k(saa(sa'y(sa~O!g#vO~P#,]O!](hO!k(ra~O!S%gO!_%hO#j.UO(S%fO~Op.ZO!S%gO![.WO!_%hO!|]O#i.YO#j.WO(S%fO!]'`X!k'`X~OR._O!l#xO~Oh%VOn.bO!_'^O%i.aO~Oa#ci!]#ci'y#ci'v#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:aOn=|O!Q)|O'x)}O(x$}O(y%PO~O#k#_aa#_a#`#_a'y#_a!]#_a!k#_a!_#_a!Y#_a~P#/XO#k(_XP(_XR(_X[(_Xa(_Xj(_Xr(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X'y(_X(`(_X(q(_X!k(_X!Y(_X'v(_Xv(_X!_(_X%i(_X!g(_X~P!6`O!].oO!k(jX~P!:aO!k.rO~O!Y.tO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#2wO#n$OO~P#2wOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#5fO#r$QO~P#5fOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(`VOa#mi!]#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(`VO(y#}Oa#mi!]#mi#z#mi#{#mi'y#mi(q#mi(x#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#:kO#x#mi~P#:kO#v$SO~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(`VO(x#|O(y#}Oa#mi!]#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#=aO#z$WO~P#=aOP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X!]]X!^]X~O$O]X~P#@OOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO#z<XO#{<YO(`VO(q$YO(x#|O(y#}O~O$O.vO~P#B]O#S$dO#`<`O$Q<`O$O(fX!^(fX~P! jOa'ca!]'ca'y'ca'v'ca!k'ca!Y'cav'ca!_'ca%i'ca!g'ca~P!:aO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO(x#mi(y#mi~P#E_On=|O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P#E_O!].zOg(oX~P!0{Og.|O~Oa$Pi!]$Pi'y$Pi'v$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:aO$].}O$_.}O~O$]/OO$_/OO~O!g)fO#`/PO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/QO~O!_)iO$Z/SO$])hO$_)hO$f/TO~O!]<ZO!^(eX~P#B]O!^/UO~O!g)fO$f(zX~O$f/WO~Ov/XO~P!&oOx)wO(a)xO(b/[O~O!S/_O~O(x$}On%aa!Q%aa'x%aa(y%aa!]%aa#`%aa~Og%aa$O%aa~P#LaO(y%POn%ca!Q%ca'x%ca(x%ca!]%ca#`%ca~Og%ca$O%ca~P#MSO!]fX!gfX!kfX!k$zX(qfX~P!/wO![/hO!]([O(S/gO!Y(uP!Y)OP~P!1jOr*pO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO~Os<oO!S/iO![+XO!^*mO(d<nO!^(wP~P#NmO!k/jO~P#/XO!]/kO!g#vO(q'nO!k(}X~O!k/pO~O!S%gO![*[O!_%hO(S%fO!k(}P~O#k/rO~O!Y$zX!]$zX!g%RX~P!/wO!]/sO!Y)OX~P#/XO!g/uO~O!Y/wO~OpkO(S/xO~P.iOh%VOr/}O!g#vO!l%dO(q'nO~O!g+fO~Oa%mO!]0RO'y%mO~O!^0TO~P!5^O!c0UO!d0UO(T!lO~P##tOs!nO!S0VO(UTO(XUO(d!mO~O#[0XO~Og%aa!]%aa#`%aa$O%aa~P!0{Og%ca!]%ca#`%ca$O%ca~P!0{Oj%cOk%cOl%cO(S&XOg'lX!]'lX~O!]*vOg(]a~Og0bO~OR0cO!Q0cO!S0dO#S$dOn}a'x}a(x}a(y}a!]}a#`}a~Og}a$O}a~P$&vO!Q)|O'x)}On$sa(x$sa(y$sa!]$sa#`$sa~Og$sa$O$sa~P$'rO!Q)|O'x)}On$ua(x$ua(y$ua!]$ua#`$ua~Og$ua$O$ua~P$(eO#k0gO~Og%Ta!]%Ta#`%Ta$O%Ta~P!0{On0iO#`0hOg(^a!](^a~O!g#vO~O#k0lO~O!]+ZOa)Sa'y)Sa~OR#zO!Q#yO!S#{O!l#xO(`VOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(q!ri(x!ri(y!ri~Oa!ri'y!ri'v!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$*bOh%VOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~Op0uO%]0vO(S0tO~P$,xO!g+fOa([a!_([a'y([a!]([a~O#k0|O~O[]X!]fX!^fX~O!]0}O!^)WX~O!^1PO~O[1QO~Ob1SO(S+nO(UTO(XUO~O!_&OO(S%fO`'tX!]'tX~O!]+sO`)Va~O!k1VO~P!:aO[1YO~O`1ZO~O#`1^O~On1aO!_$|O~O(d(zO!^)TP~Oh%VOn1jO!_1gO%i1iO~O[1tO!]1rO!^)UX~O!^1uO~O`1wOa%mO'y%mO~O(S#nO(UTO(XUO~O#S$dO#`$eO$Q$eOP(fXR(fX[(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~Oj1zO&Z1{Oa(fX~P$2cOj1zO#`$eO&Z1{O~Oa1}O~P%[Oa2PO~O&d2SOP&biQ&biS&biY&bia&bid&bie&bil&bip&bir&bis&bit&biz&bi|&bi!O&bi!S&bi!W&bi!X&bi!_&bi!i&bi!l&bi!o&bi!p&bi!q&bi!s&bi!u&bi!x&bi!|&bi$W&bi$n&bi%h&bi%j&bi%l&bi%m&bi%n&bi%q&bi%s&bi%v&bi%w&bi%y&bi&V&bi&]&bi&_&bi&a&bi&c&bi&f&bi&l&bi&r&bi&t&bi&v&bi&x&bi&z&bi'v&bi(S&bi(U&bi(X&bi(`&bi(n&bi!^&bib&bi&i&bi~Ob2YO!^2WO&i2XO~P`O!_XO!l2[O~O&p,vOP&kiQ&kiS&kiY&kia&kid&kie&kil&kip&kir&kis&kit&kiz&ki|&ki!O&ki!S&ki!W&ki!X&ki!_&ki!i&ki!l&ki!o&ki!p&ki!q&ki!s&ki!u&ki!x&ki!|&ki$W&ki$n&ki%h&ki%j&ki%l&ki%m&ki%n&ki%q&ki%s&ki%v&ki%w&ki%y&ki&V&ki&]&ki&_&ki&a&ki&c&ki&f&ki&l&ki&r&ki&t&ki&v&ki&x&ki&z&ki'v&ki(S&ki(U&ki(X&ki(`&ki(n&ki!^&ki&d&kib&ki&i&ki~O!Y2bO~O!]!aa!^!aa~P#B]Os!nO!S!oO![2hO(d!mO!]'WX!^'WX~P@cO!]-WO!^(ha~O!]'^X!^'^X~P!9iO!]-ZO!^(wa~O!^2oO~P'_Oa%mO#`2xO'y%mO~Oa%mO!g#vO#`2xO'y%mO~Oa%mO!g#vO!p2|O#`2xO'y%mO(q'nO~Oa%mO'y%mO~P!:aO!]$_Ov$qa~O!Y'Vi!]'Vi~P!:aO!](TO!Y(gi~O!]([O!Y(ui~O!Y(vi!](vi~P!:aO!](si!k(sia(si'y(si~P!:aO#`3OO!](si!k(sia(si'y(si~O!](hO!k(ri~O!S%gO!_%hO!|]O#i3TO#j3SO(S%fO~O!S%gO!_%hO#j3SO(S%fO~On3[O!_'^O%i3ZO~Oh%VOn3[O!_'^O%i3ZO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aav%aa!_%aa%i%aa!g%aa~P#LaO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%cav%ca!_%ca%i%ca!g%ca~P#MSO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/XO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/XO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'y}a(`}a(q}a!k}a!Y}a'v}av}a!_}a%i}a!g}a~P$&vO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'y$sa(`$sa(q$sa!k$sa!Y$sa'v$sav$sa!_$sa%i$sa!g$sa~P$'rO#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'y$ua(`$ua(q$ua!k$ua!Y$ua'v$uav$ua!_$ua%i$ua!g$ua~P$(eO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'y%Ta(`%Ta(q%Ta!k%Ta!Y%Ta'v%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/XOa#cq!]#cq'y#cq'v#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:aO![3dO!]'XX!k'XX~P%[O!].oO!k(ja~O!].oO!k(ja~P!:aO!Y3gO~O$O!na!^!na~PKaO$O!ja!]!ja!^!ja~P#B]O$O!ra!^!ra~P!<wO$O!ta!^!ta~P!?_Og'[X!]'[X~P!+xO!].zOg(oa~OSfO!_3{O$d3|O~O!^4QO~Ov4RO~P#/XOa$mq!]$mq'y$mq'v$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:aO!Y4TO~P!&oO!S4UO~O!Q)|O'x)}O(y%POn'ha(x'ha!]'ha#`'ha~Og'ha$O'ha~P%,XO!Q)|O'x)}On'ja(x'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P%,zO(q$YO~P#/XO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!/wO(S<xO~P!1jO!S%gO![4XO!_%hO(S%fO!]'dX!k'dX~O!]/kO!k(}a~O!]/kO!g#vO!k(}a~O!]/kO!g#vO(q'nO!k(}a~Og$|i!]$|i#`$|i$O$|i~P!0{O![4aO!Y'fX!]'fX~P!3iO!]/sO!Y)Oa~O!]/sO!Y)Oa~P#/XOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~Oj%YX!g%YX~P%0kOj4fO!g#vO~Oh%VO!g#vO!l%dO~Oh%VOr4kO!l%dO(q'nO~Or4pO!g#vO(q'nO~Os!nO!S4qO(UTO(XUO(d!mO~O(x$}On%ai!Q%ai'x%ai(y%ai!]%ai#`%ai~Og%ai$O%ai~P%4[O(y%POn%ci!Q%ci'x%ci(x%ci!]%ci#`%ci~Og%ci$O%ci~P%4}Og(^i!](^i~P!0{O#`4wOg(^i!](^i~P!0{O!k4zO~Oa$oq!]$oq'y$oq'v$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:aO!Y5QO~O!]5RO!_)PX~P#/XOa$zX!_$zX%^]X'y$zX!]$zX~P!/wO%^5UOaoXnoX!QoX!_oX'xoX'yoX(xoX(yoX!]oX~Op5VO(S#nO~O%^5UO~Ob5]O%j5^O(S+nO(UTO(XUO!]'sX!^'sX~O!]0}O!^)Wa~O[5bO~O`5cO~Oa%mO'y%mO~P#/XO!]5kO#`5mO!^)TX~O!^5nO~Or5tOs!nO!S*fO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!pO#W!pO#X!pO#[5sO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O!^5rO~P%:YOn5yO!_1gO%i5xO~Oh%VOn5yO!_1gO%i5xO~Ob6QO(S#nO(UTO(XUO!]'rX!^'rX~O!]1rO!^)Ua~O(UTO(XUO(d6SO~O`6WO~Oj6ZO&Z6[O~PM|O!k6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO!^6dO&i2XO~P`O!g6fO~O!g6hOh(ii!](ii!^(ii!g(ii!l(iir(ii(q(ii~O!]#hi!^#hi~P#B]O#`6iO!]#hi!^#hi~O!]!ai!^!ai~P#B]Oa%mO#`6rO'y%mO~Oa%mO!g#vO#`6rO'y%mO~O!](sq!k(sqa(sq'y(sq~P!:aO!](hO!k(rq~O!S%gO!_%hO#j6yO(S%fO~O!_'^O%i6|O~On7QO!_'^O%i6|O~O#k'haP'haR'ha['haa'haj'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha'y'ha(`'ha(q'ha!k'ha!Y'ha'v'hav'ha!_'ha%i'ha!g'ha~P%,XO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'y'ja(`'ja(q'ja!k'ja!Y'ja'v'jav'ja!_'ja%i'ja!g'ja~P%,zO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'y$|i(`$|i(q$|i!k$|i!Y$|i'v$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/XO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'y%ai(`%ai(q%ai!k%ai!Y%ai'v%aiv%ai!_%ai%i%ai!g%ai~P%4[O#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'y%ci(`%ci(q%ci!k%ci!Y%ci'v%civ%ci!_%ci%i%ci!g%ci~P%4}O!]'Xa!k'Xa~P!:aO!].oO!k(ji~O$O#ci!]#ci!^#ci~P#B]OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#n#mi~P%MXO#n<PO~P%MXOP$[OR#zOr<]O!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#r#mi~P& aO#r<RO~P& aOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O(`VO#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#v#mi~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO(`VO(y#}O#z#mi#{#mi$O#mi(q#mi(x#mi!]#mi!^#mi~O#x<VO~P&%jO#x#mi~P&%jO#v<TO~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO(`VO(x#|O(y#}O#{#mi$O#mi(q#mi!]#mi!^#mi~O#z#mi~P&'yO#z<XO~P&'yOa#|y!]#|y'y#|y'v#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:aO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO(x#mi(y#mi~P&*uOn=}O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P&*uO#S$dOP(_XR(_X[(_Xj(_Xn(_Xr(_X!Q(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X$O(_X'x(_X(`(_X(q(_X(x(_X(y(_X!](_X!^(_X~O$O$Pi!]$Pi!^$Pi~P#B]O$O!ri!^!ri~P$*bOg'[a!]'[a~P!0{O!^7dO~O!]'ca!^'ca~P#B]O!Y7eO~P#/XO!g#vO(q'nO!]'da!k'da~O!]/kO!k(}i~O!]/kO!g#vO!k(}i~Og$|q!]$|q#`$|q$O$|q~P!0{O!Y'fa!]'fa~P#/XO!g7lO~O!]/sO!Y)Oi~P#/XO!]/sO!Y)Oi~O!Y7oO~Oh%VOr7tO!l%dO(q'nO~Oj7vO!g#vO~Or7yO!g#vO(q'nO~O!Q)|O'x)}O(y%POn'ia(x'ia!]'ia#`'ia~Og'ia$O'ia~P&3vO!Q)|O'x)}On'ka(x'ka(y'ka!]'ka#`'ka~Og'ka$O'ka~P&4iO!Y7{O~Og%Oq!]%Oq#`%Oq$O%Oq~P!0{Og(^q!](^q~P!0{O#`7|Og(^q!](^q~P!0{Oa$oy!]$oy'y$oy'v$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:aO!g6hO~O!]5RO!_)Pa~O!_'^OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(`$Ta(q$Ta(x$Ta(y$Ta~O%i6|O~P&7ZO%^8QOa%[i!_%[i'y%[i!]%[i~Oa#cy!]#cy'y#cy'v#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:aO[8SO~Ob8UO(S+nO(UTO(XUO~O!]0}O!^)Wi~O`8YO~O(d(zO!]'oX!^'oX~O!]5kO!^)Ta~O!^8cO~P%:YO(n!sO~P$${O#[8dO~O!_1gO~O!_1gO%i8fO~On8iO!_1gO%i8fO~O[8nO!]'ra!^'ra~O!]1rO!^)Ui~O!k8rO~O!k8sO~O!k8vO~O!k8vO~P%[Oa8xO~O!g8yO~O!k8zO~O!](vi!^(vi~P#B]Oa%mO#`9SO'y%mO~O!](sy!k(sya(sy'y(sy~P!:aO!](hO!k(ry~O%i9VO~P&7ZO!_'^O%i9VO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'y$|q(`$|q(q$|q!k$|q!Y$|q'v$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/XO#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'y'ia(`'ia(q'ia!k'ia!Y'ia'v'iav'ia!_'ia%i'ia!g'ia~P&3vO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'y'ka(`'ka(q'ka!k'ka!Y'ka'v'kav'ka!_'ka%i'ka!g'ka~P&4iO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'y%Oq(`%Oq(q%Oq!k%Oq!Y%Oq'v%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/XO!]'Xi!k'Xi~P!:aO$O#cq!]#cq!^#cq~P#B]O(x$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(`%aa(q%aa!]%aa!^%aa~On%aa!Q%aa'x%aa(y%aa~P&HnO(y%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(`%ca(q%ca!]%ca!^%ca~On%ca!Q%ca'x%ca(x%ca~P&JuOn=}O!Q)|O'x)}O(y%PO~P&HnOn=}O!Q)|O'x)}O(x$}O~P&JuOR0cO!Q0cO!S0dO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'x}a(`}a(q}a(x}a(y}a!]}a!^}a~O!Q)|O'x)}OP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(`$sa(q$sa(x$sa(y$sa!]$sa!^$sa~O!Q)|O'x)}OP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(`$ua(q$ua(x$ua(y$ua!]$ua!^$ua~On=}O!Q)|O'x)}O(x$}O(y%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(`%Ta(q%Ta!]%Ta!^%Ta~P'%zO$O$mq!]$mq!^$mq~P#B]O$O$oq!]$oq!^$oq~P#B]O!^9dO~O$O9eO~P!0{O!g#vO!]'di!k'di~O!g#vO(q'nO!]'di!k'di~O!]/kO!k(}q~O!Y'fi!]'fi~P#/XO!]/sO!Y)Oq~Or9lO!g#vO(q'nO~O[9nO!Y9mO~P#/XO!Y9mO~Oj9tO!g#vO~Og(^y!](^y~P!0{O!]'ma!_'ma~P#/XOa%[q!_%[q'y%[q!]%[q~P#/XO[9yO~O!]0}O!^)Wq~O#`9}O!]'oa!^'oa~O!]5kO!^)Ti~P#B]O!S:PO~O!_1gO%i:SO~O(UTO(XUO(d:XO~O!]1rO!^)Uq~O!k:[O~O!k:]O~O!k:^O~O!k:^O~P%[O#`:aO!]#hy!^#hy~O!]#hy!^#hy~P#B]O%i:fO~P&7ZO!_'^O%i:fO~O$O#|y!]#|y!^#|y~P#B]OP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(`$|i(q$|i!]$|i!^$|i~P'%zO!Q)|O'x)}O(y%POP'haR'ha['haj'han'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha$O'ha(`'ha(q'ha(x'ha!]'ha!^'ha~O!Q)|O'x)}OP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(`'ja(q'ja(x'ja(y'ja!]'ja!^'ja~O(x$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'x%ai(`%ai(q%ai(y%ai!]%ai!^%ai~O(y%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'x%ci(`%ci(q%ci(x%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#B]O$O#cy!]#cy!^#cy~P#B]O!g#vO!]'dq!k'dq~O!]/kO!k(}y~O!Y'fq!]'fq~P#/XOr:pO!g#vO(q'nO~O[:tO!Y:sO~P#/XO!Y:sO~Og(^!R!](^!R~P!0{Oa%[y!_%[y'y%[y!]%[y~P#/XO!]0}O!^)Wy~O!]5kO!^)Tq~O(S:zO~O!_1gO%i:}O~O!k;QO~O%i;VO~P&7ZOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(`$|q(q$|q!]$|q!^$|q~P'%zO!Q)|O'x)}O(y%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(`'ia(q'ia(x'ia!]'ia!^'ia~O!Q)|O'x)}OP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(`'ka(q'ka(x'ka(y'ka!]'ka!^'ka~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(`%Oq(q%Oq!]%Oq!^%Oq~P'%zOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!0{O!Y;ZO~P#/XOr;[O!g#vO(q'nO~O[;^O!Y;ZO~P#/XO!]'oq!^'oq~P#B]O!]#h!Z!^#h!Z~P#B]O#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'y%e!Z(`%e!Z(q%e!Z!k%e!Z!Y%e!Z'v%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/XOr;fO!g#vO(q'nO~O!Y;gO~P#/XOr;nO!g#vO(q'nO~O!Y;oO~P#/XOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(`%e!Z(q%e!Z!]%e!Z!^%e!Z~P'%zOr;rO!g#vO(q'nO~Ov(eX~P1qO!Q%qO~P!)PO(T!lO~P!)PO!YfX!]fX#`fX~P%0kOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~O!gfX!k]X!kfX(qfX~P'JsOP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_XO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]<ZO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<fO!S${O!_$|O!i=wO!l$xO#j<lO$W%_O$t<hO$v<jO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Ol)bO~P( iOr!eX(q!eX~P# }Or(iX(q(iX~P#!pO!^]X!^fX~P'JsO!YfX!Y$zX!]fX!]$zX#`fX~P!/wO#k<OO~O!g#vO#k<OO~O#`<`O~Oj<SO~O#`<pO!](vX!^(vX~O#`<`O!](tX!^(tX~O#k<qO~Og<sO~P!0{O#k<yO~O#k<zO~O!g#vO#k<{O~O!g#vO#k<qO~O$O<|O~P#B]O#k<}O~O#k=OO~O#k=TO~O#k=UO~O#k=VO~O#k=WO~O$O=XO~P!0{O$O=YO~P!0{Ok#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~'}T#o!X'{(T#ps#n#qr!Q'|$]'|(S$_(d~",goto:"$8g)[PPPPPP)]PP)`P)qP+R/WPPPP6bPP6xPP<pPPP@dP@zP@zPPP@zPCSP@zP@zP@zPCWPC]PCzPHtPPPHxPPPPHxK{PPPLRLsPHxPHxPP! RHxPPPHxPHxP!#YHxP!&p!'u!(OP!(r!(v!(r!,TPPPPPPP!,t!'uPP!-U!.vP!2SHxHx!2X!5e!:R!:R!>QPPP!>YHxPPPPPPPPP!AiP!BvPPHx!DXPHxPHxHxHxHxHxPHx!EkP!HuP!K{P!LP!LZ!L_!L_P!HrP!Lc!LcP# iP# mHxPHx# s#$xCW@zP@zP@z@zP#&V@z@z#(i@z#+a@z#-m@z@z#.]#0q#0q#0v#1P#0q#1[PP#0qP@z#1t@z#5s@z@z6bPPP#9xPPP#:c#:cP#:cP#:y#:cPP#;PP#:vP#:v#;d#:v#<O#<U#<X)`#<[)`P#<c#<c#<cP)`P)`P)`P)`PP)`P#<i#<lP#<l)`P#<pP#<sP)`P)`P)`P)`P)`P)`)`PP#<y#=P#=[#=b#=h#=n#=t#>S#>Y#>d#>j#>t#>z#?[#?b#@S#@f#@l#@r#AQ#Ag#C[#Cj#Cq#E]#Ek#G]#Gk#Gq#Gw#G}#HX#H_#He#Ho#IR#IXPPPPPPPPPPP#I_PPPPPPP#JS#MZ#Ns#Nz$ SPPP$&nP$&w$)p$0Z$0^$0a$1`$1c$1j$1rP$1x$1{P$2i$2m$3e$4s$4x$5`PP$5e$5k$5o$5r$5v$5z$6v$7_$7v$7z$7}$8Q$8W$8Z$8_$8cR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0w+fQ1S+rQ1y,fQ3W.bQ5V0vQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"\u26A0 ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:379,context:wU,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,236,242,244,246,248,251,257,263,265,267,269,271,273,274,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[TU],skippedNodes:[0,5,6,277],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Vp(Y!b'{0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(W#S$i&j'|0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Vp(Y!b'|0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(U':f$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Vp(Y!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Vp(Y!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Y!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Y!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(VpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(VpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Vp(Y!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(n%1l(Vp(Y!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Vp(Y!b$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Vp(Y!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Vp(Y!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(y+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(X';W$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(VpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Vp(Y!b(T%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Vp(Y!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Vp(Y!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Vp(Y!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Vp(Y!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Y!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Y!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Y!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Y!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Y!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Y!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Vp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Vp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Vp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Vp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(VpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(VpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Vp(Y!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Vp(Y!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Vp(Y!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Vp(Y!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Vp(Y!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Vp(Y!b'}0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Vp(Y!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Y!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Y!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(VpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(VpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Vp(Y!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Vp(Y!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(q(Ct$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Vp(Y!b(`+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Vp(Y!b(S,2j$_#t(d$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Vp(Y!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(x+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Vp(Y!b'{0/l$]#t(S,2j(d$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Vp(Y!b'|0/l$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[kU,SU,vU,CU,2,3,4,5,6,7,8,9,10,11,12,13,14,xU,new as("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(b~~",141,339),new as("j~RQYZXz{^~^O(P~~aP!P!Qd~iO(Q~~",25,322)],topRules:{Script:[0,7],SingleExpression:[1,275],SingleClassItem:[2,276]},dialects:{jsx:0,ts:15098},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:326,get:n=>PU[n]||-1},{term:342,get:n=>AU[n]||-1},{term:95,get:n=>MU[n]||-1}],tokenPrec:15124})});function UE(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function QU(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=UE(e)+UE(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function WE(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:QU(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function YE(n,e){return t=>{for(let r=qe(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}function $U(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}function jw(n,e){return X.create(n.filter(t=>t.field==e).map(t=>X.range(t.from,t.to)))}function IU(n){let e=Uw.parse(n);return(t,r,i,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,i),{main:a}=t.state.selection,c={changes:{from:i,to:s==a.from?a.to:s,insert:he.of(o)},scrollIntoView:!0,annotations:r?[EU.of(r),Et.userEvent.of("input.complete")]:void 0};if(l.length&&(c.selection=jw(l,0)),l.some(h=>h.field>0)){let h=new jl(l,0),u=c.effects=[fh.of(h)];t.state.field(uh,!1)===void 0&&u.push(De.appendConfig.of([uh,zU,ZU,RU]))}t.dispatch(t.state.update(c))}}function HE(n){return({state:e,dispatch:t})=>{let r=e.field(uh,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:jw(r.ranges,i),effects:fh.of(s?null:new jl(r.ranges,i)),scrollIntoView:!0})),!0}}function Zt(n,e){return Object.assign(Object.assign({},e),{apply:IU(n)})}var Vp,EU,kJ,RU,Zw,qw,Uw,DU,NU,jl,fh,LU,uh,_U,BU,VU,XU,jE,zU,ZU,FE,SJ,Ww=S(()=>{vr();Er();gs();Vp=class{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=qe(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search($U(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}};EU=nr.define(),kJ=typeof navigator=="object"&&/Win/.test(navigator.platform),RU=B.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Zw=class{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}},qw=class n{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,wt.TrackDel),r=e.mapPos(this.to,1,wt.TrackDel);return t==null||r==null?null:new n(this.field,t,r)}},Uw=class n{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(r.length){let c=o,h=/^\t*/.exec(a)[0].length;for(let u=0;u<h;u++)c+=e.facet(_p);i.push(t+c.length-h),a=c+a.slice(h)}r.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new qw(a.field,i[a.line]+a.from,i[a.line]+a.to));return{text:r,ranges:l}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",c=-1,h=a.replace(/\\[{}]/g,u=>u[1]);for(let u=0;u<t.length;u++)(l!=null?t[u].seq==l:h&&t[u].name==h)&&(c=u);if(c<0){let u=0;for(;u<t.length&&(l==null||t[u].seq!=null&&t[u].seq<l);)u++;t.splice(u,0,{seq:l,name:h}),c=u;for(let f of i)f.field>=c&&f.field++}i.push(new Zw(c,r.length,s.index,s.index+h.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(l,a,c)=>{for(let h of i)h.line==r.length&&h.from>c&&(h.from--,h.to--);return a}),r.push(o)}return new n(r,i)}},DU=$e.widget({widget:new class extends es{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),NU=$e.mark({class:"cm-snippetField"}),jl=class n{constructor(e,t){this.ranges=e,this.active=t,this.deco=$e.set(e.map(r=>(r.from==r.to?DU:NU).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new n(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}},fh=De.define({map(n,e){return n&&n.map(e)}}),LU=De.define(),uh=tr.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(fh))return t.value;if(t.is(LU)&&n)return new jl(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>B.decorations.from(n,e=>e?e.deco:$e.none)});_U=({state:n,dispatch:e})=>n.field(uh,!1)?(e(n.update({effects:fh.of(null)})),!0):!1,BU=HE(1),VU=HE(-1),XU=[{key:"Tab",run:BU,shift:VU},{key:"Escape",run:_U}],jE=j.define({combine(n){return n.length?n[0]:XU}}),zU=fi.highest(Jc.compute([jE],n=>n.facet(jE)));ZU=B.domEventHandlers({mousedown(n,e){let t=e.state.field(uh,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:jw(t.ranges,i.field),effects:fh.of(t.ranges.some(s=>s.field>i.field)?new jl(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),FE=new class extends rr{};FE.startSide=1;FE.endSide=-1;SJ=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent)});function dh(n){return(e,t)=>{let r=e.node.getChild("VariableDefinition");return r&&t(r,n),!0}}function nR(n,e){let t=GE.get(e);if(t)return t;let r=[],i=!0;function s(o,l){let a=n.sliceString(o.from,o.to);r.push({label:a,type:l})}return e.cursor(be.IncludeAnonymous).iterate(o=>{if(i)i=!1;else if(o.name){let l=jU[o.name];if(l&&l(o,s)||tR.has(o.name))return!1}else if(o.to-o.from>8192){for(let l of nR(n,o.node))r.push(l);return!1}}),GE.set(e,r),r}function WU(n){let e=qe(n.state).resolveInner(n.pos,-1);if(rR.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&KE.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let r=[];for(let i=e;i;i=i.parent)tR.has(i.name)&&(r=r.concat(nR(n.state.doc,i)));return{options:r,from:t?e.from:n.pos,validFor:KE}}function K(n={}){let e=n.jsx?n.typescript?Fw:Hw:n.typescript?Yw:lr,t=n.typescript?qU.concat(YU):eR.concat(oR);return new or(e,[lr.data.of({autocomplete:YE(rR,WE(t))}),lr.data.of({autocomplete:WU}),n.jsx?GU:[]])}function HU(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(n.name=="JSXEscape"||!n.parent)return null;n=n.parent}}function JE(n,e,t=n.length){for(let r=e==null?void 0:e.firstChild;r;r=r.nextSibling)if(r.name=="JSXIdentifier"||r.name=="JSXBuiltin"||r.name=="JSXNamespacedName"||r.name=="JSXMemberExpression")return n.sliceString(r.from,Math.min(r.to,t));return""}var eR,qU,GE,tR,UU,jU,KE,rR,lr,iR,Yw,Hw,Fw,sR,oR,YU,FU,GU,Xp=S(()=>{qE();gs();vr();Er();Ww();gi();eR=[Zt("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Zt("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Zt("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Zt("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Zt("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Zt(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Zt("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Zt(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Zt(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Zt('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Zt('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],qU=eR.concat([Zt("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Zt("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Zt("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),GE=new Vl,tR=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);UU=["FunctionDeclaration"],jU={FunctionDeclaration:dh("function"),ClassDeclaration:dh("class"),ClassExpression:()=>!0,EnumDeclaration:dh("constant"),TypeAliasDeclaration:dh("type"),NamespaceDeclaration:dh("namespace"),VariableDefinition(n,e){n.matchContext(UU)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};KE=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,rR=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];lr=ps.define({name:"javascript",parser:ZE.configure({props:[ms.add({IfStatement:Ul({except:/^\s*({|else\b)/}),TryStatement:Ul({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:$E,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:r?1:2)*n.unit},Block:QE({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":Ul({except:/^\s*{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),bi.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":Bp,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),iR={test:n=>/^JSX/.test(n.name),facet:ah({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Yw=lr.configure({dialect:"ts"},"typescript"),Hw=lr.configure({dialect:"jsx",props:[Ip.add(n=>n.isTop?[iR]:void 0)]}),Fw=lr.configure({dialect:"jsx ts",props:[Ip.add(n=>n.isTop?[iR]:void 0)]},"typescript"),sR=n=>({label:n,type:"keyword"}),oR="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(sR),YU=oR.concat(["declare","implements","private","protected","public"].map(sR));FU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),GU=B.inputHandler.of((n,e,t,r,i)=>{if((FU?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||r!=">"&&r!="/"||!lr.isActiveAt(n.state,e,-1))return!1;let s=i(),{state:o}=s,l=o.changeByRange(a=>{var c;let{head:h}=a,u=qe(o).resolveInner(h-1,-1),f;if(u.name=="JSXStartTag"&&(u=u.parent),!(o.doc.sliceString(h-1,h)!=r||u.name=="JSXAttributeValue"&&u.to>h)){if(r==">"&&u.name=="JSXFragmentTag")return{range:a,changes:{from:h,insert:"</>"}};if(r=="/"&&u.name=="JSXStartCloseTag"){let d=u.parent,p=d.parent;if(p&&d.from==h-2&&((f=JE(o.doc,p.firstChild,h))||((c=p.firstChild)===null||c===void 0?void 0:c.name)=="JSXFragmentTag")){let m=`${f}>`;return{range:X.cursor(h+m.length,-1),changes:{from:h,insert:m}}}}else if(r==">"){let d=HU(u);if(d&&d.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(h,h+2))&&(f=JE(o.doc,d,h)))return{range:a,changes:{from:h,insert:`</${f}>`}}}}return{range:a}});return l.changes.empty?!1:(n.dispatch([s,o.update(l,{userEvent:"input.complete",scrollIntoView:!0})]),!0)})});function Wl(n,e,t=n.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?n.sliceString(i.from,Math.min(i.to,t)):""}function Yl(n,e=!1){for(;n;n=n.parent)if(n.name=="Element")if(e)e=!1;else return n;return null}function fR(n,e,t){let r=t.tags[Wl(n,Yl(e))];return(r==null?void 0:r.children)||t.allTags}function ex(n,e){let t=[];for(let r=Yl(e);r&&!r.type.isTop;r=Yl(r.parent)){let i=Wl(n,r);if(i&&r.lastChild.name=="CloseTag")break;i&&t.indexOf(i)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&t.push(i)}return t}function lR(n,e,t,r,i){let s=/\s*>/.test(n.sliceDoc(i,i+5))?"":">",o=Yl(t,!0);return{from:r,to:i,options:fR(n.doc,o,e).map(l=>({label:l,type:"type"})).concat(ex(n.doc,t).map((l,a)=>({label:"/"+l,apply:"/"+l+s,type:"type",boost:99-a}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function aR(n,e,t,r){let i=/\s*>/.test(n.sliceDoc(r,r+5))?"":">";return{from:t,to:r,options:ex(n.doc,e).map((s,o)=>({label:s,apply:s+i,type:"type",boost:99-o})),validFor:dR}}function JU(n,e,t,r){let i=[],s=0;for(let o of fR(n.doc,t,e))i.push({label:"<"+o,type:"type"});for(let o of ex(n.doc,t))i.push({label:"</"+o+">",type:"type",boost:99-s++});return{from:r,to:r,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function ej(n,e,t,r,i){let s=Yl(t),o=s?e.tags[Wl(n.doc,s)]:null,l=o&&o.attrs?Object.keys(o.attrs):[],a=o&&o.globalAttrs===!1?l:l.length?l.concat(e.globalAttrNames):e.globalAttrNames;return{from:r,to:i,options:a.map(c=>({label:c,type:"property"})),validFor:dR}}function tj(n,e,t,r,i){var s;let o=(s=t.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),l=[],a;if(o){let c=n.sliceDoc(o.from,o.to),h=e.globalAttrs[c];if(!h){let u=Yl(t),f=u?e.tags[Wl(n.doc,u)]:null;h=(f==null?void 0:f.attrs)&&f.attrs[c]}if(h){let u=n.sliceDoc(r,i).toLowerCase(),f='"',d='"';/^['"]/.test(u)?(a=u[0]=='"'?/^[^"]*$/:/^[^']*$/,f="",d=n.sliceDoc(i,i+1)==u[0]?"":u[0],u=u.slice(1),r++):a=/^[^\s<>='"]*$/;for(let p of h)l.push({label:p,apply:f+p+d,type:"constant"})}}return{from:r,to:i,options:l,validFor:a}}function pR(n,e){let{state:t,pos:r}=e,i=qe(t).resolveInner(r,-1),s=i.resolve(r);for(let o=r,l;s==i&&(l=i.childBefore(o));){let a=l.lastChild;if(!a||!a.type.isError||a.from<a.to)break;s=i=l,o=a.from}return i.name=="TagName"?i.parent&&/CloseTag$/.test(i.parent.name)?aR(t,i,i.from,r):lR(t,n,i,i.from,r):i.name=="StartTag"?lR(t,n,i,r,r):i.name=="StartCloseTag"||i.name=="IncompleteCloseTag"?aR(t,i,r,r):i.name=="OpenTag"||i.name=="SelfClosingTag"||i.name=="AttributeName"?ej(t,n,i,i.name=="AttributeName"?i.from:r,r):i.name=="Is"||i.name=="AttributeValue"||i.name=="UnquotedAttributeValue"?tj(t,n,i,i.name=="Is"?r:i.from,r):e.explicit&&(s.name=="Element"||s.name=="Text"||s.name=="Document")?JU(t,n,i,r):null}function mR(n){return pR(xo.default,n)}function nj(n){let{extraTags:e,extraGlobalAttributes:t}=n,r=t||e?new xo(e,t):xo.default;return i=>pR(r,i)}function xi(n={}){let e="",t;n.matchClosingTags===!1&&(e="noMatch"),n.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(n.nestedLanguages&&n.nestedLanguages.length||n.nestedAttributes&&n.nestedAttributes.length)&&(t=Qw((n.nestedLanguages||[]).concat(gR),(n.nestedAttributes||[]).concat(OR)));let r=t?yR.configure({wrap:t,dialect:e}):e?zp.configure({dialect:e}):zp;return new or(r,[zp.data.of({autocomplete:nj(n)}),n.autoCloseTags!==!1?ij:[],K().support,BE().support])}var ph,Gw,Kw,Jw,mn,U,KU,hR,uR,xo,dR,rj,gR,OR,yR,zp,cR,ij,Zp=S(()=>{mE();VE();Xp();Er();vr();gs();ph=["_blank","_self","_top","_parent"],Gw=["ascii","utf-8","utf-16","latin1","latin1"],Kw=["get","post","put","delete"],Jw=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],mn=["true","false"],U={},KU={a:{attrs:{href:null,ping:null,type:null,media:null,target:ph,hreflang:null}},abbr:U,address:U,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:U,aside:U,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:U,base:{attrs:{href:null,target:ph}},bdi:U,bdo:U,blockquote:{attrs:{cite:null}},body:U,br:U,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Jw,formmethod:Kw,formnovalidate:["novalidate"],formtarget:ph,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:U,center:U,cite:U,code:U,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:U,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:U,div:U,dl:U,dt:U,em:U,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:U,figure:U,footer:U,form:{attrs:{action:null,name:null,"accept-charset":Gw,autocomplete:["on","off"],enctype:Jw,method:Kw,novalidate:["novalidate"],target:ph}},h1:U,h2:U,h3:U,h4:U,h5:U,h6:U,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:U,hgroup:U,hr:U,html:{attrs:{manifest:null}},i:U,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Jw,formmethod:Kw,formnovalidate:["novalidate"],formtarget:ph,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:U,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:U,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:U,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Gw,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:U,noscript:U,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:U,param:{attrs:{name:null,value:null}},pre:U,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:U,rt:U,ruby:U,samp:U,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Gw}},section:U,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:U,source:{attrs:{src:null,type:null,media:null}},span:U,strong:U,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:U,summary:U,sup:U,table:U,tbody:U,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:U,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:U,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:U,time:{attrs:{datetime:null}},title:U,tr:U,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:U,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:U},hR={accesskey:null,class:null,contenteditable:mn,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:mn,autocorrect:mn,autocapitalize:mn,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":mn,"aria-autocomplete":["inline","list","both","none"],"aria-busy":mn,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":mn,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":mn,"aria-hidden":mn,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":mn,"aria-multiselectable":mn,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":mn,"aria-relevant":null,"aria-required":mn,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},uR="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(n=>"on"+n);for(let n of uR)hR[n]=null;xo=class{constructor(e,t){this.tags=Object.assign(Object.assign({},KU),e),this.globalAttrs=Object.assign(Object.assign({},hR),t),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}};xo.default=new xo;dR=/^[:\-\.\w\u00b7-\uffff]*$/;rj=lr.parser.configure({top:"SingleExpression"}),gR=[{tag:"script",attrs:n=>n.type=="text/typescript"||n.lang=="ts",parser:Yw.parser},{tag:"script",attrs:n=>n.type=="text/babel"||n.type=="text/jsx",parser:Hw.parser},{tag:"script",attrs:n=>n.type=="text/typescript-jsx",parser:Fw.parser},{tag:"script",attrs(n){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(n.type)},parser:rj},{tag:"script",attrs(n){return!n.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(n.type)},parser:lr.parser},{tag:"style",attrs(n){return(!n.lang||n.lang=="css")&&(!n.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(n.type))},parser:hh.parser}],OR=[{name:"style",parser:hh.parser.configure({top:"Styles"})}].concat(uR.map(n=>({name:n,parser:lr.parser}))),yR=ps.define({name:"html",parser:dE.configure({props:[ms.add({Element(n){let e=/^(\s*)(<\/)?/.exec(n.textAfter);return n.node.to<=n.pos+e[0].length?n.continue():n.lineIndent(n.node.from)+(e[2]?0:n.unit)},"OpenTag CloseTag SelfClosingTag"(n){return n.column(n.node.from)+n.unit},Document(n){if(n.pos+/\s*/.exec(n.textAfter)[0].length<n.node.to)return n.continue();let e=null,t;for(let r=n.node;;){let i=r.lastChild;if(!i||i.name!="Element"||i.to!=r.to)break;e=r=i}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?n.lineIndent(e.from)+n.unit:null}}),bi.add({Element(n){let e=n.firstChild,t=n.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:n.to}}}),DE.add({"OpenTag CloseTag":n=>n.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),zp=yR.configure({wrap:Qw(gR,OR)});cR=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),ij=B.inputHandler.of((n,e,t,r,i)=>{if(n.composing||n.state.readOnly||e!=t||r!=">"&&r!="/"||!zp.isActiveAt(n.state,e,-1))return!1;let s=i(),{state:o}=s,l=o.changeByRange(a=>{var c,h,u;let f=o.doc.sliceString(a.from-1,a.to)==r,{head:d}=a,p=qe(o).resolveInner(d,-1),m;if(f&&r==">"&&p.name=="EndTag"){let g=p.parent;if(((h=(c=g.parent)===null||c===void 0?void 0:c.lastChild)===null||h===void 0?void 0:h.name)!="CloseTag"&&(m=Wl(o.doc,g.parent,d))&&!cR.has(m)){let O=d+(o.doc.sliceString(d,d+1)===">"?1:0),w=`</${m}>`;return{range:a,changes:{from:d,to:O,insert:w}}}}else if(f&&r=="/"&&p.name=="IncompleteCloseTag"){let g=p.parent;if(p.from==d-2&&((u=g.lastChild)===null||u===void 0?void 0:u.name)!="CloseTag"&&(m=Wl(o.doc,g,d))&&!cR.has(m)){let O=d+(o.doc.sliceString(d,d+1)===">"?1:0),w=`${m}>`;return{range:X.cursor(d+w.length,-1),changes:{from:d,to:O,insert:w}}}}return{range:a}});return l.changes.empty?!1:(n.dispatch([s,o.update(l,{userEvent:"input.complete",scrollIntoView:!0})]),!0)})});var sj,bR,oj,lj,qp,nx,aj,cj,wR,hj,uj,xR,kR,tx,fj,SR,dj,pj,Up,rx=S(()=>{Er();gs();fs();sj="#e5c07b",bR="#e06c75",oj="#56b6c2",lj="#ffffff",qp="#abb2bf",nx="#7d8799",aj="#61afef",cj="#98c379",wR="#d19a66",hj="#c678dd",uj="#21252b",xR="#2c313a",kR="#282c34",tx="#353a42",fj="#3E4451",SR="#528bff",dj=B.theme({"&":{color:qp,backgroundColor:kR},".cm-content":{caretColor:SR},".cm-cursor, .cm-dropCursor":{borderLeftColor:SR},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:fj},".cm-panels":{backgroundColor:uj,color:qp},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:kR,color:nx,border:"none"},".cm-activeLineGutter":{backgroundColor:xR},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tx},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tx,borderBottomColor:tx},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:xR,color:qp}}},{dark:!0}),pj=yi.define([{tag:y.keyword,color:hj},{tag:[y.name,y.deleted,y.character,y.propertyName,y.macroName],color:bR},{tag:[y.function(y.variableName),y.labelName],color:aj},{tag:[y.color,y.constant(y.name),y.standard(y.name)],color:wR},{tag:[y.definition(y.name),y.separator],color:qp},{tag:[y.typeName,y.className,y.number,y.changed,y.annotation,y.modifier,y.self,y.namespace],color:sj},{tag:[y.operator,y.operatorKeyword,y.url,y.escape,y.regexp,y.link,y.special(y.string)],color:oj},{tag:[y.meta,y.comment],color:nx},{tag:y.strong,fontWeight:"bold"},{tag:y.emphasis,fontStyle:"italic"},{tag:y.strikethrough,textDecoration:"line-through"},{tag:y.link,color:nx,textDecoration:"underline"},{tag:y.heading,fontWeight:"bold",color:bR},{tag:[y.atom,y.bool,y.special(y.variableName)],color:wR},{tag:[y.processingInstruction,y.string,y.inserted],color:cj},{tag:y.invalid,color:lj}]),Up=[dj,ch(pj)]});var mj,vR,CR=S(()=>{re();Er();vr();Zp();Xp();rx();mj=ne.create({name:"rawBlock",group:"block",content:"",atom:!0,addAttributes(){return{content:{default:""},language:{default:"html"},blockId:{default:null}}},parseHTML(){return[{tag:"div[data-raw-block]",getAttrs:n=>{let e="",t=n.getAttribute("data-content-base64");if(t)try{e=decodeURIComponent(escape(atob(t)))}catch(r){e=n.getAttribute("data-content")||""}else e=n.getAttribute("data-content")||"";return{content:e,language:n.getAttribute("data-language")||"html",blockId:n.getAttribute("data-block-id")||null}}}]},renderHTML({HTMLAttributes:n,node:e}){return["div",{"data-raw-block":"true","data-content-base64":btoa(unescape(encodeURIComponent(e.attrs.content||""))),"data-language":e.attrs.language,"data-block-id":e.attrs.blockId,class:`raw-block raw-block-${e.attrs.language}`}]},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{let i=null,s=!1,o=document.createElement("div");o.className=`raw-block-container raw-block-${n.attrs.language}`;let l=document.createElement("div");l.className="raw-block-header",l.innerHTML=`
        <span class="raw-block-title">
          <span class="raw-block-icon">&lt;/&gt;</span>
          Raw Block
        </span>
        <div class="raw-block-controls">
          <button type="button" class="raw-block-delete-btn" title="Delete Raw Block">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
      `;let a=document.createElement("div");a.className="raw-block-editor";let c=f=>{switch(f){case"twig":return K();case"html":default:return xi()}};i=(()=>{let f=[c(n.attrs.language),Up,B.lineWrapping,B.updateListener.of(g=>{if(!s&&g.docChanged){let O=g.state.doc.toString();if(typeof t=="function"){let w=t();if(w!==void 0){s=!0;let k=r.state.tr;k.setNodeMarkup(w,null,{...n.attrs,content:O}),r.view.dispatch(k),s=!1}}}}),B.theme({"&":{fontSize:"14px",fontFamily:'"SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace'},".cm-content":{padding:"16px",minHeight:"53px"},".cm-focused":{outline:"none"},".cm-editor":{borderRadius:"0 0 8px 8px"}}),B.domEventHandlers({keydown:(g,O)=>(g.stopPropagation(),g.key==="Tab"?(g.preventDefault(),O.dispatch(O.state.replaceSelection("  ")),!0):!1)})],d=n.attrs.content||"";if(window.EditorPro&&window.EditorPro.activeEditor&&window.EditorPro.activeEditor.preserver){let g=window.EditorPro.activeEditor.preserver,O=window.EditorPro.activeEditor.preservedBlocks;O&&(d=g.restoreContent(d,O))}let p=xe.create({doc:d,extensions:f}),m=new B({state:p,parent:a});return a.addEventListener("click",()=>{m.focus()}),m})(),l.querySelector(".raw-block-delete-btn").addEventListener("click",()=>{if(typeof t=="function"){let f=t();if(f!==void 0){let d=r.state.tr;d.delete(f,f+n.nodeSize),r.view.dispatch(d)}}});let u=f=>{if(s)return;let d=f.content||"";if(window.EditorPro&&window.EditorPro.activeEditor&&window.EditorPro.activeEditor.preserver){let p=window.EditorPro.activeEditor.preserver,m=window.EditorPro.activeEditor.preservedBlocks;m&&(d=p.restoreContent(d,m))}if(d!==i.state.doc.toString()){s=!0;let p=i.state.update({changes:{from:0,to:i.state.doc.length,insert:d}});i.dispatch(p),s=!1}};return o.appendChild(l),o.appendChild(a),{dom:o,update:f=>f.type!==n.type?!1:(n=f,u(n.attrs),!0),destroy:()=>{i&&i.destroy()},stopEvent:f=>a.contains(f.target)?(f.type==="keydown"||f.type==="keyup"||f.type==="keypress",!0):!1,ignoreMutation:f=>a.contains(f.target)}}},addCommands(){return{setRawBlock:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n}),insertRawBlock:(n="",e="html",t=null)=>({commands:r})=>r.insertContent({type:this.name,attrs:{content:n,language:e,blockId:t||`raw_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}})}}}),vR=mj});function TR(n,e,t){if(t.pos==t.text.length||n!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let r=(n.type==R.OrderedList?bx:yx)(t,e,!1);return r>0&&(n.type!=R.BulletList||Ox(t,e,!1)<0)&&t.text.charCodeAt(t.pos+r-1)==n.value}function Bn(n){return n==32||n==9||n==10||n==13}function gh(n,e=0){for(;e<n.length&&Bn(n.charCodeAt(e));)e++;return e}function PR(n,e,t){for(;e>t&&Bn(n.charCodeAt(e-1));)e--;return e}function _R(n){if(n.next!=96&&n.next!=126)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;if(e<n.pos+3)return-1;if(n.next==96){for(let t=e;t<n.text.length;t++)if(n.text.charCodeAt(t)==96)return-1}return e}function BR(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function Ox(n,e,t){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let r=1;for(let i=n.pos+1;i<n.text.length;i++){let s=n.text.charCodeAt(i);if(s==n.next)r++;else if(!Bn(s))return-1}return t&&n.next==45&&zR(n)>-1&&n.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(jR.SetextHeading)>-1||r<3?-1:1}function VR(n,e){for(let t=n.stack.length-1;t>=0;t--)if(n.stack[t].type==e)return!0;return!1}function yx(n,e,t){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||Bn(n.text.charCodeAt(n.pos+1)))&&(!t||VR(e,R.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function bx(n,e,t){let r=n.pos,i=n.next;for(;i>=48&&i<=57;){r++;if(r==n.text.length)return-1;i=n.text.charCodeAt(r)}return r==n.pos||r>n.pos+9||i!=46&&i!=41||r<n.text.length-1&&!Bn(n.text.charCodeAt(r+1))||t&&!VR(e,R.OrderedList)&&(n.skipSpace(r+1)==n.text.length||r>n.pos+1||n.next!=49)?-1:r+1-n.pos}function XR(n){if(n.next!=35)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==35;)e++;if(e<n.text.length&&n.text.charCodeAt(e)!=32)return-1;let t=e-n.pos;return t>6?-1:t}function zR(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;let t=e;for(;e<n.text.length&&Bn(n.text.charCodeAt(e));)e++;return e==n.text.length?t:-1}function UR(n,e,t){if(n.next!=60)return-1;let r=n.text.slice(n.pos);for(let i=0,s=cx.length-(t?1:0);i<s;i++)if(cx[i][0].test(r))return i;return-1}function AR(n,e){let t=n.countIndent(e,n.pos,n.indent),r=n.countIndent(n.skipSpace(e),e,t);return r>=t+5?t+1:r}function ko(n,e,t){let r=n.length-1;r>=0&&n[r].to==e&&n[r].type==R.CodeText?n[r].to=t:n.push(ue(R.CodeText,e,t))}function ix(n,e){for(;e<n.length;e++){let t=n.charCodeAt(e);if(t==10)break;if(!Bn(t))return-1}return e}function WR(n,e,t,r,i){let s=n[e].to,o=[],l=[],a=t.from+r;function c(h,u){for(;u?h>=s:h>s;){let f=n[e+1].from-s;r+=f,h+=f,e++,s=n[e].to}}for(let h=t.firstChild;h;h=h.nextSibling){c(h.from+r,!0);let u=h.from+r,f,d=i.get(h.tree);d?f=d:h.to+r>s?(f=WR(n,e,h,r,i),c(h.to+r,!1)):f=h.toTree(),o.push(f),l.push(u-a)}return c(t.to+r,!1),new pe(t.type,o,l,t.to+r-a,t.tree?t.tree.propValues:void 0)}function mh(n){return n!=null&&n.length>0}function dx(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let e=dx(n[0]);if(n.length==1)return e;let t=dx(n.slice(1));if(!t||!e)return e||t;let r=(o,l)=>(o||Hl).concat(l||Hl),i=e.wrap,s=t.wrap;return{props:r(e.props,t.props),defineNodes:r(e.defineNodes,t.defineNodes),parseBlock:r(e.parseBlock,t.parseBlock),parseInline:r(e.parseInline,t.parseInline),remove:r(e.remove,t.remove),wrap:i?s?(o,l,a,c)=>i(s(o,l,a,c),l,a,c):i:s}}function Wp(n,e){let t=n.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}function ue(n,e,t,r){return new vo(n,e,t,r)}function yj(n,e,t,r,i){let{text:s}=n,o=n.char(i),l=i;if(e.unshift(ue(R.LinkMark,r,r+(t==R.Image?2:1))),e.push(ue(R.LinkMark,i-1,i)),o==40){let a=n.skipSpace(i+1),c=GR(s,a-n.offset,n.offset),h;c&&(a=n.skipSpace(c.to),a!=c.to&&(h=KR(s,a-n.offset,n.offset),h&&(a=n.skipSpace(h.to)))),n.char(a)==41&&(e.push(ue(R.LinkMark,i,i+1)),l=a+1,c&&e.push(c),h&&e.push(h),e.push(ue(R.LinkMark,a,l)))}else if(o==91){let a=JR(s,i-n.offset,n.offset,!1);a&&(e.push(a),l=a.to)}return ue(t,r,l,e)}function GR(n,e,t){if(n.charCodeAt(e)==60){for(let i=e+1;i<n.length;i++){let s=n.charCodeAt(i);if(s==62)return ue(R.URL,e+t,i+1+t);if(s==60||s==10)return!1}return null}else{let i=0,s=e;for(let o=!1;s<n.length;s++){let l=n.charCodeAt(s);if(Bn(l))break;if(o)o=!1;else if(l==40)i++;else if(l==41){if(!i)break;i--}else l==92&&(o=!0)}return s>e?ue(R.URL,e+t,s+t):s==n.length?null:!1}}function KR(n,e,t){let r=n.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=e+1,o=!1;s<n.length;s++){let l=n.charCodeAt(s);if(o)o=!1;else{if(l==i)return ue(R.LinkTitle,e+t,s+1+t);l==92&&(o=!0)}}return null}function JR(n,e,t,r){for(let i=!1,s=e+1,o=Math.min(n.length,s+999);s<o;s++){let l=n.charCodeAt(s);if(i)i=!1;else{if(l==93)return r?!1:ue(R.LinkLabel,e+t,s+1+t);if(r&&!Bn(l)&&(r=!1),l==91)return!1;l==92&&(i=!0)}}return null}function px(n,e){if(!e.length)return n;if(!n.length)return e;let t=n.slice(),r=0;for(let i of e){for(;r<t.length&&t[r].to<i.to;)r++;if(r<t.length&&t[r].from<i.from){let s=t[r];s instanceof vo&&(t[r]=new vo(s.type,s.from,s.to,px(s.children,[i])))}else t.splice(r++,0,i)}return t}function e2(n,e){let t=n;for(let r=1;r<e.length;r++){let i=e[r-1].to,s=e[r].from;i<n&&(t-=s-i)}return t}function xj(n,e,t){let r=[];for(let i=n.firstChild,s=e;;i=i.nextSibling){let o=i?i.from:t;if(o>s&&r.push({from:s,to:o}),!i)break;s=i.to}return r}function n2(n){let{codeParser:e,htmlParser:t}=n;return{wrap:Pp((i,s)=>{let o=i.type.id;if(e&&(o==R.CodeBlock||o==R.FencedCode)){let l="";if(o==R.FencedCode){let c=i.node.getChild(R.CodeInfo);c&&(l=s.read(c.from,c.to))}let a=e(l);if(a)return{parser:a,overlay:c=>c.type.id==R.CodeText}}else if(t&&(o==R.HTMLBlock||o==R.HTMLTag||o==R.CommentBlock))return{parser:t,overlay:xj(i.node,i.from,i.to)};return null})}}function Oh(n,e,t=0,r,i=0){let s=0,o=!0,l=-1,a=-1,c=!1,h=()=>{r.push(n.elt("TableCell",i+l,i+a,n.parser.parseInline(e.slice(l,a),i+l)))};for(let u=t;u<e.length;u++){let f=e.charCodeAt(u);f==124&&!c?((!o||l>-1)&&s++,o=!1,r&&(l>-1&&h(),r.push(n.elt("TableDelimiter",u+i,u+i+1))),l=a=-1):(c||f!=32&&f!=9)&&(l<0&&(l=u),a=u+1),c=!c&&f==92}return l>-1&&(s++,r&&h()),s}function QR(n,e){for(let t=e;t<n.length;t++){let r=n.charCodeAt(t);if(r==124)return!0;r==92&&t++}return!1}function NR(n,e,t,r){let i=0;for(let s=e;s<t;s++)n[s]==r&&i++;return i}function Pj(n,e){ER.lastIndex=e;let t=ER.exec(n);if(!t||Tj.exec(t[0])[0].indexOf("_")>-1)return-1;let r=e+t[0].length;for(;;){let i=n[r-1],s;if(/[?!.,:*_~]/.test(i)||i==")"&&NR(n,e,r,")")>NR(n,e,r,"("))r--;else if(i==";"&&(s=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(n.slice(e,r))))r=e+s.index;else break}return r}function LR(n,e){RR.lastIndex=e;let t=RR.exec(n);if(!t)return-1;let r=t[0][t[0].length-1];return r=="_"||r=="-"?-1:e+t[0].length-(r=="."?1:0)}function s2(n,e,t){return(r,i,s)=>{if(i!=n||r.char(s+1)==n)return-1;let o=[r.elt(t,s,s+1)];for(let l=s+1;l<r.end;l++){let a=r.char(l);if(a==n)return r.addElement(r.elt(e,s,l+1,o.concat(r.elt(t,l,l+1))));if(a==92&&o.push(r.elt("Escape",l,l+++2)),Bn(a))break}return-1}}var Yp,R,ox,lx,IR,ax,ZR,qR,cx,jp,hx,ux,jR,gj,Oj,fx,yh,YR,Hl,Hp,vo,Fp,HR,FR,So,Gp,qt,MR,bh,sx,wh,bj,mx,wj,t2,kj,Sj,r2,Kp,vj,gx,Cj,$R,ER,Tj,RR,DR,Aj,i2,o2,l2,a2,c2=S(()=>{gi();fs();Yp=class n{static create(e,t,r,i,s){let o=i+(i<<8)+e+(t<<4)|0;return new n(e,t,r,o,s,[],[])}constructor(e,t,r,i,s,o,l){this.type=e,this.value=t,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=l,this.hashProp=[[Y.contextHash,i]]}addChild(e,t){e.prop(Y.contextHash)!=this.hash&&(e=new pe(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;return r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from)),new pe(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(i,s,o)=>new pe(Ze.none,i,s,o,this.hashProp)})}};(function(n){n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.Autolink=33]="Autolink",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel",n[n.URL=44]="URL"})(R||(R={}));ox=class{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}},lx=class{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return gh(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let i=t;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=this.text.charCodeAt(t)==9?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}};IR={[R.Blockquote](n,e,t){return t.next!=62?!1:(t.markers.push(ue(R.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Bn(t.text.charCodeAt(t.pos+1))?2:1)),n.end=e.lineStart+t.text.length,!0)},[R.ListItem](n,e,t){return t.indent<t.baseIndent+n.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+n.value),!0)},[R.OrderedList]:TR,[R.BulletList]:TR,[R.Document](){return!0}};ax=/^[ \t]*$/,ZR=/-->/,qR=/\?>/,cx=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,ZR],[/^\s*<\?/,qR],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,ax],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,ax]];jp={LinkReference:void 0,IndentedCode(n,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let r=e.findColumn(t),i=n.lineStart+r,s=n.lineStart+e.text.length,o=[],l=[];for(ko(o,i,s);n.nextLine()&&e.depth>=n.stack.length;)if(e.pos==e.text.length){ko(l,n.lineStart-1,n.lineStart);for(let a of e.markers)l.push(a)}else{if(e.indent<t)break;{if(l.length){for(let c of l)c.type==R.CodeText?ko(o,c.from,c.to):o.push(c);l=[]}ko(o,n.lineStart-1,n.lineStart);for(let c of e.markers)o.push(c);s=n.lineStart+e.text.length;let a=n.lineStart+e.findColumn(e.baseIndent+4);a<s&&ko(o,a,s)}}return l.length&&(l=l.filter(a=>a.type!=R.CodeText),l.length&&(e.markers=l.concat(e.markers))),n.addNode(n.buffer.writeElements(o,-i).finish(R.CodeBlock,s-i),i),!0},FencedCode(n,e){let t=_R(e);if(t<0)return!1;let r=n.lineStart+e.pos,i=e.next,s=t-e.pos,o=e.skipSpace(t),l=PR(e.text,e.text.length,o),a=[ue(R.CodeMark,r,r+s)];o<l&&a.push(ue(R.CodeInfo,n.lineStart+o,n.lineStart+l));for(let c=!0;n.nextLine()&&e.depth>=n.stack.length;c=!1){let h=e.pos;if(e.indent-e.baseIndent<4)for(;h<e.text.length&&e.text.charCodeAt(h)==i;)h++;if(h-e.pos>=s&&e.skipSpace(h)==e.text.length){for(let u of e.markers)a.push(u);a.push(ue(R.CodeMark,n.lineStart+e.pos,n.lineStart+h)),n.nextLine();break}else{c||ko(a,n.lineStart-1,n.lineStart);for(let d of e.markers)a.push(d);let u=n.lineStart+e.basePos,f=n.lineStart+e.text.length;u<f&&ko(a,u,f)}}return n.addNode(n.buffer.writeElements(a,-r).finish(R.FencedCode,n.prevLineEnd()-r),r),!0},Blockquote(n,e){let t=BR(e);return t<0?!1:(n.startContext(R.Blockquote,e.pos),n.addNode(R.QuoteMark,n.lineStart+e.pos,n.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(n,e){if(Ox(e,n,!1)<0)return!1;let t=n.lineStart+e.pos;return n.nextLine(),n.addNode(R.HorizontalRule,t),!0},BulletList(n,e){let t=yx(e,n,!1);if(t<0)return!1;n.block.type!=R.BulletList&&n.startContext(R.BulletList,e.basePos,e.next);let r=AR(e,e.pos+1);return n.startContext(R.ListItem,e.basePos,r-e.baseIndent),n.addNode(R.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},OrderedList(n,e){let t=bx(e,n,!1);if(t<0)return!1;n.block.type!=R.OrderedList&&n.startContext(R.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let r=AR(e,e.pos+t);return n.startContext(R.ListItem,e.basePos,r-e.baseIndent),n.addNode(R.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},ATXHeading(n,e){let t=XR(e);if(t<0)return!1;let r=e.pos,i=n.lineStart+r,s=PR(e.text,e.text.length,r),o=s;for(;o>r&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==r||!Bn(e.text.charCodeAt(o-1)))&&(o=e.text.length);let l=n.buffer.write(R.HeaderMark,0,t).writeElements(n.parser.parseInline(e.text.slice(r+t+1,o),i+t+1),-i);o<e.text.length&&l.write(R.HeaderMark,o-r,s-r);let a=l.finish(R.ATXHeading1-1+t,e.text.length-r);return n.nextLine(),n.addNode(a,i),!0},HTMLBlock(n,e){let t=UR(e,n,!1);if(t<0)return!1;let r=n.lineStart+e.pos,i=cx[t][1],s=[],o=i!=ax;for(;!i.test(e.text)&&n.nextLine();){if(e.depth<n.stack.length){o=!1;break}for(let c of e.markers)s.push(c)}o&&n.nextLine();let l=i==ZR?R.CommentBlock:i==qR?R.ProcessingInstructionBlock:R.HTMLBlock,a=n.prevLineEnd();return n.addNode(n.buffer.writeElements(s,-r).finish(l,a-r),r),!0},SetextHeading:void 0},hx=class{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(this.stage==-1)return!1;let i=r.content+`
`+t.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(e,r,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&gh(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,r){return e.addLeafElement(t,ue(R.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(JR(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(ue(R.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(GR(e,gh(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=gh(e,this.pos),r=0;if(t>this.pos){let i=KR(e,t,this.start);if(i){let s=ix(e,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=ix(e,this.pos)),r>0&&r<e.length?r:-1}else return ix(e,this.pos)}}};ux=class{nextLine(e,t,r){let i=t.depth<e.stack.length?-1:zR(t),s=t.next;if(i<0)return!1;let o=ue(R.HeaderMark,e.lineStart+t.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,ue(s==61?R.SetextHeading1:R.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}},jR={LinkReference(n,e){return e.content.charCodeAt(0)==91?new hx(e):null},SetextHeading(){return new ux}},gj=[(n,e)=>XR(e)>=0,(n,e)=>_R(e)>=0,(n,e)=>BR(e)>=0,(n,e)=>yx(e,n,!0)>=0,(n,e)=>bx(e,n,!0)>=0,(n,e)=>Ox(e,n,!0)>=0,(n,e)=>UR(e,n,!0)>=0],Oj={text:"",end:0},fx=class{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.line=new lx,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=Yp.create(R.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new mx(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let r=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<e.markers.length&&(!i||e.markers[r].from<i.end);){let s=e.markers[r++];this.addNode(s.type,s.from,s.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let t=new ox(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,t);i&&t.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e}for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return t?(this.absoluteLineStart+=t,this.lineStart=e2(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=Oj;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<t.end;){i++;let s=this.ranges[i].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[i-1].to-r)+o,r=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+R[i.type]);let o=this.line.markers.length;if(!s(i,this,e)){this.line.markers.length>o&&(i.end=this.line.markers[this.line.markers.length-1].to);break}e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),r;if(this.input.lineChunks)r=t==`
`?"":t;else{let i=t.indexOf(`
`);r=i<0?t:t.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=Yp.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){typeof e=="number"&&(e=new pe(this.parser.nodeSet.types[e],Hl,Hl,(r!=null?r:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(px(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?WR(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let t=px(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(R.Paragraph,e.content.length),e.start)}elt(e,t,r,i){return typeof e=="string"?ue(this.parser.getNodeType(e),t,r,i):new Fp(e,t)}get buffer(){return new Hp(this.parser.nodeSet)}};yh=class n extends ss{constructor(e,t,r,i,s,o,l,a,c){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=l,this.inlineNames=a,this.wrappers=c,this.nodeTypes=Object.create(null);for(let h of e.types)this.nodeTypes[h.name]=h.id}createParse(e,t,r){let i=new fx(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}configure(e){let t=dx(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),l=this.blockNames.slice(),a=this.inlineParsers.slice(),c=this.inlineNames.slice(),h=this.endLeafBlock.slice(),u=this.wrappers;if(mh(t.defineNodes)){i=Object.assign({},i);let f=r.types.slice(),d;for(let p of t.defineNodes){let{name:m,block:g,composite:O,style:w}=typeof p=="string"?{name:p}:p;if(f.some(v=>v.name==m))continue;O&&(i[f.length]=(v,x,T)=>O(x,T,v.value));let k=f.length,b=O?["Block","BlockContext"]:g?k>=R.ATXHeading1&&k<=R.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;f.push(Ze.define({id:k,name:m,props:b&&[[Y.group,b]]})),w&&(d||(d={}),Array.isArray(w)||w instanceof pn?d[m]=w:Object.assign(d,w))}r=new rs(f),d&&(r=r.extend(sr(d)))}if(mh(t.props)&&(r=r.extend(...t.props)),mh(t.remove))for(let f of t.remove){let d=this.blockNames.indexOf(f),p=this.inlineNames.indexOf(f);d>-1&&(s[d]=o[d]=void 0),p>-1&&(a[p]=void 0)}if(mh(t.parseBlock))for(let f of t.parseBlock){let d=l.indexOf(f.name);if(d>-1)s[d]=f.parse,o[d]=f.leaf;else{let p=f.before?Wp(l,f.before):f.after?Wp(l,f.after)+1:l.length-1;s.splice(p,0,f.parse),o.splice(p,0,f.leaf),l.splice(p,0,f.name)}f.endLeaf&&h.push(f.endLeaf)}if(mh(t.parseInline))for(let f of t.parseInline){let d=c.indexOf(f.name);if(d>-1)a[d]=f.parse;else{let p=f.before?Wp(c,f.before):f.after?Wp(c,f.after)+1:c.length-1;a.splice(p,0,f.parse),c.splice(p,0,f.name)}}return t.wrap&&(u=u.concat(t.wrap)),new n(r,s,o,l,h,i,a,c,u)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new wh(this,e,t);e:for(let i=t;i<r.end;){let s=r.char(i);for(let o of this.inlineParsers)if(o){let l=o(r,s,i);if(l>=0){i=l;continue e}}i++}return r.resolveMarkers(0)}};YR=[Ze.none];for(let n=1,e;e=R[n];n++)YR[n]=Ze.define({id:n,name:e,props:n>=R.Escape?[]:[[Y.group,n in IR?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});Hl=[],Hp=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,i=0){return this.content.push(e,t,r,4+i*4),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return pe.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}},vo=class{constructor(e,t,r,i=Hl){this.type=e,this.from=t,this.to=r,this.children=i}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new Hp(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}},Fp=class{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return Hl}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}};HR={resolve:"Emphasis",mark:"EmphasisMark"},FR={resolve:"Emphasis",mark:"EmphasisMark"},So={},Gp={},qt=class{constructor(e,t,r,i){this.type=e,this.from=t,this.to=r,this.side=i}},MR="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",bh=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{bh=new RegExp("[\\p{S}|\\p{P}]","u")}catch(n){}sx={Escape(n,e,t){if(e!=92||t==n.end-1)return-1;let r=n.char(t+1);for(let i=0;i<MR.length;i++)if(MR.charCodeAt(i)==r)return n.append(ue(R.Escape,t,t+2));return-1},Entity(n,e,t){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(t+1,t+31));return r?n.append(ue(R.Entity,t,t+1+r[0].length)):-1},InlineCode(n,e,t){if(e!=96||t&&n.char(t-1)==96)return-1;let r=t+1;for(;r<n.end&&n.char(r)==96;)r++;let i=r-t,s=0;for(;r<n.end;r++)if(n.char(r)==96){if(s++,s==i&&n.char(r+1)!=96)return n.append(ue(R.InlineCode,t,r+1,[ue(R.CodeMark,t,t+i),ue(R.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(n,e,t){if(e!=60||t==n.end-1)return-1;let r=n.slice(t+1,n.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return n.append(ue(R.Autolink,t,t+1+i[0].length,[ue(R.LinkMark,t,t+1),ue(R.URL,t+1,t+i[0].length),ue(R.LinkMark,t+i[0].length,t+1+i[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return n.append(ue(R.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(r);if(o)return n.append(ue(R.ProcessingInstruction,t,t+1+o[0].length));let l=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return l?n.append(ue(R.HTMLTag,t,t+1+l[0].length)):-1},Emphasis(n,e,t){if(e!=95&&e!=42)return-1;let r=t+1;for(;n.char(r)==e;)r++;let i=n.slice(t-1,t),s=n.slice(r,r+1),o=bh.test(i),l=bh.test(s),a=/\s|^$/.test(i),c=/\s|^$/.test(s),h=!c&&(!l||a||o),u=!a&&(!o||c||l),f=h&&(e==42||!u||o),d=u&&(e==42||!h||l);return n.append(new qt(e==95?HR:FR,t,r,(f?1:0)|(d?2:0)))},HardBreak(n,e,t){if(e==92&&n.char(t+1)==10)return n.append(ue(R.HardBreak,t,t+2));if(e==32){let r=t+1;for(;n.char(r)==32;)r++;if(n.char(r)==10&&r>=t+2)return n.append(ue(R.HardBreak,t,r+1))}return-1},Link(n,e,t){return e==91?n.append(new qt(So,t,t+1,1)):-1},Image(n,e,t){return e==33&&n.char(t+1)==91?n.append(new qt(Gp,t,t+2,1)):-1},LinkEnd(n,e,t){if(e!=93)return-1;for(let r=n.parts.length-1;r>=0;r--){let i=n.parts[r];if(i instanceof qt&&(i.type==So||i.type==Gp)){if(!i.side||n.skipSpace(i.to)==t&&!/[(\[]/.test(n.slice(t+1,t+2)))return n.parts[r]=null,-1;let s=n.takeContent(r),o=n.parts[r]=yj(n,s,i.type==So?R.Link:R.Image,i.from,t+1);if(i.type==So)for(let l=0;l<r;l++){let a=n.parts[l];a instanceof qt&&a.type==So&&(a.side=0)}return o.to}}return-1}};wh=class{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,i,s){return this.append(new qt(e,t,r,(i?1:0)|(s?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof qt&&(t.type==So||t.type==Gp))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof qt&&i.type.resolve&&i.side&2))continue;let s=i.type==HR||i.type==FR,o=i.to-i.from,l,a=r-1;for(;a>=e;a--){let m=this.parts[a];if(m instanceof qt&&m.side&1&&m.type==i.type&&!(s&&(i.side&1||m.side&2)&&(m.to-m.from+o)%3==0&&((m.to-m.from)%3||o%3))){l=m;break}}if(!l)continue;let c=i.type.resolve,h=[],u=l.from,f=i.to;if(s){let m=Math.min(2,l.to-l.from,o);u=l.to-m,f=i.from+m,c=m==1?"Emphasis":"StrongEmphasis"}l.type.mark&&h.push(this.elt(l.type.mark,u,l.to));for(let m=a+1;m<r;m++)this.parts[m]instanceof vo&&h.push(this.parts[m]),this.parts[m]=null;i.type.mark&&h.push(this.elt(i.type.mark,i.from,f));let d=this.elt(c,u,f,h);this.parts[a]=s&&l.from!=u?new qt(l.type,l.from,u,l.side):null,(this.parts[r]=s&&i.to!=f?new qt(i.type,f,i.to,i.side):null)?this.parts.splice(r,0,d):this.parts[r]=d}let t=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof vo&&t.push(i)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof qt&&r.type==e&&r.side&1)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}getDelimiterAt(e){let t=this.parts[e];return t instanceof qt?t:null}skipSpace(e){return gh(this.text,e-this.offset)+this.offset}elt(e,t,r,i){return typeof e=="string"?ue(this.parser.getNodeType(e),t,r,i):new Fp(e,t)}};wh.linkStart=So;wh.imageStart=Gp;bj=[R.CodeBlock,R.ListItem,R.OrderedList,R.BulletList],mx=class{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=t;if(!r.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(Y.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,l=e.block.children.length,a=o,c=l;for(;;){if(t.to-r>i){if(t.type.isAnonymous&&t.firstChild())continue;break}let h=e2(t.from-r,e.ranges);if(t.to-r<=e.ranges[e.rangeI].to)e.addNode(t.tree,h);else{let u=new pe(e.parser.nodeSet.types[R.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(u,t.tree),e.addNode(u,h)}if(t.type.is("Block")&&(bj.indexOf(t.type.id)<0?(o=t.to-r,l=e.block.children.length):(o=a,l=c,a=t.to-r,c=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>l;)e.block.children.pop(),e.block.positions.pop();return o-s}};wj=sr({"Blockquote/...":y.quote,HorizontalRule:y.contentSeparator,"ATXHeading1/... SetextHeading1/...":y.heading1,"ATXHeading2/... SetextHeading2/...":y.heading2,"ATXHeading3/...":y.heading3,"ATXHeading4/...":y.heading4,"ATXHeading5/...":y.heading5,"ATXHeading6/...":y.heading6,"Comment CommentBlock":y.comment,Escape:y.escape,Entity:y.character,"Emphasis/...":y.emphasis,"StrongEmphasis/...":y.strong,"Link/... Image/...":y.link,"OrderedList/... BulletList/...":y.list,"BlockQuote/...":y.quote,"InlineCode CodeText":y.monospace,"URL Autolink":y.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":y.processingInstruction,"CodeInfo LinkLabel":y.labelName,LinkTitle:y.string,Paragraph:y.content}),t2=new yh(new rs(YR).extend(wj),Object.keys(jp).map(n=>jp[n]),Object.keys(jp).map(n=>jR[n]),Object.keys(jp),gj,IR,Object.keys(sx).map(n=>sx[n]),Object.keys(sx),[]);kj={resolve:"Strikethrough",mark:"StrikethroughMark"},Sj={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":y.strikethrough}},{name:"StrikethroughMark",style:y.processingInstruction}],parseInline:[{name:"Strikethrough",parse(n,e,t){if(e!=126||n.char(t+1)!=126||n.char(t+2)==126)return-1;let r=n.slice(t-1,t),i=n.slice(t+2,t+3),s=/\s|^$/.test(r),o=/\s|^$/.test(i),l=bh.test(r),a=bh.test(i);return n.addDelimiter(kj,t,t+2,!o&&(!a||s||l),!s&&(!l||o||a))},after:"Emphasis"}]};r2=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/,Kp=class{constructor(){this.rows=null}nextLine(e,t,r){if(this.rows==null){this.rows=!1;let i;if((t.next==45||t.next==58||t.next==124)&&r2.test(i=t.text.slice(t.pos))){let s=[];Oh(e,r.content,0,s,r.start)==Oh(e,i,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let i=[];Oh(e,t.text,t.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,i))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}},vj={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":y.heading}},"TableRow",{name:"TableCell",style:y.content},{name:"TableDelimiter",style:y.processingInstruction}],parseBlock:[{name:"Table",leaf(n,e){return QR(e.content,0)?new Kp:null},endLeaf(n,e,t){if(t.parsers.some(i=>i instanceof Kp)||!QR(e.text,e.basePos))return!1;let r=n.peekLine();return r2.test(r)&&Oh(n,e.text,e.basePos)==Oh(n,r,e.basePos)},before:"SetextHeading"}]},gx=class{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}},Cj={defineNodes:[{name:"Task",block:!0,style:y.list},{name:"TaskMarker",style:y.atom}],parseBlock:[{name:"TaskList",leaf(n,e){return/^\[[ xX]\][ \t]/.test(e.content)&&n.parentType().name=="ListItem"?new gx:null},after:"SetextHeading"}]},$R=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,ER=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,Tj=/[\w-]+\.[\w-]+($|\/)/,RR=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,DR=/\/[a-zA-Z\d@.]+/gy;Aj={parseInline:[{name:"Autolink",parse(n,e,t){let r=t-n.offset;if(r&&/\w/.test(n.text[r-1]))return-1;$R.lastIndex=r;let i=$R.exec(n.text),s=-1;if(!i)return-1;if(i[1]||i[2]){if(s=Pj(n.text,r+i[0].length),s>-1&&n.hasOpenLink){let o=/([^\[\]]|\[[^\]]*\])*/.exec(n.text.slice(r,s));s=r+o[0].length}}else i[3]?s=LR(n.text,r):(s=LR(n.text,r+i[0].length),s>-1&&i[0]=="xmpp:"&&(DR.lastIndex=s,i=DR.exec(n.text),i&&(s=i.index+i[0].length)));return s<0?-1:(n.addElement(n.elt("URL",t,s+n.offset)),s+n.offset)}}]},i2=[vj,Cj,Sj,Aj];o2={defineNodes:[{name:"Superscript",style:y.special(y.content)},{name:"SuperscriptMark",style:y.processingInstruction}],parseInline:[{name:"Superscript",parse:s2(94,"Superscript","SuperscriptMark")}]},l2={defineNodes:[{name:"Subscript",style:y.special(y.content)},{name:"SubscriptMark",style:y.processingInstruction}],parseInline:[{name:"Subscript",parse:s2(126,"Subscript","SubscriptMark")}]},a2={defineNodes:[{name:"Emoji",style:y.character}],parseInline:[{name:"Emoji",parse(n,e,t){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(n.slice(t+1,n.end)))?-1:n.addElement(n.elt("Emoji",t,t+1+r[0].length))}}]}});function kx(n){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(n.name);return e?+e[1]:void 0}function Mj(n){return n.name=="OrderedList"||n.name=="BulletList"}function Qj(n,e){let t=n;for(;;){let r=t.nextSibling,i;if(!r||(i=kx(r.type))!=null&&i<=e)break;t=r}return t.to}function Sx(n){return new zt(f2,n,[],"markdown")}function Dj(n,e){return t=>{if(t&&n){let r=null;if(t=/\S*/.exec(t)[0],typeof n=="function"?r=n(t):r=lh.matchLanguageName(n,t,!0),r instanceof lh)return r.support?r.support.language.parser:sh.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}}function m2(n,e){let t=[],r=[];for(let i=n;i;i=i.parent){if(i.name=="FencedCode")return r;(i.name=="ListItem"||i.name=="Blockquote")&&t.push(i)}for(let i=t.length-1;i>=0;i--){let s=t[i],o,l=e.lineAt(s.from),a=s.from-l.from;if(s.name=="Blockquote"&&(o=/^ *>( ?)/.exec(l.text.slice(a))))r.push(new xh(s,a,a+o[0].length,"",o[1],">",null));else if(s.name=="ListItem"&&s.parent.name=="OrderedList"&&(o=/^( *)\d+([.)])( *)/.exec(l.text.slice(a)))){let c=o[3],h=o[0].length;c.length>=4&&(c=c.slice(0,c.length-4),h-=4),r.push(new xh(s.parent,a,a+h,o[1],c,o[2],s))}else if(s.name=="ListItem"&&s.parent.name=="BulletList"&&(o=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(l.text.slice(a)))){let c=o[4],h=o[0].length;c.length>4&&(c=c.slice(0,c.length-4),h-=4);let u=o[2];o[3]&&(u+=o[3].replace(/[xX]/," ")),r.push(new xh(s.parent,a,a+h,o[1],c,u,s))}}return r}function g2(n,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(n.from,n.from+10))}function wx(n,e,t,r=0){for(let i=-1,s=n;;){if(s.name=="ListItem"){let l=g2(s,e),a=+l[2];if(i>=0){if(a!=i+1)return;t.push({from:s.from+l[1].length,to:s.from+l[0].length,insert:String(i+2+r)})}i=a}let o=s.nextSibling;if(!o)break;s=o}}function vx(n,e){let t=/^[ \t]*/.exec(n)[0].length;if(!t||e.facet(_p)!="	")return n;let r=Fi(n,4,t),i="";for(let s=r;s>0;)s>=4?(i+="	",s-=4):(i+=" ",s--);return i+n.slice(t)}function h2(n){return n.name=="QuoteMark"||n.name=="ListMark"}function Ij(n,e){if(n.name!="OrderedList"&&n.name!="BulletList")return!1;let t=n.firstChild,r=n.getChild("ListItem","ListItem");if(!r)return!1;let i=e.lineAt(t.to),s=e.lineAt(r.from),o=/^[\s>]*$/.test(i.text);return i.number+(o?0:1)<s.number}function u2(n,e,t){let r="";for(let i=0,s=n.length-2;i<=s;i++)r+=n[i].blank(i<s?Fi(t.text,4,n[i+1].from)-r.length:null,i<s);return vx(r,e)}function _j(n,e){let t=n.resolveInner(e,-1),r=e;h2(t)&&(r=t.from,t=t.parent);for(let i;i=t.childBefore(r);)if(h2(i))r=i.from;else if(i.name=="OrderedList"||i.name=="BulletList")t=i.lastChild,r=t.to;else break;return t}function kh(n={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:r=!0,base:{parser:i}=Ej,completeHTMLTags:s=!0,pasteURLAsLink:o=!0,htmlTagLanguage:l=O2}=n;if(!(i instanceof yh))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let a=n.extensions?[n.extensions]:[],c=[l.support,$j],h;o&&c.push(qj),t instanceof or?(c.push(t.support),h=t.language):t&&(h=t);let u=e||h?Dj(e,h):void 0;a.push(n2({codeParser:u,htmlParser:l.language.parser})),r&&c.push(fi.high(Jc.of(Vj)));let f=Sx(i.configure(a));return s&&c.push(f.data.of({autocomplete:Xj})),new or(f,c)}function Xj(n){let{state:e,pos:t}=n,r=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(t-25,t));if(!r)return null;let i=qe(e).resolveInner(t,-1);for(;i&&!i.type.isTop;){if(i.name=="CodeBlock"||i.name=="FencedCode"||i.name=="ProcessingInstructionBlock"||i.name=="CommentBlock"||i.name=="Link"||i.name=="Image")return null;i=i.parent}return{from:t-r[0].length,to:t,options:zj(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}function zj(){if(xx)return xx;let n=mR(new Vp(xe.create({extensions:O2}),0,!0));return xx=n?n.options:[]}var f2,d2,p2,$j,Ej,Rj,Jp,xh,Nj,Lj,Bj,Vj,O2,xx,Zj,qj,Cx=S(()=>{vr();Er();gs();Ww();c2();Zp();gi();f2=ah({commentTokens:{block:{open:"<!--",close:"-->"}}}),d2=new Y,p2=t2.configure({props:[bi.add(n=>!n.is("Block")||n.is("Document")||kx(n)!=null||Mj(n)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),d2.add(kx),ms.add({Document:()=>null}),ds.add({Document:f2})]});$j=EE.of((n,e,t)=>{for(let r=qe(n).resolveInner(t,-1);r&&!(r.from<e);r=r.parent){let i=r.type.prop(d2);if(i==null)continue;let s=Qj(r,i);if(s>t)return{from:t,to:s}}return null});Ej=Sx(p2),Rj=p2.configure([i2,l2,o2,a2,{props:[bi.add({Table:(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}]),Jp=Sx(Rj);xh=class{constructor(e,t,r,i,s,o,l){this.node=e,this.from=t,this.to=r,this.spaceBefore=i,this.spaceAfter=s,this.type=o,this.item=l}blank(e,t=!0){let r=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;r.length<e;)r+=" ";return r}else{for(let i=this.to-this.from-r.length-this.spaceAfter.length;i>0;i--)r+=" ";return r+(t?this.spaceAfter:"")}}marker(e,t){let r=this.node.name=="OrderedList"?String(+g2(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}};Nj=(n={})=>({state:e,dispatch:t})=>{let r=qe(e),{doc:i}=e,s=null,o=e.changeByRange(l=>{if(!l.empty||!Jp.isActiveAt(e,l.from,-1)&&!Jp.isActiveAt(e,l.from,1))return s={range:l};let a=l.from,c=i.lineAt(a),h=m2(r.resolveInner(a,-1),i);for(;h.length&&h[h.length-1].from>a-c.from;)h.pop();if(!h.length)return s={range:l};let u=h[h.length-1];if(u.to-u.spaceAfter.length>a-c.from)return s={range:l};let f=a>=u.to-u.spaceAfter.length&&!/\S/.test(c.text.slice(u.to));if(u.item&&f){let O=u.node.firstChild,w=u.node.getChild("ListItem","ListItem");if(O.to>=a||w&&w.to<a||c.from>0&&!/[^\s>]/.test(i.lineAt(c.from-1).text)||n.nonTightLists===!1){let k=h.length>1?h[h.length-2]:null,b,v="";k&&k.item?(b=c.from+k.from,v=k.marker(i,1)):b=c.from+(k?k.to:0);let x=[{from:b,to:a,insert:v}];return u.node.name=="OrderedList"&&wx(u.item,i,x,-2),k&&k.node.name=="OrderedList"&&wx(k.item,i,x),{range:X.cursor(b+v.length),changes:x}}else{let k=u2(h,e,c);return{range:X.cursor(a+k.length+1),changes:{from:c.from,insert:k+e.lineBreak}}}}if(u.node.name=="Blockquote"&&f&&c.from){let O=i.lineAt(c.from-1),w=/>\s*$/.exec(O.text);if(w&&w.index==u.from){let k=e.changes([{from:O.from+w.index,to:O.to},{from:c.from+u.from,to:c.to}]);return{range:l.map(k),changes:k}}}let d=[];u.node.name=="OrderedList"&&wx(u.item,i,d);let p=u.item&&u.item.from<c.from,m="";if(!p||/^[\s\d.)\-+*>]*/.exec(c.text)[0].length>=u.to)for(let O=0,w=h.length-1;O<=w;O++)m+=O==w&&!p?h[O].marker(i,1):h[O].blank(O<w?Fi(c.text,4,h[O+1].from)-m.length:null);let g=a;for(;g>c.from&&/\s/.test(c.text.charAt(g-c.from-1));)g--;return m=vx(m,e),Ij(u.node,e.doc)&&(m=u2(h,e,c)+e.lineBreak+m),d.push({from:g,to:a,insert:e.lineBreak+m}),{range:X.cursor(g+m.length+1),changes:d}});return s?!1:(t(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0)},Lj=Nj();Bj=({state:n,dispatch:e})=>{let t=qe(n),r=null,i=n.changeByRange(s=>{let o=s.from,{doc:l}=n;if(s.empty&&Jp.isActiveAt(n,s.from)){let a=l.lineAt(o),c=m2(_j(t,o),l);if(c.length){let h=c[c.length-1],u=h.to-h.spaceAfter.length+(h.spaceAfter?1:0);if(o-a.from>u&&!/\S/.test(a.text.slice(u,o-a.from)))return{range:X.cursor(a.from+u),changes:{from:a.from+u,to:o}};if(o-a.from==u&&(!h.item||a.from<=h.item.from||!/\S/.test(a.text.slice(0,h.to)))){let f=a.from+h.from;if(h.item&&h.node.from<h.item.from&&/\S/.test(a.text.slice(h.from,h.to))){let d=h.blank(Fi(a.text,4,h.to)-Fi(a.text,4,h.from));return f==a.from&&(d=vx(d,n)),{range:X.cursor(f+d.length),changes:{from:f,to:a.from+h.to,insert:d}}}if(f<o)return{range:X.cursor(f),changes:{from:f,to:o}}}}}return r={range:s}});return r?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},Vj=[{key:"Enter",run:Lj},{key:"Backspace",run:Bj}],O2=xi({matchClosingTags:!1});xx=null;Zj=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,qj=B.domEventHandlers({paste:(n,e)=>{var t;let{main:r}=e.state.selection;if(r.empty)return!1;let i=(t=n.clipboardData)===null||t===void 0?void 0:t.getData("text/plain");if(!i||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(i)||(/^www\./.test(i)&&(i="https://"+i),!Jp.isActiveAt(e.state,r.from,1)))return!1;let s=qe(e.state),o=!1;return s.iterate({from:r.from,to:r.to,enter:l=>{(l.from>r.from||Zj.test(l.name))&&(o=!0)},leave:l=>{l.to<r.to&&(o=!0)}}),o?!1:(e.dispatch({changes:[{from:r.from,insert:"["},{from:r.to,insert:`](${i})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}})});function jj({shortcodeName:n,title:e,attributes:t,params:r,config:i,getPos:s,editor:o,node:l,isCodeType:a=!1}){let c=document.createElement("div");c.className="shortcode-block-header";let h=i&&i.allowedChildren&&i.allowedChildren.length>0,u=h?`<button type="button" class="shortcode-add-child-btn" title="Add Child Item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M12 5l0 14" />
                <path d="M5 12l14 0" />
            </svg>
        </button>`:"",f=e;if(a){if(i&&i.plugin==="codesh"){let O=t==null?void 0:t.lang;if(!O&&r){let v=r.trim();v.startsWith("=")?O=v.substring(1).trim():v&&!v.includes("=")&&(O=v)}let w=[],k=(t==null?void 0:t["hide-lang"])===!0||(t==null?void 0:t["hide-lang"])==="true";t!=null&&t.title&&w.push(t.title),O&&!k&&w.push(O),t!=null&&t.theme&&w.push(`theme: ${t.theme}`),t!=null&&t.highlight&&w.push(`lines: ${t.highlight}`),t!=null&&t.focus&&w.push(`focus: ${t.focus}`),((t==null?void 0:t["line-numbers"])===!0||(t==null?void 0:t["line-numbers"])==="true")&&w.push("numbered"),((t==null?void 0:t.diff)===!0||(t==null?void 0:t.diff)==="true")&&w.push("diff"),((t==null?void 0:t["hide-header"])===!0||(t==null?void 0:t["hide-header"])==="true")&&w.push("no-header"),k&&w.push("no-lang"),(t==null?void 0:t.wrap)==="true"&&w.push("wrap"),(t==null?void 0:t.wrap)==="false"&&w.push("no-wrap");let b=w.length>0?w.join(" - "):"";f=b?`${e}: ${b}`:e}else if(t){let O=t.lang||t.language,w=t.title;w?f=`${e}: ${w}`:O&&(f=`${e} (${O})`)}}let d=document.createElement("span");d.className="shortcode-block-title",d.textContent=f,c.appendChild(d);let p=document.createElement("div");p.className="shortcode-block-controls",p.innerHTML=`
        ${u}
        <button type="button" class="shortcode-edit-btn" title="Edit shortcode">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
          </button>
          <button type="button" class="shortcode-delete-btn" title="Delete shortcode">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
    `,c.appendChild(p),p.querySelector(".shortcode-edit-btn").onclick=()=>{try{if(window.EditorPro&&window.EditorPro.editShortcodeBlock){let g=typeof s=="function"?s():s;if(g!==void 0){let O=o.state.doc.nodeAt(g);O&&window.EditorPro.editShortcodeBlock(g,O,o)}}}catch(g){}},p.querySelector(".shortcode-delete-btn").onclick=g=>{g.preventDefault(),g.stopPropagation();let O=typeof s=="function"?s():s;if(O===void 0)return;let w=o.state.doc.nodeAt(O);w&&o.chain().focus().deleteRange({from:O,to:O+w.nodeSize}).run()};let m=p.querySelector(".shortcode-add-child-btn");return m&&h&&(m.onclick=()=>{try{if(window.EditorPro&&window.EditorPro.addChildShortcodeBlock){let g=typeof s=="function"?s():s;if(g!==void 0){let O=o.state.doc.nodeAt(g);O&&window.EditorPro.addChildShortcodeBlock(g,O,o,i.allowedChildren)}else alert("Unable to add child shortcode. Please save and reload the page.")}}catch(g){alert("An error occurred while adding the child shortcode.")}}),c}function Wj({node:n,HTMLAttributes:e,getPos:t,editor:r,config:i}){let s=null,o=!1,l=n,{shortcodeName:a,params:c,attributes:h,codeContent:u}=n.attrs,f=(i==null?void 0:i.title)||a.charAt(0).toUpperCase()+a.slice(1),d=document.createElement("div");d.classList.add("shortcode-block-wrapper",`shortcode-${a}`,"shortcode-code-type");let p=jj({shortcodeName:a,title:f,attributes:h,params:c,config:i,getPos:t,editor:r,node:l,isCodeType:!0}),m=document.createElement("div");m.className="shortcode-code-editor";let g=(h==null?void 0:h.lang)||(h==null?void 0:h.language)||(i==null?void 0:i.language)||"javascript",O=(h==null?void 0:h["line-numbers"])===!0||(h==null?void 0:h["line-numbers"])==="true",w=parseInt(h==null?void 0:h.start,10)||1;s=(()=>{let x=[Uj(g),Up,B.lineWrapping,...O?[Q$({formatNumber:C=>String(C+w-1)})]:[],B.updateListener.of(C=>{if(!o&&C.docChanged){let M=C.state.doc.toString();if(typeof t=="function")try{let $=t();if($!==void 0){o=!0;let L=r.state.tr;L.setNodeMarkup($,null,{...l.attrs,codeContent:M}),r.view.dispatch(L),o=!1}}catch($){}}}),B.theme({"&":{fontSize:"14px",fontFamily:'"SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace'},".cm-content":{padding:"16px",minHeight:"80px"},".cm-focused":{outline:"none"},".cm-editor":{borderRadius:"0 0 8px 8px"}}),B.domEventHandlers({keydown:(C,M)=>(C.stopPropagation(),C.key==="Tab"&&!C.shiftKey?(C.preventDefault(),M.dispatch(M.state.replaceSelection("  ")),!0):!1)})],T=xe.create({doc:(u||"").trim(),extensions:x});return new B({state:T,parent:m})})();let b=document.createElement("div");b.className="shortcode-inner-content hidden",b.style.display="none",d.appendChild(p),d.appendChild(m),d.appendChild(b);let v=x=>{if(!(i&&i.plugin==="codesh"))return f;let C=x==null?void 0:x.lang;if(!C&&(x!=null&&x.params)){let D=(x.params||"").trim();D.startsWith("=")?C=D.substring(1).trim():D&&!D.includes("=")&&(C=D)}let M=[],$=(x==null?void 0:x["hide-lang"])===!0||(x==null?void 0:x["hide-lang"])==="true";x!=null&&x.title&&M.push(x.title),C&&!$&&M.push(C),x!=null&&x.theme&&M.push(`theme: ${x.theme}`),x!=null&&x.highlight&&M.push(`lines: ${x.highlight}`),x!=null&&x.focus&&M.push(`focus: ${x.focus}`),((x==null?void 0:x["line-numbers"])===!0||(x==null?void 0:x["line-numbers"])==="true")&&M.push("numbered"),((x==null?void 0:x.diff)===!0||(x==null?void 0:x.diff)==="true")&&M.push("diff"),((x==null?void 0:x["hide-header"])===!0||(x==null?void 0:x["hide-header"])==="true")&&M.push("no-header"),$&&M.push("no-lang"),(x==null?void 0:x.wrap)==="true"&&M.push("wrap"),(x==null?void 0:x.wrap)==="false"&&M.push("no-wrap");let L=M.length>0?M.join(" - "):"";return L?`${f}: ${L}`:f};return{dom:d,contentDOM:b,update:x=>{var oe,ae,me,Ee,Ue,St,Fe,Te,je,Ge;if(x.type.name!=="shortcodeBlock"||x.attrs.shortcodeName!==l.attrs.shortcodeName)return!1;let T=((oe=l.attrs.attributes)==null?void 0:oe.lang)||((ae=l.attrs.attributes)==null?void 0:ae.language)||(i==null?void 0:i.language)||"javascript",C=((me=x.attrs.attributes)==null?void 0:me.lang)||((Ee=x.attrs.attributes)==null?void 0:Ee.language)||(i==null?void 0:i.language)||"javascript";if(T!==C)return!1;let M=((Ue=l.attrs.attributes)==null?void 0:Ue["line-numbers"])===!0||((St=l.attrs.attributes)==null?void 0:St["line-numbers"])==="true",$=((Fe=x.attrs.attributes)==null?void 0:Fe["line-numbers"])===!0||((Te=x.attrs.attributes)==null?void 0:Te["line-numbers"])==="true",L=parseInt((je=l.attrs.attributes)==null?void 0:je.start,10)||1,D=parseInt((Ge=x.attrs.attributes)==null?void 0:Ge.start,10)||1;if(M!==$||L!==D)return!1;l=x;let W=p.querySelector(".shortcode-block-title");if(W){let Be=v(x.attrs.attributes);W.textContent=Be}if(o)return!0;let G=(x.attrs.codeContent||"").trim();if(s&&G!==s.state.doc.toString()){o=!0;let Be=s.state.update({changes:{from:0,to:s.state.doc.length,insert:G}});s.dispatch(Be),o=!1}return!0},destroy:()=>{s&&s.destroy()},stopEvent:x=>m.contains(x.target),ignoreMutation:x=>m.contains(x.target)}}function Yj({node:n,HTMLAttributes:e,getPos:t,editor:r,config:i}){var x,T;let{shortcodeName:s,params:o,attributes:l}=n.attrs,a=document.createElement("div");a.classList.add("shortcode-block-wrapper",`shortcode-${s}`);let c=(i==null?void 0:i.title)||s.charAt(0).toUpperCase()+s.slice(1),h=!1,u=null;if(i&&i.customRenderer&&typeof i.customRenderer=="function")try{let C={tagName:s,attributes:l||{},params:o||"",content:""};u=i.customRenderer(C,i),h=!0}catch(C){h=!1}let f=c;if(!h&&l&&Object.keys(l).length>0){let C=Object.entries(l).map(([M,$])=>`${M}: ${$}`).join(", ");f+=` (${C})`}let d=document.createElement("div");d.className="shortcode-block-header";let p=i&&i.allowedChildren&&i.allowedChildren.length>0,m=p?`<button type="button" class="shortcode-add-child-btn" title="Add Child Item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M12 5l0 14" />
                <path d="M5 12l14 0" />
            </svg>
        </button>`:"",g=i&&i.parentOnly;if(h&&u){let C=document.createElement("div");C.className="shortcode-block-title shortcode-custom-render",C.innerHTML=u,d.appendChild(C)}else{let C=document.createElement("span");C.className="shortcode-block-title",C.textContent=f,d.appendChild(C)}let O=document.createElement("div");O.className="shortcode-block-controls",O.innerHTML=`
        ${m}
        <button type="button" class="shortcode-edit-btn" title="Edit shortcode">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
          </button>
          <button type="button" class="shortcode-delete-btn" title="Delete shortcode">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
    `,d.appendChild(O);let w=(i==null?void 0:i.hasContent)!==!1,k=null;if(w){k=document.createElement("div"),k.className="shortcode-block-content";let M=["center","left-align","right-align","justify"].includes(s);if(i&&i.cssTemplate&&l)try{let $=(T=(x=window.EditorPro)==null?void 0:x.pluginSystem)==null?void 0:T.shortcodeRegistry;if($){$.ensureInitialized();let L=$.generateCSS(s,l);L&&k.setAttribute("style",L)}}catch($){}k.style.cursor="text",k.addEventListener("click",$=>{var L;if($.target===k||(L=$.target.classList)!=null&&L.contains("ProseMirror-placeholder")){let D=typeof t=="function"?t():t;D!==void 0&&r.chain().focus().setTextSelection(D+1).run()}}),M&&setTimeout(()=>{let $=typeof t=="function"?t():t;$!==void 0&&!k.hasChildNodes()&&r.chain().focus().setTextSelection($+1).run()},100)}O.querySelector(".shortcode-edit-btn").onclick=()=>{try{if(window.EditorPro&&window.EditorPro.editShortcodeBlock){let C=typeof t=="function"?t():t;C!==void 0&&window.EditorPro.editShortcodeBlock(C,n,r)}}catch(C){}},O.querySelector(".shortcode-delete-btn").onclick=C=>{C.preventDefault(),C.stopPropagation();let M=typeof t=="function"?t():t;M!==void 0&&r.chain().focus().deleteRange({from:M,to:M+n.nodeSize}).run()};let b=O.querySelector(".shortcode-add-child-btn");b&&p&&(b.onclick=()=>{try{if(window.EditorPro&&window.EditorPro.addChildShortcodeBlock){let C=typeof t=="function"?t():t;C!==void 0?window.EditorPro.addChildShortcodeBlock(C,n,r,i.allowedChildren):alert("Unable to add child shortcode. Please save and reload the page.")}}catch(C){alert("An error occurred while adding the child shortcode.")}}),a.appendChild(d),k&&a.appendChild(k);let v=null;return k&&(v=new MutationObserver(()=>{k.querySelectorAll(".shortcode-block:empty, .shortcode-block-wrapper:empty").forEach($=>{$.remove()}),k.querySelectorAll(".shortcode-block").forEach($=>{let L=$.querySelector(".shortcode-content");L&&!L.textContent.trim()&&!L.querySelector("*")&&$.remove()})}),v.observe(k,{childList:!0,subtree:!0})),{dom:a,contentDOM:k,destroy(){v&&v.disconnect()}}}var Uj,Hj,y2,b2=S(()=>{re();Er();vr();Zp();Xp();Cx();rx();Uj=n=>{let e=(n||"").toLowerCase();return{javascript:K(),js:K(),typescript:K({typescript:!0}),ts:K({typescript:!0}),jsx:K({jsx:!0}),tsx:K({typescript:!0,jsx:!0}),html:xi(),htm:xi(),xml:xi(),svg:xi(),markdown:kh(),md:kh(),python:K(),py:K(),php:K(),ruby:K(),rb:K(),go:K(),rust:K(),rs:K(),java:K(),c:K(),cpp:K(),csharp:K(),cs:K(),swift:K(),kotlin:K(),kt:K(),bash:K(),shell:K(),sh:K(),sql:K(),json:K(),yaml:K(),yml:K(),css:K(),scss:K(),sass:K(),less:K(),txt:K(),text:K(),plain:K(),diff:K(),grav:K()}[e]||K()};Hj=ne.create({name:"shortcodeBlock",group:"block",content:"(paragraph | heading | blockquote | horizontalRule | orderedList | bulletList | codeBlock | table | shortcodeBlock | preservedBlock | rawBlock | githubAlert)*",atom:!1,isolating:!0,priority:1001,draggable:!0,allowGapCursor:!0,defining:!0,marks:"",addAttributes(){return{shortcodeName:{default:null},params:{default:""},attributes:{default:{}},placeholderId:{default:null},contentType:{default:"blocks"},codeContent:{default:null}}},parseHTML(){return[{tag:"div[data-shortcode-block]",getAttrs:n=>{let e="",t=n.getAttribute("data-params-base64");if(t)try{e=decodeURIComponent(escape(atob(t)))}catch(o){e=n.getAttribute("data-params")||""}else e=n.getAttribute("data-params")||"";let r=n.getAttribute("data-content-type")||"blocks",i=null;if(r==="code"){let o=n.getAttribute("data-code-content");if(o)try{i=decodeURIComponent(escape(atob(o)))}catch(l){i=""}}let s=JSON.parse(n.getAttribute("data-attributes")||"{}");return{shortcodeName:n.getAttribute("data-shortcode-name"),params:e,attributes:s,placeholderId:n.getAttribute("data-placeholder-id"),contentType:r,codeContent:i}}}]},renderHTML({HTMLAttributes:n,node:e}){let{shortcodeName:t,params:r,attributes:i,placeholderId:s,contentType:o,codeContent:l}=e.attrs,a=r?btoa(unescape(encodeURIComponent(r))):"",c={"data-shortcode-block":"true","data-shortcode-name":t,"data-params":r,"data-params-base64":a,"data-attributes":JSON.stringify(i),"data-placeholder-id":s,"data-content-type":o,class:`shortcode-block ${t}`};return o==="code"&&l!==null&&(c["data-code-content"]=btoa(unescape(encodeURIComponent(l)))),["div",c,0]},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{var l,a,c;let{shortcodeName:i}=n.attrs,s=(c=(a=(l=window.EditorPro)==null?void 0:l.pluginSystem)==null?void 0:a.shortcodeRegistry)==null?void 0:c.get(i);return n.attrs.contentType==="code"||(s==null?void 0:s.contentType)==="code"?Wj({node:n,HTMLAttributes:e,getPos:t,editor:r,config:s}):Yj({node:n,HTMLAttributes:e,getPos:t,editor:r,config:s})}},addCommands(){return{setShortcodeBlock:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n}),insertShortcodeBlock:(n,e="",t={},r="",i=null)=>({commands:s,state:o,tr:l})=>{var f,d,p;let a=(p=(d=(f=window.EditorPro)==null?void 0:f.pluginSystem)==null?void 0:d.shortcodeRegistry)==null?void 0:p.get(n),c=(a==null?void 0:a.contentType)==="code",h={shortcodeName:n,params:e,attributes:t,placeholderId:i||`shortcode_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,contentType:c?"code":"blocks",codeContent:c?r||(a==null?void 0:a.defaultContent)||"":null};if(c)return s.insertContent({type:this.name,attrs:h});let u=[];return r?u=[{type:"paragraph",content:[{type:"text",text:r}]}]:u=[{type:"paragraph"}],s.insertContent({type:this.name,attrs:h,content:u})},insertChildShortcodeBlock:(n,e,t={})=>({state:r,tr:i,dispatch:s})=>{var f,d,p;let o=r.doc.nodeAt(n);if(!o||o.type.name!=="shortcodeBlock")return!1;let l=(p=(d=(f=window.EditorPro)==null?void 0:f.pluginSystem)==null?void 0:d.shortcodeRegistry)==null?void 0:p.get(e),a=(l==null?void 0:l.contentType)==="code",c={shortcodeName:e,params:"",attributes:t,placeholderId:`shortcode_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,contentType:a?"code":"blocks",codeContent:a?(l==null?void 0:l.defaultContent)||"":null},h=a?r.schema.nodes.shortcodeBlock.create(c):r.schema.nodes.shortcodeBlock.create(c,r.schema.nodes.paragraph.create()),u=n+1;if(o.content.size===0)u=n+1;else{let m=n+1;o.content.forEach((g,O)=>{g.type.name==="shortcodeBlock"&&(m=n+1+O+g.nodeSize)}),u=m}return i.insert(u,h),s&&s(i),!0}}}}),y2=Hj});var Fj,w2,x2=S(()=>{re();Fj=ne.create({name:"githubAlert",group:"block",content:"block*",defining:!0,isolating:!0,priority:1001,addAttributes(){return{type:{default:"note",parseHTML:n=>n.getAttribute("data-alert-type"),renderHTML:n=>({"data-alert-type":n.type})}}},parseHTML(){return[{tag:"div[data-github-alert]",getAttrs:n=>({type:n.getAttribute("data-alert-type")||"note"})},{tag:"blockquote",getAttrs:n=>{let e=n.firstElementChild;if(e&&e.tagName==="P"){let r=(e.textContent||"").match(/^\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]/);if(r)return{type:r[1].toLowerCase()}}return!1}}]},renderHTML({HTMLAttributes:n,node:e}){let t=e.attrs.type||"note";return["div",{...n,"data-github-alert":"true","data-alert-type":t,class:`markdown-alert markdown-alert-${t}`},["div",{class:"markdown-alert-content"},0]]},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{let i=n.attrs.type||"note",s=d=>({note:"Note",tip:"Tip",important:"Important",warning:"Warning",caution:"Caution"})[d]||"Note",o=d=>{let p={note:'<svg class="octicon octicon-info" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true" style="fill: currentColor;"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>',tip:'<svg class="octicon octicon-light-bulb" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true" style="fill: currentColor;"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>',important:'<svg class="octicon octicon-report" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true" style="fill: currentColor;"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>',warning:'<svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true" style="fill: currentColor;"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>',caution:'<svg class="octicon octicon-stop" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true" style="fill: currentColor;"><path d="M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>'};return p[d]||p.note},l=document.createElement("div");l.className=`markdown-alert markdown-alert-${i}`,l.setAttribute("data-github-alert","true"),l.setAttribute("data-alert-type",i);let a=document.createElement("div");a.className="markdown-alert-title";let c=document.createElement("span");c.className="markdown-alert-icon",c.innerHTML=o(i);let h=document.createTextNode(s(i));a.appendChild(c),a.appendChild(h);let u=document.createElement("button");u.className="markdown-alert-delete",u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',u.title="Delete alert",u.contentEditable=!1,u.onclick=d=>{d.preventDefault(),d.stopPropagation();let p=t();if(typeof p=="number"){let m=r.state.tr.delete(p,p+n.nodeSize);r.view.dispatch(m)}},a.appendChild(u);let f=document.createElement("div");return f.className="markdown-alert-content",l.appendChild(a),l.appendChild(f),{dom:l,contentDOM:f,update:d=>{if(d.type!==n.type)return!1;if(d.attrs.type!==n.attrs.type){let p=d.attrs.type||"note";l.className=`markdown-alert markdown-alert-${p}`,l.setAttribute("data-alert-type",p),c.innerHTML=o(p),h.textContent=s(p)}return n=d,!0}}}},addCommands(){return{setGitHubAlert:n=>({commands:e})=>e.wrapIn(this.name,n),toggleGitHubAlert:n=>({commands:e})=>e.toggleWrap(this.name,n),insertGitHubAlert:(n="note",e="")=>({commands:t})=>t.insertContent({type:this.name,attrs:{type:n},content:e?[{type:"paragraph",content:[{type:"text",text:e}]}]:[{type:"paragraph",content:[{type:"text",text:"Alert content here..."}]}]})}},addKeyboardShortcuts(){return{"Mod-Shift-!":()=>this.editor.commands.insertGitHubAlert("note")}}}),w2=Fj});var Tx,k2,S2=S(()=>{Tx=class{constructor(e){this.editor=e}parseGitHubAlerts(e){let t=/^>\s*\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\s*\n?((?:^>.*\n?)*)/gm;return e.replace(t,(r,i,s)=>{let o=s.split(`
`).map(l=>l.replace(/^>\s?/,"")).filter(l=>l.trim()).join(`
`).trim();return`<div data-github-alert="true" data-alert-type="${i.toLowerCase()}" class="markdown-alert markdown-alert-${i.toLowerCase()}">
<div class="markdown-alert-content">
${o}
</div>
</div>`})}createAlertBlock(e,t){let r=this.getAlertTitle(e),i=this.getAlertIcon(e);return`<div data-github-alert="true" data-alert-type="${e}" class="markdown-alert markdown-alert-${e}">
  <div class="markdown-alert-title">
    <span class="markdown-alert-icon">${i}</span>
    ${r}
  </div>
  <div class="markdown-alert-content">
    ${t}
  </div>
</div>`}alertsToMarkdown(e){let t=/<div[^>]*data-github-alert="true"[^>]*data-alert-type="([^"]*)"[^>]*>.*?<div[^>]*class="markdown-alert-content"[^>]*>(.*?)<\/div>.*?<\/div>/gs;return e.replace(t,(r,i,s)=>{let o=s.replace(/<[^>]*>/g,"").trim().split(`
`).map(l=>l.trim()?`> ${l}`:">").join(`
`);return`> [!${i.toUpperCase()}]
${o}`})}getAlertTitle(e){return{note:"Note",tip:"Tip",important:"Important",warning:"Warning",caution:"Caution"}[e]||"Note"}getAlertIcon(e){return{note:"\u{1F4DD}",tip:"\u{1F4A1}",important:"\u2757",warning:"\u26A0\uFE0F",caution:"\u{1F6A8}"}[e]||"\u{1F4DD}"}processAlertHTML(e){let t=/<blockquote>\s*<p>\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\s*(.*?)<\/p>(.*?)<\/blockquote>/gs,r=/<blockquote>\s*<p>\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]<\/p>(.*?)<\/blockquote>/gs,i=e.replace(t,(s,o,l,a)=>{let c="";return l.trim()&&(c=`<p>${l.trim()}</p>`),a.trim()&&(c+=a.trim()),`<div data-github-alert="true" data-alert-type="${o.toLowerCase()}" class="markdown-alert markdown-alert-${o.toLowerCase()}">
<div class="markdown-alert-content">
${c}
</div>
</div>`});return i=i.replace(r,(s,o,l)=>{let a="";return l.trim()&&(a=l.trim()),`<div data-github-alert="true" data-alert-type="${o.toLowerCase()}" class="markdown-alert markdown-alert-${o.toLowerCase()}">
<div class="markdown-alert-content">
${a}
</div>
</div>`}),i}processMarkdown(e){let t=this.parseGitHubAlerts(e);return window.marked&&(t=window.marked.parse(t)),t}htmlToMarkdown(e){return this.alertsToMarkdown(e)}},k2=Tx});var Gj,v2,C2=S(()=>{re();re();Gj=le.create({name:"extraTypography",addOptions(){return{transforms:[],enabled:!0}},addInputRules(){if(!this.options.enabled)return[];let n=this.options.transforms;return!n||n.length===0?[]:n.filter(e=>e.enabled!==!1).map(e=>{let t=e.pattern.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(e.pattern===":/"){let r=new RegExp(`(?<!\\w)${t}$`);return Pe({find:r,replace:e.replacement})}else{let r=new RegExp(`${t}$`);return Pe({find:r,replace:e.replacement})}})}}),v2=Gj});var Kj,T2,P2=S(()=>{re();Kj=le.create({name:"markdownShortcuts",addOptions(){return{enabled:!0}},addInputRules(){return this.options.enabled?[new hr({find:/!\[([^\]]*)\]\(([^)]+?)\)$/,handler:({state:n,range:e,match:t})=>{let[r,i,s]=t,o=s,l="",a=s.match(/^(.*?)(?:\s+"([^"]*)")\s*$/);a&&(o=a[1],l=a[2]||"");let{tr:c}=n;if(r){c.delete(e.from,e.to);let h={src:o,alt:i||"","data-src":o};l&&(h.title=l);let u=n.schema.nodes.image.create(h);c.insert(e.from,u);let f=n.schema.text(" ");c.insert(e.from+u.nodeSize,f),setTimeout(()=>{if(window.EditorPro&&window.EditorPro.activeEditor){let d=window.EditorPro.activeEditor,p=d.editor.state.doc,m=e.from,g=p.nodeAt(m);g&&g.type.name==="image"&&d.resolveGravImagePath(o).then(O=>{if(O&&O!==o){let w=d.editor.state.tr.setNodeMarkup(m,null,{...g.attrs,src:O});d.editor.view.dispatch(w)}}).catch(O=>{})}},0)}return c}}),new hr({find:/(?<!\!)\[([^\]]+)\]\(([^)]+)\)$/,handler:({state:n,range:e,match:t})=>{let[r,i,s]=t,{tr:o}=n;if(r){o.delete(e.from,e.to);let l=n.schema.marks.link.create({href:s}),a=n.schema.text(i,[l]);o.insert(e.from,a)}return o}})]:[]}}),T2=Kj});var Jj,A2,M2=S(()=>{Lg();hu();Jj=Pu.extend({parseHTML(){return[{tag:"pre[data-code-content]",preserveWhitespace:"full",getAttrs:n=>{var t,r,i;return{language:n.getAttribute("data-language")||((i=(r=(t=n.querySelector("code"))==null?void 0:t.className)==null?void 0:r.match(/language-(\w+)/))==null?void 0:i[1])||null}},getContent:(n,e)=>{let t=n.getAttribute("data-code-content");if(t)try{let r=decodeURIComponent(escape(atob(t)));if(r)return A.from(e.text(r))}catch(r){console.error("Failed to decode code content:",r)}return A.empty}},{tag:"pre",preserveWhitespace:"full",getAttrs:n=>{var t,r,i;return{language:((i=(r=(t=n.querySelector("code"))==null?void 0:t.className)==null?void 0:r.match(/language-(\w+)/))==null?void 0:i[1])||null}}}]}}),A2=Jj});var eW,tW,nW,em,Q2=S(()=>{Er();vr();Cx();gs();fs();eW=yi.define([{tag:y.heading1,color:"#0088cc",fontWeight:"bold",fontSize:"1.4em"},{tag:y.heading2,color:"#0088cc",fontWeight:"bold",fontSize:"1.3em"},{tag:y.heading3,color:"#0088cc",fontWeight:"bold",fontSize:"1.2em"},{tag:y.heading4,color:"#0088cc",fontWeight:"bold",fontSize:"1.1em"},{tag:y.heading5,color:"#0088cc",fontWeight:"bold"},{tag:y.heading6,color:"#0088cc",fontWeight:"bold"},{tag:y.strong,fontWeight:"bold",color:"#18191a"},{tag:y.emphasis,fontStyle:"italic",color:"#18191a"},{tag:y.strikethrough,textDecoration:"line-through",color:"#747573"},{tag:y.link,color:"#5b5fff"},{tag:y.url,color:"#5b5fff"},{tag:y.monospace,color:"#b82ee5"},{tag:y.quote,color:"#747573",fontStyle:"italic"},{tag:y.list,color:"#2cbb0f"},{tag:y.contentSeparator,color:"#747573"},{tag:y.processingInstruction,color:"#d97e00"},{tag:y.comment,color:"#747573"},{tag:y.meta,color:"#0072ab"}]),tW=yi.define([{tag:y.heading1,color:"#61afef",fontWeight:"bold",fontSize:"1.4em"},{tag:y.heading2,color:"#61afef",fontWeight:"bold",fontSize:"1.3em"},{tag:y.heading3,color:"#61afef",fontWeight:"bold",fontSize:"1.2em"},{tag:y.heading4,color:"#61afef",fontWeight:"bold",fontSize:"1.1em"},{tag:y.heading5,color:"#61afef",fontWeight:"bold"},{tag:y.heading6,color:"#61afef",fontWeight:"bold"},{tag:y.strong,fontWeight:"bold",color:"#e06c75"},{tag:y.emphasis,fontStyle:"italic",color:"#abb2bf"},{tag:y.strikethrough,textDecoration:"line-through",color:"#5c6370"},{tag:y.link,color:"#56b6c2"},{tag:y.url,color:"#56b6c2"},{tag:y.monospace,color:"#98c379"},{tag:y.quote,color:"#bcc3cf",fontStyle:"italic"},{tag:y.list,color:"#c678dd"},{tag:y.contentSeparator,color:"#5c6370"},{tag:y.processingInstruction,color:"#d19a66"},{tag:y.comment,color:"#5c6370"},{tag:y.meta,color:"#e5c07b"}]),nW=B.theme({"&":{backgroundColor:"#282c34",color:"#abb2bf"},".cm-content":{caretColor:"#528bff"},".cm-cursor":{borderLeftColor:"#528bff"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground":{backgroundColor:"#3e4451"},".cm-activeLine":{backgroundColor:"#2c313a"},".cm-gutters":{backgroundColor:"#282c34",color:"#5c6370",border:"none"},".cm-activeLineGutter":{backgroundColor:"#2c313a"}},{dark:!0}),em=class{constructor(e){this.editorPro=e,this.overlay=null,this.codeMirrorView=null,this.currentMarkdown="",this.isDirty=!1}async enter(){var c,h;let e=this.editorPro.editorToMarkdown();this.currentMarkdown=this.editorPro.preserver.restoreContent(e,this.editorPro.preservedBlocks),this.overlay=document.createElement("div"),this.overlay.className="raw-markdown-overlay";let t=document.documentElement.classList.contains("dark-theme")||document.body.classList.contains("dark-theme")||((h=(c=this.editorPro.container)==null?void 0:c.closest(".editor-pro-wrapper"))==null?void 0:h.classList.contains("theme-dark"));t&&this.overlay.classList.add("theme-dark");let r=document.createElement("div");r.className="raw-markdown-header",r.innerHTML=`
            <div class="raw-markdown-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 7V4h16v3"/>
                    <path d="M9 20h6"/>
                    <path d="M12 4v16"/>
                </svg>
                <span>Markdown Mode</span>
            </div>
            <div class="raw-markdown-actions">
                <button type="button" class="raw-markdown-btn raw-markdown-btn-cancel">Cancel</button>
                <button type="button" class="raw-markdown-btn raw-markdown-btn-apply">Apply Changes</button>
            </div>
        `;let i=document.createElement("div");i.className="raw-markdown-editor";let s=document.createElement("div");s.className="raw-markdown-validation-error",s.style.display="none",this.overlay.appendChild(r),this.overlay.appendChild(s),this.overlay.appendChild(i),document.body.appendChild(this.overlay);let o=[kh(),B.lineWrapping,B.updateListener.of(u=>{u.docChanged&&(this.isDirty=!0)}),B.theme({"&":{height:"100%",fontSize:"14px",fontFamily:'"SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace'},".cm-content":{padding:"20px",caretColor:t?"#fff":"#000"},".cm-focused":{outline:"none"},".cm-scroller":{overflow:"auto"}}),B.domEventHandlers({keydown:(u,f)=>u.key==="Escape"?(u.preventDefault(),this.cancel(),!0):(u.metaKey||u.ctrlKey)&&u.key==="s"?(u.preventDefault(),this.exit(),!0):!1})];t?(o.push(nW),o.push(ch(tW))):o.push(ch(eW));let l=xe.create({doc:this.currentMarkdown,extensions:o});this.codeMirrorView=new B({state:l,parent:i}),this.codeMirrorView.focus();let a=this.editorPro.textarea.closest(".editor-pro-wrapper");a&&(a.style.display="none"),r.querySelector(".raw-markdown-btn-cancel").onclick=()=>this.cancel(),r.querySelector(".raw-markdown-btn-apply").onclick=()=>this.exit(),this.isDirty=!1}validateMarkdown(e){try{let{processed:t,blocks:r}=this.editorPro.preserver.preserveContent(e),i=this.editorPro.basicMarkdownToHtml(t);return i==null?{valid:!1,error:"Failed to parse markdown content"}:{valid:!0,html:i,blocks:r,processed:t}}catch(t){return{valid:!1,error:t.message}}}showValidationError(e){let t=this.overlay.querySelector(".raw-markdown-validation-error");t&&(t.textContent=`Warning: ${e}`,t.style.display="block",setTimeout(()=>{t.style.display="none"},5e3))}cancel(){var r;if(this.isDirty&&!confirm("You have unsaved changes. Are you sure you want to cancel?"))return!1;this.destroy();let e=this.editorPro.textarea.closest(".editor-pro-wrapper");e&&(e.style.display="block"),this.editorPro.isMarkdownMode=!1;let t=(r=this.editorPro.toolbar)==null?void 0:r.querySelector('[data-toolbar-item="markdown-toggle"]');return t&&t.classList.remove("is-active"),!0}async exit(){let e=this.codeMirrorView.state.doc.toString(),t=()=>{var o;this.destroy();let i=this.editorPro.textarea.closest(".editor-pro-wrapper");i&&(i.style.display="block"),this.editorPro.isMarkdownMode=!1;let s=(o=this.editorPro.toolbar)==null?void 0:o.querySelector('[data-toolbar-item="markdown-toggle"]');s&&s.classList.remove("is-active")};if(e===this.currentMarkdown)return t(),!0;let r=this.validateMarkdown(e);if(!r.valid&&(this.showValidationError(r.error),!confirm(`There may be an issue with the markdown:

${r.error}

Do you want to apply the changes anyway?`)))return!1;try{let i=this.preprocessBlockquotes(e),{processed:s,blocks:o}=this.editorPro.preserver.preserveContent(i);this.editorPro.preservedBlocks=o;let l=this.editorPro.basicMarkdownToHtml(s);return this.editorPro.editor.commands.setContent(l),this.editorPro.updateTextarea(),t(),this.editorPro.editor.commands.focus(),!0}catch(i){return console.error("Error applying markdown changes:",i),this.showValidationError(`Failed to apply changes: ${i.message}. You can try editing the markdown or click Cancel to discard changes.`),!1}}preprocessBlockquotes(e){let t=e.split(`
`),r=[];for(let i=0;i<t.length;i++){let s=t[i],o=t[i+1];/^>\s*/.test(s)&&o&&/^>\s*/.test(o)&&(s.endsWith("  ")||(s=s+"  ")),r.push(s)}return r.join(`
`)}destroy(){this.codeMirrorView&&(this.codeMirrorView.destroy(),this.codeMirrorView=null),this.overlay&&(this.overlay.remove(),this.overlay=null),this.isDirty=!1}}});var rW=B2(()=>{re();bv();xv();Bv();Xv();xC();SC();CC();PC();_T();lM();cM();uM();AM();CR();b2();x2();S2();C2();P2();M2();Q2();bn();ou();ge.setOptions({gfm:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1});window.TiptapCore={Editor:yu,Node:ne,Mark:gt,Extension:le};window.TiptapStarterKit={StarterKit:yv};window.TiptapUnderline={Underline:wv};window.TiptapLink={Link:_v};window.TiptapImage={Image:Vv};window.TiptapTable={Table:wC};window.TiptapTableRow={TableRow:kC};window.TiptapTableCell={TableCell:vC};window.TiptapTableHeader={TableHeader:TC};window.TiptapBubbleMenu={BubbleMenu:IT};window.TiptapDragHandle={DragHandle:oM};window.TiptapCharacterCount={CharacterCount:aM};window.TiptapTypography={Typography:hM};window.TiptapRawBlock={RawBlock:vR};window.TiptapShortcodeBlock={ShortcodeBlock:y2};window.TiptapGitHubAlert={GitHubAlert:w2};window.TiptapMarkdownParser={MarkdownParser:k2};window.TiptapExtraTypography={ExtraTypography:v2};window.TiptapMarkdownShortcuts={MarkdownShortcuts:T2};window.TiptapCustomCodeBlock={CustomCodeBlock:A2};window.TiptapPM={Plugin:F,PluginKey:ee,NodeSelection:z};window.TiptapPMView={Decoration:rt,DecorationSet:Ie};window.marked=ge;window.RawMarkdownMode=em});return rW();})();
//# sourceMappingURL=tiptap-bundle.js.map
