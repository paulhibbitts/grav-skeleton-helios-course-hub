enabled: true
js_inline: "(function() {\n    var SCROLL_KEY = 'embedly-scroll-pos';\n    var theme = localStorage.getItem('helios-theme') || 'system';\n    var isDark = theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);\n    var cardTheme = isDark ? 'dark' : 'light';\n\n    // Restore scroll position after a theme-triggered reload\n    var savedPos = sessionStorage.getItem(SCROLL_KEY);\n    if (savedPos !== null) {\n        sessionStorage.removeItem(SCROLL_KEY);\n        window.addEventListener('load', function() {\n            window.scrollTo(0, parseInt(savedPos, 10));\n        });\n    }\n\n    var embeds = document.querySelectorAll('.embedly-card');\n    for (var i = 0; i < embeds.length; i++) {\n        embeds[i].setAttribute('data-card-theme', cardTheme);\n    }\n\n    // Watch for dark class changes on <html> via MutationObserver,\n    // since the Helios theme toggle buttons directly manipulate the\n    // class list without dispatching the helios-theme-change event.\n    // Only start observing after page has fully loaded, so we skip\n    // the initial class mutations during page setup and only react\n    // to user-initiated theme toggles.\n    if (embeds.length > 0) {\n        window.addEventListener('load', function() {\n            var observer = new MutationObserver(function() {\n                observer.disconnect();\n                sessionStorage.setItem(SCROLL_KEY, window.scrollY);\n                window.location.reload();\n            });\n            observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });\n        });\n    }\n})();\n"
js_assets:
  -
    url: 'https://cdn.embedly.com/widgets/platform.js'
