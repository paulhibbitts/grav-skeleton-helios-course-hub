{#
 # Helios Theme Variables Partial
 # Contains all shared CSS custom properties and mappings
 # Include this in all standalone templates
 #}

{# Theme configuration #}
{% set theme_config = config.themes.helios %}
{% set appearance = theme_config.appearance %}
{% set colors = theme_config.colors %}
{% set nav_config = theme_config.navigation %}
{% set fonts = theme_config.fonts %}

{# Font family mapping #}
{% set font_map = {
    'inter': "Inter, sans-serif",
    'open-sans': "OpenSans, sans-serif",
    'geom': "Geom, sans-serif",
    'nunito-sans': "NunitoSans, sans-serif",
    'ubuntu-sans': "UbuntuSans, sans-serif",
    'work-sans': "WorkSans, sans-serif",
    'public-sans': "PublicSans, sans-serif",
    'quicksand': "Quicksand, sans-serif",
    'jetbrains-mono': "JetBrainsMono, monospace",
    'fira-code': "FiraCode, monospace",
    'intel-one-mono': "IntelOneMono, monospace",
    'atkinson-hyperlegible-mono': "AtkinsonHyperlegibleMono, monospace",
    'inconsolata': "Inconsolata, monospace"
} %}
{% set body_font = font_map[fonts.body] ?: font_map['inter'] %}
{% set code_font = font_map[fonts.code] ?: font_map['jetbrains-mono'] %}

{# Text scale based on body size: small (-10%), medium (default), large (+10%) #}
{% set body_size = fonts.body_size ?: 'medium' %}
{% set text_scales = {
    'small':  {'xs': '0.675rem', 'sm': '0.7875rem', 'base': '0.9rem', 'lg': '1.0125rem', 'xl': '1.125rem', '2xl': '1.35rem'},
    'medium': {'xs': '0.75rem', 'sm': '0.875rem', 'base': '1rem', 'lg': '1.125rem', 'xl': '1.25rem', '2xl': '1.5rem'},
    'large':  {'xs': '0.825rem', 'sm': '0.9625rem', 'base': '1.1rem', 'lg': '1.2375rem', 'xl': '1.375rem', '2xl': '1.65rem'}
} %}
{% set text_scale = text_scales[body_size] ?: text_scales['medium'] %}

{# Code size maps to text scale variables #}
{% set code_size = fonts.code_size ?: 'medium' %}
{% set code_sizes = {
    'small': 'var(--text-xs)',
    'medium': 'var(--text-sm)',
    'large': 'var(--text-base)'
} %}
{% set code_size_var = code_sizes[code_size] ?: code_sizes['medium'] %}

{# Gray scale presets (Tailwind color palettes) #}
{% set gray_presets = {
    'zinc': {
        '50': '#fafafa', '100': '#f4f4f5', '200': '#e4e4e7', '300': '#d4d4d8',
        '400': '#a1a1aa', '500': '#71717a', '600': '#52525b', '700': '#3f3f46',
        '800': '#27272a', '900': '#18181b', '950': '#09090b'
    },
    'slate': {
        '50': '#f8fafc', '100': '#f1f5f9', '200': '#e2e8f0', '300': '#cbd5e1',
        '400': '#94a3b8', '500': '#64748b', '600': '#475569', '700': '#334155',
        '800': '#1e293b', '900': '#0f172a', '950': '#020617'
    },
    'stone': {
        '50': '#fafaf9', '100': '#f5f5f4', '200': '#e7e5e4', '300': '#d6d3d1',
        '400': '#a8a29e', '500': '#78716c', '600': '#57534e', '700': '#44403c',
        '800': '#292524', '900': '#1c1917', '950': '#0c0a09'
    },
    'neutral': {
        '50': '#fafafa', '100': '#f5f5f5', '200': '#e5e5e5', '300': '#d4d4d4',
        '400': '#a3a3a3', '500': '#737373', '600': '#525252', '700': '#404040',
        '800': '#262626', '900': '#171717', '950': '#0a0a0a'
    },
    'gray': {
        '50': '#f9fafb', '100': '#f3f4f6', '200': '#e5e7eb', '300': '#d1d5db',
        '400': '#9ca3af', '500': '#6b7280', '600': '#4b5563', '700': '#374151',
        '800': '#1f2937', '900': '#111827', '950': '#030712'
    }
} %}
{% set gray_preset = colors.gray_preset|default('zinc') %}
{% set gray = gray_presets[gray_preset]|default(gray_presets.zinc) %}

{# CSS Variables Style Block #}
<style>
    :root {
        {# Light mode color variables #}
        --helios-color-primary: {{ colors.primary }};
        --helios-color-primary-hover: {{ colors.primary_hover ?: colors.primary }};
        --helios-color-primary-text: {{ colors.primary_text ?: '#ffffff' }};
        --helios-color-accent: {{ colors.accent ?: colors.primary }};

        {# Dark mode color variables #}
        --helios-color-primary-dark: {{ colors.primary_dark ?: colors.primary }};
        --helios-color-primary-dark-hover: {{ colors.primary_dark_hover ?: colors.primary_dark ?: colors.primary }};
        --helios-color-primary-dark-text: {{ colors.primary_dark_text ?: '#111827' }};
        --helios-color-accent-dark: {{ colors.accent_dark ?: colors.accent ?: colors.primary }};

        {# Layout variables (only for docs layout) #}
        {% if include_layout_vars|default(false) %}
        --helios-sidebar-width: {{ nav_config.sidebar_width ?: 280 }}px;
        --helios-toc-width: {{ nav_config.toc_width ?: 240 }}px;
        --helios-content-width: {{ nav_config.content_width ?: 1024 }}px;
        {% endif %}

        {# Font variables #}
        --helios-font-body: {{ body_font }};
        --helios-font-code: {{ code_font }};
        --helios-code-size: {{ code_size_var }};

        {# Text scale variables #}
        --text-xs: {{ text_scale.xs }};
        --text-sm: {{ text_scale.sm }};
        --text-base: {{ text_scale.base }};
        --text-lg: {{ text_scale.lg }};
        --text-xl: {{ text_scale.xl }};
        --text-2xl: {{ text_scale['2xl'] }};

        {# Gray scale variables #}
        {% if gray_preset == 'custom' and colors.gray_custom %}
        {{ colors.gray_custom|raw }}
        {% else %}
        --color-helios-gray-50: {{ gray['50'] }};
        --color-helios-gray-100: {{ gray['100'] }};
        --color-helios-gray-200: {{ gray['200'] }};
        --color-helios-gray-300: {{ gray['300'] }};
        --color-helios-gray-400: {{ gray['400'] }};
        --color-helios-gray-500: {{ gray['500'] }};
        --color-helios-gray-600: {{ gray['600'] }};
        --color-helios-gray-700: {{ gray['700'] }};
        --color-helios-gray-800: {{ gray['800'] }};
        --color-helios-gray-900: {{ gray['900'] }};
        --color-helios-gray-950: {{ gray['950'] }};
        {% endif %}
    }
    body {
        font-family: var(--helios-font-body);
    }
    code, pre, kbd, samp {
        font-family: var(--helios-font-code);
    }
</style>
