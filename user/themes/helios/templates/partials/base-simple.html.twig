{#
 # Base Simple Template
 # A simplified base template for standalone pages (default, contact, etc.)
 # without sidebar navigation
 #}
{% set theme_config = config.themes.helios %}
{% set appearance = theme_config.appearance %}

<!DOCTYPE html>
<html lang="{{ grav.language.getActive ?: 'en' }}"
      x-data="{
          searchOpen: false,
          theme: localStorage.getItem('helios-theme') || '{{ appearance.theme }}'
      }"
      :class="{ 'dark': theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches) }">
<head>
    <script>
        // Prevent FOUC: Apply dark mode immediately before page renders
        (function() {
            var theme = localStorage.getItem('helios-theme') || '{{ appearance.theme }}';
            var isDark = theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);
            if (isDark) document.documentElement.classList.add('dark');
        })();
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>

    {% if page.description %}
    <meta name="description" content="{{ page.description }}">
    {% endif %}

    {% if page.robots %}
    <meta name="robots" content="{{ page.robots }}">
    {% endif %}

    {# Favicon #}
    {% if theme_config.custom_favicon %}
        {% set favicon = theme_config.custom_favicon|first %}
        <link rel="icon" href="{{ url('user://assets/helios/' ~ favicon.name) }}">
    {% else %}
        <link rel="icon" type="image/svg+xml" href="{{ url('theme://images/favicon.svg') }}">
    {% endif %}

    {# CSS Variables for theming #}
    {% include 'partials/variables.html.twig' %}

    {{ assets.css()|raw }}
</head>

{% set shortcut_key = theme_config.search.shortcut_key|default('k') %}
<body class="min-h-screen bg-white dark:bg-gray-950/93 text-gray-900 dark:text-gray-100 {{ theme_config.body_classes }}"
      @keydown.window="if ((event.metaKey || event.ctrlKey) && event.key.toLowerCase() === '{{ shortcut_key }}') { event.preventDefault(); searchOpen = true; }"
      @keydown.window.escape="searchOpen = false">

    {# Skip to content link for accessibility #}
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-white focus:rounded-lg">
        Skip to content
    </a>

    {# Search modal #}
    {% if theme_config.search.enabled %}
        {% if theme_config.search.provider == 'yetisearch-pro' %}
            {% include 'partials/yetisearch-pro/modal.html.twig' %}
        {% else %}
            {% include 'partials/search-modal.html.twig' %}
        {% endif %}
    {% endif %}

    {# Header #}
    {% include 'partials/header-simple.html.twig' %}

    {# Main content #}
    <main id="main-content" class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
        {% block content %}{% endblock %}
    </main>

    {# Footer #}
    {% include 'partials/footer.html.twig' %}

    {{ assets.js('bottom')|raw }}
</body>
</html>
